<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#Â®ï¸Jun'>
  <meta charset="utf-8">
  <!-- SEOç›¸å…³ -->
  
    
      <meta name="robots" content="noindex,follow">
    
  
  <!-- æ¸²æŸ“ä¼˜åŒ– -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- é¡µé¢å…ƒæ•°æ® -->
  
    <title>åˆ†ç±»ï¼šJavaæŠ€æœ¯æ ˆ - ç¢ç¢å¿µ</title>
  
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  
  <link rel="shortcut icon" type='image/x-icon' href="https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/favicon/favicon.ico">
  

  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
    <!-- ba -->
    <script>
    var _hmt = _hmt || [];
    (function() {
	  setTimeout(function() { 
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?0b970030787ceb090a4dc46259415a4c";
		hm.defer=true;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
	  }, 5000);
    })();
    </script>
  
</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h'>
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
          
            JUNE <b><sup style='color:#3AA757'>Â®ï¸Jun</sup></b>
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h'>
          
          
          
            
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>ä¸»é¡µ
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>åˆ†ç±»
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>æ ‡ç­¾
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>å½’æ¡£
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/books/
                  
                  
                  
                    id="books"
                  >
                  <i class='fas fa-book fa-fw'></i>ä¹¦å•
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/aim/
                  
                  
                  
                    id="aim"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>å°ç›®æ ‡
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>ä¸»é¡µ
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>åˆ†ç±»
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>æ ‡ç­¾
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>å½’æ¡£
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/books/
                  
                  
                  
                    id="books"
                  >
                  <i class='fas fa-book fa-fw'></i>ä¹¦å•
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/aim/
                  
                  
                  
                    id="aim"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>å°ç›®æ ‡
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

<script>setLoadingBarProgress(40);</script>



  <div class="l_body nocover">
    <div class='body-wrapper'>
      


<div class='l_main'>
  
    
      
  <section class="post-list ">
    
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
    
    
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/07/14/Spring-%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE/">
      Spring-ä¾èµ–æŸ¥æ‰¾
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Spring</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´7æœˆ14æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ä¾èµ–æŸ¥æ‰¾"><a href="#ä¾èµ–æŸ¥æ‰¾" class="headerlink" title="ä¾èµ–æŸ¥æ‰¾"></a>ä¾èµ–æŸ¥æ‰¾</h2><h3 id="å†å²"><a href="#å†å²" class="headerlink" title="å†å²"></a>å†å²</h3><h3 id="å•ä¸€ç±»å‹ä¾èµ–æŸ¥æ‰¾"><a href="#å•ä¸€ç±»å‹ä¾èµ–æŸ¥æ‰¾" class="headerlink" title="å•ä¸€ç±»å‹ä¾èµ–æŸ¥æ‰¾"></a>å•ä¸€ç±»å‹ä¾èµ–æŸ¥æ‰¾</h3><p>JNDI - javax.naming.Context#lookup*(javax.naming.Name);<br>JavaBeans - java.beans.beancontext.BeanContext</p>
<p>BeanFactory:</p>
<p> æ ¹æ®beanåç§°æŸ¥æ‰¾<br> getBean(String);<br> getBean(String,Objectâ€¦) //è¦†ç›–é»˜è®¤å‚æ•°</p>
<p> æ ¹æ®Beanç±»å‹æŸ¥æ‰¾<br> beanå®æ—¶æŸ¥æ‰¾<br>   getBean(Class)<br>   getBean(Class,Objectâ€¦)<br> beanå»¶æ—¶æŸ¥æ‰¾<br>   getBeanProvider(Class);<br>   getBeanProvider(String,Class); //è¦†ç›–é»˜è®¤å‚æ•°</p>
<p>æ ¹æ®Beanåç§°å’Œç±»å‹æŸ¥æ‰¾<br>  getBean(String,Class);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ &#123;<span class="doctag">@link</span> org.springframework.beans.factory.ObjectProvider&#125; è¿›è¡Œä¾èµ–æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectProviderDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">        applicationContext.register(ObjectProviderDemo<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        applicationContext.refresh();</span><br><span class="line">        lookupByObjectProvider(applicationContext);</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloWorld</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello World"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lookupByObjectProvider</span><span class="params">(AnnotationConfigApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        ObjectProvider&lt;String&gt; objectProvider = applicationContext.getBeanProvider(String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(objectProvider.getObject());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é›†åˆç±»å‹ä¾èµ–æŸ¥æ‰¾"><a href="#é›†åˆç±»å‹ä¾èµ–æŸ¥æ‰¾" class="headerlink" title="é›†åˆç±»å‹ä¾èµ–æŸ¥æ‰¾"></a>é›†åˆç±»å‹ä¾èµ–æŸ¥æ‰¾</h3><p>java.beans.beancontext.BeanContext</p>
<h4 id="ListableBeanFactory"><a href="#ListableBeanFactory" class="headerlink" title="ListableBeanFactory"></a>ListableBeanFactory</h4><p>æ˜¯é’ˆå¯¹æŸä¸ªç±»å‹å»æŸ¥æ‰¾ä¸€ä¸ªé›†åˆåˆ—è¡¨ã€‚<br>ä¸€ç§æ˜¯æŸ¥è¯¢beançš„åç§°ï¼Œ ä¸€ç§æ˜¯æŸ¥è¯¢beançš„å®ä¾‹ã€‚<br>ä¸€èˆ¬æƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨beançš„åç§°æ¥åˆ¤æ–­å½“å‰beanæ˜¯å¦å­˜åœ¨ï¼Œæˆ–è€…è¿›ä¸€æ­¥åˆ¤æ–­BeanDefinitionæ˜¯å¦å­˜åœ¨ã€‚<br>è€ŒæŸ¥è¯¢beanå®ä¾‹ä¼šææ—©åˆå§‹åŒ–beanå®ä¾‹ï¼Œé€ æˆåˆå§‹åŒ–ä¸å®Œæ•´ã€‚</p>
<ul>
<li>æ ¹æ®Beanç±»å‹æŸ¥æ‰¾<ul>
<li>è·å–åŒç±»å‹Beanåç§°åˆ—è¡¨<ul>
<li>getBeanNamesForType(Class)</li>
<li>getBeanNamesForType(ResolvableType)</li>
</ul>
</li>
<li>è·å–ç—›ç±»å‹Beanå®ä¾‹åˆ—è¡¨<ul>
<li>getBeansOfType(Class)ä»¥åŠé‡è½½æ–¹æ³•</li>
</ul>
</li>
</ul>
</li>
<li>æ ¹æ®æ³¨è§£ç±»å‹æŸ¥æ‰¾<ul>
<li>è·å–æ ‡æ³¨ç±»å‹Bean åç§°åˆ—è¡¨<ul>
<li>getBeanNamesForAnnotation(Class&lt;? extends Annotation&gt;);</li>
</ul>
</li>
<li>è·å–æ ‡æ³¨ç±»å‹Beanå®ä¾‹åˆ—è¡¨<ul>
<li>getBeansWithAnnotation(Class&lt;? extends Annotation&gt;);</li>
</ul>
</li>
<li>è·å–æŒ‡å®šåç§°+æ ‡æ³¨ç±»å‹å®ä¾‹<ul>
<li>findAnnotationOnBean(String,Class&lt;? extends Annotation&gt;);</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="å±‚æ¬¡æ€§ä¾èµ–æŸ¥æ‰¾"><a href="#å±‚æ¬¡æ€§ä¾èµ–æŸ¥æ‰¾" class="headerlink" title="å±‚æ¬¡æ€§ä¾èµ–æŸ¥æ‰¾"></a>å±‚æ¬¡æ€§ä¾èµ–æŸ¥æ‰¾</h3><p>java.beans.beancontext.BeanContext</p>
<h4 id="HierachicalBeanFactory"><a href="#HierachicalBeanFactory" class="headerlink" title="HierachicalBeanFactory"></a>HierachicalBeanFactory</h4><p><img src="/2020/07/14/Spring-%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE/hierarchical_class.jpg" alt></p>
<ul>
<li>åŒäº² BeanFactory: getParentBeanFactory();<ul>
<li>å±‚æ¬¡æŸ¥æ‰¾</li>
<li>æ ¹æ®Beanåç§°æŸ¥æ‰¾<ul>
<li>åŸºäºcontainsLocalBeanæ–¹æ³•å®ç°   </li>
</ul>
</li>
<li>æ ¹æ®Beanç±»å‹æŸ¥æ‰¾å®ä¾‹åˆ—è¡¨<ul>
<li>å•ä¸€ç±»å‹ï¼šBeanFactoryUtils#beanOfType</li>
<li>é›†åˆç±»å‹ï¼šBeanFactoryUtils#beansOfTypeIncludingAncestors</li>
</ul>
</li>
<li>æ ¹æ®Javaæ³¨è§£æŸ¥æ‰¾åç§°åˆ—è¡¨<ul>
<li>BeanFactoryUtils#beanNamesForTypeIncludingAncestors</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HierarchicalDependencyLookupDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line"></span><br><span class="line">        ConfigurableListableBeanFactory beanFactory = applicationContext.getBeanFactory();</span><br><span class="line"></span><br><span class="line">        HierarchicalBeanFactory parentBeanFactory = createParentBeanFactory();</span><br><span class="line"></span><br><span class="line">        beanFactory.setParentBeanFactory(parentBeanFactory);</span><br><span class="line"></span><br><span class="line">        displayContainsLocalBean(beanFactory, <span class="string">"user"</span>); <span class="comment">//false</span></span><br><span class="line">        displayContainsLocalBean(parentBeanFactory, <span class="string">"user"</span>); <span class="comment">//true</span></span><br><span class="line">        </span><br><span class="line">        displayContainsBean(beanFactory, <span class="string">"user"</span>); <span class="comment">//true</span></span><br><span class="line">        displayContainsBean(parentBeanFactory,<span class="string">"user"</span>);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">        applicationContext.refresh();</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">displayContainsBean</span><span class="params">(HierarchicalBeanFactory beanFactory, String beanName)</span> </span>&#123;</span><br><span class="line">        System.out.printf(<span class="string">"å½“å‰ BeanFactory [%s] æ˜¯å¦åŒ…å«  bean[name:%s]  %s\n"</span>, beanFactory, beanName, containsBean(beanFactory,beanName));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">containsBean</span><span class="params">(HierarchicalBeanFactory beanFactory, String beanName)</span> </span>&#123;</span><br><span class="line">        BeanFactory parentBeanFactory = beanFactory.getParentBeanFactory();</span><br><span class="line">        <span class="keyword">if</span> (parentBeanFactory <span class="keyword">instanceof</span> HierarchicalBeanFactory) &#123;</span><br><span class="line">            HierarchicalBeanFactory parentHierarchicalBeanFactory = HierarchicalBeanFactory<span class="class">.<span class="keyword">class</span>.<span class="title">cast</span>(<span class="title">parentBeanFactory</span>)</span>;</span><br><span class="line">            <span class="keyword">if</span> (containsBean(parentHierarchicalBeanFactory, beanName)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> beanFactory.containsLocalBean(beanName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">displayContainsLocalBean</span><span class="params">(HierarchicalBeanFactory parentBeanFactory, String user)</span> </span>&#123;</span><br><span class="line">        System.out.printf(<span class="string">"å½“å‰ BeanFactory [%s] æ˜¯å¦åŒ…å« Local bean[name:%s]  %s\n"</span>, parentBeanFactory, user, parentBeanFactory.containsLocalBean(user));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> HierarchicalBeanFactory <span class="title">createParentBeanFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DefaultListableBeanFactory beanFactory = <span class="keyword">new</span> DefaultListableBeanFactory();</span><br><span class="line">        XmlBeanDefinitionReader reader = <span class="keyword">new</span> XmlBeanDefinitionReader(beanFactory);</span><br><span class="line">        String location = <span class="string">"classpath:applicationContext-lookup.xml"</span>;</span><br><span class="line">        reader.loadBeanDefinitions(location);</span><br><span class="line">        <span class="keyword">return</span> beanFactory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="å»¶è¿Ÿä¾èµ–æŸ¥æ‰¾"><a href="#å»¶è¿Ÿä¾èµ–æŸ¥æ‰¾" class="headerlink" title="å»¶è¿Ÿä¾èµ–æŸ¥æ‰¾"></a>å»¶è¿Ÿä¾èµ–æŸ¥æ‰¾</h3><p><img src="/2020/07/14/Spring-%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE/ObjectFactory_Class.jpg" alt></p>
<ul>
<li>Beanå»¶è¿Ÿä¾èµ–æŸ¥æ‰¾æ¥å£<ul>
<li>org.springframework.beans.factory.ObjectFactory#getObject();</li>
<li>org.springframework.beans.factory.ObjectProvider<ul>
<li>Spring5å¯¹äºJava8çš„ç‰¹æ€§æ‰©å±•</li>
<li>å‡½æ•°å¼æ¥å£<ul>
<li>getIfAvailable(Supplier)</li>
<li>ifAvailable(Consumer)</li>
</ul>
</li>
<li>Streamæ‰©å±• - stream() </li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ &#123;<span class="doctag">@link</span> org.springframework.beans.factory.ObjectProvider&#125; è¿›è¡Œä¾èµ–æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectProviderDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">        applicationContext.register(ObjectProviderDemo<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        applicationContext.refresh();</span><br><span class="line"></span><br><span class="line">        lookupByObjectProvider(applicationContext);</span><br><span class="line">        lookupIfAvailable(applicationContext);</span><br><span class="line">        lookupByStream(applicationContext);</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lookupByStream</span><span class="params">(AnnotationConfigApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        ObjectProvider&lt;String&gt; objectProvider = applicationContext.getBeanProvider(String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">//        Iterator&lt;String&gt; iterator = objectProvider.iterator();</span></span><br><span class="line"><span class="comment">//        while(iterator.hasNext())&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(iterator.next());</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        objectProvider.stream().forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lookupIfAvailable</span><span class="params">(AnnotationConfigApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        ObjectProvider&lt;User&gt; userObjectProvider = applicationContext.getBeanProvider(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        User user = userObjectProvider.getIfAvailable(User::<span class="keyword">new</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloWorld</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello World"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">message</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"message"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lookupByObjectProvider</span><span class="params">(AnnotationConfigApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        ObjectProvider&lt;String&gt; objectProvider = applicationContext.getBeanProvider(String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(objectProvider.getObject());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="å®‰å…¨ä¾èµ–æŸ¥æ‰¾"><a href="#å®‰å…¨ä¾èµ–æŸ¥æ‰¾" class="headerlink" title="å®‰å…¨ä¾èµ–æŸ¥æ‰¾"></a>å®‰å…¨ä¾èµ–æŸ¥æ‰¾</h3><p>ä¾èµ–æŸ¥æ‰¾å®‰å…¨æ€§å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th>ä¾èµ–æŸ¥æ‰¾ç±»å‹</th>
<th>ä»£è¡¨å®ç°</th>
<th>æ˜¯å¦å®‰å…¨</th>
</tr>
</thead>
<tbody><tr>
<td>å•ä¸€ç±»å‹æŸ¥æ‰¾</td>
<td>BeanFactory#getBean</td>
<td>å¦</td>
</tr>
<tr>
<td></td>
<td>ObjectFactory#getObject</td>
<td>å¦</td>
</tr>
<tr>
<td></td>
<td>ObjectProvider#getIfAvailable</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>é›†åˆç±»å‹æŸ¥æ‰¾</td>
<td>ListableBeanFactory#getBeansOfType</td>
<td>æ˜¯</td>
</tr>
<tr>
<td></td>
<td>ObjectProvider.stream</td>
<td>æ˜¯</td>
</tr>
</tbody></table>
<h3 id="å†…å»ºå¯æŸ¥æ‰¾çš„ä¾èµ–"><a href="#å†…å»ºå¯æŸ¥æ‰¾çš„ä¾èµ–" class="headerlink" title="å†…å»ºå¯æŸ¥æ‰¾çš„ä¾èµ–"></a>å†…å»ºå¯æŸ¥æ‰¾çš„ä¾èµ–</h3><h3 id="ä¾èµ–æŸ¥æ‰¾ä¸­çš„å¼‚å¸¸"><a href="#ä¾èµ–æŸ¥æ‰¾ä¸­çš„å¼‚å¸¸" class="headerlink" title="ä¾èµ–æŸ¥æ‰¾ä¸­çš„å¼‚å¸¸"></a>ä¾èµ–æŸ¥æ‰¾ä¸­çš„å¼‚å¸¸</h3><h3 id="åŠé€€"><a href="#åŠé€€" class="headerlink" title="åŠé€€"></a>åŠé€€</h3>
      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/07/14/Spring-Bean/">
      Spring-Bean
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Spring</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´7æœˆ14æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="BeanDefinition"><a href="#BeanDefinition" class="headerlink" title="BeanDefinition"></a>BeanDefinition</h2><blockquote>
<p>A BeanDefinition describes a bean instance, which has property values,<br>Constructor arguments values, and further information supplied by concrete implementations.<br>This is just a minimal interface: The main intention is to allow a BeanFactoryPostProcessor to introspect and modify property values and other bean metadata.</p>
</blockquote>
<p><img src="/2020/07/14/Spring-Bean/beandefinition_class.jpg" alt="BeanDefinition ç±»å›¾"></p>
<p>BeanDefinitionï¼š é¡¶çº§çˆ¶æ¥å£<br>AbstractBeanDefinitionï¼šæ˜¯GenericBeanDefinitionã€RootBeanDefinitionã€ChildBeanDefinition çš„é€šç”¨å±æ€§çš„å®Œæ•´å®ç°ã€‚<br>GenericBeanDefinition: æ ‡å‡†çš„beanå®šä¹‰ç›®çš„çš„ä¸€ç«™å¼æœåŠ¡ç±»ï¼Œ</p>
<p>BeanDefinitionæ˜¯SpringFrameworkä¸­å®šä¹‰çš„é…ç½®å…ƒä¿¡æ¯æ¥å£,åŒ…å«äº†ï¼š</p>
<ul>
<li>Bean çš„ç±»å</li>
<li>Bean çš„è¡Œä¸ºé…ç½®å…ƒç´ ï¼Œå¦‚ä½œç”¨åŸŸã€è‡ªåŠ¨ç»‘å®šæ¨¡å¼ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰</li>
<li>å…¶ä»–Beanå¼•ç”¨ï¼Œï¼ˆCollaboratorsã€Dependends)</li>
<li>é…ç½®è®¾ç½®ï¼ˆBeançš„Propertiesï¼‰</li>
</ul>
<h3 id="BeanDefinition-å…ƒä¿¡æ¯"><a href="#BeanDefinition-å…ƒä¿¡æ¯" class="headerlink" title="BeanDefinition å…ƒä¿¡æ¯"></a>BeanDefinition å…ƒä¿¡æ¯</h3><table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>Class</td>
<td>Beançš„å…¨é™ç±»åï¼Œå¿…é¡»æ˜¯å…·ä½“ç±»</td>
</tr>
<tr>
<td>Name</td>
<td>Beançš„åç§°æˆ–è€…ğŸ†”</td>
</tr>
<tr>
<td>Scope</td>
<td>Beançš„ä½œç”¨åŸŸï¼Œsingletonã€prototype</td>
</tr>
<tr>
<td>Constructor arguments</td>
<td>Beançš„æ„é€ å™¨å‚æ•° for DI</td>
</tr>
<tr>
<td>Properties</td>
<td>Beançš„å±æ€§è®¾ç½® for DI</td>
</tr>
<tr>
<td>Autowiring Mode</td>
<td>Beançš„è‡ªåŠ¨ç»‘å®šæ¨¡å¼ï¼šByName ã€ byType</td>
</tr>
<tr>
<td>Lazy Initialization Mode</td>
<td>Bean å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼</td>
</tr>
<tr>
<td>initialzation method</td>
<td>Beanåˆå§‹åŒ–å›è°ƒæ–¹æ³•åç§°</td>
</tr>
<tr>
<td>destruction method</td>
<td>Bean é”€æ¯å›è°ƒæ–¹æ³•åç§°</td>
</tr>
</tbody></table>
<h3 id="BeanDefinition-æ„å»º"><a href="#BeanDefinition-æ„å»º" class="headerlink" title="BeanDefinition æ„å»º"></a>BeanDefinition æ„å»º</h3><ul>
<li>é€šè¿‡BeanDefinitionBuilderæ„å»ºBeandefinition</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">//bean definition builder.</span></span><br><span class="line">BeanDefinitionBuilder beanDefinitionBuilder = BeanDefinitionBuilder.genericBeanDefinition(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">beanDefinitionBuilder.addPropertyValue(<span class="string">"id"</span>,<span class="number">1L</span>);</span><br><span class="line">beanDefinitionBuilder.addPropertyValue(<span class="string">"name"</span>,<span class="string">"lisi"</span>);</span><br><span class="line"></span><br><span class="line">BeanDefinition beanDefinition = beanDefinitionBuilder.getBeanDefinition();</span><br></pre></td></tr></table></figure>

<ul>
<li>é€šè¿‡GenericBeanDefinition æ„å»º</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GenericBeanDefinition genericBeanDefinition = <span class="keyword">new</span> GenericBeanDefinition();</span><br><span class="line">genericBeanDefinition.setBeanClass(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">MutablePropertyValues propertyValues = <span class="keyword">new</span> MutablePropertyValues();</span><br><span class="line"><span class="comment">//        propertyValues.addPropertyValue("id",2L);</span></span><br><span class="line"><span class="comment">//        propertyValues.addPropertyValue("name","zhaowu");</span></span><br><span class="line"></span><br><span class="line">propertyValues.add(<span class="string">"id"</span>,<span class="number">2L</span>)</span><br><span class="line">        .add(<span class="string">"name"</span>,<span class="string">"zhaowu"</span>);</span><br><span class="line">genericBeanDefinition.setPropertyValues(propertyValues);</span><br></pre></td></tr></table></figure>

<h2 id="SpringBean-å‘½å"><a href="#SpringBean-å‘½å" class="headerlink" title="SpringBean å‘½å"></a>SpringBean å‘½å</h2><p>æ¯ä¸ªBeanæ‹¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ ‡è¯†ç¬¦ï¼Œè¿™äº›æ ‡è¯†ç¬¦åœ¨Beanæ‰€åœ¨çš„å®¹å™¨å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚<br>é€šå¸¸ï¼Œä¸€ä¸ªBeanä»…æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ«åæ¥æ‰©å……ã€‚</p>
<p>åœ¨åŸºäºXMLçš„é…ç½®å…ƒä¿¡æ¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨idæˆ–è€…nameå±æ€§æ¥è´µå§“Beançš„æ ‡è¯†ç¬¦ã€‚é€šå¸¸Beançš„æ ‡è¯†ç¬¦ç”±å­—æ¯ç»„æˆï¼Œå…è®¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ã€‚å¯ä»¥åœ¨Beançš„nameå±æ€§ä½¿ç”¨é€—å·â€œ,â€æˆ–è€…â€œ;â€æˆ–è€…ç©ºæ ¼æ¥é—´éš”ã€‚</p>
<p>Beançš„idæˆ–è€…nameå±æ€§å¦‚æœä¸ºç©ºï¼Œå®¹å™¨ä¼šä¸ºBeanè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚</p>
<h3 id="BeanNameGenerator"><a href="#BeanNameGenerator" class="headerlink" title="BeanNameGenerator"></a>BeanNameGenerator</h3><p><img src="/2020/07/14/Spring-Bean/bean_name_generator.jpg" alt="BeanNameGenerator ç±»å›¾"></p>
<h3 id="BeanDefinition-é…ç½®"><a href="#BeanDefinition-é…ç½®" class="headerlink" title="BeanDefinition é…ç½®"></a>BeanDefinition é…ç½®</h3><h4 id="Xml"><a href="#Xml" class="headerlink" title="Xml"></a>Xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"com.github.springframework.models.User"</span> <span class="attr">primary</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"superUser"</span> <span class="attr">class</span>=<span class="string">"com.github.springframework.models.SuperUser"</span> <span class="attr">parent</span>=<span class="string">"user"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"addr"</span> <span class="attr">value</span>=<span class="string">"ä¸Šæµ·"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"objectFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetBeanName"</span> <span class="attr">value</span>=<span class="string">"user"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Javaæ³¨è§£-Bean"><a href="#Javaæ³¨è§£-Bean" class="headerlink" title="Javaæ³¨è§£ @Bean"></a>Javaæ³¨è§£ @Bean</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationBeanDefinitionDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//create factory bean</span></span><br><span class="line">        AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//register config class.</span></span><br><span class="line">        applicationContext.register(Config<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//refresh</span></span><br><span class="line">        applicationContext.refresh();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//getUser</span></span><br><span class="line">        System.out.println(applicationContext.getBean(User<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span></span>&#123;</span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>&#123;</span><br><span class="line">            User user = <span class="keyword">new</span> User();</span><br><span class="line">            user.setId(<span class="number">1L</span>);</span><br><span class="line">            user.setName(<span class="string">"Ann: zhangsan"</span>);</span><br><span class="line">            <span class="keyword">return</span> user;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Javaæ³¨è§£-Component"><a href="#Javaæ³¨è§£-Component" class="headerlink" title="Javaæ³¨è§£ @Component"></a>Javaæ³¨è§£ @Component</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationBeanDefinitionDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//create factory bean</span></span><br><span class="line">        AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//register config class.</span></span><br><span class="line">        applicationContext.register(Config<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//refresh</span></span><br><span class="line">        applicationContext.refresh();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        System.out.println(applicationContext.getBean(Config<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Component</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span></span>&#123;</span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>&#123;</span><br><span class="line">            User user = <span class="keyword">new</span> User();</span><br><span class="line">            user.setId(<span class="number">1L</span>);</span><br><span class="line">            user.setName(<span class="string">"Ann: zhangsan"</span>);</span><br><span class="line">            <span class="keyword">return</span> user;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="BeanDefinitionæ³¨å†Œåˆ°å®¹å™¨"><a href="#BeanDefinitionæ³¨å†Œåˆ°å®¹å™¨" class="headerlink" title="BeanDefinitionæ³¨å†Œåˆ°å®¹å™¨"></a>BeanDefinitionæ³¨å†Œåˆ°å®¹å™¨</h2><p><img src="/2020/07/14/Spring-Bean/BeanDefinitionRegistry_Class.jpg" alt="BeanDefinitionRegistry ç±»å›¾"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry, String name)</span> </span>&#123;</span><br><span class="line">    BeanDefinitionBuilder beanDefinitionBuilder = BeanDefinitionBuilder.genericBeanDefinition(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    beanDefinitionBuilder.addPropertyValue(<span class="string">"id"</span>, <span class="number">1L</span>)</span><br><span class="line">            .addPropertyValue(<span class="string">"name"</span>, <span class="string">"Reg: zhangsan"</span>);</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasText(name)) &#123;</span><br><span class="line">        registry.registerBeanDefinition(name, beanDefinitionBuilder.getBeanDefinition());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        BeanDefinitionReaderUtils.registerWithGeneratedName(beanDefinitionBuilder.getBeanDefinition(),registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äºAnnotatinoConfigApplicationContext æ˜¯ BeanDefinitionRegistryçš„é—´æ¥å­ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">applicationContext.register(Config<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">beanDefinitionRegistry(applicationContext,<span class="string">"REG:ZhangSan:Name"</span>);</span><br><span class="line">beanDefinitionRegistry(applicationContext,<span class="keyword">null</span>);</span><br><span class="line">applicationContext.refresh();</span><br><span class="line">System.out.println(applicationContext.getBeansOfType(Config<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">System.out.println(applicationContext.getBeansOfType(User<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">System.out.println(applicationContext.getBeansOfType(AnnotationApplicationContextDemo<span class="class">.<span class="keyword">class</span>))</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Bean-å®ä¾‹åŒ–"><a href="#Bean-å®ä¾‹åŒ–" class="headerlink" title="Bean å®ä¾‹åŒ–"></a>Bean å®ä¾‹åŒ–</h2><p>å¸¸è§„ï¼š</p>
<ul>
<li><p>é€šè¿‡æ„é€ å™¨ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Javaæ³¨è§£ã€JavaAPIï¼‰</p>
</li>
<li><p>é™æ€å·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€JavaAPIï¼‰</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> User2 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user-by-static-method"</span> <span class="attr">class</span>=<span class="string">"com.github.spring.beans.User2"</span>  <span class="attr">factory-method</span>=<span class="string">"getInstance"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classpath:/META-INF/bean-creation-context.xml"</span>);</span><br><span class="line"></span><br><span class="line">User2 user = applicationContext.getBean(<span class="string">"user-by-static-method"</span>, User2<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>Beanå·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€JavaAPIï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> User2 <span class="title">createuser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultUserFactory</span> <span class="keyword">implements</span> <span class="title">UserFactory</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userFactory"</span> <span class="attr">class</span>=<span class="string">"com.github.spring.factory.DefaultUserFactory"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user-by-instance-method"</span> <span class="attr">factory-bean</span>=<span class="string">"userFactory"</span> <span class="attr">factory-method</span>=<span class="string">"createuser"</span>/&gt;</span></span><br><span class="line">``</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">ApplicationContext applicationContext = new ClassPathXmlApplicationContext("classpath:/META-INF/bean-creation-context.xml");</span><br><span class="line">User2 user3 = applicationContext.getBean("user-by-instance-method", User2.class);</span><br></pre></td></tr></table></figure>

<ul>
<li>FactoryBeanï¼ˆXMLã€Javaæ³¨è§£ã€JavaAPIï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserFactoryBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">User2</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User2 <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> User2.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> User2<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user-by-factory-bean"</span> <span class="attr">class</span>=<span class="string">"com.github.spring.factory.UserFactoryBean"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classpath:/META-INF/bean-creation-context.xml"</span>);</span><br><span class="line">User2 user2 = applicationContext.getBean(<span class="string">"user-by-factory-method"</span>, User2<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>

<p>ç‰¹æ®Šæ–¹å¼ï¼š</p>
<ul>
<li>ServiceLoaderFactoryBean</li>
</ul>
<p>Java ServiceLoader: ä¼šåœ¨classpath:/META-INF/servicesä¸‹åŠ è½½æ¥å£é…ç½®æ–‡ä»¶ï¼š</p>
<p>æ–‡ä»¶ååç§°ä¸ºå…¨é™å®šæ¥å£åç§°ï¼Œå†…å®¹ä¸ºå…¨é™å®šå®ç°ç±»</p>
<p><img src="/2020/07/14/Spring-Bean/service-loader.jpg" alt="services é…ç½®æ–‡ä»¶"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.github.spring.factory.DefaultUserFactory</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">demoServiceLoader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ServiceLoader&lt;UserFactory&gt; serviceLoader = ServiceLoader.load(UserFactory<span class="class">.<span class="keyword">class</span>, <span class="title">Thread</span>.<span class="title">currentThread</span>().<span class="title">getContextClassLoader</span>())</span>;</span><br><span class="line">    displayServiceLoad(serviceLoader);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">displayServiceLoad</span><span class="params">(ServiceLoader&lt;UserFactory&gt; serviceLoader)</span> </span>&#123;</span><br><span class="line">    Iterator&lt;UserFactory&gt; iterator = serviceLoader.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        UserFactory userFactory = iterator.next();</span><br><span class="line">        System.out.println(userFactory.createuser());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ServiceLoaderFactoryBeançš„å®ç°</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userFactoryServiceLoader"</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.serviceloader.ServiceLoaderFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"serviceType"</span> <span class="attr">value</span>=<span class="string">"com.github.spring.factory.UserFactory"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classpath:/META-INF/sp-bean-creation-context.xml"</span>);</span><br><span class="line">ServiceLoader&lt;UserFactory&gt; serviceLoader = applicationContext.getBean(<span class="string">"userFactoryServiceLoader"</span>, ServiceLoader<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">displayServiceLoad(serviceLoader);</span><br></pre></td></tr></table></figure>

<ul>
<li>AutowireCapableBeanFactory#createBean(java.lang.Class,int, boolean);</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AutowireCapableBeanFactory beanFactory = applicationContext.getAutowireCapableBeanFactory();</span><br><span class="line">UserFactory userFactory = beanFactory.createBean(DefaultUserFactory<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(userFactory.createuser());</span><br></pre></td></tr></table></figure>


<ul>
<li>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition);</li>
</ul>
<h2 id="Beançš„åˆå§‹åŒ–"><a href="#Beançš„åˆå§‹åŒ–" class="headerlink" title="Beançš„åˆå§‹åŒ–"></a>Beançš„åˆå§‹åŒ–</h2><ul>
<li><p>@PostConstructor</p>
</li>
<li><p>InitializingBean çš„ afterPropertiesSet</p>
</li>
<li><p>Beançš„initMethod<br>@Bean(initMethod=â€â€)</p>
<bean initmethod>
AbstractBeanDefinition.setInitMethodName("");



</bean></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultUserFactory</span> <span class="keyword">implements</span> <span class="title">UserFactory</span>, <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DefaultUserFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DefaultUserFactory Constructor Called."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DefaultUserFactory PostConstructor Called."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initUserFactory</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DefaultUserFactory initUserFactory Called."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DefaultUserFactory afterPropertiesSet called."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanInitializationDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnnotationConfigApplicationContext applicationContext = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">        applicationContext.register(BeanInitializationDemo<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        applicationContext.refresh();</span><br><span class="line">        UserFactory userFactory = applicationContext.getBean(UserFactory<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">        <span class="title">System</span>.<span class="title">out</span>.<span class="title">println</span>(<span class="title">userFactory</span>.<span class="title">createuser</span>())</span>;</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(initMethod = <span class="string">"initUserFactory"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultUserFactory <span class="title">userFactory</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DefaultUserFactory();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å»¶è¿Ÿåˆå§‹åŒ–"><a href="#å»¶è¿Ÿåˆå§‹åŒ–" class="headerlink" title="å»¶è¿Ÿåˆå§‹åŒ–"></a>å»¶è¿Ÿåˆå§‹åŒ–</h3><ul>
<li>xml: <bean lazy-init="true"></bean></li>
<li>annotation: @Lazy</li>
</ul>
<p>å¯¹äºå»¶è¿Ÿåˆå§‹åŒ–ï¼Œæ˜¯åœ¨applicationContextåˆå§‹åŒ–ä¹‹åè¿›è¡Œåˆå§‹åŒ–ã€‚<br>éå»¶è¿Ÿåˆå§‹åŒ–ï¼Œæ˜¯åœ¨applicationContextåˆå§‹åŒ–ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<h2 id="Bean-çš„é”€æ¯"><a href="#Bean-çš„é”€æ¯" class="headerlink" title="Bean çš„é”€æ¯"></a>Bean çš„é”€æ¯</h2><ul>
<li>@PreDestroy</li>
<li>å®ç°DisposableBeanæ¥å£çš„destoy()æ–¹æ³•</li>
<li>Beançš„ destroyæ–¹æ³•<bean destroy>
@Bean(destroy="")
AbstractBeanDefinition.setDestroyMethodName(""); 


</bean></li>
</ul>
<h2 id><a href="#" class="headerlink" title></a></h2><ul>
<li>å¦‚ä½•æ³¨å†Œä¸€ä¸ªSpring Bean</li>
</ul>
<p>å¯ä»¥é€šè¿‡BeanDefinitionå’Œå¤–éƒ¨å•ä½“å¯¹è±¡æ¥æ³¨å†Œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UserFactory userFactory = <span class="keyword">new</span> DefaultUserFactory();</span><br><span class="line">ConfiguableListableBeanFactory factory = applicationContext.getBeanFactory();</span><br><span class="line">factory.registerSingleton(<span class="string">"userFactory"</span>, userFactory);</span><br><span class="line"></span><br><span class="line">UserFactory userFactory = applicationContext.getBean(<span class="string">"UserFactory"</span>,UserFactory<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Spring BeanDefinition æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</li>
<li><p>Spring å®¹å™¨æ˜¯å¦‚ä½•æ³¨å†ŒBeançš„ï¼Ÿ</p>
</li>
</ul>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/07/06/Spring-IOC-And-DI/">
      Spring IOC And DI
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Spring</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´7æœˆ6æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="IOC-ç®€å²"><a href="#IOC-ç®€å²" class="headerlink" title="IOC ç®€å²"></a>IOC ç®€å²</h2><ul>
<li>1983å¹´ï¼ŒRichard E.Sweet åœ¨&lt;<The mesa programming enviroment>&gt;æå‡ºå¥½è±ååŸåˆ™ï¼ˆâ€œä¸è¦æ‰“ç”µè¯ç»™æˆ‘ï¼Œæˆ‘ä¼šæ‰“ç”µè¯ç»™ä½ â€ï¼‰ã€‚</The></li>
<li>1988å¹´ï¼ŒRolph E.Johnson å’ŒBrian Footeåœ¨ã€ŠDesigning Reusable Classesã€‹ä¸­æå‡ºæ§åˆ¶åè½¬ã€‚</li>
<li>1996å¹´ï¼ŒMichael Mattsonåœ¨ã€ŠObject-Oriented Frameworks, A survey of methodological issuesã€‹å°†æ§åˆ¶åè½¬å‘½åä¸ºå¥½è±ååŸåˆ™ã€‚</li>
<li>2004ï¼ŒMartin Fowleråœ¨ã€ŠInversion Of Control Containers and the Dependency Injection patternã€‹æå‡ºè‡ªå·±å¯¹å’ŒIOCå’ŒDIçš„ç†è§£</li>
<li>2005å¹´ï¼ŒMartin Foloweråœ¨ã€ŠInversion Of Controlã€‹ä¸­å¯¹IOCè¿›ä¸€æ­¥è¯´æ˜ã€‚</li>
<li><a href="https://www.martinfowler.com/articles/injection.html" target="_blank" rel="noopener">Martin å¤§çˆ·å…³äºIOCçš„è¯´æ˜</a></li>
</ul>
<h2 id="IOC-çš„å®ç°ç­–ç•¥"><a href="#IOC-çš„å®ç°ç­–ç•¥" class="headerlink" title="IOC çš„å®ç°ç­–ç•¥"></a>IOC çš„å®ç°ç­–ç•¥</h2><p>WIKI:</p>
<p> In object-oriented programming, there are several basic techniques to implement inversion of control. there are:</p>
<ul>
<li>Using a service locator pattern</li>
<li>Using dependency injection<ul>
<li>constructor  injection</li>
<li>parameter injection</li>
<li>setter injection</li>
<li>interface injection</li>
</ul>
</li>
<li>Using a contextualized lookup.</li>
<li>Using template method design pattern</li>
<li>Using Strategy design pattern.</li>
</ul>
<p>EXPERT ONE-ON-ONE J2EE DEVELOPMENT without EJBæåˆ°çš„ç­–ç•¥ï¼š</p>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/07/03/Spring-%E6%80%BB%E8%A7%88/">
      Spring æ€»è§ˆ
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Spring</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´7æœˆ3æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Springç›¸å…³å†…å®¹æ¥æºäºSpringå®˜æ–¹ç½‘ç«™ä¸Springæºç ã€‚</p>
</blockquote>
<p><a href="https://spring.io/projects/spring-framework" target="_blank" rel="noopener">Spring 5.2.7</a></p>
<p>Springæ¡†æ¶ä¸ºä¼ä¸šçº§åº”ç”¨æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„é…ç½®å¼€å‘æ¨¡å‹ï¼Œå¯ä»¥åœ¨ä»»ä½•ç±»å‹çš„å‘å¸ƒå¹³å°ã€‚<br>Springä¸“æ³¨äºä¼ä¸šåº”ç”¨çš„ç®¡é“ï¼Œä¿è¯å¼€å‘å›¢é˜Ÿä¸“æ³¨äºä¼ä¸šçš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³æ³¨å‘å¸ƒå¹³å°ã€‚</p>
<h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><h4 id="æ ¸å¿ƒæŠ€æœ¯"><a href="#æ ¸å¿ƒæŠ€æœ¯" class="headerlink" title="æ ¸å¿ƒæŠ€æœ¯"></a>æ ¸å¿ƒæŠ€æœ¯</h4><ul>
<li><a href="/2020/07/06/Spring-IOC-And-DI/">Dependency Injectionä¾èµ–æ³¨å…¥</a></li>
<li>events äº‹ä»¶</li>
<li>resources èµ„æºç®¡ç†</li>
<li>i18n å›½é™…åŒ–</li>
<li>validation æ ¡éªŒ</li>
<li>data binding æ•°æ®ç»‘å®š</li>
<li>type conversion ç±»å‹è½¬æ¢</li>
<li>SpEL </li>
<li>AOP Aspect Oriented Programming é¢å‘åˆ‡é¢ç¼–ç¨‹</li>
</ul>
<h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><ul>
<li>Mock Objects: æ¨¡æ‹Ÿå¯¹è±¡</li>
<li>TestContext framework: æµ‹è¯•ä¸Šä¸‹æ–‡æ¡†æ¶</li>
<li>Spring MVC Test: MVCæµ‹è¯•æ¡†æ¶</li>
<li>WebTestClient: webæµ‹è¯•å®¢æˆ·ç«¯</li>
</ul>
<h4 id="DataAccess"><a href="#DataAccess" class="headerlink" title="DataAccess"></a>DataAccess</h4><ul>
<li>transactions: äº‹åŠ¡</li>
<li>DAO Support: DAO æ”¯æŒ</li>
<li>JDBC:</li>
<li>ORMï¼š</li>
<li>Marshalling XML</li>
</ul>
<h4 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h4><h4 id="Spring-WebFlux"><a href="#Spring-WebFlux" class="headerlink" title="Spring WebFlux"></a>Spring WebFlux</h4><h4 id="Integration"><a href="#Integration" class="headerlink" title="Integration"></a>Integration</h4><ul>
<li>remoting</li>
<li>JMS</li>
<li>JCA</li>
<li>JMX</li>
<li>email</li>
<li>tasks</li>
<li>scheduling</li>
<li>cache</li>
</ul>
<h4 id="Languages"><a href="#Languages" class="headerlink" title="Languages"></a>Languages</h4><ul>
<li>Kotlin</li>
<li>Groovy</li>
<li>dynamic languages.</li>
</ul>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/06/22/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/">
      å‰åç«¯åˆ†ç¦»
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´6æœˆ22æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <p>åŠ¨é™åˆ†ç¦»æŠ€æœ¯ï¼šCDNã€<br>è´Ÿè½½å‡è¡¡ï¼š<br>     å®ç°æ‰‹æ®µï¼š<br>     1ï¼‰ lvs / lb / å››å±‚æ•°æ®åŒ…ï¼Œ é€Ÿåº¦å¿«ï¼Œä¸è§£åŒ…ã€‚</p>
<pre><code>2ï¼‰   åå‘ä»£ç†ï¼ˆnginx ã€ Node.js ä¸ƒå±‚  URI/location å»ºç«‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œè¯·æ±‚ä¼ é€’ã€è½¬å‘
      å­˜å‚¨ipã€è¯·æ±‚uriã€æ¬¡æ•°ã€æ—¶é—´ç­‰ï¼Œ
     ï¼‰

     Load Balance å¥åº·æ£€æŸ¥

ç®—æ³•ï¼š
éšæœº
è½®è®­
å“ˆå¸Œ
æœ€å°‘è¿æ¥æ•°

æƒé‡/åŠ¨æ€æƒé‡</code></pre><p>å¤šçº§ç¼“å­˜<br>é˜²ç©¿é€</p>
<p>é™æµ<br>ç†”æ–­<br>é™çº§<br>ç°åº¦å‘å¸ƒ</p>
<p>æœåŠ¡æ— çŠ¶æ€ï¼šåˆ†å¸ƒå¼é—®é¢˜</p>
<p>update user set status = 2 where status = 1 and id = 1;</p>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/06/17/%E5%B8%B8%E7%94%A8JVM%E5%8F%82%E6%95%B0/">
      å¸¸ç”¨JVMå‚æ•°
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´6æœˆ17æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <p>HotSpot è™šæ‹Ÿæœºå¸¸ç”¨é…ç½®</p>
<table>
<thead>
<tr>
<th>é…ç½®</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>-Xms1g</td>
<td>æœ€å°å †å†…å­˜</td>
</tr>
<tr>
<td>-Xmx4g</td>
<td>æœ€å¤§å †å†…å­˜</td>
</tr>
<tr>
<td>-XX:+UseG1GC</td>
<td>ä½¿ç”¨G1åƒåœ¾å›æ”¶å™¨</td>
</tr>
<tr>
<td>-Xss256k</td>
<td>æ¯ä¸ªçº¿ç¨‹æ ˆå¤§å°256k</td>
</tr>
<tr>
<td>-XX:MetaspaceSize=256m</td>
<td>å…ƒæ•°æ®åŒºå¤§å°256M</td>
</tr>
<tr>
<td>-XX:MaxMetaspaceSize=256m</td>
<td>å…ƒæ•°æ®åŒºæœ€å¤§256M</td>
</tr>
<tr>
<td>-XX:MaxGCPauseMillis=500</td>
<td>GCæœ€å¤§åœé¡¿æ¯«ç§’æ•°</td>
</tr>
<tr>
<td>-XX:+DisableExplicitGC</td>
<td>ç¦ç”¨ä»£ç ä¸­æ˜¾å¼è°ƒç”¨GCï¼ŒSystem.gc()å°†ä¼šå¤±æ•ˆ</td>
</tr>
<tr>
<td>-XX:+UnlockExperimentalVMOptions</td>
<td>è§£é”å®éªŒå‚æ•°</td>
</tr>
<tr>
<td>-XX:+UseStringDeduplication</td>
<td>GCçš„åŒæ—¶åšé‡å¤å­—ç¬¦ä¸²æ¶ˆé™¤ï¼Œåªç”¨äºG1</td>
</tr>
<tr>
<td>-XX:InitiatingHeapOccupancyPercent=60</td>
<td>å¯åŠ¨å¹¶å‘GCå‘¨æœŸæ—¶çš„å †å†…å­˜å ç”¨ç™¾åˆ†æ¯”. G1ä¹‹ç±»çš„åƒåœ¾æ”¶é›†å™¨ç”¨å®ƒæ¥è§¦å‘å¹¶å‘GCå‘¨æœŸ,åŸºäºæ•´ä¸ªå †çš„ä½¿ç”¨ç‡,è€Œä¸åªæ˜¯æŸä¸€ä»£å†…å­˜çš„ä½¿ç”¨æ¯”. å€¼ä¸º 0 åˆ™è¡¨ç¤ºâ€ä¸€ç›´æ‰§è¡ŒGCå¾ªç¯â€. é»˜è®¤å€¼ä¸º 45.</td>
</tr>
<tr>
<td>-XX:ParallelGCThreads=8</td>
<td>è®¾ç½®åƒåœ¾æ”¶é›†å™¨åœ¨å¹¶è¡Œé˜¶æ®µä½¿ç”¨çš„çº¿ç¨‹æ•°,é»˜è®¤å€¼éšJVMè¿è¡Œçš„å¹³å°ä¸åŒè€Œä¸åŒ.</td>
</tr>
<tr>
<td>-XX:G1MixedGCCountTarget=4</td>
<td>è®¾ç½®åœ¨æ ‡è®°å‘¨æœŸå®Œæˆä¹‹åæ··åˆæ”¶é›†çš„æ•°é‡ï¼Œä»¥ç»´æŒold regionï¼ˆä¹Ÿå°±æ˜¯è€å¹´ä»£ï¼‰ä¸­ï¼Œæœ€å¤šæœ‰G1MixedGCLiveThresholdPercentçš„å­˜æ´»å¯¹è±¡ã€‚é»˜è®¤å€¼ä¸º8ï¼Œæ··åˆæ”¶é›†çš„æ•°é‡å°†ç»´æŒåœ¨è¿™ä¸ªå€¼ä¹‹å†…ã€‚ï¼ˆJVM build &gt; 23ï¼‰</td>
</tr>
<tr>
<td>-XX:MaxTenuringThreshold=7</td>
<td>å¹´è€ä»£çš„æœ€å¤§ä¸´ç•Œå€¼(tenuring threshold). é»˜è®¤å€¼ä¸º 15.</td>
</tr>
<tr>
<td>-XX:+UseGCLogFileRotation</td>
<td>æ»šåŠ¨è®°å½•GCæ—¥å¿—æ–‡ä»¶</td>
</tr>
<tr>
<td>-XX:NumberOfGCLogFiles=5</td>
<td>GCæ—¥å¿—æ–‡ä»¶æ•°é‡ä¸º5ä¸ª</td>
</tr>
<tr>
<td>-XX:GCLogFileSize=64M</td>
<td>å•ä¸ªGCæ—¥å¿—æ–‡ä»¶å¤§å°64M</td>
</tr>
<tr>
<td>-Xloggc:/app/data/logs/gc-<code>date +%Y%m%d-%H-%M</code>.log</td>
<td>GCæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç›®å½•å’Œåç§°</td>
</tr>
<tr>
<td>-XX:+PrintGCDetails</td>
<td>æ‰“å°GCè¯¦æƒ…</td>
</tr>
<tr>
<td>-XX:+PrintGCDateStamps</td>
<td>æ‰“å°GCæ—¶æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>-XX:+PrintHeapAtGC</td>
<td>GCæ—¶æ‰“å°å †ä¿¡æ¯</td>
</tr>
<tr>
<td>-XX:+PrintAdaptiveSizePolicy</td>
<td>è‡ªé€‚åº”å¤§å°ç­–ç•¥ï¼Œæ¯æ¬¡ GC åä¼šé‡æ–°è®¡ç®— Edenã€From å’Œ To åŒºçš„å¤§å°ï¼Œè®¡ç®—ä¾æ®æ˜¯ GC è¿‡ç¨‹ä¸­ç»Ÿè®¡çš„ GC æ—¶é—´ã€ååé‡ã€å†…å­˜å ç”¨é‡ã€‚</td>
</tr>
<tr>
<td>-XX:+UseFastAccessorMethods</td>
<td></td>
</tr>
<tr>
<td>-XX:SoftRefLRUPolicyMSPerMB=0</td>
<td>softly reachable objects will remain alive for some amount of time after the last time they were referenced. The default value is one second of lifetime per free megabyte in the heap</td>
</tr>
</tbody></table>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/06/16/%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/">
      å¸¸ç”¨ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´6æœˆ16æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h2><h3 id="jps"><a href="#jps" class="headerlink" title="jps"></a>jps</h3><p>åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œå¹¶æ˜¾ç¤ºè™šæ‹Ÿæœºæ‰§è¡Œä¸»ç±»åç§°ä»¥åŠè¿™äº›è¿›ç¨‹çš„æœ¬åœ°è™šæ‹Ÿå”¯ä¸€IDï¼ˆä¸æ“ä½œç³»ç»Ÿè¿›ç¨‹IDä¸€è‡´ï¼‰ã€‚</p>
<blockquote>
<p>jps [option] [hostid]</p>
</blockquote>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>-q</td>
<td>åªè¾“å‡ºlvmidï¼Œçœç•¥ä¸»ç±»çš„åç§°</td>
</tr>
<tr>
<td>-m</td>
<td>è¾“å‡ºè™šæ‹Ÿæœºå¯åŠ¨æ—¶ä¼ é€’ç»™ä¸»ç±»mainï¼ˆï¼‰çš„å‚æ•°</td>
</tr>
<tr>
<td>-l</td>
<td>è¾“å‡ºä¸»ç±»çš„å…¨åï¼Œå¦‚æœæ˜¯jaråŒ…ï¼Œåˆ™è¾“å‡ºjarè·¯å¾„</td>
</tr>
<tr>
<td>-v</td>
<td>è¾“å‡ºè™šæ‹Ÿæœºå¯åŠ¨æ—¶çš„jvmå‚æ•°</td>
</tr>
</tbody></table>
<h3 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h3><p>ç”¨äºç›‘è§†è™šæ‹Ÿæœºå„ç§è¿è¡ŒçŠ¶æ€ä¿¡æ¯çš„å‘½ä»¤è¡Œå·¥å…·ã€‚<br>æ˜¾ç¤ºæœ¬åœ°æˆ–è€…è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»åŠ è½½ã€å†…å­˜ã€åƒåœ¾æ”¶é›†ã€å³æ—¶ç¼–è¯‘ç­‰è¿è¡Œæ—¶æ•°æ®ã€‚</p>
<blockquote>
<p>jstat [option vimid [interval[s|ms] [count]]]<br>[protocal:][//]lvmid[@hostname[:port]/servername]</p>
</blockquote>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>-class</td>
<td>ç›‘è§†ç±»åŠ è½½ã€å¸è½½æ•°é‡ã€æ€»ç©ºé—´ä»¥åŠç±»è£…è½½è€—è´¹çš„æ—¶é—´</td>
</tr>
<tr>
<td>-gc</td>
<td>ç›‘è§†Javaå †çŠ¶å†µï¼ŒåŒ…æ‹¬Edenã€Survivorã€è€å¹´ä»£ã€æ°¸ä¹…ä»£çš„å®¹é‡ï¼Œå·²ç”¨ç©ºé—´ï¼Œåƒåœ¾æ”¶é›†æ—¶é—´</td>
</tr>
<tr>
<td>-gccapacity</td>
<td>ç›‘è§†å†…å®¹ä¸-gcåŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨javaå †å„ä¸ªåŒºåŸŸä½¿ç”¨åˆ°æœ€å¤§æœ€å°ç©ºé—´</td>
</tr>
<tr>
<td>-gcutil</td>
<td>ç›‘è§†å†…å®¹ä¸-gcåŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨å·²ä½¿ç”¨ç©ºé—´å æ€»ç©ºé—´çš„ç™¾åˆ†æ¯”</td>
</tr>
<tr>
<td>-gccause</td>
<td>ä¸-gcutilåŠŸèƒ½ä¸€æ ·ï¼Œä¼šé¢å¤–è¾“å‡ºå¯¼è‡´ä¸Šä¸€æ¬¡åƒåœ¾æ”¶é›†äº§ç”Ÿçš„åŸå› </td>
</tr>
<tr>
<td>-gcnew</td>
<td>ç›‘è§†æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†æƒ…å†µ</td>
</tr>
<tr>
<td>-gcnewcapacity</td>
<td>ç›‘è§†å†…å®¹ä¸-gcnewåŸºæœ¬ç›¸åŒï¼Œè¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´</td>
</tr>
<tr>
<td>-gcold</td>
<td>ç›‘è§†è€å¹´ä»£åƒåœ¾æ”¶é›†çŠ¶å†µ</td>
</tr>
<tr>
<td>-gcoldcapacity</td>
<td>ä¸-gcoldç›¸åŒï¼Œè¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´</td>
</tr>
<tr>
<td>-gcpermcapacity</td>
<td>è¾“å‡ºæ°¸ä¹…ä»£ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´</td>
</tr>
<tr>
<td>-compiler</td>
<td>è¾“å‡ºå³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘è¿‡çš„æ–¹æ³•ã€è€—æ—¶ç­‰ä¿¡æ¯</td>
</tr>
<tr>
<td>-printcompilation</td>
<td>è¾“å‡ºå·²ç»è¢«å³æ—¶ç¼–è¯‘çš„æ–¹æ³•</td>
</tr>
</tbody></table>
<p>æ¯éš”1sæŸ¥è¯¢ä¸€æ¬¡2105çš„gcæƒ…å†µï¼ŒæŸ¥è¯¢10æ¬¡ã€‚<br>jstat -gc 2105 1000 10</p>
<p>jstat -gcutil 2105</p>
<table>
<thead>
<tr>
<th>S0</th>
<th>S1</th>
<th>E</th>
<th>O</th>
<th>P</th>
<th>YGC</th>
<th>YGCT</th>
<th>FGC</th>
<th>FGCT</th>
<th>GCT</th>
</tr>
</thead>
<tbody><tr>
<td>0.00</td>
<td>0.00</td>
<td>6.20</td>
<td>41.42</td>
<td>47.20</td>
<td>16</td>
<td>0.105</td>
<td>3</td>
<td>0.472</td>
<td>0.577</td>
</tr>
</tbody></table>
<h3 id="jinfo"><a href="#jinfo" class="headerlink" title="jinfo"></a>jinfo</h3><p>å®æ—¶æŸ¥çœ‹å’Œè°ƒæ•´è™šæ‹Ÿæœºå„é¡¹å‚æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line">    jinfo [option] &lt;pid&gt;</span><br><span class="line">        (to connect to running process)</span><br><span class="line">    jinfo [option] &lt;executable &lt;core&gt;</span><br><span class="line">        (to connect to a core file)</span><br><span class="line">    jinfo [option] [server_id@]&lt;remote server IP or hostname&gt;</span><br><span class="line">        (to connect to remote debug server)</span><br><span class="line"></span><br><span class="line">where &lt;option&gt; is one of:</span><br><span class="line">    -flag &lt;name&gt;         to print the value of the named VM flag</span><br><span class="line">    -flag [+|-]&lt;name&gt;    to enable or disable the named VM flag</span><br><span class="line">    -flag &lt;name&gt;&#x3D;&lt;value&gt; to set the named VM flag to the given value</span><br><span class="line">    -flags               to print VM flags</span><br><span class="line">    -sysprops            to print Java system properties</span><br><span class="line">    &lt;no option&gt;          to print both of the above</span><br><span class="line">    -h | -help           to print this help message</span><br></pre></td></tr></table></figure>

<h3 id="jmap"><a href="#jmap" class="headerlink" title="jmap"></a>jmap</h3><p>ç”¨äºç”Ÿæˆå †è½¬å‚¨å¿«ç…§ï¼ŒæŸ¥è¯¢finalizeæ‰§è¡Œé˜Ÿåˆ—ã€Javaå †å’Œæ–¹æ³•åŒºçš„è¯¦ç»†ä¿¡æ¯ï¼ˆç©ºé—´ä½¿ç”¨ç‡ã€å½“å‰ä½¿ç”¨æ”¶é›†å™¨ç±»å‹ï¼‰</p>
<p>ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶çš„æ–¹å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:+HeapDumpOnOutOfMemoryError åœ¨è™šæ‹Ÿæœºå†…å­˜æº¢å‡ºå¼‚å¸¸å‡ºç°åè‡ªåŠ¨ç”Ÿæˆå †è½¬å‚¨å¿«ç…§æ–‡ä»¶ã€‚</span><br><span class="line">-XX:HeapDumpOnCtrlBreak ä½¿ç”¨ctrl+Break ç”Ÿæˆå †è½¬å‚¨å¿«ç…§æ–‡ä»¶</span><br><span class="line">kill -3 pid  ç”Ÿæˆå †è½¬å‚¨å¿«ç…§æ–‡ä»¶</span><br><span class="line">jmap -dump:format&#x3D;b,file&#x3D;heap.dump 3120</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>-dump</td>
<td>ç”Ÿæˆjavaå †è½¬å‚¨å¿«ç…§ï¼Œæ ¼å¼ä¸º-dump:[live,]format=b,file=<filename>,liveå­å‚æ•°è¯´æ˜æ˜¯å¦åªdumpå‡ºå­˜æ´»å¯¹è±¡</filename></td>
</tr>
<tr>
<td>-finalizerinfo</td>
<td>æ˜¾ç¤ºå†F-Queueä¸­ç­‰å¾…Finalizerçº¿ç¨‹æ‰§è¡Œfinalizeæ–¹æ³•çš„å¯¹è±¡ã€‚åªæœ‰åœ¨Linuxå¹³å°æœ‰æ•ˆ</td>
</tr>
<tr>
<td>-heap</td>
<td>æ˜¾ç¤ºJavaå †è¯¦ç»†ä¿¡æ¯ï¼Œä½¿ç”¨å›æ”¶å™¨ç±»å‹ã€å‚æ•°é…ç½®ã€åˆ†ä»£çŠ¶å†µï¼Œåªåœ¨Linuxå¹³å°ä¸‹æœ‰æ•ˆ</td>
</tr>
<tr>
<td>-histo</td>
<td>æ˜¾ç¤ºå †ä¸­å¯¹è±¡ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»ã€å®ä¾‹æ•°é‡ã€åˆè®¡å®¹é‡</td>
</tr>
<tr>
<td>-permstat</td>
<td>åœ¨ä»¥ClassLoaderä¸ºç»Ÿè®¡å£å¾„æ˜¾ç¤ºæ°¸ä¹…ä»£å†…å­˜çŠ¶æ€ã€‚åªåœ¨Linuxä¸‹æœ‰æ•ˆ</td>
</tr>
<tr>
<td>-F</td>
<td>å½“è™šæ‹Ÿæœºè¿›ç¨‹å¯¹-dumpé€‰é¡¹æ²¡æœ‰å“åº”æ—¶ï¼Œå¯ä»¥ä½¿ç”¨-Få¼ºåˆ¶ç”Ÿæˆdumpå¿«ç…§ï¼Œåªåœ¨Linuxä¸‹æœ‰æ•ˆ</td>
</tr>
</tbody></table>
<h3 id="jhat"><a href="#jhat" class="headerlink" title="jhat"></a>jhat</h3><p>ç”¨äºåˆ†æjmapç”Ÿæˆçš„å †è½¬å‚¨å¿«ç…§ã€‚ </p>
<blockquote>
<p>jhat heap.dump</p>
</blockquote>
<p>jhatåŠŸèƒ½ç›¸å¯¹ç®€é™‹ï¼Œåˆ†æå·¥ä½œè€—æ—¶ä¸”è€—è´¹ç¡¬ä»¶èµ„æºï¼Œä¸€èˆ¬ä¸åœ¨æœ¬æœºä½¿ç”¨ã€‚<br>æ›¿ä»£æ–¹æ¡ˆï¼šVisualVMã€Eclipse Memory Analyzerã€IBM HeapAnalyzerã€‚</p>
<h3 id="jstack"><a href="#jstack" class="headerlink" title="jstack"></a>jstack</h3><p>ç”Ÿæˆè™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ã€‚ç›®çš„æ˜¯å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ï¼Œå¦‚çº¿ç¨‹é—´æ­»é”ã€æ­»å¾ªç¯ã€è¯·æ±‚å¤–éƒ¨èµ„æºå¯¼è‡´çš„é•¿æ—¶é—´æŒ‚èµ·ç­‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line">    jstack [-l] &lt;pid&gt;</span><br><span class="line">        (to connect to running process)</span><br><span class="line">    jstack -F [-m] [-l] &lt;pid&gt;</span><br><span class="line">        (to connect to a hung process)</span><br><span class="line">    jstack [-m] [-l] &lt;executable&gt; &lt;core&gt;</span><br><span class="line">        (to connect to a core file)</span><br><span class="line">    jstack [-m] [-l] [server_id@]&lt;remote server IP or hostname&gt;</span><br><span class="line">        (to connect to a remote debug server)</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">    -F  to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung)</span><br><span class="line">    -m  to print both java and native frames (mixed mode)</span><br><span class="line">    -l  long listing. Prints additional information about locks</span><br><span class="line">    -h or -help to print this help message</span><br></pre></td></tr></table></figure>

<h2 id="é«˜çº§å·¥å…·"><a href="#é«˜çº§å·¥å…·" class="headerlink" title="é«˜çº§å·¥å…·"></a>é«˜çº§å·¥å…·</h2><h3 id="JConsole"><a href="#JConsole" class="headerlink" title="JConsole"></a>JConsole</h3><p>åŸºäºJMXçš„å¯è§†åŒ–ç›‘è§†ã€ç®¡ç†å·¥å…·ã€‚</p>
<h3 id="JHSDB"><a href="#JHSDB" class="headerlink" title="JHSDB"></a>JHSDB</h3><p>åŸºäºæœåŠ¡æ€§ä»£ç†å®ç°çš„è¿›ç¨‹å¤–è°ƒè¯•å·¥å…·ã€‚æœåŠ¡æ€§ä»£ç†æ˜¯HotSpotè™šæ‹Ÿæœºä¸­ä¸€ç»„ç”¨äºæ˜ å°„Javaè™šæ‹Ÿæœºè¿è¡Œä¿¡æ¯çš„ã€ä¸»è¦åŸºäºJavaè¯­è¨€å®ç°çš„APIé›†åˆã€‚<br><img src="/2020/06/16/%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/jhsdb.jpeg" alt="JCMD å’ŒJHSDBå·¥å…·å¯¹æ¯”"></p>
<h3 id="VisualVM"><a href="#VisualVM" class="headerlink" title="VisualVM"></a>VisualVM</h3><p>å¤šåˆä¸€æ•…éšœå¤„ç†å·¥å…·ï¼Œä¸éœ€è¦è¢«ç›‘è§†çš„ç¨‹åºåŸºäºç‰¹æ®ŠAgentæ‰§è¡Œï¼Œé€šç”¨æ€§å¼ºï¼Œå¯¹åº”ç”¨ç¨‹åºçš„å®é™…æ€§èƒ½å½±å“è¾ƒå°ï¼Œå¯ä»¥ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚</p>
<h3 id="Java-Mission-Control"><a href="#Java-Mission-Control" class="headerlink" title="Java Mission Control"></a>Java Mission Control</h3><p>å¯æŒç»­åœ¨çº¿ç›‘æ§å·¥å…·ã€‚</p>
<h3 id="arthas"><a href="#arthas" class="headerlink" title="arthas"></a>arthas</h3><p>é˜¿é‡Œå·´å·´æä¾›çš„æ€§èƒ½åˆ†æå·¥å…·<br><a href="https://alibaba.github.io/arthas/" target="_blank" rel="noopener">https://alibaba.github.io/arthas/</a></p>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/06/11/%E5%88%86%E5%B8%83%E5%BC%8FID/">
      åˆ†å¸ƒå¼IDç”Ÿæˆå™¨
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´6æœˆ11æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Centos-ç®€å•ä¼˜åŒ–"><a href="#Centos-ç®€å•ä¼˜åŒ–" class="headerlink" title="Centos ç®€å•ä¼˜åŒ–"></a>Centos ç®€å•ä¼˜åŒ–</h3><h5 id="å®‰è£…åŸºæœ¬å·¥å…·"><a href="#å®‰è£…åŸºæœ¬å·¥å…·" class="headerlink" title="å®‰è£…åŸºæœ¬å·¥å…·"></a>å®‰è£…åŸºæœ¬å·¥å…·</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget vim net-tools lrzsz</span><br></pre></td></tr></table></figure>

<h2 id="åˆ é™¤UUID"><a href="#åˆ é™¤UUID" class="headerlink" title="åˆ é™¤UUID"></a>åˆ é™¤UUID</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim ifcfg-ens33</span><br><span class="line">vim ifcfg-eth0</span><br><span class="line">vim em1</span><br></pre></td></tr></table></figure>


<h4 id="é…ç½®é™æ€IP"><a href="#é…ç½®é™æ€IP" class="headerlink" title="é…ç½®é™æ€IP"></a>é…ç½®é™æ€IP</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IPADDR&#x3D;10.0.0.130</span><br><span class="line">GATEWAY&#x3D;10.0.0.2</span><br><span class="line">NETMASK&#x3D;255.255.255.0</span><br><span class="line">DNS1&#x3D;10.0.0.2</span><br><span class="line">DNS2&#x3D;1.2.4.8</span><br></pre></td></tr></table></figure>

<h4 id="å…³é—­é˜²ç«å¢™ä»¥åŠNetworkManagerå’ŒSELINX"><a href="#å…³é—­é˜²ç«å¢™ä»¥åŠNetworkManagerå’ŒSELINX" class="headerlink" title="å…³é—­é˜²ç«å¢™ä»¥åŠNetworkManagerå’ŒSELINX"></a>å…³é—­é˜²ç«å¢™ä»¥åŠNetworkManagerå’ŒSELINX</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">systemctl stop NetworkManager</span><br><span class="line">systemctl disable NetworkManager</span><br></pre></td></tr></table></figure>

<h4 id="æ›¿æ¢YUMæº"><a href="#æ›¿æ¢YUMæº" class="headerlink" title="æ›¿æ¢YUMæº"></a>æ›¿æ¢YUMæº</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum clean all &amp;&amp; yum makecache</span><br><span class="line">cd &#x2F;etc&#x2F;yum.repos.d&#x2F;</span><br><span class="line">mv CentOS-Base.repo CentOS-Base.repo.bak</span><br><span class="line">vim CentOS-Base.repo</span><br></pre></td></tr></table></figure>


















      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/06/11/%E7%BC%96%E8%AF%91%E4%B8%8E%E4%BC%98%E5%8C%96/">
      ç¼–è¯‘ä¸ä¼˜åŒ–
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´6æœˆ11æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><ul>
<li>å‰ç«¯ç¼–è¯‘å™¨ï¼š JDKçš„Javac ã€EclipseJDTä¸­çš„å¢é‡å¼ç¼–è¯‘å™¨ï¼ˆECJï¼‰</li>
<li>å³æ—¶ç¼–è¯‘å™¨ï¼šHotSpotè™šæ‹Ÿæœºçš„C1\c2ç¼–è¯‘å™¨ã€Graalç¼–è¯‘å™¨</li>
<li>æå‰ç¼–è¯‘å™¨ï¼šJDKçš„Jaotcã€GNU Compiler for Java, Excelsisor JET.</li>
</ul>
<h3 id="å‰ç«¯ç¼–è¯‘å™¨"><a href="#å‰ç«¯ç¼–è¯‘å™¨" class="headerlink" title="å‰ç«¯ç¼–è¯‘å™¨"></a>å‰ç«¯ç¼–è¯‘å™¨</h3><p>ç¼–è¯‘è¿‡ç¨‹åˆ†ä¸º1ä¸ªå‡†å¤‡è¿‡ç¨‹å’Œ3ä¸ªå¤„ç†è¿‡ç¨‹ï¼š<br>1ï¼‰åˆå§‹åŒ–æ’å…¥å¼æ³¨è§£å¤„ç†å™¨<br>2ï¼‰è§£æä¸å¡«å……ç¬¦å·è¡¨</p>
<ul>
<li><p>è¯­æ³•ã€è¯æ³•åˆ†æ<br>è¯æ³•åˆ†ææ˜¯å°†æºä»£ç çš„å­—ç¬¦æµè½¬å˜ä¸ºæ ‡è®°é›†åˆçš„è¿‡ç¨‹ï¼Œå•ä¸ªå­—ç¬¦æ˜¯ç¨‹åºç¼–å†™çš„æœ€å°å…ƒç´ ï¼Œä½†æ ‡è®°æ‰æ˜¯ç¼–è¯‘æ—¶çš„æœ€å°å…ƒç´ ã€‚å…³é”®å­—ã€å˜é‡åã€å­—é¢é‡ã€è¿ç®—ç¬¦éƒ½å¯ä»¥ä½œä¸ºæ ‡è®°ã€‚</p>
<p>è¯­æ³•åˆ†ææ—¶æ ¹æ®æ ‡è®°åºåˆ—æ„é€ æŠ½è±¡è¯­æ³•æ ‘çš„è¿‡ç¨‹ï¼ŒæŠ½è±¡è¯­æ³•æ ‘æ˜¯ç”¨æ¥æè¿°ç¨‹åºä»£ç è¯­æ³•ç»“æ„çš„æ ‘å½¢è¡¨ç¤ºæ–¹å¼ï¼ŒæŠ½è±¡è¯­æ³•æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä»£è¡¨ç¨‹åºä»£ç ä¸­çš„ä¸€ä¸ªè¯­æ³•ç»“æ„ã€‚ä¾‹å¦‚åŒ…ã€ç±»å‹ã€ä¿®é¥°ç¬¦ã€è¿ç®—ç¬¦ã€æ¥å£ã€è¿”å›å€¼ã€ä»£ç æ³¨é‡Šç­‰ã€‚</p>
<p>ç»è¿‡è¯æ³•å’Œè¯­æ³•åˆ†æç”Ÿæˆè¯­æ³•æ ‘ä»¥åï¼Œç¼–è¯‘å™¨åç»­çš„æ“ä½œéƒ½å»ºç«‹åœ¨æŠ½è±¡è¯­æ³•æ ‘ä¹‹ä¸Šã€‚</p>
</li>
<li><p>å¡«å……ç¬¦å·è¡¨<br>ç¬¦å·è¡¨æ˜¯ä¸€ç»„ç¬¦å·åœ°å€å’Œç¬¦å·ä¿¡æ¯æ„æˆçš„æ•°æ®ç»“æ„ï¼Œç¬¦å·è¡¨ä¸­æ‰€ç™»è®°çš„ä¿¡æ¯åœ¨ç¼–è¯‘çš„ä¸åŒé˜¶æ®µéƒ½è¦è¢«ç”¨åˆ°ã€‚å¦‚ï¼Œåœ¨è¯­ä¹‰åˆ†æè¿‡ç¨‹ä¸­ï¼Œç¬¦å·è¡¨æ‰€ç™»è®°çš„å†…å®¹å°†ç”¨äºè¯­ä¹‰æ£€æŸ¥å’Œäº§ç”Ÿä¸­é—´ä»£ç ï¼Œåœ¨ç›®æ ‡ä»£ç ç”Ÿæˆé˜¶æ®µï¼Œå¯¹ç¬¦å·åè¿›è¡Œåœ°å€åˆ†é…æ—¶ï¼Œç¬¦å·è¡¨æ˜¯åœ°å€è§£æåˆ†é…çš„ç›´æ¥ä¾æ®ã€‚</p>
</li>
</ul>
<p>3ï¼‰æ³¨è§£å¤„ç†å™¨<br>  æ’å…¥å¼æ³¨è§£å¤„ç†å™¨å¯ä»¥æå‰è‡³ç¼–è¯‘æœŸå¯¹ä»£ç ä¸­çš„ç‰¹å®šæ³¨è§£è¿›è¡Œå¤„ç†ï¼Œä»è€Œå½±å“åˆ°å‰ç«¯ç¼–è¯‘å™¨ï¼ˆjavacï¼‰çš„å·¥ä½œè¿‡ç¨‹ã€‚</p>
<p>  å¦‚æœåœ¨å¤„ç†æ³¨è§£æœŸé—´å¯¹è¯­æ³•æ ‘è¿›è¡Œè¿‡ä¿®æ”¹ï¼Œç¼–è¯‘å™¨å°†å›åˆ°è§£æä»¥åŠå¡«å……ç¬¦å·è¡¨çš„è¿‡ç¨‹é‡æ–°å¤„ç†ï¼ŒçŸ¥é“æ‰€æœ‰æ’å…¥å¼æ³¨è§£å¤„ç†å™¨éƒ½æ²¡æœ‰å†å¯¹è¯­æ³•æ ‘è¿›è¡Œä¿®æ”¹ä½ç½®ï¼Œæ¯æ¬¡å¾ªç¯ç§°ä¸ºä¸€ä¸ªè½®æ¬¡ã€‚</p>
<p>4ï¼‰è¯­ä¹‰åˆ†æä¸å­—èŠ‚ç ç”Ÿæˆ</p>
<p>è¯­ä¹‰åˆ†æè¿‡ç¨‹åˆ†ä¸ºæ ‡æ³¨æ£€æŸ¥å’Œæ•°æ®ä»¥åŠæ§åˆ¶æµåˆ†æä¸¤ä¸ªæ­¥éª¤ã€‚</p>
<p>åœ¨ç»è¿‡è¯­æ³•åˆ†æåï¼Œç¼–è¯‘å™¨è·å¾—äº†ç¨‹åºä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘è¡¨ç¤ºï¼ŒæŠ½è±¡è¯­æ³•æ ‘èƒ½å¤Ÿè¡¨ç¤ºä¸€ä¸ªç»“æ„æ­£ç¡®çš„æºç¨‹åºï¼Œä½†æ— æ³•ä¿è¯æºç¨‹åºçš„è¯­ä¹‰æ˜¯ç¬¦åˆé€»è¾‘çš„ã€‚è€Œè¯­ä¹‰åˆ†æçš„ä¸»è¦ä»»åŠ¡åˆ™æ˜¯å¯¹ç»“æ„ä¸Šæ­£ç¡®çš„æºç¨‹åºè¿›è¡Œä¸Šä¸‹æ–‡ç›¸å…³æ€§è´¨çš„æ£€æŸ¥ï¼Œè­¬å¦‚è¿›è¡Œç±»å‹æ£€æŸ¥ã€æ§åˆ¶æµæ£€æŸ¥ã€æ•°æ®æµæ£€æŸ¥ç­‰ç­‰ã€‚</p>
<ul>
<li><p>æ ‡æ³¨æ£€æŸ¥<br>æ£€æŸ¥çš„å†…å®¹åŒ…æ‹¬å˜é‡æ˜¯ç”¨é’±æ˜¯å¦å·²ç»è¢«å£°æ˜ã€å˜é‡ä¸èµ‹å€¼ä¹‹é—´çš„æ•°æ®ç±»å‹æ˜¯å¦èƒ½å¤ŸåŒ¹é…ç­‰ç­‰ã€‚<br>å¸¸é‡æŠ˜å ï¼šint a = 1 + 1 ; ==&gt;  int a = 2;</p>
</li>
<li><p>æ•°æ®æµä»¥åŠæ§åˆ¶æµåˆ†æ<br>æ•°æ®æµåˆ†æä»¥åŠæ§åˆ¶æµåˆ†ææ˜¯å¯¹ç¨‹åºä¸Šä¸‹æ–‡é€»è¾‘æ›´è¿›ä¸€æ­¥çš„éªŒè¯ï¼Œå®ƒå¯ä»¥æ£€æŸ¥å‡ºè¯¸å¦‚ç¨‹åºå±€éƒ¨å˜é‡åœ¨ä½¿ç”¨å‰æ˜¯å¦æœ‰èµ‹å€¼ã€æ–¹æ³•çš„æ¯æ¡è·¯å¾„æ˜¯å¦éƒ½æœ‰è¿”å›å€¼ã€æ˜¯å¦æ‰€æœ‰çš„å—æ£€æŸ¥å¼‚å¸¸éƒ½è¢«æ­£ç¡®å¤„ç†äº†ç­‰é—®é¢˜ã€‚<br>ç¼–è¯‘å™¨çš„æ•°æ®ä»¥åŠæ§åˆ¶æµåˆ†æä¸ç±»åŠ è½½æ—¶çš„æ•°æ®ä»¥åŠæ§åˆ¶æµåˆ†æçš„ç›®çš„åŸºæœ¬å“ˆæ¡‘ä¸€è‡´ï¼Œä½†æ˜¯æ ¡éªŒèŒƒå›´æœ‰æ‰€åŒºåˆ«ã€‚</p>
</li>
<li><p>è§£è¯­æ³•ç³–<br>Javaè¯­è¨€çš„è¯­æ³•ç³–åŒ…å«æ³›å‹ã€å˜é•¿å‚æ•°ã€è‡ªåŠ¨è£…ç®±æ‹†ç®±ç­‰ï¼ŒJavaè™šæ‹Ÿæœºåœ¨è¿è¡Œæ—¶å¹¶ä¸çŸ¥èŠ‚æ”¯æŒè¿™äº›è¯­æ³•ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘é˜¶æ®µè¢«è¿˜åŸå›åŸå§‹çš„åŸºç¡€è¯­æ³•ç»“æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè§£è¯­æ³•ç³–ã€‚</p>
</li>
<li><p>å­—èŠ‚ç ç”Ÿæˆ</p>
<p>å­—èŠ‚ç ç”Ÿæˆé˜¶æ®µéœ€è¦æŠŠå‰é¢å“¥å“¥æ­¥éª¤ç”Ÿæˆçš„ä¿¡æ¯è½¬åŒ–æˆå­—èŠ‚ç æŒ‡ä»¤å†™åˆ°ç£ç›˜ä¸­å¤–ï¼Œè¿˜è¦è¿›è¡Œå°‘é‡çš„ä»£ç æ·»åŠ å’Œè½¬æ¢å·¥ä½œã€‚<br>å¦‚å®ä¾‹æ„é€ å™¨&lt;init&gt;()æ–¹æ³•å’Œ&lt;cinit&gt;()æ–¹æ³•çš„æ·»åŠ ã€‚<br>å¦‚æœç”¨æˆ·ä»£ç ä¸­æ²¡æœ‰æä¾›ä»»ä½•æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†ä¼šæ·»åŠ ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„ã€å¯è®¿é—®æ€§ä¸å½“å‰ç±»å‹ä¸€è‡´çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªå·¥ä½œåœ¨å¡«å……ç¬¦å·è¡¨é˜¶æ®µå·²ç»å®Œæˆã€‚</p>
<p>ç¼–è¯‘å™¨ä¼šæŠŠè¯­å¥å—ã€å˜é‡å˜é‡åˆå§‹åŒ–ã€è°ƒç”¨çˆ¶ç±»çš„å®ä¾‹æ„é€ å™¨æ–¹ç­‰æ“ä½œæ”¶æ•›åˆ°&lt;init&gt;()å’Œ&lt;cinit&gt;()æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”ä¿è¯æ— è®ºæºç ä¸­å‡ºç°çš„é¡ºåºå¦‚ä½•ï¼Œéƒ½ä¸€å®šæ˜¯æŒ‰å…ˆæ‰§è¡Œçˆ¶ç±»çš„å®ä¾‹æ„é€ å™¨ï¼Œç„¶ååˆå§‹åŒ–å˜é‡ï¼Œæœ€åæ‰§è¡Œè¯­å¥å—çš„é¡ºåºæ‰§è¡Œï¼Œ</p>
</li>
</ul>
<p><img src="/2020/06/11/%E7%BC%96%E8%AF%91%E4%B8%8E%E4%BC%98%E5%8C%96/javac.jpeg" alt></p>
<h3 id="è¯­æ³•ç³–"><a href="#è¯­æ³•ç³–" class="headerlink" title="è¯­æ³•ç³–"></a>è¯­æ³•ç³–</h3><p>æ³›å‹ã€è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±ã€éå†å¾ªç¯ã€å˜é•¿å‚æ•°å’Œæ¡ä»¶ç¼–è¯‘ã€å†…éƒ¨ç±»ã€æšä¸¾ç±»ã€æ–­è¨€ã€æ•°å€¼ç›´é¢é‡ã€æšä¸¾å’Œå­—ç¬¦ä¸²çš„switchã€try with resourceï¼Œ lambdaç­‰ã€‚</p>
<h4 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h4><p>ç±»å‹æ“¦é™¤</p>
<h4 id="è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å’Œå¾ªç¯éå†"><a href="#è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å’Œå¾ªç¯éå†" class="headerlink" title="è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å’Œå¾ªç¯éå†"></a>è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å’Œå¾ªç¯éå†</h4><p>1ï¼‰å¤§äº127çš„å€¼ä¸ä¼šè‡ªåŠ¨æ‹†ç®±<br>2ï¼‰æ²¡æœ‰é‡åˆ°è¿ç®—ç¬¦çš„æƒ…å†µä¸‹ä¸ä¼šè‡ªåŠ¨æ‹†ç®±<br>3ï¼‰equalsæ–¹æ³•ä¸å¤„ç†æ•°æ®è½¬å‹</p>
<h4 id="å˜é•¿å‚æ•°"><a href="#å˜é•¿å‚æ•°" class="headerlink" title="å˜é•¿å‚æ•°"></a>å˜é•¿å‚æ•°</h4><h3 id="æ¡ä»¶ç¼–è¯‘"><a href="#æ¡ä»¶ç¼–è¯‘" class="headerlink" title="æ¡ä»¶ç¼–è¯‘"></a>æ¡ä»¶ç¼–è¯‘</h3><p>Javaç¼–è¯‘å™¨å°†æ‰€æœ‰ç¼–è¯‘ä½†æ„¿çš„è¯­æ³•æ ‘é¡¶çº§èŠ‚ç‚¹è¾“å…¥åˆ°å¾…å¤„ç†åˆ—è¡¨åå†è¿›è¡Œç¼–è¯‘ï¼Œå› æ­¤å„ä¸ªæ–‡ä»¶ä¹‹é—´å¯ä»¥äº’ç›¸æä¾›ç¬¦å·ä¿¡æ¯ã€‚</p>
<p>æ ¹æ®æ¡ä»¶ä¸­å¸ƒå°”å€¼å¸¸é‡å€¼çš„çœŸå‡ï¼Œç¼–è¯‘å™¨å°†æŠŠåˆ†æ”¯ä¸­ä¸æˆç«‹çš„ä»£ç å—æ¶ˆé™¤æ‰ã€‚</p>
<h2 id="åç«¯ç¼–è¯‘"><a href="#åç«¯ç¼–è¯‘" class="headerlink" title="åç«¯ç¼–è¯‘"></a>åç«¯ç¼–è¯‘</h2><p>å½“ç¨‹åºéœ€è¦è¿…é€Ÿå¯åŠ¨å’Œæ‰§è¡Œçš„æ—¶å€™ï¼Œè§£é‡Šå™¨å¯ä»¥é¦–å…ˆå‘æŒ¥ä½œç”¨ï¼Œçœå»ç¼–è¯‘çš„æ—¶é—´ï¼Œç«‹å³è¿è¡Œã€‚<br>å½“ç¨‹åºè¿è¡Œç¯å¢ƒä¸­å†…å­˜èµ„æºé™åˆ¶è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨è§£é‡Šæ‰§è¡ŒèŠ‚çº¦å†…å­˜ã€‚<br>å½“ç¨‹åºå¯åŠ¨ä»¥åï¼Œç¼–è¯‘å™¨é€æ¸å‘æŒ¥ä½œç”¨ï¼ŒæŠŠè¶Šæ¥è¶Šå¤šçš„ä»£ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼Œå‡å°‘è§£é‡Šå™¨çš„ä¸­é—´æŸè€—ï¼Œè·å¾—æ›´é«˜çš„æ•ˆç‡ã€‚</p>
<h3 id="å³æ—¶ç¼–è¯‘å™¨"><a href="#å³æ—¶ç¼–è¯‘å™¨" class="headerlink" title="å³æ—¶ç¼–è¯‘å™¨"></a>å³æ—¶ç¼–è¯‘å™¨</h3><p>å³æ—¶ç¼–è¯‘å™¨å°†è¿è¡Œæ¯”è¾ƒé¢‘ç¹çš„ä»£ç å—æˆ–è€…æ–¹æ³•ç¼–è¯‘æˆæœ¬åœ°æœºå™¨å—ï¼Œå¹¶ä¸”å¯¹è¿™æ®µä»£ç è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>åœ¨Hotspotä¸­å†…ç½®äº†2ä¸ªå³æ—¶ç¼–è¯‘å™¨ Client Compilerã€ Server Compilerã€‚ è™šæ‹Ÿæœºä¼šæ ¹æ®è‡ªèº«ç‰ˆæœ¬ä¸å®¿ä¸»æœºçš„ç¡¬ä»¶æ€§èƒ½è‡ªåŠ¨é€‰æ‹©è¿è¡Œæ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨-client æˆ–è€… -Server æ¥å¼ºåˆ¶æŒ‡å®šè™šæ‹Ÿæœºè¿è¡Œåœ¨å®¢æˆ·ç«¯æ¨¡å¼æˆ–è€…æœåŠ¡ç«¯æ¨¡å¼ã€‚</p>
<p>è§£é‡Šæ¨¡å¼(Interperted Mode)ï¼š-Xint<br>ç¼–è¯‘æ¨¡å¼(Compiled Mode): -Xcomp<br>æ··åˆæ¨¡å¼(Mixed Mode): -Xmixed (é»˜è®¤)</p>
<p>ç¼–è¯‘å™¨ç¼–è¯‘æœ¬åœ°ä»£ç éœ€è¦å ç”¨ç¨‹åºè¿è¡Œæ—¶é—´ï¼Œä½äº†æ‰“åˆ°å“åº”é€Ÿåº¦ä¸è¿è¡Œæ•ˆç‡ä¹‹é—´æ‰“åˆ°æœ€ä½³å¹³è¡¡ï¼ŒHotSpotåœ¨ç¼–è¯‘å­ç³»ç»Ÿä¸­åŠ å…¥äº†åˆ†å±‚ç¼–è¯‘çš„åŠŸèƒ½ã€‚åˆ†å±‚ç¼–è¯‘æ ¹æ®ç¼–è¯‘å™¨ç¼–è¯‘ã€ä¼˜åŒ–çš„è§„æ¨¡ä¸è€—æ—¶ï¼Œåˆ’åˆ†å‡ºä¸åŒçš„ç¼–è¯‘å±‚æ¬¡ï¼š<br>ç¬¬0å±‚ï¼Œç¨‹åºæ˜¥è§£é‡Šæ‰§è¡Œï¼Œå¹¶ä¸”è§£é‡Šå™¨ä¸å¼€å¯æ€§èƒ½ç›‘æ§ã€‚<br>ç¬¬ä¸€å±‚ï¼šä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç ï¼Œè¿›è¡Œç®€å•å¯é çš„ç¨³å®šä¼˜åŒ–ï¼Œä¸å¼€å¯æ€§èƒ½ç›‘æ§åŠŸèƒ½ã€‚<br>ç¬¬äºŒå±‚ï¼šä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨æ‰§è¡Œï¼Œä»…å¼€å¯æ–¹æ³•ä»¥åŠå›è¾¹æ¬¡æ•°ç»Ÿè®¡ç­‰ä¼˜å…ˆçš„æ€§èƒ½ç›‘æ§åŠŸèƒ½ã€‚<br>ç¬¬ä¸‰å±‚ï¼šä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨æ‰§è¡Œï¼Œå¼€å¯å…¨éƒ¨æ€§èƒ½ç›‘æ§ï¼Œé™¤äº†ç¬¬2å±‚çš„ç—›å°±ä¹‹å¤–ï¼Œè¿˜ä¼šæ”¶é›†å¦‚åˆ†æ”¯è·³è½¬ã€è™šæ–¹æ³•è°ƒç”¨ç‰ˆæœ¬ç­‰å…¨éƒ¨çš„ç»Ÿè®¡ä¿¡æ¯ã€‚<br>ç¬¬å››å±‚ï¼šä½¿ç”¨æœåŠ¡ç«¯ç¼–è¯‘å™¨å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç ï¼ŒæœåŠ¡ç«¯ç¼–è¯‘å™¨ä¼šå¯ç”¨æ›´å¤šç¼–è¯‘è€—æ—¶æ›´é•¿çš„ä¼˜åŒ–ï¼Œè¿˜ä¼šæ ¹æ®æ€§èƒ½ç›‘æ§ä¿¡æ¯è¿›è¡Œä¸€äº›ä¸å¯é çš„æ¿€è¿›ä¼˜åŒ–ã€‚</p>
<p>å®æ–½åˆ†å±‚ç¼–è¯‘åï¼Œ è§£é‡Šå™¨ã€å®¢æˆ·ç«¯ç¼–è¯‘å™¨å’ŒæœåŠ¡ç«¯ç¼–è¯‘å™¨å°±ä¼šåŒæ—¶å·¥ä½œï¼Œçƒ­ç‚¹ä»£ç éƒ½å¯èƒ½ä¼šè¢«å¤šæ¬¡ç¼–è¯‘ï¼Œç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨è·å¾—æ›´é«˜çš„ç¼–è¯‘é€Ÿåº¦ï¼Œç”¨æœåŠ¡ç«¯ç¼–è¯‘å™¨æ¥è·å–æ›´å¥½çš„ç¼–è¯‘è´¨é‡ï¼Œåœ¨è§£é‡Šæ‰§è¡Œçš„æ—¶å€™ä¹Ÿæ— éœ€é¢å¤–æ‰¿æ‹…æ‰‹æœºæ€§èƒ½ç›‘æ§ä¿¡æ¯çš„ä»»åŠ¡ï¼Œè€Œåœ¨æœåŠ¡ç«¯ç¼–è¯‘å™¨é‡‡ç”¨é«˜å¤æ‚åº¦çš„ä¼˜åŒ–ç®—æ³•æ—¶ï¼Œ å®¢æˆ·ç«¯ç¼–è¯‘å™¨å¯å…ˆé‡‡ç”¨ç®€å•ä¼˜åŒ–æ¥ä¸ºå®ƒäº‰å–æ›´å¤šçš„ç¼–è¯‘æ—¶é—´ã€‚</p>
<h4 id="ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶"><a href="#ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶" class="headerlink" title="ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶"></a>ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶</h4><p>è¢«ç¼–è¯‘çš„çƒ­ç‚¹ä»£ç æœ‰ï¼šè¢«å¤šæ¬¡è°ƒç”¨çš„æ–¹æ³•å’Œè¢«å¤šæ¬¡æ‰§è¡Œçš„å¾ªç¯ä½“ã€‚è¿™ä¸¤ç§æƒ…å†µç¼–è¯‘çš„ç›®æ ‡å¯¹è±¡éƒ½æ˜¯æ•´ä¸ªæ–¹æ³•ä½“ï¼Œè€Œä¸æ˜¯å•ç‹¬çš„å¾ªç¯ä½“ã€‚</p>
<h4 id="åŸºäºé‡‡æ ·çš„çƒ­ç‚¹æ¢æµ‹"><a href="#åŸºäºé‡‡æ ·çš„çƒ­ç‚¹æ¢æµ‹" class="headerlink" title="åŸºäºé‡‡æ ·çš„çƒ­ç‚¹æ¢æµ‹"></a>åŸºäºé‡‡æ ·çš„çƒ­ç‚¹æ¢æµ‹</h4><p>å‘¨æœŸæ€§çš„æ£€æŸ¥çº¿ç¨‹çš„è°ƒç”¨æ ˆé¡¶ï¼Œå¦‚æœå‘ç°æŸä¸ªæ–¹æ³•ç»å¸¸å‡ºç°åœ¨æ ˆé¡¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±æ˜¯çƒ­ç‚¹æ–¹æ³•ã€‚<br>ä¼˜ç‚¹ï¼šç®€å•é«˜æ•ˆï¼Œå®¹æ˜“è·å–æ–¹æ³•çš„è°ƒç”¨å…³ç³»<br>ç¼ºç‚¹ï¼šä¸èƒ½ç²¾ç¡®ç¡®è®¤æ–¹æ³•çš„å¿ç¹ï¼Œå®¹æ˜“å—åˆ°çº¿ç¨‹é˜»å¡æˆ–è€…å¤–ç•Œå› ç´ å½±å“æ‰°ä¹±çƒ­ç‚¹æ¢æµ‹ã€‚</p>
<h4 id="åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹"><a href="#åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹" class="headerlink" title="åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹"></a>åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹</h4><p>ä¸ºæ¯ä¸ªæ–¹æ³•å»ºç«‹è®¡æ•°å™¨ï¼Œç»Ÿè®¡æ–¹æ³•çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šçš„é˜ˆå€¼å°±è®¤ä¸ºå®ƒæ˜¯çƒ­ç‚¹æ–¹æ³•ã€‚<br>ä¼˜ç‚¹ï¼šç»“æœç²¾ç¡®ä¸¥è°¨<br>ç¼ºç‚¹ï¼šæ¯ä¸ªæ–¹æ³•å»ºç«‹å¹¶ç»´æŠ¤è®¡æ•°å™¨ï¼Œä¸èƒ½ç›´æ¥è·å–åˆ°æ–¹æ³•çš„è°ƒç”¨å…³ç³»ã€‚<br>HotSpotä¸ºæ¯ä¸ªæ–¹æ³•å‡†å¤‡äº†ä¸¤ç±»è®¡æ•°å™¨ï¼šæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨å’Œå›è¾¹è®¡æ•°å™¨ï¼ˆåœ¨å¾ªç¯è¾¹ç•Œå¾€å›è·³ï¼‰,å½“è°ƒç”¨æ¬¡æ•°è¶…è¿‡è®¾å®šçš„é˜ˆå€¼ï¼Œå°±ä¼šè§¦å‘å³æ—¶ç¼–è¯‘ã€‚<br>-XX:CompileThreshold æ¥è®¾å®šè§¦å‘å³æ—¶ç¼–è¯‘çš„é˜ˆå€¼ã€‚<br>é»˜è®¤è®¾ç½®ä¸‹ï¼Œæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ç»Ÿè®¡çš„æ˜¯ç›¸å¯¹æ‰§è¡Œç“¶ç»¿ï¼Œå½“ä¸€ä¸ªæ—¶é—´æ®µå†…è°ƒç”¨æ¬¡æ•°ä¸è¶³ä»¥æäº¤å³æ—¶ç¼–æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è®¡æ•°å™¨å°±ä¼šè¢«å‡åŠï¼ˆè¡°å‡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨-XX:-UseCounterDecayå…³é—­çƒ­åº¦è¡°å‡ã€‚å¯ä»¥è®¾ç½®-XX:CounterHalfLifeTimeè®¾ç½®åŠè¡°å‘¨æœŸçš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚</p>
<p>å½“æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦è¢«å³ä½¿ç¼–è¯‘å™¨ç¼–è¯‘è¿‡ï¼Œæ˜¯åˆ™ä¼˜å…ˆä½¿ç”¨ç¼–è¯‘åçš„ç‰ˆæœ¬æ‰§è¡Œï¼Œå¦åˆ™å°†æ–¹æ³•è°ƒç”¨çš„è®¡æ•°å™¨åŠ ä¸€ï¼Œç„¶ååˆ¤æ–­æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ä¸å›è¾¹è®¡æ•°å™¨å€¼ä¹‹å’Œæ˜¯å¦è¶…è¿‡é˜ˆå€¼ï¼Œè¶…è¿‡åˆ™åƒå³æ—¶ç¼–è¯‘å™¨æäº¤è¯¥æ–¹æ³•çš„ä»£ç ç¼–è¯‘è¯·æ±‚ã€‚<br>å¦‚æœæ²¡æœ‰åšè¿‡ä»»ä½•è®¾ç½®ï¼Œæ‰§è¡Œå¼•æ“é»˜è®¤ä¸ä¼šåŒæ­¥ç­‰å¾…ç¼–è¯‘è¯·æ±‚å®Œæˆï¼Œè€Œæ˜¯ç»§ç»­è¿›å…¥è§£é‡Šå™¨æŒ‰ç…§è§£é‡Šæ–¹å¼æ‰§è¡Œå­—èŠ‚ç ï¼Œç›´åˆ°æäº¤çš„è¯·æ±‚è¢«å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘å®Œæˆã€‚å½“ç¼–è¯‘å·¥ä½œå®Œæˆåï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨å…¥å£åœ°å€ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æ”¹å†™æˆæ–°å€¼ï¼Œä¸‹æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶å°±ä¼šä½¿ç”¨å·²ç¼–è¯‘ç‰ˆæœ¬ã€‚</p>
<p><img src="/2020/06/11/%E7%BC%96%E8%AF%91%E4%B8%8E%E4%BC%98%E5%8C%96/comp.jpeg" alt="æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ è§¦å‘å³æ—¶ç¼–è¯‘"></p>
<p>å›è¾¹è®¡æ•°å™¨ï¼šç»Ÿè®¡ä¸€ä¸ªæ–¹æ³•ä¸­å¾ªç¯ä½“ä»£ç æ‰§è¡Œçš„æ¬¡æ•°ï¼Œåœ¨å­—èŠ‚ç ä¸­é‡åˆ°æ§åˆ¶æµå‘åè·³è½¬çš„æŒ‡ä»¤ç§°ä¸ºâ€œå›è¾¹â€,å›è¾¹è®¡æ•°å™¨çš„ç›®çš„æ˜¯ä¸ºäº†è§¦å‘æ ˆä¸Šçš„æ›¿æ¢ç¼–è¯‘ã€‚å›è¾¹è®¡æ•°å™¨æ²¡æœ‰çƒ­åº¦è¡°å‡è¿‡ç¨‹ã€‚</p>
<h3 id="ç¼–è¯‘è¿‡ç¨‹"><a href="#ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç¼–è¯‘è¿‡ç¨‹"></a>ç¼–è¯‘è¿‡ç¨‹</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–¹æ³•è°ƒç”¨äº§ç”Ÿçš„æ ‡å‡†ç¼–è¯‘è¯·æ±‚å’Œæ ˆä¸Šæ›¿æ¢ç¼–è¯‘è¯·æ±‚ï¼Œåœ¨è™šæ‹Ÿæœºç¼–è¯‘å™¨æœªå®Œæˆç¼–è¯‘ä¹‹å‰ï¼Œéƒ½å°†æŒ‰ç…§è§£é‡Šæ–¹å¼æ‰§è¡Œä»£ç ï¼Œç¼–è¯‘åŠ¨ä½œåœ¨åå°çš„ç¼–è¯‘çº¿ç¨‹å®Œæˆã€‚<br>è®¾ç½®-XX:-BackgroundCompilationç¦æ­¢åå°ç¼–è¯‘ï¼Œç¦æ­¢åè§¦å‘å³æ—¶ç¼–è¯‘æ¡ä»¶æ—¶ï¼Œæ‰§è¡Œçº¿ç¨‹å‘è™šæ‹Ÿæœºæäº¤ç¼–è¯‘è¯·æ±‚åä¸€è‡´é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°ç¼–è¯‘è¿‡ç¨‹å®Œæˆåå†å¼€å§‹æ‰§è¡Œç¼–è¯‘å™¨è¾“å‡ºçš„æœ¬åœ°ä»£ç ã€‚</p>
<p>æœåŠ¡ç«¯ç¼–è¯‘å™¨æ•ˆç‡è¾ƒä½ï¼Œä½†æ˜¯ç¼–è¯‘é€Ÿåº¦è¿œè¶…ä¼ ç»Ÿçš„é™æ€ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œç›¸å¯¹äºå®¢æˆ·ç«¯ç¼–è¯‘å™¨ç¼–è¯‘è¾“å‡ºçš„ä»£ç è´¨é‡æœ‰å¾ˆå¤§çš„æäº¤ï¼Œå¯ä»¥å¤§å¹…é™ä½æœ¬åœ°ä»£ç çš„æ‰§è¡Œæ—¶é—´ï¼Œä»è€ŒæŠµæ¶ˆæ‰é¢å¤–çš„ç¼–è¯‘æ°´é—´å¼€é”€ã€‚</p>
<h3 id="å³æ—¶ç¼–è¯‘çš„ç¼ºç‚¹"><a href="#å³æ—¶ç¼–è¯‘çš„ç¼ºç‚¹" class="headerlink" title="å³æ—¶ç¼–è¯‘çš„ç¼ºç‚¹"></a>å³æ—¶ç¼–è¯‘çš„ç¼ºç‚¹</h3><p>1ï¼‰å ç”¨ç¨‹åºè¿è¡Œæ—¶é—´<br>2ï¼‰å ç”¨ç¨‹åºè¿ç®—èµ„æº</p>
<h2 id="æå‰ç¼–è¯‘å™¨"><a href="#æå‰ç¼–è¯‘å™¨" class="headerlink" title="æå‰ç¼–è¯‘å™¨"></a>æå‰ç¼–è¯‘å™¨</h2><p>æå‰ç¼–è¯‘å™¨çš„åˆ†æ”¯ï¼š<br>ä¸ä¼ ç»ŸCã€C++ç¼–è¯‘å™¨ç±»ä¼¼ï¼Œåœ¨ç¨‹åºè¿è¡Œä¹‹å‰æŠŠç¨‹åºä»£ç ç¼–è¯‘æˆæœºå™¨ç çš„é™æ€ç¿»è¯‘å·¥ä½œï¼›<br>æŠŠåŸæœ¬å³æ—¶ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶è¦åšçš„ç¼–è¯‘å·¥ä½œæå‰åšå¥½å¹¶ä¿å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡è¿è¡Œåˆ°è¿™äº›ä»£ç æ—¶ç›´æ¥åŠ è½½è¿›æ¥ä½¿ç”¨ã€‚</p>
<h2 id="ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯"><a href="#ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯" class="headerlink" title="ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯"></a>ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯</h2><h3 id="æ–¹æ³•å†…è”"><a href="#æ–¹æ³•å†…è”" class="headerlink" title="æ–¹æ³•å†…è”"></a>æ–¹æ³•å†…è”</h3><p>æœ€é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<h3 id="é€ƒé€¸åˆ†æ"><a href="#é€ƒé€¸åˆ†æ" class="headerlink" title="é€ƒé€¸åˆ†æ"></a>é€ƒé€¸åˆ†æ</h3><p>æœ€å‰æ²¿çš„ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<ul>
<li><p>æ ˆä¸Šåˆ†é…<br>æ”¯æŒæ–¹æ³•é€ƒé€¸ï¼Œä½†ä¸æ”¯æŒçº¿ç¨‹é€ƒé€¸</p>
</li>
<li><p>æ ‡é‡æ›¿æ¢<br>å¦‚æœä¸€ä¸ªæ•°æ®å·²ç»æ— æ³•åœ¨åˆ†è§£ä¸ºæ›´å°çš„æ•°æ®è¡¨ç¤ºæ—¶ï¼ˆåŸå§‹æ•°æ®ç±»å‹ï¼‰ï¼Œè¿™äº›æ•°æ®å°±å¯ä»¥ç§°ä¸ºæ ‡é‡ã€‚<br>æ ‡é‡æ›¿æ¢å°±æ˜¯å°†ç”¨åˆ°çš„æˆå‘˜å˜é‡æ¢å¤ä¸ºåŸå§‹ç±»å‹æ¥è®¿é—®çš„è¿‡ç¨‹ã€‚<br>åŠ å…¥é€ƒé€¸åˆ†æå¯ä»¥è¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«æ–¹æ³•å¤–éƒ¨è®¿é—®ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«æ‹†æ•£ï¼Œé‚£ä¹ˆç¨‹åºçœŸæ­£æ‰§è¡Œçš„æ—¶å€™å¯èƒ½ä¸å»åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ”¹ä¸ºç›´æ¥åˆ›å»ºå®ƒçš„è‹¥å¹²ä¸ªè¢«è¿™ä¸ªçš„æ–¹æ³•ä½¿ç”¨çš„æˆå‘˜å˜é‡æ¥æ›¿ä»£ï¼Œæˆå‘˜å˜é‡å­˜å‚¨åœ¨æ ˆä¸Šã€‚</p>
<p>åŒæ­¥æ¶ˆé™¤ï¼šå¦‚æœé€ƒé€¸åˆ†æèƒ½å¤Ÿç¡®å®šä¸€ä¸ªå˜é‡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ï¼Œæ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡çš„è¯»å†™è‚¯å®šä¸ä¼šæœ‰ç«äº‰ï¼Œå¯¹è¿™ä¸ªå˜é‡çš„åŒæ­¥æªæ–½ä¹Ÿå¯ä»¥å®‰å…¨åœ°æ¶ˆé™¤æ‰ã€‚</p>
</li>
</ul>
<h3 id="å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤"><a href="#å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤" class="headerlink" title="å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤"></a>å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤</h3><p>è¯­è¨€æ— å…³çš„ç»å…¸ä¼˜åŒ–æŠ€æœ¯ã€‚å¦‚æœä¸€ä¸ªè¡¨è¾¾å¼Eä¹‹å‰å·²ç»è¢«è®¡ç®—è¿‡ï¼Œå¹¶ä¸”ä»å…ˆå‰çš„è®¡ç®—åˆ°ç°åœ¨Eä¸­æ‰€æœ‰å˜é‡çš„å€¼éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆEçš„è¿™æ¬¡å‡ºç°å°±ç§°ä¸ºå…¬å…±å­è¡¨è¾¾å¼ã€‚</p>
<h3 id="æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤"><a href="#æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤" class="headerlink" title="æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤"></a>æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤</h3><p>è¯­è¨€ç›¸å…³çš„ç»å…¸ä¼˜åŒ–æŠ€æœ¯ã€‚</p>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/">
      å†…å­˜åˆ†é…ä¸å›æ”¶
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://pickonebyone.github.io" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>June</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>å‘å¸ƒäºï¼š2020å¹´6æœˆ10æ—¥</p>
  </a>
</div>

            
          
            
              

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <p>JavaæŠ€æœ¯ä½“ç³»çš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœ€æ ¹æœ¬ç›®æ ‡æ˜¯è‡ªåŠ¨åŒ–åœ°ç»™å¯¹è±¡åˆ†é…å†…å­˜ä»¥åŠè‡ªåŠ¨å›æ”¶åˆ†é…ç»™å¯¹è±¡çš„å†…å­˜ã€‚<br>ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æœªè§„å®šæ–°å¯¹è±¡çš„åˆ›å»ºå’Œå­˜å‚¨ç»†èŠ‚ï¼Œè¿™å–å†³äºè™šæ‹Ÿæœºå½“å‰ä½¿ç”¨çš„æ˜¯å“ªç§åƒåœ¾æ”¶é›†å™¨ï¼Œä»¥åŠè™šæ‹Ÿæœºä¸­ä¸å†…å­˜ç›¸å…³çš„å‚æ•°è®¾å®šã€‚</p>
<h2 id="HotSpotè™šæ‹Ÿæœºä¸­å¯¹è±¡çš„åˆ†é…åŸåˆ™"><a href="#HotSpotè™šæ‹Ÿæœºä¸­å¯¹è±¡çš„åˆ†é…åŸåˆ™" class="headerlink" title="HotSpotè™šæ‹Ÿæœºä¸­å¯¹è±¡çš„åˆ†é…åŸåˆ™"></a>HotSpotè™šæ‹Ÿæœºä¸­å¯¹è±¡çš„åˆ†é…åŸåˆ™</h2><h4 id="å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…"><a href="#å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…" class="headerlink" title="å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…"></a>å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…</h4><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡åœ¨æ–°ç”Ÿä»£EdenåŒºä¸­åˆ†é…ã€‚ å½“EdenåŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºå°†å‘èµ·ä¸€æ¬¡minorGCã€‚<br>å½“survivoråŒºçš„ç©ºé—´æ— æ³•å­˜æ”¾EdenåŒºçš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šé€šè¿‡æ‹…ä¿æœºåˆ¶æå‰è½¬ç§»åˆ°è€å¹´ä»£å»ã€‚</p>
<p>-Xms:20M å †å†…å­˜åˆå§‹å€¼20M<br>-Xmx:20M å †å†…å­˜æœ€å¤§20M<br>-Xmn10M  æ–°ç”Ÿä»£å ç”¨10Mï¼ˆå‰©ä¸‹çš„10Mç•™ç»™è€å¹´ä»£ï¼‰<br>-XX:SurvivorRatio=8 å†³å®šäº†æ–°ç”Ÿä»£EdenåŒºä¸ä¸€ä¸ªSurvivoråŒºçš„ç©ºé—´æ¯”ä¾‹æ˜¯8:1:1</p>
<h4 id="å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£"><a href="#å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£" class="headerlink" title="å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£"></a>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</h4><p>å¤§å¯¹è±¡æ˜¯éœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„Javaå¯¹è±¡ï¼Œå¦‚å¾ˆé•¿çš„å­—ç¬¦ä¸²æˆ–è€…å…ƒç´ æ•°é‡å¾ˆå¤šçš„æ•°ç»„ã€‚</p>
<p>åœ¨åˆ†é…ç©ºé—´æ—¶ï¼Œå¦‚æœå¯¹è±¡æ¯”è¾ƒå¤§ï¼Œå°±ä¼šæå‰è§¦å‘åƒåœ¾æ”¶é›†ï¼Œä»¥è·å–è¶³å¤Ÿçš„è¿ç»­ç©ºé—´æ‰èƒ½å­˜æ”¾è¯¥å¯¹è±¡ï¼Œ å½“å¤åˆ¶å¯¹è±¡æ—¶å¤§å¯¹è±¡æ„å‘³ç€é«˜é¢çš„å†…å­˜å¤åˆ¶å¼€é”€ã€‚</p>
<p>-XX:PretenureSizeThreshold=3145728 ï¼ˆå¤§äº3Mçš„å¯¹è±¡ä¼šç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ä¸­ï¼‰<br>è¯¥å‚æ•°åªå¯¹Serialå’ŒParNewä¸¤æ¬¾æ”¶é›†å™¨æœ‰æ•ˆã€‚</p>
<h4 id="é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"><a href="#é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£" class="headerlink" title="é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"></a>é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£</h4><p>å†…å­˜å›æ”¶æ—¶å¿…é¡»å†³ç­–é‚£äº›å­˜æ´»å¯¹è±¡åº”è¯¥å­˜æ”¾åœ¨æ–°ç”Ÿä»£ï¼Œå“ªäº›å­˜æ´»å¯¹è±¡å­˜æ”¾åœ¨è€å¹´ä»£ã€‚<br>è™šæ‹Ÿæœºä¸ºæ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å¹´é¾„ï¼ˆAgeï¼‰å­˜å‚¨åœ¨å¯¹è±¡å¤´é‡ã€‚</p>
<p>å¯¹è±¡é€šå¸¸åœ¨EdenåŒºè¯ç”Ÿï¼Œå¦‚æœç»è¿‡ä¸€æ¬¡MinorGCåä»ç„¶å­˜æ´»ï¼Œå¹¶ä¸”èƒ½è¢«Survivorå®¹çº³çš„è¯ï¼Œä¼šè¢«ç§»åŠ¨åˆ°Survivorç©ºé—´ï¼Œå¹¶ä¸”å°†å¯¹è±¡çš„å¹´é¾„è®¾ç½®ä¸º1å²ã€‚å¯¹è±¡åœ¨Survivorä¸­æ¯ç»è¿‡ä¸€æ¬¡MinorGCï¼ŒAgeå¢åŠ 1ï¼Œ å½“å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ä¸­ã€‚<br>å¯ä»¥é€šè¿‡-XX:MaxTenuringThresholdè®¾ç½®ï¼ˆé»˜è®¤ä¸º15æ¬¡ï¼‰ã€‚</p>
<h4 id="åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"><a href="#åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š" class="headerlink" title="åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"></a>åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š</h4><p>å¦‚æœåœ¨Survivorç©ºé—´ä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°çš„æ€»å’Œå¤§äºSurvivorç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºæˆ–è€…ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œæ— éœ€ç­‰åˆ°-XX:MaxTenuringThresholdä¸­è¦æ±‚çš„å¹´é¾„ã€‚</p>
<p>ä¹Ÿå°±æ˜¯å½“å‰Survivorç©ºé—´å¤§å°ä¸º1Mï¼Œæœ‰ä¸¤ä¸ªAge=1ä¸”å¤§å°ä¸º256kçš„å¯¹è±¡æ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å°±ä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</p>
<h4 id="ç©ºé—´åˆ†é…æ‹…ä¿"><a href="#ç©ºé—´åˆ†é…æ‹…ä¿" class="headerlink" title="ç©ºé—´åˆ†é…æ‹…ä¿"></a>ç©ºé—´åˆ†é…æ‹…ä¿</h4><p>åœ¨å‘ç”ŸMinorGCä¹‹å‰ï¼Œè™šæ‹Ÿæœºå¿…é¡»å…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡æ€»ç©ºé—´ã€‚<br>å¦‚æœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆè¿™æ¬¡MinorGCæ—¶å®‰å…¨çš„ï¼›ï¼›<br>å¦‚æœä¸æˆç«‹ï¼Œè™šæ‹Ÿæœºä¼šå…ˆæŸ¥çœ‹-XX:HandlerPromotionFailureå‚æ•°çš„è®¾ç½®å€¼æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥<br>   å¦‚æœå…è®¸æ‹…ä¿å¤±è´¥ï¼Œç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡ä»Šç”Ÿåˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å°<br>      å¤§äºï¼Œå°è¯•è¿›è¡Œä¸€æ¬¡MinorGCï¼›<br>      å°äºï¼Œæˆ–è€…-XX:HandlePromotionFailureä¸å…è®¸å†’é™©ï¼Œåˆ™å˜æ›´ä¸ºFullGCã€‚</p>
<p>åœ¨JDK6 Update24ä¹‹åçš„è§„åˆ™å˜ä¸ºåªè¦è€å¹´ä»£çš„è¿ç»­ç©ºé—´å¤§äºæ–°ç”Ÿä»£æ€»å¤§å°æˆ–è€…å†æ¬¡æ™‹å‡çš„å¹³å‡å¤§å°ï¼Œå°±ä¼šè¿›è¡ŒMinorGCï¼Œå¦åˆ™å°±è¿›è¡ŒFullGcã€‚-XX:HandlePromotionFailureå‚æ•°ä¸åœ¨ç”Ÿæ•ˆã€‚</p>
<h2 id="åƒåœ¾çš„å›æ”¶"><a href="#åƒåœ¾çš„å›æ”¶" class="headerlink" title="åƒåœ¾çš„å›æ”¶"></a>åƒåœ¾çš„å›æ”¶</h2><ul>
<li>å“ªäº›å†…å­˜éœ€è¦å›æ”¶</li>
<li>ä»€ä¹ˆæ—¶å€™å›æ”¶</li>
<li>å¦‚ä½•å›æ”¶</li>
</ul>
<h4 id="å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»"><a href="#å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»" class="headerlink" title="å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»"></a>å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­»</h4><ul>
<li>å¼•ç”¨è®¡æ•°å™¨</li>
<li>å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆå›ºå®šå¯ä½œä¸ºGCRootçš„å¯¹è±¡æœ‰ï¼‰<ul>
<li>åœ¨è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚æ¯ä¸ªçº¿ç¨‹èƒŒè°ƒç”¨çš„æ–¹æ³•å †æ ˆä¸­ä½¿ç”¨çš„å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸´æ—¶å˜é‡</li>
<li>åœ¨æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œå¦‚Javaç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡</li>
<li>åœ¨æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼Œå¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å¼•ç”¨</li>
<li>åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIå¼•ç”¨çš„å¯¹è±¡</li>
<li>Javaè™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„Classå¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨</li>
<li>æ‰€æœ‰èƒŒåŒæ­¥é”æŒæœ‰çš„å¯¹è±¡</li>
<li>åæ˜ Javaè™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„JMXBeanã€JVMTIä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰ã€‚</li>
</ul>
</li>
</ul>
<h4 id="å¯¹è±¡çš„å¼•ç”¨"><a href="#å¯¹è±¡çš„å¼•ç”¨" class="headerlink" title="å¯¹è±¡çš„å¼•ç”¨"></a>å¯¹è±¡çš„å¼•ç”¨</h4><ul>
<li>å¼ºå¼•ç”¨ï¼Œå¦‚Object obj = new Object(); æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰èƒŒå¼•ç”¨çš„å¯¹è±¡ã€‚</li>
<li>è½¯å¼•ç”¨ï¼Œæè¿°æœ‰ç”¨ä½†éå¿…é¡»çš„å¯¹è±¡ï¼Œè¢«è½¯å¼•ç”¨å…³è”çš„å¯¹è±¡åœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå‰ä¼šæŠŠè¿™äº›å¯¹è±¡ä¾‹å¦‚å›æ”¶èŒƒå›´å†…è¿›è¡ŒäºŒæ¬¡å›æ”¶ã€‚ï¼ˆSoftReferenceï¼‰</li>
<li>å¼±å¼•ç”¨ï¼Œæè¿°éå¿…é¡»å¯¹è±¡ï¼Œè¢«å¼±å¼•ç”¨çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä½ç½®ã€‚æ— è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚</li>
<li>è™šå¼•ç”¨ï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„æ—¶ä¸ºäº†èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶å—åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ï¼ˆNIOç”¨çš„RdirectMemoryï¼‰</li>
</ul>
<h2 id="åƒåœ¾æ”¶é›†å™¨ç®—æ³•"><a href="#åƒåœ¾æ”¶é›†å™¨ç®—æ³•" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨ç®—æ³•"></a>åƒåœ¾æ”¶é›†å™¨ç®—æ³•</h2><h4 id="åˆ†ä»£æ”¶é›†ç†è®º"><a href="#åˆ†ä»£æ”¶é›†ç†è®º" class="headerlink" title="åˆ†ä»£æ”¶é›†ç†è®º"></a>åˆ†ä»£æ”¶é›†ç†è®º</h4><p>å»ºç«‹åœ¨ä¸¤ä¸ªåˆ†ä»£å‡è¯´ä¸Šï¼š<br>1ï¼‰å¼±åˆ†ä»£å‡è¯´ï¼Œç»å¤§æ•°å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•ç­çš„ã€‚<br>2ï¼‰å¼ºåˆ†ä»£å‡è¯´ï¼Œç»è¿‡è¶Šå¤šæ¬¡æ”¶é›†è¿‡ç¨‹çš„å¯¹è±¡æœˆéš¾æ¶ˆäº¡ã€‚<br>3ï¼‰ï¼ˆæ¨ç†å‡è¯´ï¼‰è·¨ä»£å¼•ç”¨å‡è¯´ï¼Œè·¨ä»£å¼•ç”¨ç›¸å¯¹äºåŒä»£æ¥è¯´ä»…å æå°‘æ•°ã€‚</p>
<h5 id="åˆ†ä»£æ”¶é›†åŒºåŸŸ"><a href="#åˆ†ä»£æ”¶é›†åŒºåŸŸ" class="headerlink" title="åˆ†ä»£æ”¶é›†åŒºåŸŸ"></a>åˆ†ä»£æ”¶é›†åŒºåŸŸ</h5><ul>
<li>éƒ¨åˆ†æ”¶é›†ï¼ˆPartial GCï¼‰<ul>
<li>æ–°ç”Ÿä»£æ”¶é›†ï¼ˆMinor GC/ Yong GCï¼‰</li>
<li>è€å¹´ä»£æ”¶é›†ï¼ˆMajor GC / Old GCï¼‰ï¼ˆåªæœ‰CMSä¼šå•ç‹¬å›æ”¶è€å¹´ä»£ï¼‰</li>
<li>æ··åˆæ”¶é›†(Mixed GC)ï¼Œç›®å‰åªæœ‰GCå­˜åœ¨æ··åˆå›æ”¶è¡Œä¸ºã€‚</li>
</ul>
</li>
<li>æ•´å †æ”¶é›†(Full GC)</li>
</ul>
<h4 id="æ ‡è®°æ¸…é™¤ç®—æ³•"><a href="#æ ‡è®°æ¸…é™¤ç®—æ³•" class="headerlink" title="æ ‡è®°æ¸…é™¤ç®—æ³•"></a>æ ‡è®°æ¸…é™¤ç®—æ³•</h4><p>æ ‡è®°éœ€è¦è¢«å›æ”¶çš„å¯¹è±¡åï¼Œå›æ”¶æ‰æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ï¼›<br>æˆ–è€…æ ‡è®°ä¸éœ€è¦è¢«å›æ”¶çš„å¯¹è±¡ï¼ŒåŒä¸€å›æ”¶æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚</p>
<p>ç¼ºç‚¹ï¼š<br>ä¸ç¨³å®šï¼Œæ ‡è®°æ¸…é™¤çš„æ€§èƒ½éšç€å¯¹è±¡çš„å¢å¤šè€Œé™ä½ï¼›<br>ç©ºé—´ç¢ç‰‡åŒ–é—®é¢˜ï¼Œè‚¯èƒ½ä¼šå¯¼è‡´åœ¨åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶æ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­ç©ºé—´å†…å­˜ä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†åŠ¨ä½œã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/ms.jpeg" alt="mark-sweep"></p>
<h4 id="æ ‡è®°å¤åˆ¶ç®—æ³•"><a href="#æ ‡è®°å¤åˆ¶ç®—æ³•" class="headerlink" title="æ ‡è®°å¤åˆ¶ç®—æ³•"></a>æ ‡è®°å¤åˆ¶ç®—æ³•</h4><p>ä¸ºäº†è§£å†³æ ‡è®°æ¸…é™¤ç®—æ³•é¢å¯¹å¤§é‡å¯å›æ”¶å¯¹è±¡æ—¶æ‰§è¡Œæ•ˆç‡ä½çš„é—®é¢˜ã€‚</p>
<p>ä¼˜ç‚¹ï¼šåªéœ€è¦å¤åˆ¶å°‘æ•°å­˜æ´»å¯¹è±¡ï¼Œç®€å•é«˜æ•ˆ<br>ç¼ºç‚¹ï¼šæµªè´¹å†…å­˜ç©ºé—´ã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/mc.jpeg" alt="mark-copy"></p>
<p>æ ¹æ®å¼±åˆ†ä»£å‡è¯´ï¼Œä»¥åŠå®é™…æƒ…å†µï¼Œå¤§éƒ¨åˆ†çš„å¯¹è±¡åœ¨ç¬¬ä¸€æ¬¡åƒåœ¾å›æ”¶æ—¶å°±ä¼šè¢«å›æ”¶ï¼Œå› æ­¤å¹¶ä¸éœ€è¦æŒ‰ç…§1:1çš„æ¯”ä¾‹æ¥åˆ’åˆ†æ–°ç”Ÿä»£çš„å†…å­˜ç©ºé—´ã€‚<br>å†…å­˜è¢«åˆ†ä¸ºè¾ƒå¤§çš„EdenåŒºå’Œè¾ƒå°çš„ä¸¤ä¸ªSurvivoråŒºåŸŸï¼ŒHotSpoté»˜è®¤æ¯”ä¾‹æ˜¯8:1:1ã€‚<br>æ‰“ç»™ä½ Survivorç©ºé—´ä¸è¶³å®¹çº³ä¸€æ¬¡MinorGCåå­˜æ´»çš„å¯¹æˆé‚£ä¸ªæ—¶ï¼Œå°±éœ€è¦ä¾èµ–å…¶ä»–å†…å­˜åŒºåŸŸè¿›è¡Œåˆ†é…æ‹…ä¿ã€‚</p>
<h4 id="æ ‡è®°æ•´ç†ç®—æ³•"><a href="#æ ‡è®°æ•´ç†ç®—æ³•" class="headerlink" title="æ ‡è®°æ•´ç†ç®—æ³•"></a>æ ‡è®°æ•´ç†ç®—æ³•</h4><p>æ ¹æ®è€å¹´ä»£å¯¹è±¡çš„å­˜äº¡ç‰¹å¾ä»¥åŠå¼ºåˆ†ä»£å‡è¯´æå‡ºçš„ç®—æ³•ã€‚<br>å°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å‘å†…å­˜ç©ºé—´çš„ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/mark-compact.jpeg" alt="mark-compact"></p>
<p>ååé‡ï¼šèµ‹å€¼å™¨å’Œæ”¶é›†å™¨çš„æ•ˆç‡æ€»å’Œã€‚<br>å¦‚æœåœ¨æ¸…ç†æ—¶ç§»åŠ¨ï¼Œå¿…ç„¶ä¼šå½±å“åˆ°å¯¹è±¡å›æ”¶çš„æ•ˆç‡ã€‚<br>å¦‚æœæ¸…ç†æ—¶ä¸ç§»åŠ¨ï¼Œå¿…ç„¶ä¼šå½±å“åˆ°å¯¹è±¡åˆ†é…çš„æ•ˆç‡ã€‚</p>
<h2 id="å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"><a href="#å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨"></a>å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨</h2><h4 id="Serial-SerialOld"><a href="#Serial-SerialOld" class="headerlink" title="Serial / SerialOld"></a>Serial / SerialOld</h4><p>Serialæ”¶é›†å™¨æ˜¯æœ€å¤è€çš„æ”¶é›†å™¨ï¼Œä½¿ç”¨æ ‡è®°æ‹·è´ç®—æ³•ï¼Œåœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°å®ƒæ”¶é›†ç»“æŸã€‚<br>ä¼˜ç‚¹ï¼šåœ¨å†…å­˜è¾ƒå°çš„æ¡Œé¢åº”ç”¨æˆ–è€…Clientæ¨¡å¼ä¸‹ï¼Œé¢å¤–å†…å­˜æ¶ˆè€—æœ€å°ï¼Œç®€å•é«˜æ•ˆã€‚</p>
<p>SerialOldåŒæ ·æ˜¯å•çº¿ç¨‹æ”¶é›†èµ·ï¼Œä½¿ç”¨æ ‡è®°æ•´ç†ç®—æ³•ã€‚å½“CMSæ”¶é›†èµ·å‘ç”Ÿå¤±è´¥æ—¶ä¼šè½¬ä¸ºSerialOldå·¥ä½œã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/serialGC.jpeg" alt="Serial GC"></p>
<h4 id="PS-PO"><a href="#PS-PO" class="headerlink" title="PS / PO"></a>PS / PO</h4><p>Paralle Scavenge/ Paralle Old çš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§çš„ååé‡ã€‚</p>
<p>ParalleScavenge åŒæ ·æ˜¯åŸºäºæ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘æ”¶é›†ï¼Œ<br>ååé‡ = ï¼ˆè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ï¼‰/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+è¿è¡Œåƒåœ¾æ”¶é›†æ—¶é—´)<br>-XX:MaxGCPauseMillis æ§åˆ¶æœ€å¤§åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´<br>-XX:GCTimeRatio æ§åˆ¶åƒåœ¾æ”¶é›†æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ç‡<br>-XX:+UseAdaptiveSizePolicy å°±ä¸éœ€è¦äººå·¥æŒ‡å®šæ–°ç”Ÿä»£çš„å¤§å°ï¼ŒEdenäºSurvivorçš„æ¯”ä¾‹ï¼Œä»¥åŠæ™‹å‡è€å¹´ä»£çš„å¤§å°ï¼Œè™šæ‹Ÿæœºä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´è¿™äº›å‚æ•°ä»¥æä¾›æœ€åˆé€‚çš„åœé¡¿æ—¶é—´æˆ–è€…æœ€å¤§çš„ååé‡ã€‚</p>
<p>ParalleOld æ”¶é›†è€å¹´ä»£ï¼ŒåŸºäºæ ‡è®°æ•´ç†ç®—æ³•ã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/pspo.jpeg" alt="Paralle Scavenge / Paralle Old"></p>
<h4 id="ParNew-CMS"><a href="#ParNew-CMS" class="headerlink" title="ParNew / CMS"></a>ParNew / CMS</h4><p>ParNewæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹å¹¶è¡Œç‰ˆæœ¬ï¼Œé™¤äº†ä½¿ç”¨å¤šæ¡çº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ä¹‹å¤–ï¼Œå…¶ä½™è¡Œä¸ºä¸Serialæ”¶é›†èµ·å®Œå…¨ä¸€è‡´ã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/ParNewSerialOld.jpeg" alt="ParNew / SerialOld"></p>
<p>CMDæ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®çš„çš„æ”¶é›†å™¨ã€‚ç¬¦åˆå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´å°½å¯èƒ½çŸ­ï¼Œä»¥ç»™ç”¨æˆ·å¸¦æ¥è‰¯å¥½äº¤äº’ä½“éªŒçš„éœ€æ±‚ã€‚ä»–æ˜¯ä¸€ç§æ ‡è®°-æ¸…é™¤ç®—æ³•å®ç°çš„ã€‚<br>åŒ…å«å››ä¸ªæ­¥éª¤ï¼š<br>1ï¼‰åˆå§‹æ ‡è®°<br>2ï¼‰å¹¶å‘æ ‡è®°<br>3ï¼‰é‡æ–°æ ‡è®°<br>4ï¼‰å¹¶å‘æ¸…é™¤</p>
<p>å…¶ä¸­åˆå§‹æ ‡è®°å’Œé‡æ–°æ ‡è®°è¿™ä¸¤ä¸ªæ­¥éª¤ä»éœ€è¦STWã€‚<br>åˆå§‹æ ‡è®°ä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ã€é€Ÿåº¦å¾ˆå¿«ï¼›<br>å¹¶å‘æ ‡è®°é˜¶æ®µå°±æ˜¯ä»GC Rootsçš„ç›´æ¥å…³è”å¯¹è±¡å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡å›¾çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—æ—¶é•¿ï¼Œä½†ä¸éœ€è¦åœé¡¿ç”¨æˆ·çº¿ç¨‹ï¼Œå¯ä»¥ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸€èµ·å¹¶å‘è¿è¡Œï¼›<br>é‡æ–°æ ‡è®°ä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ä¸ºç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„éƒ¨åˆ†ï¼Œè¿™ä¸ªé˜¶æ®µæ¯”åˆå§‹æ ‡è®°è€—æ—¶ç¨é•¿ï¼›<br>å¹¶å‘æ¸…é™¤ï¼Œæ¸…ç†åˆ é™¤æ‰æ ‡è®°é˜¶æ®µåˆ¤æ–­å·²ç»æ­»äº¡çš„å¯¹è±¡ï¼Œä¸éœ€è¦ç§»åŠ¨å“¦å­˜æ´»å¯¹è±¡ï¼Œå› æ­¤è¿™ä¸ªé˜¶æ®µä¹Ÿæ˜¯ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å¹¶å‘ã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/cms.jpeg" alt="CMS"></p>
<p>CMSç¼ºç‚¹ï¼š<br>1ï¼‰ è€—CPUèµ„æº<br>2ï¼‰ æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œç”±äºé¢„ç•™çš„å†…å­˜æ— æ³•åˆ†é…æ–°å¯¹è±¡æ—¶ï¼Œæœ‰å¯èƒ½å‡ºç°å›æ”¶å¤±è´¥è€Œå¯¼è‡´é€€åŒ–åˆ°Serial Oldçš„æ¨¡å¼æ”¶é›†ã€‚<br>3ï¼‰åˆ†é…å ç”¨å¤§ç©ºé—´çš„å¯¹è±¡æ—¶ï¼Œä¼šå‡ºç°è€å¹´ä»£è¿˜æœ‰å¾ˆå¤šå‰©ä½™ç©ºé—´ï¼Œä½†æ˜¯æ— æ³•æ‰¾åˆ°è¶³å¤Ÿå¤§çš„è¿ç»­ç©ºé—´åˆ†é…å¯¹è±¡ï¼Œä¸å¾—ä¸æå‰è§¦å‘FullGCã€‚<br>æä¾›äº†ä¸¤ä¸ªå‚æ•°ä¼˜åŒ–ï¼Œä½†æ˜¯JDK1.9ä¹‹åå·²ç»åºŸå¼ƒï¼š<br>-XX:UseCMS-CompactAtFullCollection ä¸å¾—ä¸è¿›è¡ŒFullGCæ—¶å¼€å¯å†…å­˜ç¢ç‰‡çš„åˆå¹¶æ•´ç†ã€‚<br>-XX:CMSFullGCsBefore-Compactionï¼Œè¦æ±‚CMSæ”¶é›†å™¨åœ¨æ‰§è¡Œè¿‡è‹¥å¹²æ¬¡ä¸æ•´ç†ç©ºé—´çš„FullGCä¹‹åï¼Œä¸‹ä¸€æ¬¡è¿›å…¥FullGCå‰è¿›è¡Œç¢ç‰‡æ•´ç†ã€‚</p>
<h4 id="Garbage-First"><a href="#Garbage-First" class="headerlink" title="Garbage First"></a>Garbage First</h4><p>G1æ—¶ä¸€æ¬¾ä¸»è¦é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p>
<p>åœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´å¤§æ¦‚ç‡ä¸è¶…è¿‡Næ¯«ç§’è¿™æ ·çš„ç›®æ ‡ã€‚</p>
<p>G1é¢å‘å †å†…å­˜ä»»ä½•éƒ¨åˆ†æ¥ç»„æˆå›æ”¶é›†ï¼ˆCollectionSetï¼‰è¿›è¡Œå›æ”¶ï¼Œè¡¡é‡æ ‡å‡†ä¸å†æ˜¯å®ƒå±äºå“ªä¸ªåˆ†ä»£ï¼Œè€Œæ˜¯å“ªå—å†…å­˜ä¸­å­˜æ”¾çš„åƒåœ¾æ•°é‡æœ€å¤šï¼Œå›æ”¶æ”¶ç›Šæœ€å¤§ï¼Œè¿™å°±æ˜¯G1æ”¶é›†å™¨çš„MixedGCæ¨¡å¼ã€‚</p>
<p>G1æŠŠè¿ç»­çš„Javaå †å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œæ¯ä¸ªRegionéƒ½å¯ä»¥æ ¹æ®éœ€è¦æ‰®æ¼” æ–°ç”Ÿä»£çš„Edenç©ºé—´Survivorç©ºé—´ï¼Œæˆ–è€…è€å¹´ä»£ç©ºé—´ã€‚æ”¶é›†å™¨èƒ½å¤Ÿå¯¹ä¸åŒè§’è‰²çš„Regioné‡‡ç”¨ä¸åŒçš„=ç­–ç•¥å–å¤„ç†ï¼Œè¿™æ ·æ— è®ºæ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡è¿˜æ˜¯å­˜æ´»äº†ä¸€æ®µæ—¶é—´ã€ç»è¿‡å¤šæ¬¡æ”¶é›†çš„æ—§å¯¹è±¡éƒ½èƒ½è·å¾—å¾ˆå¥½çš„æ”¶é›†å†ç†¬è¿‡ã€‚</p>
<p>Regionä¸­æœ‰ä¸€ç±»HumongousåŒºåŸŸä¸“é—¨å­˜æ”¾å¤§å¯¹è±¡ã€‚ G1è®¤ä¸ºåªè¦å¤§å°è¶…è¿‡äº†ä¸€ä¸ªRegionå®¹é‡çš„ä¸€èˆ¬çš„å¯¹è±¡å°±å¯ä»¥åˆ¤å®šä¸ºå¤§å¯¹è±¡ã€‚æ¯ä¸ªRegionçš„å¤§å°å¯ä»¥é€šè¿‡å‚æ•°-XX:G1HeapRegionSizeè®¾å®šï¼Œå–å€¼èŒƒå›´1MBï½32MBï¼Œä¸”åº”ä¸º2çš„Næ¬¡å¹‚ã€‚é‚£äº›è¶…è¿‡äº†æ•´ä¸ªRegionå®¹é‡çš„è¶…çº§å¤§å¯¹è±¡ï¼Œä¼šè¢«å­˜æ”¾åœ¨Nä¸ªè¿ç»­çš„HumongousRegionä¹‹ä¸­ï¼ŒG1çš„å¤§å¤šæ•°è¡Œä¸ºéƒ½æŠŠHumongousRegionä½œä¸ºè€å¹´ä»£çš„ä¸€éƒ¨åˆ†è¿›è¡Œçœ‹å¾…ã€‚</p>
<p>Gå› ä¸ºå°†Regionä½œä¸ºå•è¯å›æ”¶çš„æœ€å°å•å…ƒï¼Œæ‰€ä»¥å¯ä»¥å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ã€‚<br>æ¯æ¬¡æ ¹æ®ç”¨æˆ·è®¾ç½®çš„åœé¡¿æ—¶é—´-XX:MaxGCPauseMillisï¼Œ ä¼˜å…ˆå¤„ç†å›æ”¶ä»·å€¼æ”¶ç›Šæœ€å¤§çš„é‚£äº›Regionã€‚<br>è¿™ç§ä½¿ç”¨Regionåˆ’åˆ†å†…å­˜ç©ºé—´ï¼Œä»¥åŠå…·æœ‰ä¼˜å…ˆçº§çš„åŒºåŸŸå›æ”¶æ–¹å¼ï¼Œä¿è¯äº†G1æ”¶é›†å™¨åœ¨æ‚ é—²çš„æ—¶é—´å†…è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/G1Region.jpeg" alt="G1 Region"></p>
<h5 id="éœ€è¦è§£å†³çš„é—®é¢˜"><a href="#éœ€è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="éœ€è¦è§£å†³çš„é—®é¢˜"></a>éœ€è¦è§£å†³çš„é—®é¢˜</h5><p>1ï¼‰è·¨Regionå¼•ç”¨çš„å¯¹è±¡ï¼š æ¯ä¸ªRegionéƒ½ç»´æŠ¤è‡ªå·±çš„è®°å¿†é›†é¿å…å…¨å †ä½œä¸ºGCRootsæ‰«æï¼Œ è¿™äº›è®°å¿†é›†ä¼šè®°å½•ä¸‹åˆ«çš„RegionæŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆï¼Œå¹¶æ ‡è®°è¿™äº›æŒ‡é’ˆåˆ†åˆ«åœ¨å“ªäº›å¡é¡µçš„èŒƒå›´ä¹‹å†…ã€‚<br>G1çš„è®°å¿†é›†æ˜¯ä¸€ç§Hashè¡¨ï¼ŒKeyæ—¶åˆ«çš„Regionçš„èµ·å§‹åœ°å€ï¼ŒValueæ—¶ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢å­˜å‚¨çš„å…ƒç´ æ—¶å¡è¡¨çš„ç´¢å¼•å·ã€‚è¿™ç§åŒå‘çš„å¡è¡¨ç»“æ„è®°å½•äº†æˆ‘æŒ‡å‘è°å’Œè°æŒ‡å‘äº†æˆ‘ï¼Œå› æ­¤G1åªå°‘éœ€è¦è€—è´¹å¤§çº¦10%ï½20%çš„é¢å¤–å†…å­˜æ¥ç»´æŒæ”¶é›†å·¥ä½œã€‚</p>
<p>2ï¼‰åœ¨å¹¶å‘é˜¶æ®µå¦‚ä½•ä¿è¯æ”¶é›†çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹äº’ä¸å¹²æ‰°åœ°è¿è¡Œï¼Ÿ<br>ç”¨æˆ·çº¿ç¨‹åœ¨æ”¹å˜å¯¹è±¡å¼•ç”¨å…³ç³»çš„æ—¶å€™ï¼Œå¿…é¡»ä¿è¯ä¸èƒ½æ‰“ç ´åŸæœ¬çš„å¯¹è±¡å›¾ç»“æ„ï¼Œå¯¼è‡´æ¯”é˜¿å‰ç»“æœå‡ºç°é”™è¯¯ï¼Œ<br>CMSä½¿ç”¨å¢é‡æ›´æ–°ç®—æ³•ï¼ŒG1ä½¿ç”¨åŸå§‹å¿«ç…§ç®—æ³•æ¥å®ç°ã€‚</p>
<p>åƒåœ¾æ”¶é›†å¯¹ç”¨æˆ·çº¿ç¨‹çš„å½±å“è¿˜ä½“ç°åœ¨å›æ”¶è¿‡ç¨‹ä¸­å¿ƒçª—å·å¯¹è±¡çš„å†…å­˜åˆ†é…ä¸Šï¼Œç¨‹åºè¦ç»§ç»­è¿è¡Œå°±è‚¯å®šä¼šæŒç»­æœ‰æ–°å¯¹è±¡å‘—åˆ›å»ºï¼ŒG1ä½æ¯ä¸ªRegionè®¾è®¡äº†ä¸¤ä¸ªåä¸ºTAMSï¼ˆTOp at Mark Startï¼‰çš„æŒ‡é’ˆï¼ŒæŠŠRegionä¸­çš„ä¸€éƒ¨åˆ†ç©ºé—´åˆ’åˆ†å‡ºæ¥ç”¨äºå¹¶å‘å›æ”¶è¿‡ç¨‹ä¸­çš„æ–°å¯¹è±¡åˆ†é…ï¼Œå¹¶å‘å›æ”¶æ—¶å¿ƒåˆ†é…çš„å¯¹è±¡åœ°å€éƒ½å¿…é¡»è¦åœ¨è¿™ä¸¤ä¸ªæŒ‡é’ˆä½ç½®ä»¥ä¸Šã€‚G1æ”¶é›†å™¨é»˜è®¤åœ¨è¿™ä¸ªåœ°å€ä»¥ä¸Šçš„å¯¹è±¡æ—¶è¢«éšå¼æ ‡è®°è¿‡çš„ï¼Œä¸çº³å…¥å›æ”¶èŒƒå›´ã€‚å¦‚æœå†…å­˜å›æ”¶çš„é€Ÿåº¦èµ¶ä¸ä¸Šå†…å­˜åˆ†é…çš„é€Ÿåº¦ï¼ŒG1æ”¶é›†å™¨ä¹Ÿè¦è¢«è¿«å†»ç»“ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œï¼Œå¯¼è‡´FullGCè€Œäº§ç”Ÿé•¿æ—¶é—´çš„STWã€‚</p>
<p>3ï¼‰å¦‚ä½•å»ºç«‹å¯é çš„åœé¡¿æ¨¡å‹<br>G1çš„åœé¡¿é¢„æµ‹æ¨¡å‹æ—¶ä»¥è¡°å‡å‡å€¼ä¸ºç†è®ºåŸºç¡€å®ç°çš„ï¼Œåœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­ï¼ŒG1æ”¶é›†å™¨ä¼šè®°å½•æ¯ä¸ªRegionçš„å›æ”¶è€—æ—¶ã€æ¯ä¸ªRegionè®°å¿†é›†é‡Œçš„è„å¡æ•°é‡ç­‰å„ä¸ªå¯ä»¥æµ‹é‡çš„æ­¥éª¤è¯è´¹çš„æˆæœ¬ï¼Œå¹¶åˆ†æå¾—å‡ºå¹³å‡å€¼ï¼Œæ ‡å‡†åå·®ã€å¯è¡Œåº¦ç­‰ç»Ÿè®¡ä¿¡æ¯ï¼Œè¡°å‡å¹³å‡å€¼æ—¶æ¯”æ™®é€šçš„å¹³å‡å€¼æ›´å®¹æ˜“å—åˆ°æ–°æ•°æ®çš„å½±å“ï¼Œå¹³å‡å€¼æ›´å®¹æ˜“å—åˆ°æ–°æ•°æ®çš„å½±å“ï¼Œå¹³å‡å€¼ä»£è¡¨æ•´ä½“å¹³å‡çŠ¶æ€ï¼Œè¡°å‡å‡å€¼ä»£è¡¨æœ€è¿‘çš„å¹³å‡çŠ¶æ€ã€‚ Regionçš„ç»Ÿè®¡çŠ¶æ€è¶Šæ–°è¶Šèƒ½å†³å®šå™¨å›æ”¶çš„ä»·å€¼ã€‚é€šè¿‡è¿™äº›ä¿¡æ¯é¢„æµ‹ç°åœ¨å¼€å§‹å›æ”¶çš„è¯ï¼Œå“ªäº›regionç»„æˆå›æ”¶é›†é‡‡å¯ä»¥åœ¨ä¸è¶…è¿‡æœŸæœ›åœé¡¿æ—¶é—´çš„çº¦æŸä¸‹è·å¾—æœ€é«˜çš„æ”¶ç›Šã€‚</p>
<h4 id="G1çš„å›æ”¶æ­¥éª¤"><a href="#G1çš„å›æ”¶æ­¥éª¤" class="headerlink" title="G1çš„å›æ”¶æ­¥éª¤"></a>G1çš„å›æ”¶æ­¥éª¤</h4><h5 id="åˆå§‹æ ‡è®°"><a href="#åˆå§‹æ ‡è®°" class="headerlink" title="åˆå§‹æ ‡è®°"></a>åˆå§‹æ ‡è®°</h5><p> åªæ ‡è®°ä¸€ä¸‹GCRootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹TAMSæŒ‡é’ˆçš„å€¼ï¼Œè®©ä¸‹ä¸€ä¸ªé˜¶æ®µçš„ç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿è¡Œæ—¶ï¼Œèƒ½æ­£ç¡®æ»´åœ¨å¯ç”¨çš„Regionä¸­åˆ†é…æ–°å¯¹è±¡ã€‚è¿™ä¸ªé˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†æ˜¯è€—æ—¶çŸ­ï¼Œè€Œä¸”æ˜¯å€Ÿç”¨è¿›è¡ŒMinorGCçš„æ—¶å€™åŒæ­¥å®Œæˆï¼Œæ‰€ä»¥G1æ”¶é›†å™¨åœ¨è¿™ä¸ªé˜¶æ®µå®é™…å¹¶æ²¡æœ‰é¢å¤–çš„åœé¡¿ã€‚</p>
<h5 id="å¹¶å‘æ ‡è®°"><a href="#å¹¶å‘æ ‡è®°" class="headerlink" title="å¹¶å‘æ ‡è®°"></a>å¹¶å‘æ ‡è®°</h5><p>ä»GCRootså¼€å§‹å¯¹å¯¹å­çº¢å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œé€’å½’æ‰«ææ•´ä¸ªå †é‡Œçš„å¯¹è±¡å›¾ï¼Œæ‰¾å‡ºè¦å›æ”¶çš„å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µè€—æ—¶è¾ƒé•¿ï¼Œä½†æ˜¯å¯ä»¥å’Œç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå½“å¯¹è±¡å›¾æ‰«æå®Œæˆä»¥åï¼Œè¿˜è¦é‡æ–°å¤„ç†SATBè®°å½•ä¸‹çš„åœ¨å¹¶å‘æ—¶æœ‰å¼•ç”¨å˜åŠ¨çš„å¯¹è±¡ã€‚</p>
<h5 id="æœ€ç»ˆæ ‡è®°"><a href="#æœ€ç»ˆæ ‡è®°" class="headerlink" title="æœ€ç»ˆæ ‡è®°"></a>æœ€ç»ˆæ ‡è®°</h5><p>å¯¹ç”¨æˆ·çº¿ç¨‹åšå¦å¤–ä¸€ä¸ªçŸ­æš‚çš„æš‚åœï¼Œç”¨äºå¤„ç†å¹¶å‘é˜¶æ®µç»“æŸåä»é—ç•™ä¸‹æ¥çš„æœ€åé‚£å°‘é‡çš„SATBè®°å½•ã€‚</p>
<h5 id="ç­›é€‰å›æ”¶"><a href="#ç­›é€‰å›æ”¶" class="headerlink" title="ç­›é€‰å›æ”¶"></a>ç­›é€‰å›æ”¶</h5><p>è´Ÿè´£æ›´æ–°Regionçš„ç»Ÿè®¡æ•°æ®ï¼Œå¯¹å“¥å“¥Regionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„åœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©ä»»æ„å¤šä¸ªRegionæ„æˆå›æ”¶é›†ï¼Œç„¶åæŠŠå†³å®šå›æ”¶çš„é‚£ä¸€éƒ¨åˆ†Regionçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°ç©ºçš„Regionä¸­ï¼Œå†æ¸…ç†æ‰æ•´ä¸ªæ—§çš„Regionçš„å…¨éƒ¨ç©ºé—´ï¼Œå¯¹å­˜æ´»å¯¹è±¡ç§»åŠ¨æ—¶å¿…é¡»æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œä½†æ˜¯ç”±å¤šæ¡çº¿ç¨‹å®Œæˆçš„ã€‚</p>
<p><img src="/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/g1.jpeg" alt="G1"></p>
<p>G1ä»æ•´ä½“ä¸Šæ¥çœ‹æ˜¯åŸºäºæ ‡è®°æ•´ç†ç®—æ³•ï¼Œä½†ä»å±€éƒ¨æ¥çœ‹æ—¶åŸºäºæ ‡è®°å¤åˆ¶ç®—æ³•ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™ä¸¤ç§ç®—æ³•æ„å‘³ç€G1å†ä¸æ€§æœŸé—´ä¸ä¼šäº§ç”Ÿå†…å­˜ç©ºé—´ç¢ç‰‡ï¼Œåƒåœ¾æ”¶é›†å®Œæˆä¹‹åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜ã€‚è¿™ç§ç‰¹æ€§æœ‰åˆ©äºç¨‹åºé•¿æ—¶é—´è¿è¡Œï¼Œåœ¨ç¨‹åºä¸ºå¤§å¯¹è±¡åˆ†é…å†…å­˜æ—¶ä¸å®¹æ˜“å› æ— æ³•æ‰¾åˆ°è¿ç»­å†…å­˜ç©ºé—´è€Œæå‰è§¦å‘é™ä¸€æ¬¡æ”¶é›†ã€‚</p>
<p>G1ä½äº†åƒåœ¾æ”¶é›†äº§ç”Ÿçš„å†…å­˜å ç”¨ä»¥åŠé¢å¤–çš„æ‰§è¡Œå‰¯åœ¨éƒ½æ¯”CMSæã€‚<br>å†…å­˜å ç”¨æ˜¯ç”±äºåŒå‘å¡è¡¨å ç”¨ç©ºé—´å¤§ã€‚CMsåªè®°å½•äº†è€å¹´ä»£åˆ°æ–°ç”Ÿä»£çš„å¡è¡¨è®°å½•ã€‚</p>
<p>è´Ÿè½½ï¼šCMSç”¨å†™åå±éšœç»´æŠ¤æ›´æ–°å¡è¡¨ï¼›<br>G1é™¤äº†ä½¿ç”¨å†™åå±éšœç»´æŠ¤å¡è¡¨å¤–ï¼Œä½äº†å®ç°åŸå§‹å¿«ç…§æœç´¢ï¼ˆSATBï¼‰ç®—æ³•ï¼Œè¿˜éœ€è¦ä½¿ç”¨å†™å‰å±éšœæ¥è·Ÿè¸ªå¹¶å‘å‰çš„æŒ‡é’ˆå˜åŒ–ã€‚ åŸå§‹å¿«ç…§æœç´¢èƒ½å¤Ÿå‡å°‘å¹¶å‘æ ‡è®°å’Œé‡æ–°æ ‡è®°é˜¶æ®µçš„æ¶ˆè€—ï¼Œé¿å…CMSé‚£æ ·åœ¨æœ€ç»ˆæ ‡è®°é˜¶æ®µåœé¡¿æ—¶é—´è¿‡é•¿çš„ç¼ºç‚¹ã€‚</p>
<p>CMSçš„å†™å±éšœæ˜¯åŒæ­¥æ“ä½œï¼ŒG1ä½¿ç”¨çš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒæŠŠå†™å‰å±éšœå’Œå†™åå±éšœä¸­è¦åšçš„äº‹æƒ…éƒ½æ”¾åœ¨é˜Ÿåˆ—é‡Œï¼Œå†å¼‚æ­¥å¤„ç†ã€‚</p>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
    
  </section>
  
    
      <br>
      <div class="prev-next">
        
        <p class="current">
          1 / 2
        </p>
        
          <a class="next" rel="next" href="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/page/2/">
            <section class="post next white-box shadow">
              &nbsp;ä¸‹ä¸€é¡µ&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i>
            </section>
          </a>
        
      </div>
    
    <!-- æ ¹æ®ä¸»é¢˜ä¸­çš„è®¾ç½®å†³å®šæ˜¯å¦åœ¨archiveä¸­é’ˆå¯¹æ‘˜è¦éƒ¨åˆ†çš„MathJaxå…¬å¼åŠ è½½mathjax.jsæ–‡ä»¶ -->
    
    

  


    
  

</div>
<aside class='l_side'>
  
  
    
    

<section class="widget blogger shadow ">
  <div class='content'>
    
      
        <a class='avatar flat-box' href='/about/'>
          <img no-lazy src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'/>
        </a>
      
    
    
    
  </div>
</section>

  

  
    
    
  

  <section class="widget category shadow desktop">
    
  <header>
    
      <a href='/blog/categories/'><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><span class='name'>æ–‡ç« åˆ†ç±»</span></a>
    
  </header>


    <div class='content'>
      <ul class="entry navigation">
        
          <li><a class="flat-box"
            title="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/" href="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"
            id="categoriesJavaE68A80E69CAFE6A088"
            ><div class='name'>JavaæŠ€æœ¯æ ˆ</div><div class='badge'>(20)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Etcd/" href="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Etcd/"
            id="categoriesJavaE68A80E69CAFE6A088Etcd"
            ><div class='name'>Etcd</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/" href="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"
            id="categoriesJavaE68A80E69CAFE6A088JavaE8999AE68B9FE69CBA"
            ><div class='name'>Javaè™šæ‹Ÿæœº</div><div class='badge'>(11)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/" href="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/"
            id="categoriesJavaE68A80E69CAFE6A088Spring"
            ><div class='name'>Spring</div><div class='badge'>(4)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/Linux/" href="/categories/Linux/"
            id="categoriesLinux"
            ><div class='name'>Linux</div><div class='badge'>(3)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/Linux/Linux%E5%91%BD%E4%BB%A4-%E4%BA%A4%E9%9B%86%E3%80%81%E5%B9%B6%E9%9B%86%E3%80%81%E5%B7%AE%E9%9B%86/" href="/categories/Linux/Linux%E5%91%BD%E4%BB%A4-%E4%BA%A4%E9%9B%86%E3%80%81%E5%B9%B6%E9%9B%86%E3%80%81%E5%B7%AE%E9%9B%86/"
            id="categoriesLinuxLinuxE591BDE4BBA4-E4BAA4E99B86E38081E5B9B6E99B86E38081E5B7AEE99B86"
            ><div class='name'>Linuxå‘½ä»¤ - äº¤é›†ã€å¹¶é›†ã€å·®é›†</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/Linux/VIM/" href="/categories/Linux/VIM/"
            id="categoriesLinuxVIM"
            ><div class='name'>VIM</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/Redis/" href="/categories/Redis/"
            id="categoriesRedis"
            ><div class='name'>Redis</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/Redis/%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/" href="/categories/Redis/%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/"
            id="categoriesRedisE99B86E7BEA4E983A8E7BDB2"
            ><div class='name'>é›†ç¾¤éƒ¨ç½²</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"
            id="categoriesE58886E5B883E5BC8F"
            ><div class='name'>åˆ†å¸ƒå¼</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/ID%E7%94%9F%E6%88%90%E5%99%A8/" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/ID%E7%94%9F%E6%88%90%E5%99%A8/"
            id="categoriesE58886E5B883E5BC8FIDE7949FE68890E599A8"
            ><div class='name'>IDç”Ÿæˆå™¨</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/" href="/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/"
            id="categoriesE7949FE4BAA7E58A9B"
            ><div class='name'>ç”Ÿäº§åŠ›</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/sublime%E5%BF%AB%E6%8D%B7%E9%94%AE/" href="/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/sublime%E5%BF%AB%E6%8D%B7%E9%94%AE/"
            id="categoriesE7949FE4BAA7E58A9BsublimeE5BFABE68DB7E994AE"
            ><div class='name'>sublimeå¿«æ·é”®</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
            id="categoriesE8AEBEE8AEA1E6A8A1E5BC8F"
            ><div class='name'>è®¾è®¡æ¨¡å¼</div><div class='badge'>(26)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"
            id="categoriesE8AEBEE8AEA1E6A8A1E5BC8FE5889BE5BBBAE59E8BE6A8A1E5BC8F"
            ><div class='name'>åˆ›å»ºå‹æ¨¡å¼</div><div class='badge'>(6)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"
            id="categoriesE8AEBEE8AEA1E6A8A1E5BC8FE7BB93E69E84E59E8BE6A8A1E5BC8F"
            ><div class='name'>ç»“æ„å‹æ¨¡å¼</div><div class='badge'>(7)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"
            id="categoriesE8AEBEE8AEA1E6A8A1E5BC8FE8A18CE4B8BAE59E8BE6A8A1E5BC8F"
            ><div class='name'>è¡Œä¸ºå‹æ¨¡å¼</div><div class='badge'>(12)</div></a></li>
        
          <li><a class="flat-box child"
            title="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"
            id="categoriesE8AEBEE8AEA1E6A8A1E5BC8FE8AEBEE8AEA1E58E9FE58899"
            ><div class='name'>è®¾è®¡åŸåˆ™</div><div class='badge'>(1)</div></a></li>
        
      </ul>
    </div>
  </section>


  

  
    
    
  

  <section class="widget tagcloud shadow desktop mobile">
    
  <header>
    
      <a href='/blog/tags/'><i class="fas fa-tags fa-fw" aria-hidden="true"></i><span class='name'>çƒ­é—¨æ ‡ç­¾</span></a>
    
  </header>


    <div class='content'>
      <a href="/tags/ClassLoader/" style="font-size: 14px; color: #999">ClassLoader</a> <a href="/tags/Class%E7%BB%93%E6%9E%84/" style="font-size: 14px; color: #999">Classç»“æ„</a> <a href="/tags/DI/" style="font-size: 14px; color: #999">DI</a> <a href="/tags/Etcd/" style="font-size: 14px; color: #999">Etcd</a> <a href="/tags/GC/" style="font-size: 14px; color: #999">GC</a> <a href="/tags/IOC/" style="font-size: 14px; color: #999">IOC</a> <a href="/tags/JMM/" style="font-size: 14px; color: #999">JMM</a> <a href="/tags/JVM/" style="font-size: 21.14px; color: #686868">JVM</a> <a href="/tags/Java/" style="font-size: 14px; color: #999">Java</a> <a href="/tags/Linux/" style="font-size: 14px; color: #999">Linux</a> <a href="/tags/Spring/" style="font-size: 16.86px; color: #868686">Spring</a> <a href="/tags/Spring-Bean/" style="font-size: 14px; color: #999">Spring-Bean</a> <a href="/tags/comm/" style="font-size: 14px; color: #999">comm</a> <a href="/tags/linux/" style="font-size: 14px; color: #999">linux</a> <a href="/tags/sort/" style="font-size: 14px; color: #999">sort</a> <a href="/tags/sublime/" style="font-size: 14px; color: #999">sublime</a> <a href="/tags/swap/" style="font-size: 14px; color: #999">swap</a> <a href="/tags/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">ä¸­ä»‹è€…æ¨¡å¼</a> <a href="/tags/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">äº«å…ƒæ¨¡å¼</a> <a href="/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" style="font-size: 15.43px; color: #8f8f8f">ä»£ç†æ¨¡å¼</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 14px; color: #999">ä¼˜åŒ–</a> <a href="/tags/%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE/" style="font-size: 14px; color: #999">ä¾èµ–æŸ¥æ‰¾</a> <a href="/tags/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/" style="font-size: 14px; color: #999">å†…å­˜åˆ†é…</a> <a href="/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 18.29px; color: #7c7c7c">åˆ›å»ºå‹æ¨¡å¼</a> <a href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">å•ä¾‹æ¨¡å¼</a> <a href="/tags/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">åŸå‹æ¨¡å¼</a> <a href="/tags/%E5%8F%82%E6%95%B0/" style="font-size: 14px; color: #999">å‚æ•°</a> <a href="/tags/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">å¤–è§‚æ¨¡å¼</a> <a href="/tags/%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E/" style="font-size: 14px; color: #999">å­—èŠ‚ç æ‰§è¡Œå¼•æ“</a> <a href="/tags/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">å¯¹è±¡æ± æ¨¡å¼</a> <a href="/tags/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">å·¥å‚æ–¹æ³•æ¨¡å¼</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/" style="font-size: 14px; color: #999">å¸¸ç”¨å·¥å…·</a> <a href="/tags/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">å»ºé€ è€…æ¨¡å¼</a> <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 14px; color: #999">å¿«æ·é”®</a> <a href="/tags/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">æŠ½è±¡å·¥å‚æ¨¡å¼</a> <a href="/tags/%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/" style="font-size: 14px; color: #999">æ•…éšœæ’æŸ¥</a> <a href="/tags/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">æ¡¥æ¥æ¨¡å¼</a> <a href="/tags/%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</a> <a href="/tags/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">çŠ¶æ€æ¨¡å¼</a> <a href="/tags/%E7%94%9F%E4%BA%A7%E5%8A%9B/" style="font-size: 14px; color: #999">ç”Ÿäº§åŠ›</a> <a href="/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">ç­–ç•¥æ¨¡å¼</a> <a href="/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/" style="font-size: 14px; color: #999">ç±»åŠ è½½æœºåˆ¶</a> <a href="/tags/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">ç»„åˆæ¨¡å¼</a> <a href="/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 19.71px; color: #727272">ç»“æ„å‹æ¨¡å¼</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 14px; color: #999">ç¼–è¯‘</a> <a href="/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 22.57px; color: #5f5f5f">è¡Œä¸ºå‹æ¨¡å¼</a> <a href="/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">è§‚å¯Ÿè€…æ¨¡å¼</a> <a href="/tags/%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/" style="font-size: 15.43px; color: #8f8f8f">è§£é‡Šå™¨æ¨¡å¼</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" style="font-size: 14px; color: #999">è®¾è®¡åŸåˆ™</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 24px; color: #555">è®¾è®¡æ¨¡å¼</a> <a href="/tags/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">è®¿é—®è€…æ¨¡å¼</a> <a href="/tags/%E8%B0%83%E4%BC%98/" style="font-size: 14px; color: #999">è°ƒä¼˜</a> <a href="/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/" style="font-size: 16.86px; color: #868686">è´£ä»»é“¾æ¨¡å¼</a> <a href="/tags/%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8C%BA%E5%9F%9F/" style="font-size: 14px; color: #999">è¿è¡Œæ—¶åŒºåŸŸ</a> <a href="/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">è¿­ä»£å™¨æ¨¡å¼</a> <a href="/tags/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" style="font-size: 14px; color: #999">é€‚é…å™¨æ¨¡å¼</a>
    </div>
  </section>


  


</aside>


  
  <footer class="clearfix">
    <br><br>

    
  </footer>

<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>





  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '8px',
        duration: '800',
        interval: '100',
        scale: '1'
      });
    });
  </script>


  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>




  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('.cover') {
          $('.cover').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  















  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.5/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>






<!-- å¤åˆ¶ -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //æ¸²æŸ“ fancybox
      var element = document.createElement("a"); // a æ ‡ç­¾
      $(element).attr("pjax-fancybox", "");  // è¿‡æ»¤ pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // æè¿°ä¿¡æ¯
      if ($(this).attr('alt')) {  // æ ‡å‡† markdown æè¿°ä¿¡æ¯
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // æœ€å¤–å±‚å¥— div ï¼Œå…¶å®ä¸»è¦ä½œç”¨è¿˜æ˜¯ class æ ·å¼
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // åŠ æè¿°
      $(this).after(span);  // å†å¥—ä¸€å±‚æè¿°
      $(this).wrap(element);  // æœ€åå¥— a æ ‡ç­¾
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>





  <script>setLoadingBarProgress(100);</script>
</body>
</html>
