{"meta":{"title":"ç¢ç¢å¿µ","subtitle":"","description":"","author":"Picker","url":"https://pickonebyone.github.io","root":"/"},"pages":[{"title":"å…³äº","date":"2020-07-03T03:29:53.741Z","updated":"2020-07-03T03:29:53.741Z","comments":true,"path":"about/index.html","permalink":"https://pickonebyone.github.io/about/index.html","excerpt":"","text":""},{"title":"å°ç›®æ ‡","date":"2020-06-16T09:35:55.000Z","updated":"2020-07-14T13:48:18.934Z","comments":true,"path":"aim/index.html","permalink":"https://pickonebyone.github.io/aim/index.html","excerpt":"","text":"ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹è¯»ä¹¦ç¬”è®° (10/10) ç±»æ–‡ä»¶ç»“æ„ ç±»åŠ è½½å™¨å’Œç±»åŠ è½½æœºåˆ¶ JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸ å­—èŠ‚ç æ‰§è¡Œå¼•æ“ JVM å†…å­˜æ¨¡å‹ çº¿ç¨‹å’Œå¹¶å‘ å†…å­˜åˆ†é…ä¸å›æ”¶ ç¼–è¯‘ä¸ç¼–è¯‘ä¼˜åŒ–æŠ€æœ¯ å¸¸ç”¨ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…· å¸¸ç”¨çš„JVMå‚æ•° è®¾è®¡æ¨¡å¼ åˆ›å»ºå‹æ¨¡å¼ ï¼ˆ6/6ï¼‰ å•ä¾‹æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ å»ºé€ è€…æ¨¡å¼ åŸå‹æ¨¡å¼ å¯¹è±¡æ± æ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼ (12/12) ç­–ç•¥æ¨¡å¼ çŠ¶æ€æ¨¡å¼ è®¿é—®è€…æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼ è´£ä»»é“¾æ¨¡å¼ æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ å‘½ä»¤æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼ è§£é‡Šå™¨æ¨¡å¼ ç©ºå¯¹è±¡æ¨¡å¼ ä¸­ä»‹è€…æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ ç»“æ„å‹æ¨¡å¼ (7/7) ä»£ç†æ¨¡å¼ ç»„åˆæ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ å¤–è§‚æ¨¡å¼ äº«å…ƒæ¨¡å¼ Nettyæºç  Spring /Spring Bootæºç - [x] [Spring-Bean](/2020/07/14/Spring-Bean/) - [x] [Spring-ä¾èµ–æŸ¥æ‰¾](/2020/07/14/Spring-ä¾èµ–æŸ¥æ‰¾/) Mysql Redis"},{"title":"ä¹¦å•","date":"2020-06-16T09:37:38.000Z","updated":"2020-06-17T14:20:58.176Z","comments":true,"path":"books/index.html","permalink":"https://pickonebyone.github.io/books/index.html","excerpt":"","text":"å­¦ä¹ æ•ˆç‡ ã€Šå¦‚ä½•å­¦ä¹ ã€‹â€“ æœ¬å°¼è¿ªå…‹ç‰¹Â·å‡¯é‡Œã€‚ é‡‘èä¸–ç•Œè§‚ ã€Šä¸­å›½å†ä»£æ”¿æ²»å¾—å¤±ã€‹â€“é’±ç©†ï¼ˆä¸­å›½ï¼‰ ã€Šåƒå¹´é‡‘èå²ã€‹â€“å¨å»‰Â·æˆˆå…¹æ›¼ï¼ˆè€¶é²å¤§å­¦æ•™æˆï¼‰ ã€Šä½ ä¸€å®šçˆ±è¯»çš„æç®€æ¬§æ´²å²ã€‹â€“çº¦ç¿°Â·èµ«æ–¯ç‰¹ï¼ˆæ¾³å¤§åˆ©äºšï¼‰ ã€Šé‡‘é’±æ°¸ä¸çœ ã€‹(åŒ—å¤§å”å«£) ã€Šåˆ©ç‡æ˜¯è½¦ï¼Œæ±‡ç‡æ˜¯é©¬ã€‹(åŒ—å¤§å®‹å›½é’) ã€Šè´§å¸å´›èµ·ã€‹ é“¶è¡Œ ã€Šè´§å¸é‡‘èå­¦ã€‹â€“å¼—é›·å¾·é‡Œå…‹Â·ç±³ä»€é‡‘ ã€Šè®¤ä¸ºåˆ¶é€ çš„è„†å¼±æ€§ï¼šé“¶è¡Œä¸šå±æœºå’Œä¿¡è´·ç¨€ç¼ºçš„æ”¿æ²»æ ¹æºï¼ŒFragile By Designã€‹ ä½œè€…ï¼šæŸ¥å°”æ–¯Â·å¼€ç½—ç±³é‡Œæ–¯ï¼ˆå“ˆä½›å¤§å­¦æ•™æˆï¼‰&amp;å²è’‚èŠ¬Â·å“ˆä¼¯ï¼ˆå“¥ä¼¦æ¯”äºšå¤§å­¦æ•™æˆï¼‰ æŠ•èµ„é“¶è¡Œ ã€Šé‡‘èä½“ç³»ä¸­çš„æŠ•èµ„é“¶è¡Œã€‹ ï¼ˆInvestment banking in the Financial Systemï¼Œç»æµç§‘å­¦å‡ºç‰ˆç¤¾ï¼‰â€“ æŸ¥ç†æ–¯Â·å‰æ–¯ç‰¹ ã€Šä¼Ÿå¤§çš„åšå¼ˆã€‹â€“ çº¦ç¿°Â·SÂ·æˆˆç™»ï¼ˆç¾å›½ï¼‰ ã€Šæ‘©æ ¹è´¢å›¢ã€‹ â€“ ç½—æ©Â·å½»è¯ºï¼ˆï¼‰ ç”µå½±Â·çºªå½•ç‰‡ã€Šå¤§å›½å´›èµ·ã€‹â€“ è·å…°çš„å´›èµ·å²ã€Šè‚–ç”³å…‹çš„æ•‘èµã€‹ã€Šå¤§ç©ºå¤´ã€‹â€“ 08å¹´ç¾å›½æ¬¡è´·å±æœº"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2020-06-16T06:58:53.446Z","updated":"2020-06-16T06:58:53.446Z","comments":true,"path":"categories/index.html","permalink":"https://pickonebyone.github.io/categories/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2020-06-16T07:37:43.223Z","updated":"2020-06-16T07:37:43.223Z","comments":true,"path":"friends/index.html","permalink":"https://pickonebyone.github.io/friends/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2020-06-16T06:59:26.769Z","updated":"2020-06-16T06:59:26.769Z","comments":true,"path":"tags/index.html","permalink":"https://pickonebyone.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Spring-ä¾èµ–æŸ¥æ‰¾","slug":"Spring-ä¾èµ–æŸ¥æ‰¾","date":"2020-07-14T13:43:04.000Z","updated":"2020-07-14T13:45:25.165Z","comments":true,"path":"2020/07/14/Spring-ä¾èµ–æŸ¥æ‰¾/","link":"","permalink":"https://pickonebyone.github.io/2020/07/14/Spring-%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE/","excerpt":"","text":"ä¾èµ–æŸ¥æ‰¾å†å²å•ä¸€ç±»å‹ä¾èµ–æŸ¥æ‰¾é›†åˆç±»å‹ä¾èµ–æŸ¥æ‰¾å±‚æ¬¡æ€§ä¾èµ–æŸ¥æ‰¾å»¶è¿Ÿä¾èµ–æŸ¥æ‰¾å®‰å…¨ä¾èµ–æŸ¥æ‰¾å†…å»ºå¯æŸ¥æ‰¾çš„ä¾èµ–ä¾èµ–æŸ¥æ‰¾ä¸­çš„å¼‚å¸¸åŠé€€","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Spring","slug":"JavaæŠ€æœ¯æ ˆ/Spring","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://pickonebyone.github.io/tags/Spring/"},{"name":"ä¾èµ–æŸ¥æ‰¾","slug":"ä¾èµ–æŸ¥æ‰¾","permalink":"https://pickonebyone.github.io/tags/%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE/"}]},{"title":"Spring-Bean","slug":"Spring-Bean","date":"2020-07-14T00:24:48.000Z","updated":"2020-07-14T13:43:11.899Z","comments":true,"path":"2020/07/14/Spring-Bean/","link":"","permalink":"https://pickonebyone.github.io/2020/07/14/Spring-Bean/","excerpt":"","text":"BeanDefinition A BeanDefinition describes a bean instance, which has property values,Constructor arguments values, and further information supplied by concrete implementations.This is just a minimal interface: The main intention is to allow a BeanFactoryPostProcessor to introspect and modify property values and other bean metadata. BeanDefinitionï¼š é¡¶çº§çˆ¶æ¥å£AbstractBeanDefinitionï¼šæ˜¯GenericBeanDefinitionã€RootBeanDefinitionã€ChildBeanDefinition çš„é€šç”¨å±æ€§çš„å®Œæ•´å®ç°ã€‚GenericBeanDefinition: æ ‡å‡†çš„beanå®šä¹‰ç›®çš„çš„ä¸€ç«™å¼æœåŠ¡ç±»ï¼Œ BeanDefinitionæ˜¯SpringFrameworkä¸­å®šä¹‰çš„é…ç½®å…ƒä¿¡æ¯æ¥å£,åŒ…å«äº†ï¼š Bean çš„ç±»å Bean çš„è¡Œä¸ºé…ç½®å…ƒç´ ï¼Œå¦‚ä½œç”¨åŸŸã€è‡ªåŠ¨ç»‘å®šæ¨¡å¼ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰ å…¶ä»–Beanå¼•ç”¨ï¼Œï¼ˆCollaboratorsã€Dependends) é…ç½®è®¾ç½®ï¼ˆBeançš„Propertiesï¼‰ BeanDefinition å…ƒä¿¡æ¯ å±æ€§ è¯´æ˜ Class Beançš„å…¨é™ç±»åï¼Œå¿…é¡»æ˜¯å…·ä½“ç±» Name Beançš„åç§°æˆ–è€…ğŸ†” Scope Beançš„ä½œç”¨åŸŸï¼Œsingletonã€prototype Constructor arguments Beançš„æ„é€ å™¨å‚æ•° for DI Properties Beançš„å±æ€§è®¾ç½® for DI Autowiring Mode Beançš„è‡ªåŠ¨ç»‘å®šæ¨¡å¼ï¼šByName ã€ byType Lazy Initialization Mode Bean å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼ initialzation method Beanåˆå§‹åŒ–å›è°ƒæ–¹æ³•åç§° destruction method Bean é”€æ¯å›è°ƒæ–¹æ³•åç§° BeanDefinition æ„å»º é€šè¿‡BeanDefinitionBuilderæ„å»ºBeandefinition 1234567 //bean definition builder.BeanDefinitionBuilder beanDefinitionBuilder = BeanDefinitionBuilder.genericBeanDefinition(User.class);beanDefinitionBuilder.addPropertyValue(\"id\",1L);beanDefinitionBuilder.addPropertyValue(\"name\",\"lisi\");BeanDefinition beanDefinition = beanDefinitionBuilder.getBeanDefinition(); é€šè¿‡GenericBeanDefinition æ„å»º 12345678910GenericBeanDefinition genericBeanDefinition = new GenericBeanDefinition();genericBeanDefinition.setBeanClass(User.class);MutablePropertyValues propertyValues = new MutablePropertyValues();// propertyValues.addPropertyValue(\"id\",2L);// propertyValues.addPropertyValue(\"name\",\"zhaowu\");propertyValues.add(\"id\",2L) .add(\"name\",\"zhaowu\");genericBeanDefinition.setPropertyValues(propertyValues); SpringBean å‘½åæ¯ä¸ªBeanæ‹¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ ‡è¯†ç¬¦ï¼Œè¿™äº›æ ‡è¯†ç¬¦åœ¨Beanæ‰€åœ¨çš„å®¹å™¨å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚é€šå¸¸ï¼Œä¸€ä¸ªBeanä»…æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ«åæ¥æ‰©å……ã€‚ åœ¨åŸºäºXMLçš„é…ç½®å…ƒä¿¡æ¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨idæˆ–è€…nameå±æ€§æ¥è´µå§“Beançš„æ ‡è¯†ç¬¦ã€‚é€šå¸¸Beançš„æ ‡è¯†ç¬¦ç”±å­—æ¯ç»„æˆï¼Œå…è®¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ã€‚å¯ä»¥åœ¨Beançš„nameå±æ€§ä½¿ç”¨é€—å·â€œ,â€æˆ–è€…â€œ;â€æˆ–è€…ç©ºæ ¼æ¥é—´éš”ã€‚ Beançš„idæˆ–è€…nameå±æ€§å¦‚æœä¸ºç©ºï¼Œå®¹å™¨ä¼šä¸ºBeanè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚ BeanNameGenerator BeanDefinition é…ç½®Xml123456789101112&lt;bean id=\"user\" class=\"com.github.springframework.models.User\" primary=\"true\"&gt; &lt;property name=\"id\" value=\"1\"/&gt; &lt;property name=\"name\" value=\"zhangsan\"/&gt;&lt;/bean&gt;&lt;bean id=\"superUser\" class=\"com.github.springframework.models.SuperUser\" parent=\"user\" &gt; &lt;property name=\"addr\" value=\"ä¸Šæµ·\"/&gt;&lt;/bean&gt;&lt;bean id=\"objectFactory\" class=\"org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean\"&gt; &lt;property name=\"targetBeanName\" value=\"user\"/&gt;&lt;/bean&gt; Javaæ³¨è§£ @Bean123456789101112131415161718192021222324252627282930public class AnnotationBeanDefinitionDemo &#123; public static void main(String[] args) &#123; //create factory bean AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(); //register config class. applicationContext.register(Config.class); //refresh applicationContext.refresh(); //getUser System.out.println(applicationContext.getBean(User.class)); &#125; static class Config&#123; @Bean public User user()&#123; User user = new User(); user.setId(1L); user.setName(\"Ann: zhangsan\"); return user; &#125; &#125;&#125; Javaæ³¨è§£ @Component12345678910111213141516171819202122232425public class AnnotationBeanDefinitionDemo &#123; public static void main(String[] args) &#123; //create factory bean AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(); //register config class. applicationContext.register(Config.class); //refresh applicationContext.refresh(); // System.out.println(applicationContext.getBean(Config.class)); &#125; @Component static class Config&#123; @Bean public User user()&#123; User user = new User(); user.setId(1L); user.setName(\"Ann: zhangsan\"); return user; &#125; &#125;&#125; BeanDefinitionæ³¨å†Œåˆ°å®¹å™¨ 12345678910static void beanDefinitionRegistry(BeanDefinitionRegistry registry, String name) &#123; BeanDefinitionBuilder beanDefinitionBuilder = BeanDefinitionBuilder.genericBeanDefinition(User.class); beanDefinitionBuilder.addPropertyValue(\"id\", 1L) .addPropertyValue(\"name\", \"Reg: zhangsan\"); if (StringUtils.hasText(name)) &#123; registry.registerBeanDefinition(name, beanDefinitionBuilder.getBeanDefinition()); &#125; else &#123; BeanDefinitionReaderUtils.registerWithGeneratedName(beanDefinitionBuilder.getBeanDefinition(),registry); &#125;&#125; ç”±äºAnnotatinoConfigApplicationContext æ˜¯ BeanDefinitionRegistryçš„é—´æ¥å­ç±»ã€‚ 12345678AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext();applicationContext.register(Config.class);beanDefinitionRegistry(applicationContext,\"REG:ZhangSan:Name\");beanDefinitionRegistry(applicationContext,null);applicationContext.refresh();System.out.println(applicationContext.getBeansOfType(Config.class));System.out.println(applicationContext.getBeansOfType(User.class));System.out.println(applicationContext.getBeansOfType(AnnotationApplicationContextDemo.class)); Bean å®ä¾‹åŒ–å¸¸è§„ï¼š é€šè¿‡æ„é€ å™¨ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Javaæ³¨è§£ã€JavaAPIï¼‰ é™æ€å·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€JavaAPIï¼‰ 12345678910public class User2 &#123; private Long id; private String name; public static User2 getInstance()&#123; return new User2(); &#125;&#125; 1&lt;bean id=\"user-by-static-method\" class=\"com.github.spring.beans.User2\" factory-method=\"getInstance\"&gt;&lt;/bean&gt; 123ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"classpath:/META-INF/bean-creation-context.xml\");User2 user = applicationContext.getBean(\"user-by-static-method\", User2.class); Beanå·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€JavaAPIï¼‰ 12345678public interface UserFactory &#123; default User2 createuser() &#123; return new User2(); &#125;&#125;public class DefaultUserFactory implements UserFactory &#123;&#125; 1234567&lt;bean id=\"userFactory\" class=\"com.github.spring.factory.DefaultUserFactory\"/&gt;&lt;bean id=\"user-by-instance-method\" factory-bean=\"userFactory\" factory-method=\"createuser\"/&gt;`````javaApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"classpath:/META-INF/bean-creation-context.xml\");User2 user3 = applicationContext.getBean(\"user-by-instance-method\", User2.class); FactoryBeanï¼ˆXMLã€Javaæ³¨è§£ã€JavaAPIï¼‰ 123456789101112public class UserFactoryBean implements FactoryBean&lt;User2&gt; &#123; @Override public User2 getObject() throws Exception &#123; return User2.getInstance(); &#125; @Override public Class&lt;?&gt; getObjectType() &#123; return User2.class; &#125;&#125; 1&lt;bean id=\"user-by-factory-bean\" class=\"com.github.spring.factory.UserFactoryBean\"/&gt; 12ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"classpath:/META-INF/bean-creation-context.xml\");User2 user2 = applicationContext.getBean(\"user-by-factory-method\", User2.class); ç‰¹æ®Šæ–¹å¼ï¼š ServiceLoaderFactoryBean Java ServiceLoader: ä¼šåœ¨classpath:/META-INF/servicesä¸‹åŠ è½½æ¥å£é…ç½®æ–‡ä»¶ï¼š æ–‡ä»¶ååç§°ä¸ºå…¨é™å®šæ¥å£åç§°ï¼Œå†…å®¹ä¸ºå…¨é™å®šå®ç°ç±» 1com.github.spring.factory.DefaultUserFactory 123456789101112public static void demoServiceLoader() &#123; ServiceLoader&lt;UserFactory&gt; serviceLoader = ServiceLoader.load(UserFactory.class, Thread.currentThread().getContextClassLoader()); displayServiceLoad(serviceLoader);&#125;public static void displayServiceLoad(ServiceLoader&lt;UserFactory&gt; serviceLoader) &#123; Iterator&lt;UserFactory&gt; iterator = serviceLoader.iterator(); while (iterator.hasNext()) &#123; UserFactory userFactory = iterator.next(); System.out.println(userFactory.createuser()); &#125;&#125; ServiceLoaderFactoryBeançš„å®ç° 123&lt;bean id=\"userFactoryServiceLoader\" class=\"org.springframework.beans.factory.serviceloader.ServiceLoaderFactoryBean\"&gt; &lt;property name=\"serviceType\" value=\"com.github.spring.factory.UserFactory\"/&gt;&lt;/bean&gt; 123ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"classpath:/META-INF/sp-bean-creation-context.xml\");ServiceLoader&lt;UserFactory&gt; serviceLoader = applicationContext.getBean(\"userFactoryServiceLoader\", ServiceLoader.class);displayServiceLoad(serviceLoader); AutowireCapableBeanFactory#createBean(java.lang.Class,int, boolean); 123AutowireCapableBeanFactory beanFactory = applicationContext.getAutowireCapableBeanFactory();UserFactory userFactory = beanFactory.createBean(DefaultUserFactory.class);System.out.println(userFactory.createuser()); BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition); Beançš„åˆå§‹åŒ– @PostConstructor InitializingBean çš„ afterPropertiesSet Beançš„initMethod@Bean(initMethod=â€â€) AbstractBeanDefinition.setInitMethodName(\"\"); 1234567891011121314151617181920public class DefaultUserFactory implements UserFactory, InitializingBean &#123; public DefaultUserFactory() &#123; System.out.println(\"DefaultUserFactory Constructor Called.\"); &#125; @PostConstruct public void init()&#123; System.out.println(\"DefaultUserFactory PostConstructor Called.\"); &#125; public void initUserFactory()&#123; System.out.println(\"DefaultUserFactory initUserFactory Called.\"); &#125; @Override public void afterPropertiesSet() throws Exception &#123; System.out.println(\"DefaultUserFactory afterPropertiesSet called.\"); &#125;&#125; 12345678910111213141516@Configurationpublic class BeanInitializationDemo &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(); applicationContext.register(BeanInitializationDemo.class); applicationContext.refresh(); UserFactory userFactory = applicationContext.getBean(UserFactory.class) System.out.println(userFactory.createuser()); applicationContext.close(); &#125; @Bean(initMethod = \"initUserFactory\") public DefaultUserFactory userFactory()&#123; return new DefaultUserFactory(); &#125;&#125; å»¶è¿Ÿåˆå§‹åŒ– xml: annotation: @Lazy å¯¹äºå»¶è¿Ÿåˆå§‹åŒ–ï¼Œæ˜¯åœ¨applicationContextåˆå§‹åŒ–ä¹‹åè¿›è¡Œåˆå§‹åŒ–ã€‚éå»¶è¿Ÿåˆå§‹åŒ–ï¼Œæ˜¯åœ¨applicationContextåˆå§‹åŒ–ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–ã€‚ Bean çš„é”€æ¯ @PreDestroy å®ç°DisposableBeanæ¥å£çš„destoy()æ–¹æ³• Beançš„ destroyæ–¹æ³• @Bean(destroy=\"\") AbstractBeanDefinition.setDestroyMethodName(\"\"); å¦‚ä½•æ³¨å†Œä¸€ä¸ªSpring Bean å¯ä»¥é€šè¿‡BeanDefinitionå’Œå¤–éƒ¨å•ä½“å¯¹è±¡æ¥æ³¨å†Œã€‚ 12345UserFactory userFactory = new DefaultUserFactory();ConfiguableListableBeanFactory factory = applicationContext.getBeanFactory();factory.registerSingleton(\"userFactory\", userFactory);UserFactory userFactory = applicationContext.getBean(\"UserFactory\",UserFactory.class); Spring BeanDefinition æ˜¯ä»€ä¹ˆï¼Ÿ Spring å®¹å™¨æ˜¯å¦‚ä½•æ³¨å†ŒBeançš„ï¼Ÿ","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Spring","slug":"JavaæŠ€æœ¯æ ˆ/Spring","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://pickonebyone.github.io/tags/Spring/"},{"name":"Spring-Bean","slug":"Spring-Bean","permalink":"https://pickonebyone.github.io/tags/Spring-Bean/"}]},{"title":"äº«å…ƒæ¨¡å¼","slug":"äº«å…ƒæ¨¡å¼","date":"2020-07-12T00:31:28.000Z","updated":"2020-07-12T02:22:10.693Z","comments":true,"path":"2020/07/12/äº«å…ƒæ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/12/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"äº«å…ƒæ¨¡å¼äº«å…ƒæ¨¡å¼çš„ç›®çš„åœ¨äºè¿ç”¨å…±äº«æŠ€æœ¯ï¼Œä½¿å¾—ä¸€äº›ç»†ç²’åº¦çš„å¯¹è±¡å¯ä»¥å…±äº«ã€‚å¤šé£Ÿç”¨ç»†ç²’åº¦çš„å¯¹è±¡ï¼Œä»¥ä¾¿äºé‡ç”¨æˆ–è€…é‡æ„ã€‚ å®šä¹‰ä½¿ç”¨å…±äº«å¯¹è±¡å¯ä»¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦çš„å¯¹è±¡ã€‚ å¤§é‡çš„ç»†ç²’åº¦å¯¹è±¡ï¼Œéœ€è¦æŠŠå¯¹è±¡çš„å…±æœ‰å±æ€§æå–å‡ºæ¥ï¼Œåšä¸ºå†…éƒ¨çŠ¶æ€ï¼Œå‰©ä½™çš„éå…±æœ‰åšä¸ºå¤–éƒ¨çŠ¶æ€ã€‚å†…éƒ¨çŠ¶æ€ï¼šå¯ä»¥å…±äº«å‡ºæ¥çš„ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨è¥„å£å¯¹è±¡å†…éƒ¨ï¼Œå¹¶ä¸”ä¸ä¼šéšç€ç¯å¢ƒçš„æ”¹å˜è€Œæ”¹å˜ã€‚å¤–éƒ¨çŠ¶æ€ï¼šå¯¹è±¡å¾—ä»¥ä¾èµ–çš„ä¸€ä¸ªæ ‡è®°ï¼Œæ˜¯éšç€ç¯å¢ƒçš„æ”¹å˜è€Œæ”¹å˜çš„ï¼Œä¸å¯ä»¥å…±äº«çš„çŠ¶æ€ã€‚ å®ç°FlyweightæŠ½è±¡äº«å…ƒè§’è‰²ï¼Œäº§å“æŠ½è±¡ç±»ï¼ŒåŒæ—¶å®šä¹‰å‡ºå¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€çš„æ¥å£æˆ–è€…å®ç°ã€‚ 123456789101112131415161718public abstract class Flyweight&#123; private String instrinsic; //inner status protected final String extrinsic; //external status public Flyweight(String extrinsic)&#123; this.extrinsic = extrinsic; &#125; public abstract void operate(); public String getInstrinsic()&#123; return this.instrinsic; &#125; public void setInstrinsic(String instrinsic)&#123; this.instrinsic = instrinsic; &#125;&#125; ConcreteFlyweightå…·ä½“äº«å…ƒè§’è‰²ï¼Œå®ç°æŠ½è±¡è§’è‰²çš„å®šä¹‰ä¸šåŠ¡ï¼Œè¯¥è§’è‰²ä¸­éœ€è¦æ³¨æ„çš„æ˜¯å†…éƒ¨çŠ¶æ€å¤„ç†åº”è¯¥ä¸ç¯å¢ƒæ— å…³ã€‚ 123456789101112131415161718192021public class ConcreteFlyweight1 extends Flyweight&#123; public ConcreteFlyweight1(String _Extrinsic)&#123; super(_Extrinsic); &#125; public void operate()&#123; //... &#125;&#125;public class ConcreteFlyweight2 extends Flyweight&#123; public ConcreteFlyweight2(String _Extrinsic)&#123; super(_Extrinsic); &#125; public void operate()&#123; //... &#125;&#125; unsharConcreteFlyweightä¸å¯å…±äº«çš„äº«å…ƒè§’è‰² ä¸å­˜åœ¨å¤–éƒ¨çŠ¶æ€æˆ–è€…å®‰å…¨è¦æ±‚ä¸èƒ½å¤Ÿä½¿ç”¨å…±äº«æŠ€æœ¯çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸€èˆ¬ä¸ä¼šå‡ºç°åœ¨äº«å…ƒå·¥å‚ä¸­ã€‚ FlyweightFactoryäº«å…ƒå·¥å‚ï¼Œæ„é€ ä¸€ä¸ªæ± å®¹å™¨ï¼ŒåŒæ—¶æä¾›ä»æ± ä¸­è·å¾—å¯¹è±¡çš„æ–¹æ³•ã€‚ 123456789101112131415public class FlyweightFactory&#123; private static HashMap&lt;String, Flyweight&gt; pool = new HashMap&lt;&gt;(); public static Flyweight getFlyweight(String extrinsic)&#123; Flyweight flyweight = null; if(pool.containsKey(extrinsic))&#123; flyweight = pool.get(extrinsic); &#125;else&#123; flyweight = new ConcreteFlyweight1(extrinsic); pool.put(extrinsic, flyweight); &#125; return flyweight; &#125;&#125; åº”ç”¨ä¼˜ç‚¹å¯ä»¥å‡å°‘åº”ç”¨ç¨‹åºåˆ›å»ºçš„å¯¹è±¡ï¼Œé™ä½ç¨‹åºå†…å­˜çš„å ç”¨ï¼Œå¢å¼ºç¨‹åºçš„æ€§èƒ½ã€‚ ç¼ºç‚¹æé«˜äº†ç¨‹åºçš„å¤æ‚æ€§ï¼Œéœ€è¦åˆ†ç¦»å‡ºå†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ï¼Œè€Œä¸”å¤–éƒ¨çŠ¶æ€å…·æœ‰å›ºè¯ç‰¹å¾ï¼Œä¸èƒ½éšç€å†…éƒ¨çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ã€‚ æ‰©å±• çº¿ç¨‹å®‰å…¨çš„é—®é¢˜åˆ›å»ºçš„å¯¹è±¡å°½é‡å¤šï¼Œå¤šåˆ°æ»¡è¶³ä¸šåŠ¡å¯¹è±¡ä¸ºæ­¢ã€‚ æ€§èƒ½å¹³è¡¡å¤–éƒ¨çŠ¶æ€æœ€å¥½ä»¥åŸºæœ¬ç±»å‹ä¸ºæ ‡å¿—ï¼Œå¦‚String, Intç­‰å¯ä»¥å¤§å¹…æå‡æ•ˆç‡ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"äº«å…ƒæ¨¡å¼","slug":"äº«å…ƒæ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"}]},{"title":"é—¨é¢æ¨¡å¼","slug":"å¤–è§‚æ¨¡å¼","date":"2020-07-11T14:10:09.000Z","updated":"2020-07-11T15:05:40.640Z","comments":true,"path":"2020/07/11/å¤–è§‚æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/11/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"é—¨é¢æ¨¡å¼é—¨é¢æ¨¡å¼ä¹Ÿå«å¤–è§‚æ¨¡å¼ã€‚ å®šä¹‰è¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸å…¶å†…éƒ¨çš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡è¿›è¡Œã€‚ å¤–è§‚æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚ é—¨é¢æ¨¡å¼æ³¨é‡è¦æ±‚â€œç»Ÿä¸€çš„å¯¹è±¡â€ï¼Œæä¾›ä¸€ä¸ªè®¿é—®å­ç³»ç»Ÿçš„æ¥å£ï¼Œé™¤äº†è¿™ä¸ªæ¥å£ä¸å…è®¸ä»»ä½•è®¿é—®å­ç³»ç»Ÿçš„è¡Œä¸ºå‘ç”Ÿã€‚ å®ç°Subsystemå­ç³»ç»Ÿè§’è‰²ï¼Œå¯ä»¥åŒæ—¶æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­ç³»ç»Ÿï¼Œæ¯ä¸€ä¸ªå­ç³»ç»Ÿéƒ½ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»çš„é›†åˆã€‚å­ç³»ç»Ÿå¹¶ä¸çŸ¥é“é—¨é¢çš„å­˜åœ¨ã€‚å¯¹äºå­ç³»ç»Ÿè€Œè¨€ï¼Œé—¨é¢çŸ¥è¯†ä¸€ä¸ªå®¢æˆ·ç«¯è€Œå·²ã€‚ 1234567891011121314151617public class classA&#123; public void doSomethingA()&#123; //..logic a &#125;&#125;public class classB&#123; public void doSomethingB()&#123; //. logic b &#125;&#125;public class classC&#123; public void doSomethingC()&#123; //. logic c. &#125;&#125; Facadeé—¨é¢è§’è‰²ï¼Œå®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨è¿™ä¸ªè§’è‰²çš„æ–¹æ³•ã€‚è¿™ä¸ªè§’è‰²çŸ¥é“å­ç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½å’Œè´£ä»»ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ¬è§’è‰²ä¼šå°†æ‰€æœ‰ä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚å§”æ´¾åˆ°ç›¸åº”çš„å­ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯è¯´æ”¹è§’è‰²æ²¡æœ‰å®é™…çš„ä¸šåŠ¡é€»è¾‘ï¼Œåªæ˜¯ä¸€ä¸ªå§”æ‰˜ç±»ã€‚ 1234567891011121314151617public class Facade&#123; private classA a = new classA(); private classB b = new classB(); private classC c = new classC(); public void methodA()&#123; this.a.doSomethingA(); &#125; public void methodB()&#123; this.b.doSomethingB(); &#125; public void methodC()&#123; this.c.doSomethingC(); &#125;&#125; åº”ç”¨ä¼˜ç‚¹ å‡å°‘ç³»ç»Ÿçš„ç›¸äº’ä¾èµ– æé«˜äº†çµæ´»æ€§ æé«˜å®‰å…¨æ€§ ä½¿ç”¨åœºæ™¯ ä¸ºä¸€ä¸ªå¤æ‚çš„æ¨¡å—æˆ–è€…å­ç³»ç»Ÿæä¾›ä¸€ä¸ªä¾›å¤–ç•Œè®¿é—®çš„æ¥å£ å­ç³»ç»Ÿç›¸å¯¹ç‹¬ç«‹ é¢„é˜²ä½æ°´å¹³äººå‘˜å¸¦æ¥çš„é£é™©æ‰©æ•£ ä¸€ä¸ªå­ç³»ç»Ÿå¯ä»¥æœ‰å¤šä¸ªé—¨é¢ é—¨é¢ä¸å‚ä¸å­ç³»ç»Ÿå†…çš„ä¸šåŠ¡é€»è¾‘","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"å¤–è§‚æ¨¡å¼","slug":"å¤–è§‚æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"}]},{"title":"é€‚é…å™¨æ¨¡å¼","slug":"é€‚é…å™¨æ¨¡å¼","date":"2020-07-10T09:22:07.000Z","updated":"2020-07-10T10:29:46.144Z","comments":true,"path":"2020/07/10/é€‚é…å™¨æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/10/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"é€‚é…å™¨æ¨¡å¼å½“æˆ‘ä»¬å»å›½å¤–æ—…è¡Œæ—¶ï¼Œæˆ‘ä»¬å›½å†…çš„æ’å¤´ä¸èƒ½ç›´æ¥æ’å…¥åˆ°å›½å¤–çš„æ’çº¿æ¿ä¸Šï¼Œæˆ‘ä»¬éœ€è¦è´­ä¹°ä¸€ä¸ªç”µæºé€‚é…å™¨æ¥é€‚é…å›½å¤–çš„æ’çº¿æ¿ã€‚ æˆ–è€…æœ€æ–°ç‰ˆçš„macbook pro ç”¨çš„æ˜¯utypecï¼Œå¹¶ä¸èƒ½ç›´æ¥æ’å…¥usb3.0çš„uç›˜ï¼Œæˆ‘ä»¬éœ€è¦è´­ä¹°ä¸€ä¸ªé€‚é…å™¨åšè½¬æ¢ã€‚ å®šä¹‰å°†ä¸€ä¸ªç±»çš„æ¥å£ç¼–ç¨‹å®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æ¥å£ï¼Œä»è€Œä½¿åŸæœ¬å› æ¥å£ä¸åŒ¹é…è€Œæ— æ³•åœ¨ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿåœ¨ä¸€èµ·å·¥ä½œã€‚ å®ç°Targetç›®æ ‡è§’è‰²æ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œæ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„è§’è‰²ï¼Œä¸å¯èƒ½å»ä¿®æ”¹è§’è‰²ä¸­çš„æ–¹æ³•ã€‚ 123public interface Target&#123; public void request();&#125; ConcreteTargetå…·ä½“çš„ç›®æ ‡è§’è‰²å®ç°ç±»ã€‚ 12345public class ConcreteTarget implements Target&#123; public void request()&#123; //... &#125;&#125; Adapteeæºè§’è‰²ï¼Œå·²ç»ä½¿ç”¨ä¸­çš„è§’è‰²ã€‚éœ€è¦å°†Adapteeè½¬æ¢ä¸ºTargetã€‚ 12345public class Adaptee&#123; public void doSomething()&#123; //... &#125;&#125; Adaptoré€‚é…å™¨è§’è‰²ã€‚ 12345public class Adaptor extends Adaptee implements Target&#123; public void request()&#123; super.doSomething(); &#125;&#125; Use123456Target target = new ConcreteTarget();target.request();Target target2 = new Adaptor();target2.request(); æ‰©å±•å½“éœ€è¦æŠŠå¤šä¸ªAdapteeè½¬æ¢ä¸ºTargetçš„æ—¶å€™ï¼Œå°±ä¸èƒ½ä½¿ç”¨ç»§æ‰¿äº†ï¼Œå› ä¸ºJavaä¸­ä¸æ”¯æŒå¤šç»§æ‰¿ã€‚è¿™ç§æ–¹å¼å«åšå¯¹è±¡é€‚é…å™¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨èšåˆï¼ˆå…³è”ï¼‰æ¥å®Œæˆé€‚é…ã€‚ ç±»é€‚é…å™¨æ˜¯ç”±ç±»çš„ç»§æ‰¿å…³ç³»å®Œæˆçš„ã€‚å¯¹è±¡é€‚é…å™¨æ˜¯ç”±ç±»çš„å…³è”å…³ç³»çºªå¿µæ€§è€¦åˆã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"é€‚é…å™¨æ¨¡å¼","slug":"é€‚é…å™¨æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"}]},{"title":"æ¡¥æ¥æ¨¡å¼","slug":"æ¡¥æ¥æ¨¡å¼","date":"2020-07-09T08:52:58.000Z","updated":"2020-07-09T10:37:16.922Z","comments":true,"path":"2020/07/09/æ¡¥æ¥æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/09/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"æ¡¥æ¥æ¨¡å¼æ¡¥æ¢æ¨¡å¼çš„é‡ç‚¹åœ¨è§£è€¦ã€‚ å®šä¹‰å°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œä½¿å¾—ä¸¤è€…å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚å®ƒä½¿ç”¨äº†ç±»é—´çš„èšåˆå…³ç³»ã€ç»§æ‰¿ã€è¦†å†™ç­‰å¸¸ç”¨åŠŸèƒ½ã€‚è§£å†³äº†ç»§æ‰¿çš„ç¼ºç‚¹è€Œæå‡ºçš„è®¾è®¡æ¨¡å¼ã€‚ å®ç°æŠ½è±¡è§’è‰²å¼•ç”¨å®ç°è§’è‰²ï¼Œæˆ–è€…è¯´æŠ½è±¡è§’è‰²çš„éƒ¨åˆ†å®ç°æ˜¯ç”±å®ç°è§’è‰²å®Œæˆçš„ã€‚ AbstractionæŠ½è±¡åŒ–è§’è‰²ï¼Œå®šä¹‰å‡ºè¯¥æŠ½è±¡è§’è‰²çš„è¡Œä¸ºï¼ŒåŒæ—¶ä¿å­˜ä¸€ä¸ªå¯¹å®ç°åŒ–è§’è‰²çš„å¼•ç”¨ã€‚ 123456789101112131415public abstract class Abstraction&#123; private Implementor imp; //å¿…é¡»æŒ‡å®šå®ç°è€… public Abstraction(Implementor imp)&#123; this.imp = imp; &#125; public void request()&#123; this.imp.doSomething(); &#125; public Implementor getImp()&#123; return imp; &#125;&#125; RefindAbstractionä¿®æ­£æŠ½è±¡åŒ–è§’è‰²ï¼Œå¼•ç”¨å®ç°åŒ–è§’è‰²å¯¹æŠ½è±¡åŒ–è§’è‰²è¿›è¡Œä¿®æ­£ã€‚ 12345678910111213public class RefindAbstraction extends Abstraction&#123; public RefindAbstraction(Implementor imp)&#123; super(imp); &#125; @Override public void request()&#123; //.... super.request(); super.getImp().doAnyThing(); &#125;&#125; Implementorå®ç°åŒ–è§’è‰²ï¼Œæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®šä¹‰è§’è‰²å¿…é¡»çš„è¡Œä¸ºå’Œå±æ€§ã€‚ 1234public interface Implementor&#123; public void doSomething(); public void doAnyThing();&#125; ConcreteImplementorå…·ä½“å®ç°åŒ–è§’è‰²ï¼Œå®ç°æ¥å£æˆ–è€…æŠ½è±¡ç±»å®šä¹‰çš„æ–¹æ³•å’Œå±æ€§ã€‚ 12345678910111213141516171819public class ConcreteImplementor1 implements Implementor&#123; public void doSomething()&#123; // &#125; public void doAnyThing()&#123; // &#125;&#125;public class ConcreteImplementor2 implements Implementor&#123; public void doSomething()&#123; // &#125; public void doAnyThing()&#123; // &#125;&#125; Use123Implementor imp = new ConcreteImplementor1();Abstraction abs = new RefindAbstraction(imp);abs.request(); åº”ç”¨ä¼˜ç‚¹ æŠ½è±¡å’Œå®ç°åˆ†ç¦»ä¸ºäº†è§£å†³ç»§æ‰¿çš„ç¼ºç‚¹è€Œæå‡ºçš„è®¾è®¡æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œå®ç°å¯ä»¥ä¸å—æŠ½è±¡çš„çº¦æŸï¼Œä¸å†ç»‘å®šåˆ°å›ºå®šçš„æŠ½è±¡å±‚æ¬¡ä¸Šã€‚ ä¼˜ç§€çš„æ‰©å±•èƒ½åŠ› å¯ä»¥éšæ„å¢åŠ æŠ½è±¡å’Œå®ç°ã€‚ å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ ç”±æŠ½è±¡å±‚é€šè¿‡èšåˆå…³ç³»å®Œæˆäº†å°è£…ã€‚ ä½¿ç”¨åœºæ™¯ ä¸å¸Œæœ›æˆ–è€…ä¸é€‚ç”¨ä½¿ç”¨ç»§æ‰¿çš„åœºæ™¯ç»§æ‰¿å±‚æ¬¡å¤ªé«˜ï¼Œæ— æ³•æ›´ç»†åŒ–è®¾è®¡é¢—ç²’ç­‰åœºæ™¯ï¼Œéœ€è¦è€ƒè™‘ä½¿ç”¨ã€‚ æ¥å£æˆ–è€…æŠ½è±¡ç±»ä¸ç¨³å®šçš„åœºæ™¯æ¥å£æˆ–è€…æŠ½è±¡ç±»ä¸ç¨³å®šï¼Œç»å¸¸å˜æ›´æ—¶ï¼Œä½¿ç”¨æ¡¥æ¢æ¨¡å¼ã€‚ é‡ç”¨å‹è¦æ±‚é«˜çš„åœºæ™¯è®¾è®¡çš„é¢—ç²’åº¦ç²¤è¥¿ï¼Œè¢«é‡ç”¨çš„å¯èƒ½æ€§è¶Šå¤§ã€‚é‡‡ç”¨ç»§æ‰¿å—åˆ°çˆ¶ç±»çš„é™åˆ¶ï¼Œä¸å¯èƒ½å‡ºç°å¤ªç»†çš„ç²’åº¦ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"æ¡¥æ¥æ¨¡å¼","slug":"æ¡¥æ¥æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"}]},{"title":"è£…é¥°å™¨æ¨¡å¼","slug":"è£…é¥°å™¨æ¨¡å¼","date":"2020-07-07T23:55:26.000Z","updated":"2020-07-08T01:01:30.533Z","comments":true,"path":"2020/07/08/è£…é¥°å™¨æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/08/%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è£…é¥°å™¨æ¨¡å¼å®šä¹‰åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´åŠ çµæ´»ã€‚ å®ç°ComponentComponent æ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®šä¹‰éœ€è¦è¢«è£…é¥°çš„åŸå§‹ç±»ã€‚ 123public abstract class Component&#123; public abstract void operate();&#125; Concrete ComponentComponent çš„å®ç°ç±»ã€‚ 12345678public class ConcreteComponent extends Component&#123; @Override public void operate()&#123; //.... &#125;&#125; DecoratoræŠ½è±¡ç±»ï¼Œç”¨äºå®ç°æ¥å£æˆ–è€…æŠ½è±¡æ–¹æ³•ã€‚åŒ…å«è¢«ä¿®é¥°çš„Componnetå±æ€§ã€‚ 12345678910111213public abstract class Decorator extends Component&#123; private Component component = null; public Decorator(Component c)&#123; this.component = c; &#125; @Override public void operate()&#123; this.component.operate(); &#125;&#125; Concrete Decoratorå…·ä½“è£…é¥°è§’è‰² 1234567891011121314151617181920212223242526public class ConcreteDecorator1 extends Decorator&#123; public ConcreteDecorator1(Component component)&#123; super(component); &#125; private void method1()&#123; //.... &#125; public void operate()&#123; this.method1(); super.operate(); &#125;&#125;public class ConcreteDecorator2 extends Decorator&#123; public ConcreteDecorator2(Component component)&#123; super(component); &#125; private void method2()&#123; //.... &#125; public void operate()&#123; super.operate(); this.method2(); &#125;&#125; Use1234Component c = new ConcreteComponent();c = new ConcreteDecorator1(c);c = new ConcreteDecorator2(c);c.operate(); åº”ç”¨ä¼˜ç‚¹è£…é¥°ç±»å’Œè¢«è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å‘å±•ï¼Œè€Œä¸ä¼šç›¸äº’è€¦åˆã€‚è£…é¥°æ¨¡å¼æ˜¯ç»§æ‰¿å…³ç³»çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆã€‚è£…é¥°æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå®ç°ç±»çš„åŠŸèƒ½ã€‚ ç¼ºç‚¹å½“è£…é¥°å¤šå±‚æ—¶å¯¼è‡´ç³»ç»Ÿå¤æ‚åº¦é«˜ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"ä»£ç†æ¨¡å¼","slug":"ä»£ç†æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"}]},{"title":"è§‚å¯Ÿè€…æ¨¡å¼","slug":"è§‚å¯Ÿè€…æ¨¡å¼","date":"2020-07-06T23:55:34.000Z","updated":"2020-07-07T06:49:10.955Z","comments":true,"path":"2020/07/07/è§‚å¯Ÿè€…æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/07/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è§‚å¯Ÿè€…æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼ä¹Ÿå«å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚ å®šä¹‰å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶ä¸”è¢«è‡ªåŠ¨æ›´æ–°ã€‚ å®ç°Subjectå®šä¹‰è¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£ï¼Œå¿…é¡»èƒ½å¤ŸåŠ¨æ€çš„å¢åŠ ã€å–æ¶ˆè§‚å¯Ÿè€…ã€‚å®ƒä¸€èˆ¬æ˜¯æŠ½è±¡ç±»æˆ–è€…å®ç°ç±»ï¼Œä»…ä»…å®Œæˆä½œä¸ºè¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£ï¼Œç®¡ç†è§‚å¯Ÿè€…å¹¶é€šçŸ¥è§‚å¯Ÿè€…ã€‚ 12345678910111213141516public abstract class Subject&#123; private Vector&lt;Observer&gt; obsVector = new Vector&lt;Observer&gt;(); public void addObserver(Observer o)&#123; this.obsVector.add(o); &#125; public void delObserver(Observer o)&#123; this.obsVector.remove(o); &#125; public void notifyObservers()&#123; for(Observer o : this.obsVector)&#123; o.update(); &#125;&#125; ConcreteSubjectå…·ä½“çš„è¢«è§‚å¯Ÿè€…ï¼Œå®šä¹‰è¢«è§‚å¯Ÿè€…è‡ªå·±çš„ä¸šåŠ¡ï¼ŒåŒæ—¶å®šä¹‰å¯¹å“ªäº›äº‹ä»¶è¿›è¡Œé€šçŸ¥ã€‚ 123456public class ConcreteSubject extends Subject&#123; public void doBusiness()&#123; //... super.notifyObservers(); &#125;&#125; Observerè§‚å¯Ÿè€…æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œå¯¹æ¥æ”¶åˆ°çš„ä¿¡æ¯è¿›è¡Œå¤„ç†ã€‚ 123public interface Observer&#123; public void update();&#125; ConcreteObserverå…·ä½“çš„è§‚å¯Ÿè€…ï¼Œä¸åŒçš„è§‚å¯Ÿè€…åœ¨å¤„ç†æ¶ˆæ¯çš„æ—¶å€™çš„å…·ä½“å®šä¹‰ã€‚ 12345public class ConcreteObserver implements Observer&#123; public void update()&#123; //do something when invoked. &#125;&#125; Use1234ConcreteSubject subject = new ConcreteSubject();Observer obs = new ConcreteObserver();subject.addObserver(obs);subject.doBusiness(); åº”ç”¨ä¼˜ç‚¹ è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆå¦‚è®ºå¢åŠ è§‚å¯Ÿè€…è¿˜æ˜¯è¢«è§‚å¯Ÿè€…éƒ½éå¸¸å®¹æ˜“æ‰©å±• å»ºç«‹äº†ä¸€å¥—è§„åˆ™çš„è§¦å‘æœºåˆ¶ ç¼ºç‚¹æ•ˆç‡ç¼ºé™·ï¼Œè€ƒè™‘é‡‡ç”¨å¼‚æ­¥æ–¹å¼é€šçŸ¥ã€‚ å¹¿æ’­é“¾çš„é—®é¢˜ A -&gt; B -&gt; C æ‰©å±•Javaä¸­çš„è§‚å¯Ÿè€…java æä¾›äº†java.util.Observeræ¥å£ å’Œ java.util.Observable ç±»ã€‚è¢«è§‚å¯Ÿè€…ç»§æ‰¿java.util.Observableï¼Œ è§‚å¯Ÿè€…å®ç°java.util.Observer.ä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è€ƒè™‘åˆ°æ€§èƒ½ä¸€èˆ¬ä¸ä¼šç”¨è¿™ç§æ–¹å¼æ¥å®ç°ã€‚ ç”Ÿäº§ä¸­çš„è§‚å¯Ÿè€…ä¸€èˆ¬ä½¿ç”¨MQæ¥å¼‚æ­¥å¤„ç†æœ¬åœ°çš„å¦‚Disruptor","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è§‚å¯Ÿè€…æ¨¡å¼","slug":"è§‚å¯Ÿè€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"}]},{"title":"Spring IOC And DI","slug":"Spring-IOC-And-DI","date":"2020-07-06T12:37:14.000Z","updated":"2020-07-14T09:41:06.697Z","comments":true,"path":"2020/07/06/Spring-IOC-And-DI/","link":"","permalink":"https://pickonebyone.github.io/2020/07/06/Spring-IOC-And-DI/","excerpt":"","text":"IOC ç®€å² 1983å¹´ï¼ŒRichard E.Sweet åœ¨&lt;&gt;æå‡ºå¥½è±ååŸåˆ™ï¼ˆâ€œä¸è¦æ‰“ç”µè¯ç»™æˆ‘ï¼Œæˆ‘ä¼šæ‰“ç”µè¯ç»™ä½ â€ï¼‰ã€‚ 1988å¹´ï¼ŒRolph E.Johnson å’ŒBrian Footeåœ¨ã€ŠDesigning Reusable Classesã€‹ä¸­æå‡ºæ§åˆ¶åè½¬ã€‚ 1996å¹´ï¼ŒMichael Mattsonåœ¨ã€ŠObject-Oriented Frameworks, A survey of methodological issuesã€‹å°†æ§åˆ¶åè½¬å‘½åä¸ºå¥½è±ååŸåˆ™ã€‚ 2004ï¼ŒMartin Fowleråœ¨ã€ŠInversion Of Control Containers and the Dependency Injection patternã€‹æå‡ºè‡ªå·±å¯¹å’ŒIOCå’ŒDIçš„ç†è§£ 2005å¹´ï¼ŒMartin Foloweråœ¨ã€ŠInversion Of Controlã€‹ä¸­å¯¹IOCè¿›ä¸€æ­¥è¯´æ˜ã€‚ Martin å¤§çˆ·å…³äºIOCçš„è¯´æ˜ IOC çš„å®ç°ç­–ç•¥WIKI: In object-oriented programming, there are several basic techniques to implement inversion of control. there are: Using a service locator pattern Using dependency injection constructor injection parameter injection setter injection interface injection Using a contextualized lookup. Using template method design pattern Using Strategy design pattern. EXPERT ONE-ON-ONE J2EE DEVELOPMENT without EJBæåˆ°çš„ç­–ç•¥ï¼š","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Spring","slug":"JavaæŠ€æœ¯æ ˆ/Spring","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://pickonebyone.github.io/tags/Java/"},{"name":"Spring","slug":"Spring","permalink":"https://pickonebyone.github.io/tags/Spring/"},{"name":"IOC","slug":"IOC","permalink":"https://pickonebyone.github.io/tags/IOC/"},{"name":"DI","slug":"DI","permalink":"https://pickonebyone.github.io/tags/DI/"}]},{"title":"ä¸­ä»‹è€…æ¨¡å¼","slug":"ä¸­ä»‹è€…æ¨¡å¼","date":"2020-07-06T09:04:56.000Z","updated":"2020-07-06T11:57:17.039Z","comments":true,"path":"2020/07/06/ä¸­ä»‹è€…æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/06/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ä¸­ä»‹è€…æ¨¡å¼ä¸»è¦ä¸ºäº†é™ä½æ¨¡å—å†…éƒ¨ä¹‹é—´ç±»çš„ç›¸äº’å¼•ç”¨ï¼Œé˜²æ­¢å‡ºç°ç³»ç»Ÿæˆ–è€…æ¨¡å—å†…éƒ¨è¿‡åº¦è€¦åˆã€‚ ä¸­ä»‹è€…æ¨¡å¼ä¹Ÿå«è°ƒåœè€…æ¨¡å¼ï¼Œä¸€ä¸ªå¯¹è±¡è¦å’ŒNä¸ªå¯¹è±¡äº¤æµç‰¹åˆ«æ··ä¹±ï¼Œè¿™ä¸ªæ—¶å€™åŠ å…¥ä¸€ä¸ªä¸­å¿ƒï¼Œæ‰€æœ‰çš„ç±»éƒ½å’Œä¸­å¿ƒäº¤æµï¼Œè¿™æ ·å°±å˜æˆäº†æ˜Ÿå‹æ‹“æ‰‘ç»“æ„ã€‚ å®šä¹‰ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡å°è£…ä¸€äº›åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾ç¤ºåœ°ç›¸äº’è°ƒç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ å®ç°MediatoræŠ½è±¡ä¸­ä»‹è€…è§’è‰²ï¼Œå®šä¹‰ç»Ÿä¸€çš„æ¥å£ï¼Œç”¨äºå„åŒäº‹è§’è‰²ä¹‹é—´çš„é€šä¿¡ã€‚ 123456789101112131415public abstract class Mediator&#123; protected ConcreteColleague1 c1; protected ConcreteColleague2 c2; public ConcreteColleague1 getC1()&#123; return c1;&#125; public ConcreteColleague2 getC2()&#123; return c2;&#125; public void setC1(ConcreteColleague1 c1)&#123; this.c1 = c1; &#125; public void setC2(ConcreteColleague2 c2)&#123; this.c2 = c2; &#125; public abstract void doSomething1(); public abstract void doSomething2();&#125; Concrete Mediatorå…·ä½“ä¸­ä»‹è€…è§’è‰²é€šè¿‡åè°ƒå„åŒäº‹è§’è‰²å®ç°åä½œè¡Œä¸ºï¼Œå› ä¸ºå®ƒå¿…é¡»ä¾èµ–äºå„ä¸ªåŒäº‹è§’è‰²ã€‚ 12345678910public class ConcreteMediator extends Mediator&#123; public void doSomething1()&#123; super.c1.selfMethod1(); super.c2.selfMethod2(); &#125; public void doSomething2()&#123; super.c1.selfMethod1(); super.c2.selfMethod2(); &#125;&#125; ColleagueåŒäº‹è§’è‰²ï¼Œæ¯ä¸ªåŒäº‹è§’è‰²éƒ½çŸ¥é“ä¸­ä»‹è€…è§’è‰²ï¼Œè€Œä¸”ä¸å…¶ä»–åŒäº‹è§’è‰²é€šä¿¡æ—¶ï¼Œä¸€å®šè¦é€šè¿‡ä¸­ä»‹è€…è§’è‰²åä½œã€‚ä¸€ç§æ˜¯åŒäº‹æœ¬èº«çš„è¡Œä¸ºå«è‡ªå‘è¡Œä¸ºï¼Œæ¯”å¦‚æ”¹å˜å¯¹è±¡æœ¬èº«çš„çŠ¶æ€ï¼Œå¤„ç†è‡ªå·±çš„è¡Œä¸ºï¼Œä¸å…¶ä»–åŒäº‹ç±»æˆ–è€…ä¸­ä»‹è€…ç¬¬äºŒç§æ˜¯ä¾èµ–è¡Œä¸ºï¼Œå¿…é¡»ä¾èµ–ä¸­ä»‹è€…æ‰èƒ½å®Œæˆçš„è¡Œä¸ºã€‚ 123456public abstract class Colleague&#123; protected Mediator mediator; public Colleague(Mediator mediator)&#123; this.mediator = mediator; &#125;&#125; 123456789101112131415161718192021222324252627public class ConcreteColleague1 extends Colleague&#123; public ConcreteColleague1(Mediator mediator)&#123; super(mediator); &#125; public void selfMethod1()&#123; &#125; public void depMethod1()&#123; super.mediator.doSomething1(); &#125;&#125;public class ConcreteColleague2 extends Colleague&#123; public ConcreteColleague2(Mediator mediator)&#123; super(mediator); &#125; public void selfMethod1()&#123; &#125; public void depMethod1()&#123; super.mediator.doSomething1(); &#125;&#125; åº”ç”¨ä¼˜ç‚¹å‡å°‘ç±»ä¹‹é—´çš„ä¾èµ–ï¼ŒæŠŠåŸæœ‰çš„ä¸€å¯¹å¤šçš„ä¾èµ–å˜æˆäº†ä¸€å¯¹ä¸€çš„ä¾èµ–ï¼ŒåŒäº‹ç±»åªä¾èµ–ä¸­ä»‹è€…ï¼Œå‡å°‘äº†ä¾èµ–ï¼ŒåŒæ—¶é™ä½äº†ç±»ä¹‹é—´çš„è€¦åˆã€‚ ç¼ºç‚¹ä¸­ä»‹è€…æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä¸­ä»‹è€…ä¼šè†¨èƒ€ï¼Œè€Œä¸”é€»è¾‘å¤æ‚ï¼ŒåŸæœ¬Nä¸ªå¯¹è±¡ç›´æ¥çš„ç›¸äº’ä¾èµ–å…³ç³»è½¬æ¢ä¸ºä¸­ä»‹è€…å’ŒåŒäº‹ç±»çš„ä¾èµ–å…³ç³»ï¼ŒåŒäº‹ç±»è¶Šå¤šï¼Œä¸­ä»‹è€…çš„é€»è¾‘å°±è¶Šå¤æ‚ã€‚ åº”ç”¨æœºåœºè°ƒåº¦ä¸­å¿ƒæ¯ä¸€æ¶é£æœºéƒ½å’Œæœºåœºè°ƒåº¦ä¸­å¿ƒä¿æŒè”ç³»ã€‚ MVCæ¡†æ¶Controlleråšä¸ºä¸€ä¸ªä¸­ä»‹è€…ï¼ŒæŠŠModelå’ŒViewéš”ç¦»å¼€ï¼Œåè°ƒMVååŒå·¥ä½œï¼ŒæŠŠMè¿è¡Œçš„ç»“æœå’ŒVä»£è¡¨çš„è§†å›¾èåˆæˆä¸€ä¸ªå‰ç«¯å¯ä»¥å±•ç¤ºçš„é¡µé¢ï¼Œå‡å°‘MVçš„ä¾èµ–å…³ç³»ã€‚ åª’ä½“ç½‘å…³ä¸­ä»‹æœåŠ¡","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"ä¸­ä»‹è€…æ¨¡å¼","slug":"ä¸­ä»‹è€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"}]},{"title":"ç©ºå¯¹è±¡æ¨¡å¼","slug":"ç©ºå¯¹è±¡æ¨¡å¼","date":"2020-07-05T23:19:23.000Z","updated":"2020-07-05T23:30:41.024Z","comments":true,"path":"2020/07/06/ç©ºå¯¹è±¡æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/06/%E7%A9%BA%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ç©ºå¯¹è±¡æ¨¡å¼ç©ºå¯¹è±¡æ¨¡å¼æ—¶é€šè¿‡ç©ºä»£ç å®ç°ä¸€ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œä»¥æ»¡è¶³å¼€å‘éœ€æ±‚ï¼Œç®€åŒ–ç¨‹åºã€‚ å®šä¹‰é€šè¿‡å®ç°ä¸€ä¸ªé»˜è®¤æ— æ„ä¹‰çš„å¯¹è±¡æ¥é¿å…nullå€¼çš„å‡ºç°ã€‚ä¸ºäº†é¿å…ç¨‹åºä¸­å‡ºç°åˆ¤æ–­nullçš„æƒ…å†µè€Œäº§ç”Ÿçš„ã€‚ å®ç°12345678910111213public interface Animal&#123; public void makeSound();&#125;public class Dog implements Animal&#123; public void makeSound()&#123; System.out.println(\"Wang...\"); &#125;&#125;public class NullAnimal import Animal&#123; public void makeSound()&#123;&#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è§£é‡Šå™¨æ¨¡å¼","slug":"è§£é‡Šå™¨æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/"}]},{"title":"è§£é‡Šå™¨æ¨¡å¼","slug":"è§£é‡Šå™¨æ¨¡å¼","date":"2020-07-05T01:34:31.000Z","updated":"2020-07-05T02:41:45.084Z","comments":true,"path":"2020/07/05/è§£é‡Šå™¨æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/05/%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è§£é‡Šå™¨æ¨¡å¼è§£é‡Šå™¨æ¨¡å¼æ˜¯ä¸€ç§æŒ‰ç…§è§„å®šè¯­æ³•è¿›è¡Œè§£æçš„æ–¹æ¡ˆã€‚ å®šä¹‰ç»™ä¸€é—¨è¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶ä¸”å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚ æ¯”å¦‚Javaè¯­è¨€ï¼Œå®šä¹‰æ–‡æ³•çš„è¡¨ç¤ºæ˜¯Javaçš„è¯­æ³•ã€‚javacç¼–è¯‘å™¨çœ‹ä½œæ˜¯è§£é‡Šå™¨ï¼Œè§£é‡Šå™¨ç”¨æ¥å°†Javaâ€œè§£é‡Šä¸ºâ€ .class æ ¼å¼çš„æ–‡ä»¶ã€‚ å®ç°AbstractExpressionæŠ½è±¡è§£é‡Šå™¨ï¼ŒæŠ½è±¡è§£é‡Šå™¨é€šå¸¸åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œ æ˜¯ç”Ÿæˆè¯­æ³•é›†åˆçš„å…³é”®ï¼Œæ¯ä¸ªè¯­æ³•é›†åˆå®ŒæˆæŒ‡å®šè¯­æ³•çš„è§£æä»»åŠ¡ï¼Œé€šè¿‡é€’å½’è°ƒç”¨çš„æ–¹å¼ï¼Œæœ€ç»ˆç”±æœ€å°çš„è¯­æ³•ä½†æ„¿è¿›è¡Œè§£æå®Œæˆã€‚å…·ä½“çš„è§£é‡Šä»»åŠ¡ç”±å„ä¸ªå®ç°ç±»å®Œæˆã€‚å…·ä½“çš„è§£é‡Šå™¨åˆ†åˆ«ç”±TerminalExpressionå’ŒNon-terminalExpressionå®Œæˆã€‚ 1234567891011public abstract class Expression &#123; /** * è§£æå…¬å¼å’Œæ•°å€¼ï¼Œå…¶ä¸­varä¸­çš„keyæ˜¯å…¬å¼ä¸­çš„å‚æ•°ï¼Œvalueå€¼æ˜¯å…·ä½“çš„æ•°å­—ã€‚ * @param var * @return */ public abstract int interpreter(HashMap&lt;String,Integer&gt; var);&#125; TerminalExpressionç»ˆç»“ç¬¦è¡¨è¾¾å¼å®ç°ä¸æ–‡æ³•ä¸­çš„å…ƒç´ ç›¸å…³è”çš„è§£é‡Šæ“ä½œï¼Œé€šå¸¸ä¸€ä¸ªè§£é‡Šå™¨æ¨¡å¼ä¸­åªæœ‰ä¸€ä¸ªç»ˆç»“ç¬¦çš„è¡¨è¾¾å¼ï¼Œä½†æ˜¯æœ‰å¤šä¸ªå®ä¾‹ï¼Œå¯¹åº”ä¸åŒçš„ç»ˆç»“ç¬¦ã€‚è¡¨è¾¾å¼ä¸­æ¯ä¸ªç»ˆç»“ç¬¦éƒ½åœ¨æ ˆä¸­äº§ç”Ÿäº†ä¸€ä¸ªvarExpressionã€‚ 12345678910111213public class VarExpression extends Expression &#123; private String key; public VarExpression(String key) &#123; this.key = key; &#125; @Override public int interpreter(HashMap&lt;String, Integer&gt; var) &#123; return var.get(this.key); &#125;&#125; NoneTerminalExpressionéç»ˆç»“ç¬¦è¡¨è¾¾å¼æ–‡æ³•ä¸­æ¯æ¡è§„åˆ™éƒ½å¯¹åº”ä¸€ä¸ªéç»ˆç»“è¡¨è¾¾å¼ï¼Œå…·ä½“åˆ°æˆ‘ä»¬çš„ä¾‹å­å°±æ˜¯åŠ å‡æ³•è§„åˆ™åˆ†åˆ«å¯¹åº”åˆ°AddExpressionå’ŒSubExpressionä¸¤ä¸ªç±»ï¼Œéç»ˆç»“è¡¨è¾¾å¼æ ¹æ®é€»è¾‘çš„å¤æ‚ç¨‹åº¦è€Œå¢åŠ ï¼ŒåŸåˆ™ä¸Šæ¯ä¸ªæ–‡æ³•è§„åˆ™éƒ½å¯¹åº”ä¸€ä¸ªéç»ˆç»“ç¬¦è¡¨è¾¾å¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435public abstract class SymbolExpression extends Expression &#123; protected Expression left; protected Expression right; public SymbolExpression(Expression left, Expression right) &#123; this.left = left; this.right = right; &#125;&#125;public class AddExpression extends SymbolExpression &#123; public AddExpression(Expression left, Expression right) &#123; super(left, right); &#125; @Override public int interpreter(HashMap&lt;String, Integer&gt; var) &#123; return super.left.interpreter(var) + super.right.interpreter(var); &#125;&#125;public class SubExpression extends SymbolExpression &#123; public SubExpression(Expression left, Expression right) &#123; super(left, right); &#125; @Override public int interpreter(HashMap&lt;String, Integer&gt; var) &#123; return super.left.interpreter(var) - super.right.interpreter(var); &#125;&#125; Contextç¯å¢ƒè§’è‰²ï¼Œ 1234567891011121314151617181920212223242526272829303132333435public class Calculator &#123; private Expression expression; public Calculator(String expStr) &#123; Stack&lt;Expression&gt; stack = new Stack&lt;&gt;(); char[] charArray = expStr.toCharArray(); Expression left = null; Expression right = null; for (int i = 0; i &lt; charArray.length; i++) &#123; switch (charArray[i]) &#123; case '+': left = stack.pop(); right = new VarExpression(String.valueOf(charArray[++i])); stack.push(new AddExpression(left, right)); break; case '-': left = stack.pop(); right = new VarExpression(String.valueOf(charArray[++i])); stack.push(new SubExpression(left, right)); break; default: stack.push(new VarExpression(String.valueOf(charArray[i]))); break; &#125; &#125; this.expression = stack.pop(); &#125; public int run(HashMap&lt;String, Integer&gt; var) &#123; return this.expression.interpreter(var); &#125;&#125; Use123456789101112131415161718192021222324public static void main(String[] args) throws IOException &#123; String expStr = getExpStr(); HashMap&lt;String, Integer&gt; var = getValue(expStr); Calculator calculator = new Calculator(expStr); System.out.println(calculator.run(var));&#125;private static HashMap&lt;String, Integer&gt; getValue(String expStr) throws IOException &#123; HashMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); for (char c : expStr.toCharArray()) &#123; if (c != '+' &amp; c != '-') &#123; if (!map.containsKey(String.valueOf(c))) &#123; String in = (new BufferedReader(new InputStreamReader(System.in))).readLine(); map.put(String.valueOf(c), Integer.valueOf(in)); &#125; &#125; &#125; return map;&#125;private static String getExpStr() throws IOException &#123; System.out.println(\"Input Expression\"); return new BufferedReader(new InputStreamReader(System.in)).readLine();&#125; åº”ç”¨ä¼˜ç‚¹æ‰©å±•æ€§è‰¯å¥½ï¼Œä¿®æ”¹è¯­æ³•è§„åˆ™åªéœ€è¦ä¿®æ”¹ç›¸åº”çš„éç»ˆç»“ç¬¦è¡¨è¾¾å¼å°±å¯ä»¥äº†ã€‚å¦‚æœæ‰©å±•è¯­æ³•ï¼Œåˆ™åªè¦å¢åŠ éç»ˆç»“ç¬¦ç±»å°±å¯ä»¥äº†ã€‚ ç¼ºç‚¹è§£é‡Šå™¨æ¨¡å¼ä¼šå¼•èµ·ç±»è†¨èƒ€ï¼Œæ¯ä¸ªè¯­æ³•éƒ½è¦äº§ç”Ÿä¸€ä¸ªéç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼Œè¯­æ³•è§„åˆ™æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå°±å¯ä»¥èƒ½äº§ç”Ÿå¤§é‡çš„ç±»æ–‡ä»¶ã€‚è§£é‡Šå™¨æ¨¡å¼é‡‡ç”¨é€’å½’è°ƒç”¨æ–¹å¼ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éœ€è¦çŸ¥é“æœ€ç»ˆçš„ç»“æœï¼Œå¿…é¡»ä¸€å±‚å±‚é€’å½’ï¼Œæ— è®ºæ˜¯é¢å‘å¯¹è±¡è¿˜æ˜¯é¢å‘è¿‡ç¨‹ï¼Œé€’å½’éƒ½æ˜¯åœ¨å¿…è¦æ¡ä»¶ä¸‹æ‰ä½¿ç”¨ï¼Œå¯¼è‡´è°ƒè¯•å¤æ‚ã€‚ æ•ˆç‡é—®é¢˜ï¼Œè§£é‡Šå™¨æ¨¡å¼ä½¿ç”¨å¤§é‡çš„å¾ªç¯å’Œé€’å½’ï¼Œæ•ˆç‡æ—¶ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚ ä½¿ç”¨åœºæ™¯é‡å¤å‘ç”Ÿçš„é—®é¢˜å¯ä»¥è§£é‡Šå™¨æ¨¡å¼ï¼Œå¤šä¸ªåº”ç”¨æœåŠ¡å™¨ï¼Œæ¯å¤©äº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œéœ€è¦å¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œåˆ†æå¤„ç†ï¼Œç”±äºå„ä¸ªæœåŠ¡å™¨çš„æ—¥å¿—æ ¼å¼ä¸åŒï¼Œä½†æ˜¯æ•°æ®è¦ç´ ç›¸åŒï¼ŒæŒ‰ç…§è§£é‡Šå™¨æ¨¡å¼ç»ˆç»“ç¬¦è¡¨è¾¾å¼ç›¸åŒï¼Œéç»ˆç»“ç¬¦è¡¨è¾¾å¼éœ€è¦å®šåˆ¶ã€‚ ä¸€ä¸ªç®€å•è¯­æ³•éœ€è¦è§£é‡Šçš„åœºæ™¯ï¼Œè§£é‡Šå™¨æ¨¡å¼ä¸€èˆ¬ç”¨æ¥è§£æè¡¨æ ‡å‡†çš„å­—ç¬¦é›†ï¼Œå¦‚SQLè¯­æ³•åˆ†æã€‚ æ³¨æ„äº‹é¡¹å°½é‡ä¸è¦åœ¨é‡è¦çš„æ¨¡å—ä¸­ä½¿ç”¨è§£é‡Šå™¨æ¨¡å¼ï¼Œç»´æŠ¤æˆæœ¬å¤ªé«˜ã€‚å°½é‡ä½¿ç”¨shellã€JRubyã€Groovyæ¥æ›¿ä»£ã€‚ æ‰©å±•æˆç†Ÿçš„å·¥å…·Expression4JMESP: Math Expression String Parserã€Jep.","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è§£é‡Šå™¨æ¨¡å¼","slug":"è§£é‡Šå™¨æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/"}]},{"title":"å¤‡å¿˜å½•æ¨¡å¼","slug":"å¤‡å¿˜å½•æ¨¡å¼","date":"2020-07-03T22:57:09.000Z","updated":"2020-07-04T00:52:36.954Z","comments":true,"path":"2020/07/04/å¤‡å¿˜å½•æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/04/%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å¤‡å¿˜å½•æ¨¡å¼å®šä¹‰åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥çŠ¶æ€ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯ä»¥å°†è¯¥çŠ¶æ€æ¢å¤åˆ°åŸæ¥ä¿å­˜çš„çŠ¶æ€ã€‚ å®ç°Originatorå‘èµ·äººè§’è‰²ï¼Œè®°å½•å½“å‰æ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ï¼Œè´Ÿè´£å®šä¹‰å“ªäº›å±æ€§å¤‡ä»½èŒƒå›´çš„çŠ¶æ€ï¼Œè´Ÿè´£åˆ›å»ºå’Œæ¢å¤å¤‡å¿˜å½•æ•°æ®ã€‚ 1234567891011121314151617181920212223242526272829303132public class Boy &#123; private String state = \"\"; public void change()&#123; this.state = \" I Am So Sad.\"; &#125; public String getState() &#123; return state; &#125; public void setState(String state) &#123; this.state = state; &#125; /** * å¯ä»¥åˆ›å»ºå¤šä¸ªå¤‡ä»½ * @return */ public Memento createMemento()&#123; return new Memento(this.state); &#125; /** * å¯ä»¥é€‰æ‹©ä»»æ„çš„å¤‡ä»½è¿›è¡Œæ¢å¤ * @param memento */ public void restore(Memento memento)&#123; this.setState(memento.getState()); &#125;&#125; Mementoå¤‡å¿˜å½•è§’è‰²ï¼Œè´Ÿè´£å­˜å‚¨Originatorå‘èµ·äººå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æä¾›å‘èµ·äººéœ€è¦çš„å†…éƒ¨çŠ¶æ€ã€‚ 12345678910111213141516public class Memento &#123; private String state = \"\"; public Memento(String state) &#123; this.state = state; &#125; public String getState() &#123; return state; &#125; public void setState(String state) &#123; this.state = state; &#125;&#125; Caretakerå¤‡å¿˜å½•ç®¡ç†å‘˜è§’è‰²ï¼Œå¯¹å¤‡å¿˜å½•è¿›è¡Œç®¡ç†ã€ä¿å­˜å’Œæä¾›å¤‡å¿˜å½•ã€‚ 123456789101112public class Caretaker &#123; private Memento memento; public Memento getMemento() &#123; return memento; &#125; public void setMemento(Memento memento) &#123; this.memento = memento; &#125;&#125; Use123456789Caretaker caretaker = new Caretaker();caretaker.setMemento(boy.createMemento());System.out.println(\"Now Boy Is : \" + boy.getState());boy.change();System.out.println(\"Now Boy Is : \" + boy.getState());boy.restore(caretaker.getMemento());System.out.println(\"Now Boy Is : \" + boy.getState()); ä½¿ç”¨åœºæ™¯ éœ€è¦ä¿å­˜å’Œæ¢å¤æ•°æ®çš„ç›¸å…³çŠ¶æ€åœºæ™¯ æä¾›ä¸€ä¸ªå¯å›æ»šçš„æ“ä½œ éœ€è¦ç›‘æ§çš„å‰¯æœ¬åœºæ™¯ä¸­ æ•°æ®åº“è¿æ¥çš„äº‹åŠ¡ç®¡ç† æ³¨æ„äº‹é¡¹ å¤‡å¿˜å½•çš„ç”Ÿå‘½å‘¨æœŸä¸»åŠ¨ç®¡ç†å¤‡å¿˜å½•çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸å®ç”¨å°±éœ€è¦ç«‹å³åˆ é™¤å…¶å¼•ç”¨ã€‚ å¤‡å¿˜å½•çš„æ€§èƒ½è¦æ§åˆ¶å¤‡å¿˜å½•çš„å†å²è®°å½•æ•°é‡ï¼Œä»¥åŠå¤§å¯¹è±¡çš„å¤‡å¿˜å½•ã€‚ æ‰©å±•Cloneæ–¹å¼çš„å¤‡å¿˜å½•123456789101112131415161718192021222324252627282930public class Originator implements Cloneable &#123; private String state = \"\"; public String getState() &#123; return state; &#125; public void setState(String state) &#123; this.state = state; &#125; public Originator createMemento()&#123; return this.clone(); &#125; public void restoreMemento(Originator originator)&#123; this.setState(originator.getState()); &#125; @Override protected Originator clone() &#123; try &#123; return (Originator)super.clone(); &#125; catch (CloneNotSupportedException e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; 123456789101112public class Caretaker &#123; private Originator originator; public Originator getOriginator() &#123; return originator; &#125; public void setOriginator(Originator originator) &#123; this.originator = originator; &#125;&#125; å¤šçŠ¶æ€çš„å¤‡å¿˜å½•æ¨¡å¼æŠŠæ•´ä¸ªå¯¹è±¡è½¬æ¢æˆMapï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åºåˆ—åŒ–ã€æˆ–è€…ç›´æ¥å¤åˆ¶æ•´ä¸ªå¯¹è±¡ã€‚ 12345678910111213141516public class Memento &#123; private HashMap&lt;String,Object&gt; stateMap; public Memento(HashMap&lt;String, Object&gt; stateMap) &#123; this.stateMap = stateMap; &#125; public HashMap&lt;String, Object&gt; getStateMap() &#123; return stateMap; &#125; public void setStateMap(HashMap&lt;String, Object&gt; stateMap) &#123; this.stateMap = stateMap; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445import java.beans.BeanInfo;import java.beans.Introspector;import java.beans.PropertyDescriptor;import java.lang.reflect.Method;import java.util.HashMap;public class BeanUtils &#123; public static HashMap&lt;String,Object&gt; backupProp(Object bean)&#123; HashMap&lt;String,Object&gt; result = new HashMap&lt;&gt;(); try&#123; BeanInfo beanInfo = Introspector.getBeanInfo(bean.getClass()); PropertyDescriptor[] descriptors = beanInfo.getPropertyDescriptors(); for (PropertyDescriptor descriptor : descriptors) &#123; String fieldName = descriptor.getName(); Method getter = descriptor.getReadMethod(); Object fieldValue = getter.invoke(bean, new Object[]&#123;&#125;); if (!fieldName.equalsIgnoreCase(\"class\"))&#123; result.put(fieldName, fieldValue); &#125; &#125; &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; return null; &#125; public static void restoreProp(Object bean, HashMap&lt;String,Object&gt; propMap)&#123; try&#123; BeanInfo beanInfo = Introspector.getBeanInfo(bean.getClass()); PropertyDescriptor[] descriptors = beanInfo.getPropertyDescriptors(); for (PropertyDescriptor descriptor : descriptors) &#123; String fieldName = descriptor.getName(); if (propMap.containsKey(fieldName))&#123; Method setter = descriptor.getWriteMethod(); setter.invoke(bean, new Object[]&#123;propMap.get(fieldName)&#125;); &#125; &#125; &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839public class Originator &#123; private String state1 = \"\"; private String state2 = \"\"; private String state3 = \"\"; public String getState1() &#123; return state1; &#125; public void setState1(String state1) &#123; this.state1 = state1; &#125; public String getState2() &#123; return state2; &#125; public void setState2(String state2) &#123; this.state2 = state2; &#125; public String getState3() &#123; return state3; &#125; public void setState3(String state3) &#123; this.state3 = state3; &#125; public Memento createMemento()&#123; return new Memento(BeanUtils.backupProp(this)); &#125; public void restoreMemento(Memento memento)&#123; BeanUtils.restoreProp(this, memento.getStateMap()); &#125;&#125; å¤šå¤‡ä»½çš„å¤‡å¿˜å½•12345678910111213141516public class Caretaker &#123; Map&lt;String, Memento&gt; map = new LinkedHashMap&lt;&gt;(); public void backup(String version, Memento memento)&#123; map.put(version, memento); &#125; public Memento get(String version)&#123; return map.get(version); &#125; public Map&lt;String,Memento&gt; getAll()&#123; return this.map; &#125;&#125; ä¼˜é›…çš„å®ç°Bean å¯¹è±¡ä¸“æ³¨è‡ªå·±çš„ä¸šåŠ¡ï¼Œä¸éœ€è¦å…³å¿ƒå¤‡ä»½å’Œæ¢å¤ä¸šåŠ¡ã€‚ 123456789101112131415161718192021222324252627public class Original implements Cloneable &#123; private String state; private String info; public String getState() &#123; return state; &#125; public void setState(String state) &#123; this.state = state; &#125; public String getInfo() &#123; return info; &#125; public void setInfo(String info) &#123; this.info = info; &#125; @Override protected Object clone() throws CloneNotSupportedException &#123; return super.clone(); &#125;&#125; å¤‡ä»½ç®¡ç†å‘˜è´Ÿè´£ç‰ˆæœ¬çš„å¤‡ä»½ä¸æ¢å¤å·¥ä½œï¼ŒèŒè´£æ˜æ™°ã€‚åŒæ—¶è¦æ³¨æ„å†å²ç‰ˆæœ¬æ¬¡æ•°ï¼Œé˜²æ­¢ç‰ˆæœ¬è¿‡å¤šã€‚ 1234567891011121314151617181920212223public class Caretacker &#123; private int size = 10; private Map&lt;String, Original&gt; histo = new LinkedHashMap&lt;&gt;(); public boolean backup(String key, Original o) &#123; if (histo.size() &gt;= 10) &#123; return false; &#125; try&#123; histo.put(key,(Original) o.clone() ); &#125;catch (Exception e)&#123; e.printStackTrace(); return false; &#125; return true; &#125; public Original get(String k) &#123; return histo.get(k); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è´£ä»»é“¾æ¨¡å¼","slug":"è´£ä»»é“¾æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"}]},{"title":"Spring æ€»è§ˆ","slug":"Spring-æ€»è§ˆ","date":"2020-07-03T12:32:28.000Z","updated":"2020-07-06T12:37:57.022Z","comments":true,"path":"2020/07/03/Spring-æ€»è§ˆ/","link":"","permalink":"https://pickonebyone.github.io/2020/07/03/Spring-%E6%80%BB%E8%A7%88/","excerpt":"","text":"Springç›¸å…³å†…å®¹æ¥æºäºSpringå®˜æ–¹ç½‘ç«™ä¸Springæºç ã€‚ Spring 5.2.7 Springæ¡†æ¶ä¸ºä¼ä¸šçº§åº”ç”¨æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„é…ç½®å¼€å‘æ¨¡å‹ï¼Œå¯ä»¥åœ¨ä»»ä½•ç±»å‹çš„å‘å¸ƒå¹³å°ã€‚Springä¸“æ³¨äºä¼ä¸šåº”ç”¨çš„ç®¡é“ï¼Œä¿è¯å¼€å‘å›¢é˜Ÿä¸“æ³¨äºä¼ä¸šçš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³æ³¨å‘å¸ƒå¹³å°ã€‚ åŠŸèƒ½æ ¸å¿ƒæŠ€æœ¯ Dependency Injectionä¾èµ–æ³¨å…¥ events äº‹ä»¶ resources èµ„æºç®¡ç† i18n å›½é™…åŒ– validation æ ¡éªŒ data binding æ•°æ®ç»‘å®š type conversion ç±»å‹è½¬æ¢ SpEL AOP Aspect Oriented Programming é¢å‘åˆ‡é¢ç¼–ç¨‹ æµ‹è¯• Mock Objects: æ¨¡æ‹Ÿå¯¹è±¡ TestContext framework: æµ‹è¯•ä¸Šä¸‹æ–‡æ¡†æ¶ Spring MVC Test: MVCæµ‹è¯•æ¡†æ¶ WebTestClient: webæµ‹è¯•å®¢æˆ·ç«¯ DataAccess transactions: äº‹åŠ¡ DAO Support: DAO æ”¯æŒ JDBC: ORMï¼š Marshalling XML Spring MVCSpring WebFluxIntegration remoting JMS JCA JMX email tasks scheduling cache Languages Kotlin Groovy dynamic languages.","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Spring","slug":"JavaæŠ€æœ¯æ ˆ/Spring","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/"}],"tags":[]},{"title":"å‘½ä»¤æ¨¡å¼","slug":"å‘½ä»¤æ¨¡å¼","date":"2020-07-03T07:17:03.000Z","updated":"2020-07-03T22:54:03.358Z","comments":true,"path":"2020/07/03/å‘½ä»¤æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/03/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å‘½ä»¤æ¨¡å¼å‘½ä»¤æ¨¡å¼çš„å°è£…æ€§éå¸¸å¥½ï¼ŒæŠŠè¯·æ±‚æ–¹ï¼ˆInvokerï¼‰å’Œæ‰§è¡Œæ–¹ï¼ˆReceiverï¼‰åˆ†å¼€ï¼Œæ‰©å±•æ€§ä¹Ÿéå¸¸å¥½ã€‚ å®šä¹‰å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿å¾—ä¸åŒçš„è¯·æ±‚æŠŠå®¢æˆ·ç«¯å‚æ•°åŒ–ï¼Œå¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œå¯ä»¥æä¾›å‘½ä»¤çš„æ’¤é”€å’Œæ¢å¤åŠŸèƒ½ã€‚ å®ç°ReceiveræŠ½è±¡æ¥æ”¶è€…ï¼Œå®šä¹‰æ¯ä¸ªæ¥æ”¶è€…éƒ½å¿…é¡»å®Œæˆçš„ä¸šåŠ¡ã€‚ 123public abstract class Receiver&#123; public abstract void doSomething();&#125; å…·ä½“çš„Receiver 1234567public class Concrete1Reveiver extends Receiver&#123; public void doSomething()&#123;&#125;&#125;public class Concrete2Reveiver extends Receiver&#123; public void doSomething()&#123;&#125;&#125; Commandä¸åŒçš„å‘½ä»¤å®ç°éƒ½éœ€è¦ç»§æ‰¿è¯¥ç±»ï¼Œå®ç°è‡ªå·±çš„executeé€»è¾‘ã€‚ 123public abstract class Command&#123; public abstract void execute();&#125; å…·ä½“çš„å‘½ä»¤å®ç°ç±» 12345678910111213141516171819public class ConcreteCommand1 extends Command&#123; private Receiver receiver; public ConcreteCommand1(Receiver receiver)&#123; this.receiver = receiver; &#125; public void execute()&#123; this.receiver.doSomething(); &#125;&#125;public class ConcreteCommand2 extends Command&#123; private Receiver receiver; public ConcreteCommand2(Receiver receiver)&#123; this.receiver = receiver; &#125; public void execute()&#123; this.receiver.doSomething(); &#125;&#125; Invoker123456789public class Invoker&#123; private Command command; public void setCommand(Command command)&#123; this.command = command; &#125; public void action()&#123; this.command.execute(); &#125;&#125; Use123Invoker invoker = new Invoker();invoker.setCommand(new ConcreteCommand1(new Concrete1Reveiver()));invoker.action(); æ¨¡å¼åº”ç”¨ä¼˜ç‚¹ è§£è€¦è°ƒç”¨è€…è§’è‰²ä¸æ¥æ”¶è€…è§’è‰²ä¹‹é—´æ²¡æœ‰ä»»ä½•ä¾èµ–å…³ç³»ï¼Œè°ƒç”¨è€…å®ç°åŠŸèƒ½æ—¶åªéœ€è¦è°ƒç”¨CommandæŠ½è±¡ç±»çš„executeæ–¹æ³•å³å¯ï¼Œä¸éœ€è¦äº†è§£æ˜¯å“ªä¸ªæ¥æ”¶è€…æ‰§è¡Œã€‚ å¯æ‰©å±•æ€§å¥½Commandå­ç±»å¯ä»¥éå¸¸å®¹æ˜“çš„æ‰©å±•ï¼Œè°ƒç”¨è€…Invokerå’Œé«˜å±‚çš„æ¨¡å—Clientä¸äº§ç”Ÿä¸¥é‡çš„ä»£ç è€¦åˆã€‚ ä¸å…¶ä»–æ¨¡å¼æ··åˆä½¿ç”¨ä¸è´£ä»»é“¾æ¨¡å¼ç»“åˆï¼Œå®ç°å‘½ä»¤æ—è§£æä»»åŠ¡ä¸æ¨¡ç‰ˆæ–¹æ³•ç»“åˆï¼Œå‡å°‘Commandå­ç±»è†¨èƒ€çš„é—®é¢˜ã€‚ ç¼ºç‚¹Commandçš„å­ç±»ä¼šéšç€å‘½ä»¤çš„å¢å¤šé€æ­¥è†¨èƒ€ã€‚ å‘½ä»¤çš„æ’¤é”€åå‘½ä»¤é€šè¿‡ç›¸åçš„å‘½ä»¤æ¥å®ç°å‘½ä»¤çš„æ’¤é”€ã€‚ ç»“åˆå¤‡å¿˜å½•æ¨¡å¼ç»“åˆå¤‡å¿˜å½•æ¨¡å¼è¿˜åŸæœ€åçŠ¶æ€ï¼ŒæŠ˜ä¸­å‘æ˜‚å‘é€‚åˆæ¥æ”¶è€…ä¸ºçŠ¶æ€çš„å˜æ›´æƒ…å†µï¼Œè€Œä¸é€‚åˆäº‹ä»¶å¤„ç†ã€‚ ä»£ç å®ä¾‹å‡è®¾æœ‰ä¸ªå½•éŸ³æœºï¼Œå½•éŸ³æœºé¢æ¿æœ‰ä¸‰ä¸ªæŒ‰é’®ï¼Œ playï¼Œ rewindï¼Œ stopã€‚ éœ€è¦æ ¹æ®ä¸‰ä¸ªæŒ‰é’®ä½œå‡ºç›¸åº”çš„åé¦ˆã€‚ Receiver1234567891011121314public class AudioPlayer &#123; public void paly()&#123; System.out.println(\"Play\"); &#125; public void rewind()&#123; System.out.println(\"Rewind\"); &#125; public void stop()&#123; System.out.println(\"Stop\"); &#125;&#125; Commandä¸åŒçš„Commandè°ƒç”¨ä¸åŒçš„Receiverå‘½ä»¤ã€‚ 12345678910111213141516171819202122232425262728public abstract class Command &#123; protected static AudioPlayer audioPlayer = new AudioPlayer(); public abstract void execute();&#125;public class PlayCommand extends Command &#123; @Override public void execute() &#123; super.audioPlayer.paly(); &#125;&#125;public class RewindCommand extends Command &#123; @Override public void execute() &#123; audioPlayer.rewind(); &#125;&#125;public class StopCommand extends Command &#123; @Override public void execute() &#123; audioPlayer.stop(); &#125;&#125; Invokerç”¨äºè½¬å‘Command 1234567891011public class KeyPad &#123; private Command command; public void setCommand(Command command) &#123; this.command = command; &#125; public void action() &#123; this.command.execute(); &#125;&#125; Use1234567KeyPad keyPad = new KeyPad();keyPad.setCommand(new RewindCommand());keyPad.action();keyPad.setCommand(new StopCommand());keyPad.action(); å¦‚æœåæœŸéœ€è¦å¢åŠ ä¸€ä¸ªæŒ‰é’®ï¼ŒstopAndRewind()ï¼Œç›´æ¥å¢åŠ ä¸€ä¸ªCommandå­ç±»å³å¯ï¼Œå…¶ä»–åœ°æ–¹ä¸éœ€è¦åŠ¨ã€‚ 12345678public class StopAndRewindCommand extends Command &#123; @Override public void execute() &#123; audioPlayer.stop(); audioPlayer.rewind(); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è´£ä»»é“¾æ¨¡å¼","slug":"è´£ä»»é“¾æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"}]},{"title":"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼","slug":"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼","date":"2020-07-02T07:04:59.000Z","updated":"2020-07-02T07:40:55.545Z","comments":true,"path":"2020/07/02/æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/02/%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼æŠ½è±¡ç±»å®šä¹‰ä¸€ç»„æ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Œå…·ä½“çš„åŠŸèƒ½ç”±å­ç±»æ¥å®ç°ã€‚å®ƒä»…ä»…ä½¿ç”¨äº†Javaçš„ç»§æ‰¿æœºåˆ¶ï¼Œä½†ä½¿ç”¨éå¸¸å¹¿æ³›ã€‚ä¸€èˆ¬å¤šä¸ªå­ç±»æœ‰å…¬æœ‰çš„æ–¹æ³•ï¼Œå¹¶ä¸”é€»è¾‘åŸºæœ¬ç›¸åŒçš„æ—¶å€™ä½¿ç”¨ã€‚ å®šä¹‰å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•æ¡†æ¶ï¼Œå†å°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ç®—æ³•çš„ç»“æ„å°±å¯ä»¥å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ å®ç°åŸºæœ¬æ–¹æ³•ä¸€äº›åŸºæœ¬çš„æ“ä½œï¼Œç”±å­ç±»å®ç°å…·ä½“çš„é€»è¾‘ï¼Œåœ¨æ¨¡ç‰ˆæ–¹æ³•ä¸­è¢«è°ƒç”¨ã€‚ æ¨¡ç‰ˆæ–¹æ³•æ¨¡ç‰ˆæ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå…·ä½“çš„æ–¹æ³•ï¼ŒåŒ…å«äº†åŸºæœ¬æ–¹æ³•çš„è°ƒç”¨é€»è¾‘ã€‚ æŠ½è±¡æ¨¡ç‰ˆç±»ä¸­åŒ…å«äº†ä¸€ä¸ªæ¨¡ç‰ˆæ–¹æ³•goToSchoolå’Œä¸‰ä¸ªåŸºæœ¬æ–¹æ³•toSchool, study, goHome.è¿™æ ·ï¼Œæ¯ä¸ªå­¦ç”Ÿç»§æ‰¿è¯¥æŠ½è±¡ç±»å®ç°è‡ªå·±é€»è¾‘å³å¯ã€‚ 123456789101112131415public abstract class StudentBehavor&#123; protected abstract void toSchool(); protected abstract void study(); protected abstract void goHome(); public void goToSchool()&#123; //do something. toSchool(); // do something. study(); // do something. goHome(); // do something. &#125;&#125; åº”ç”¨ä¼˜ç‚¹ å°è£…ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†æŠŠè®¤ä¸ºä¸å˜çš„éƒ¨åˆ†ç®—æ³•å°è£…åˆ°çˆ¶ç±»å®ç°ï¼Œå¯å˜éƒ¨åˆ†é€šè¿‡ç»§æ‰¿æ¥æ‰©å±•ã€‚ æå–å…¬å…±éƒ¨åˆ†ä»£ç ï¼Œä¾¿äºç»´æŠ¤ è¡Œä¸ºç”±çˆ¶ç±»æ§åˆ¶ï¼Œå­ç±»å®ç°åŸºæœ¬æ–¹æ³•ç”±å­ç±»å®ç°ï¼Œå­ç±»å¯ä»¥æ‰©å±•å¢åŠ ç›¸åº”çš„åŠŸèƒ½ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚ ç¼ºç‚¹åœ¨å¤æ‚çš„é¡¹ç›®ä¸­ï¼Œå¢åŠ ä»£ç çš„é˜…è¯»éš¾åº¦ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼","slug":"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"}]},{"title":"è´£ä»»é“¾æ¨¡å¼","slug":"è´£ä»»é“¾æ¨¡å¼","date":"2020-07-02T03:21:45.000Z","updated":"2020-07-02T06:23:35.810Z","comments":true,"path":"2020/07/02/è´£ä»»é“¾æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/02/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è´£ä»»é“¾æ¨¡å¼è´£ä»»é“¾æ¨¡å¼çš„æ ¸å¿ƒåœ¨é“¾ä¸Šï¼Œ é“¾æ˜¯æœ‰å¤šä¸ªå¤„ç†è€…ç»„æˆçš„ã€‚å°±åƒæµæ°´çº¿ä¸Šçš„è´¨æ£€å‘˜ã€‚ å®šä¹‰ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…äº†è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„å…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ å®ç°æŠ½è±¡äº‹ä»¶æŠ½è±¡äº‹ä»¶ç±»å‹è¡¨æ˜è¿™ç±»å‹çš„äº‹ä»¶æ˜¯éœ€è¦è¢«å¤„ç†çš„ã€‚ 123public interface IEvent &#123; int getType();&#125; å…·ä½“çš„äº‹ä»¶ä¸åŒç±»å‹çš„å­ç±»äº‹ä»¶ã€‚ 123456789101112131415public class EventClick implements IEvent &#123; public int getType() &#123; return 1; &#125;&#125;public class EventEnter implements IEvent &#123; public int getType() &#123; return 2; &#125;&#125;public class EventBlank implements IEvent &#123; public int getType() &#123; return 3; &#125;&#125; æŠ½è±¡çš„äº‹ä»¶å¤„ç†å™¨å®šä¹‰äº†åªæœ‰Ieventç±»å‹çš„äº‹ä»¶ä¼šè¢«å¤„ç†ã€‚ 123public interface IEventHandler &#123; boolean check(IEvent event);&#125; å…·ä½“çš„äº‹ä»¶å¤„ç†å™¨12345678910111213141516171819202122232425262728293031323334public class ClickEventHandler implements IEventHandler &#123; public boolean check(IEvent event) &#123; if (event.getType() != 1)&#123; return false; &#125; System.out.println(\"Father check Ok. \"); return true; &#125;&#125;public class EnterEventHandler implements IEventHandler &#123; public boolean check(IEvent event) &#123; if (event.getType() == 2) &#123; System.out.println(\"Husband Ok.\"); return true; &#125; return false; &#125;&#125;public class BlankEventHandler implements IEventHandler &#123; public boolean check(IEvent event) &#123; if (event.getType() != 3) &#123; return false; &#125; System.out.println(\"Son Ok\"); return true; &#125;&#125; äº‹ä»¶å¤„ç†é“¾ç”¨äºç»„ç»‡äº‹ä»¶å¤„ç†å™¨ï¼Œç¬¦åˆæ¡ä»¶çš„å¤„ç†å™¨å¤„ç†å®Œæˆåæˆ–è€…æ²¡æœ‰å¤„ç†å™¨å¤„ç†éƒ½ä¼šåœæ­¢ã€‚ 123456789101112131415public class EventHandlerChain &#123; private List&lt;IEventHandler&gt; eventChains = new ArrayList&lt;IEventHandler&gt;(); public void add(IEventHandler eventHandler) &#123; eventChains.add(eventHandler); &#125; public boolean check(IEvent event) &#123; for (IEventHandler eventChain : this.eventChains) &#123; if (eventChain.check(event)) &#123; return true; &#125; &#125; return false; &#125;&#125; Useå¯ä»¥éšæ„ç»„ç»‡è´£ä»»é“¾çš„é¡ºåºï¼Œç„¶åæ£€æŸ¥éœ€è¦æ£€æŸ¥çš„ç±»å‹ã€‚ 12345678EventHandlerChain chain = new EventHandlerChain();chain.add(new ClickEventHandler());chain.add(new EnterEventHandler());chain.add(new BlankEventHandler());chain.check(new EventClick());chain.check(new EventEnter());chain.check(new EventBlank()); åº”ç”¨ä¼˜ç‚¹å°†è¯·æ±‚å’Œå¤„ç†åˆ†å¼€ã€‚è¯·æ±‚ç€å¯ä»¥ä¸ç”¨çŸ¥é“æ˜¯è°å¤„ç†çš„ï¼Œå¤„ç†è€…å¯ä»¥ä¸ç”¨çŸ¥é“è¯·æ±‚ç€çš„å…¨è²Œã€‚ä¸¤è€…è§£è€¦ï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚ ç¼ºç‚¹æ€§èƒ½é—®é¢˜ï¼Œ æœ€å·®çš„æƒ…å†µä¸‹ï¼Œè¯·æ±‚ä»å¤´éå†åˆ°å°¾ï¼Œé“¾æ¡ç‰¹åˆ«é•¿çš„æ—¶å€™ï¼Œæ€§èƒ½æŸè€—æ˜¯ä¸ªå¤§çš„é—®é¢˜ã€‚å› æ­¤åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­è¦æ³¨æ„è´£ä»»é“¾çš„é•¿çŸ­ã€‚è°ƒè¯•ä¸æ–¹ä¾¿ã€‚ åœ¨å¹¿å‘Šç³»ç»Ÿä¸­ï¼Œç”±ä¸åŒçš„äº‹ä»¶æ¥è§¦å‘ä¸åŒç±»å‹çš„å¹¿å‘Šæ—¶æ ¹æ®è´£ä»»é“¾æ¨¡å¼æ¥å¤„ç†ã€‚æ¯ä¸ªHandlerå¯ä»¥ä¸“æ³¨è‡ªå·±çš„ä¸šåŠ¡å¤„ç†é€»è¾‘ã€‚å…·ä½“Handlerè¿˜å¯ä»¥æŠ½è±¡ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒæŠŠå…¬ç”¨çš„é€»è¾‘å†™åœ¨æŠ½è±¡ç±»é‡Œé¢ï¼Œæ¯ä¸ªå…·ä½“çš„å®ç°ç±»åªè´Ÿè´£ä¸šåŠ¡çš„å¤„ç†å³å¯ï¼ˆä¼˜åŒ–ä¸ºæ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ï¼‰ã€‚","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è´£ä»»é“¾æ¨¡å¼","slug":"è´£ä»»é“¾æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"}]},{"title":"è¿­ä»£å™¨æ¨¡å¼","slug":"è¿­ä»£å™¨æ¨¡å¼","date":"2020-07-01T13:00:53.000Z","updated":"2020-07-01T14:34:35.764Z","comments":true,"path":"2020/07/01/è¿­ä»£å™¨æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/01/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è¿­ä»£å™¨æ¨¡å¼è¿­ä»£å™¨æ¨¡å¼æä¾›äº†éå†å®¹å™¨çš„æ–¹ä¾¿æ€§ï¼Œå®¹å™¨åªè¦ç®¡ç†å¢å‡å…ƒç´ å³å¯ï¼Œéœ€è¦éå†çš„æ—¶å€™äº¤ç”±è¿­ä»£å™¨è¿›è¡Œã€‚ æ¯”å¦‚Setã€Mapã€Listç­‰å®¹å™¨çš„iteratorã€‚ å®šä¹‰è¿­ä»£å™¨æ˜¯ä¸ºå®¹å™¨æœåŠ¡çš„ï¼Œå®ƒæä¾›ä¸€ç§æ–¹æ³•è®¿é—®ä¸€ä¸ªå®¹å™¨å¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ã€‚ å®ç°IteratoræŠ½è±¡è¿­ä»£å™¨è´Ÿè´£å®šä¹‰è®¿é—®å’Œéå†å…ƒç´ çš„æ¥å£ã€‚first() è·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›next() è®¿é—®ä¸‹ä¸€ä¸ªå…ƒç´ ï¼›hasNext() æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªï¼› 12345public interface Iterator&lt;E&gt;&#123; E next(); boolean hasNext(); boolean remove();&#125; ConcreteIteratorå…·ä½“è¿­ä»£å™¨è¦å®ç°è¿­ä»£å™¨æ¥å£ï¼Œå®Œæˆå®¹å™¨å…ƒç´ çš„éå†ã€‚ 12345678910111213141516171819public class ConcreteIterator implements Iterator&lt;E&gt;&#123; private Vector&lt;E&gt; v = new Vector&lt;&gt;(); public int cursor = 0; public ConcreteIterator(Vector _vector)&#123; this.v = _vector; &#125; public boolean hasNext()&#123; return this.cursor != this.v.size(); &#125; public E next()&#123; return this.hasNext() ? this.v.get(this.cursor++) : null; &#125; public boolean remove()&#123; this.v.remove(this.cursor); return true; &#125;&#125; AggregateæŠ½è±¡å®¹å™¨è§’è‰²è´Ÿè´£æä¾›åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²çš„æ¥å£ï¼Œ å¿…ç„¶æä¾›ä¸€ä¸ªç±»ä¼¼äºcreateIteratorï¼ˆï¼‰çš„æ–¹æ³•ã€‚ 12345public interface Aggregate&lt;E&gt;&#123; void add(E e); void remove(E e); Iterator iterator();&#125; Concrete Aggregateå…·ä½“å®¹å™¨å®ç°å®¹å™¨æ¥å£å®šä¹‰çš„æ–¹æ³•ï¼Œåˆ›å»ºå‡ºå®¹çº³è¿­ä»£å™¨çš„å¯¹è±¡ã€‚ 123456789101112public class ConcreteAggrate implements Aggregate&lt;E&gt;&#123; Vector v = new Vector(); public void add(E e)&#123; this.add(e); &#125; public Iterator&lt;E&gt; iterator()&#123; return new ConcreteIterator&lt;&gt;(this.v); &#125; public void remove(E e)&#123; this.remove(e); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è¿­ä»£å™¨æ¨¡å¼","slug":"è¿­ä»£å™¨æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"}]},{"title":"ç»„åˆæ¨¡å¼","slug":"ç»„åˆæ¨¡å¼","date":"2020-07-01T11:38:46.000Z","updated":"2020-07-09T10:15:53.150Z","comments":true,"path":"2020/07/01/ç»„åˆæ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/07/01/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ç»„åˆæ¨¡å¼ä¹Ÿå«åˆæˆæ¨¡å¼æˆ–è€…éƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œä¸»è¦ç”¨æ¥æè¿°éƒ¨åˆ†ä¸æ•´ä½“çš„å…³ç³»ã€‚ å®šä¹‰å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºéƒ¨åˆ†æ•´ä½“çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨äºå¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚ Componentå®šä¹‰å‚åŠ ç»„åˆå¯¹è±¡çš„å…±æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›é»˜è®¤çš„è¡Œä¸ºæˆ–è€…å±æ€§ã€‚ 1234567891011121314151617181920public abstract class Component&#123; private Component parent = null; private ArrayList&lt;Component&gt; list = new ArrayList&lt;&gt;(); public void add(Component c)&#123; c.parent = this; this.list.add(c); &#125; public void remove(Component c)&#123; this.list.remove(c); &#125; public List&lt;Component&gt; getChildren()&#123; return this.list; &#125; public Component getParent()&#123; return this.parent; &#125;&#125; Compositeæ ‘æå¯¹è±¡ï¼Œä½œç”¨æ˜¯ç»„åˆæ ‘æèŠ‚ç‚¹å’Œå¶å­ç»“ç‚¹å½¢æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚ 123public class Composite extends Component&#123;&#125; Leafå¶å­å¯¹è±¡ï¼Œä¸‹é¢æ²¡æœ‰åˆ†æ”¯ï¼Œæœ€å°çš„éå†å•ä½ã€‚ 123public class Leaf extends Component&#123;&#125; åº”ç”¨ä¼˜ç‚¹ é«˜å±‚æ¨¡å—è°ƒç”¨ç®€å•ä¸€é¢—å±æ€§ç»“æ„ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯Componentï¼Œå±€éƒ¨å’Œæ•´ä½“å¯¹è°ƒç”¨è€…æ¥è¯´æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä¹Ÿå°±æ˜¯è¯´é«˜å±‚æ¨¡å—ä¸å¿…å…³å¿ƒè‡ªå·±å¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯æ•´ä¸ªç»„åˆç»“æ„ï¼Œç®€åŒ–äº†é«˜å±‚æ¨¡å—çš„ä»£ç ã€‚ èŠ‚ç‚¹è‡ªç”±åº¦å¢åŠ ä½¿ç”¨ç»„åˆæ¨¡å¼åï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªæ ‘æèŠ‚ç‚¹ã€æ ‘å¶èŠ‚ç‚¹éƒ½éå¸¸å®¹æ˜“ã€‚å¦‚ä½•å¼€é—­åŸåˆ™ï¼Œåˆ©äºç»´æŠ¤ã€‚ ç¼ºç‚¹ï¼ˆå®‰å…¨æ¨¡å¼ï¼‰ç›´æ¥ä½¿ç”¨äº†å®ç°ç±»(å¯ä»¥æ‰©å±•)ã€‚ä¸ä¾èµ–å€’ç½®åŸåˆ™å†²çªï¼Œé™åˆ¶äº†æ¥å£çš„å½±å“èŒƒå›´ã€‚ æ‰©å±•é€æ˜çš„ç»„åˆæ¨¡å¼ä»¥ä¸Šçš„ä¾‹å­å°±æ˜¯é€æ˜çš„ç»„åˆæ¨¡å¼ï¼Œå§ç”¨æ¥ç»„åˆä½¿ç”¨çš„æ–¹æ³•æ”¾åˆ°æŠ½è±¡ç±»ä¸­ï¼Œæ— è®ºå¶å­å¯¹è±¡è¿˜æ˜¯æ ‘æå¯¹è±¡éƒ½æœ‰ç›¸åŒçš„ç»“æ„ï¼Œé€šè¿‡getChildren();åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹è¿˜æ˜¯æ ¹èŠ‚ç‚¹ã€‚ é€æ˜æ¨¡å¼çš„å¥½å¤„æ˜¯éµå¾ªäº†ä¾èµ–å€’ç½®åŸåˆ™ å®‰å…¨çš„ç»„åˆæ¨¡å¼å®‰å…¨æ¨¡å¼æ˜¯å°†å¶å­èŠ‚ç‚¹å’Œæ ‘æèŠ‚ç‚¹å½»åº•åˆ†å¼€ï¼Œæ ‘æèŠ‚ç‚¹å•ç‹¬æ‹¥æœ‰ç”¨æ¥ç»„åˆçš„æ–¹æ³•ã€‚ Componentå®šä¹‰å‚åŠ ç»„åˆå¯¹è±¡çš„å…±æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›é»˜è®¤çš„è¡Œä¸ºæˆ–è€…å±æ€§ã€‚ 123456public abstract class Component&#123; private Component parent = null; public Component getParent()&#123; return this.parent; &#125;&#125; Compositeæ ‘æå¯¹è±¡ï¼Œä½œç”¨æ˜¯ç»„åˆæ ‘æèŠ‚ç‚¹å’Œå¶å­ç»“ç‚¹å½¢æˆä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚ 123456789101112131415public class Composite extends Component&#123; private ArrayList&lt;Component&gt; list = new ArrayList&lt;&gt;(); public void add(Component c)&#123; c.parent = this; this.list.add(c); &#125; public void remove(Component c)&#123; this.list.remove(c); &#125; public List&lt;Component&gt; getChildren()&#123; return this.list; &#125;&#125; Leafå¶å­å¯¹è±¡ï¼Œä¸‹é¢æ²¡æœ‰åˆ†æ”¯ï¼Œæœ€å°çš„éå†å•ä½ã€‚ 123public class Leaf extends Component&#123;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"ç»„åˆæ¨¡å¼","slug":"ç»„åˆæ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¿é—®è€…æ¨¡å¼","slug":"è®¿é—®è€…æ¨¡å¼","date":"2020-06-30T11:39:35.000Z","updated":"2020-06-30T13:46:56.160Z","comments":true,"path":"2020/06/30/è®¿é—®è€…æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/30/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è®¿é—®è€…æ¨¡å¼è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§é›†ä¸­è§„æ•´æ¨¡å¼ï¼Œé€‚åˆç”¨äºé‡æ„é¡¹ç›®æ—¶ï¼ˆé‡æ„æ—¶éœ€æ±‚å·²ç»æ¸…æ™°ï¼ŒåŸæœ‰çš„åŠŸèƒ½ç‚¹ä¹Ÿæ˜ç¡®ï¼‰é€šè¿‡è®¿é—®è€…æ¨¡å¼å¯ä»¥å¾ˆå®¹æ˜“è¾¾åˆ°åŠŸèƒ½é›†ä¸­åŒ–ã€‚è¿˜å¯ä»¥ä¸å…¶ä»–æ¨¡å¼æ··ç¼–å»ºç«‹ä¸€å¥—è‡ªå·±çš„è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ã€‚ å®šä¹‰å°è£…ä¸€äº›ç”¨äºæŸç§æ•°æ®ç»“æ„ä¸­çš„å„ä¸ªå…ƒç´ çš„æ“ä½œï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œã€‚ è§’è‰²Visitor æŠ½è±¡è®¿é—®è€…æŠ½è±¡ç±»æˆ–è€…æ¥å£ï¼Œå£°æ˜è®¿é—®è€…å¯ä»¥è®¿é—®å“ªäº›å…ƒç´ ï¼Œå…·ä½“åˆ°ç¨‹åºä¸­å°±æ˜¯visitæ–¹æ³•çš„å‚æ•°å®šä¹‰å“ªäº›å¯¹è±¡æ˜¯å¯ä»¥è¢«è®¿é—®çš„ã€‚ 1234public interface IVisitor&#123; public void visit(ConcreteElement1 el1); public void visit(ConcreteElement2 el2);&#125; ConcreteVisitor å…·ä½“è®¿é—®è€…å½±å“è®¿é—®è€…è®¿é—®åˆ°ä¸€ä¸ªç±»åè¯¥åšä»€ä¹ˆäº‹æƒ…ã€‚ 12345678public class Visitor implements IVisitor&#123; public void visit(ConcreteElement1 el1)&#123; el1.doSomething(); &#125; public void visit(ConcreteElement2 el2)&#123; el2.doSomething(); &#125;&#125; Element æŠ½è±¡å…ƒç´ æ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå£°æ˜æ¥å—å“ªä¸€ç±»è®¿é—®è€…è®¿é—®ã€‚æŠ½è±¡å…ƒç´ æœ‰ä¸¤ç±»æ–¹æ³•ï¼Œ ä¸€ç±»æ˜¯æœ¬èº«çš„ä¸šåŠ¡é€»è¾‘ã€‚å¦ä¸€ç±»æ˜¯å…è®¸è®¿é—®è€…æ¥è®¿é—®çš„æ–¹æ³•ã€‚ 123456public abstract class Element&#123; //ä¸šåŠ¡é€»è¾‘ public abstract void doSomething(); //æ¥å—è®¿é—®è€… public abstract void accept(IVisitor visitor);&#125; ConcreteElement å…·ä½“å…ƒç´ å®ç°acceptæ–¹æ³•ï¼Œ é€šå¸¸æ˜¯ visitor.visit(this)æ¨¡å¼ã€‚ 123456789101112public class ConcreteElement1 extends Element&#123; public void doSomething()&#123;&#125; public void accept(IVisitor visitor)&#123; visitor.visit(this); &#125;&#125;public class ConcreteElement2 extends Element&#123; public void doSomething()&#123;&#125; public void accept(IVisitor visitor)&#123; visitor.visit(this); &#125;&#125; ObjectStructureç»“æ„å¯¹è±¡å…ƒç´ ç”Ÿäº§è€…ï¼Œä¸€èˆ¬å®¹çº³åœ¨å¤šä¸ªä¸åŒç±»ã€ä¸åŒæ¥å£çš„å®¹å™¨ï¼Œå¦‚List/Set/Mapã€‚ 12345public class ObjectStructure&#123; public static Element createElement()&#123; return new Random().nextInt(10) &gt; 5 ? new ConcreteElement1() : new ConcreteElement2(); &#125;&#125; ä½¿ç”¨123for(int i = 0; i &lt; 10 ; i++)&#123; ObjectStructure.createElement().accept(new Visitor());&#125; ä¼˜ç‚¹ ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ ä¼˜ç§€çš„æ‰©å±•æ€§ çµæ´» ç¼ºç‚¹ è¿èƒŒäº†è¿ªç±³ç‰¹æ³•åˆ™ï¼ŒElementå…·ä½“çš„ç»†èŠ‚éœ€è¦å…¬å¸ƒç»™Visitor å…·ä½“å…ƒç´ å˜æ›´æ¯”è¾ƒå›°éš¾ï¼Œå…ƒç´ å¢åŠ /å‡å°‘å­—æ®µVisitoréƒ½éœ€è¦ä¿®æ”¹ è¿èƒŒäº†ä¾èµ–å€’ç½®åŸåˆ™ï¼Œè®¿é—®è€…ä¾èµ–çš„æ˜¯å…·ä½“çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯æŠ½è±¡å…ƒç´ ã€‚ ä½¿ç”¨åœºæ™¯å½“ä¸€ä¸ªå¯¹è±¡ç»“æ„åŒ…å«å¾ˆå¤šç±»å¯¹è±¡ï¼Œå®ƒä»¬æœ‰ä¸åŒçš„æ¥å£ï¼Œéœ€è¦å¯¹è¿™äº›å¯¹è±¡å®æ–½ä¸€äº›ä¾èµ–äºå…¶å…·ä½“ç±»çš„æ“ä½œã€‚ åŒåˆ†æ´¾1234567891011121314151617181920public abstract class AbsActor&#123; public void act(Role role)&#123; System.out.println(\"Actor can act any role.\"); &#125; public void act(KungFuRole role)&#123; System.out.println(\"Actor can act Kungfu Role.\"); &#125;&#125;public class YongActor extends AbsActor&#123; public void act(KungFuRole role)&#123; System.out.println(\"Yong Man Lov Act KungFu Role.\"); &#125;&#125;public class OldActor extends AbsActor&#123; public void act(KungFuRole role)&#123; System.out.println(\"Old Man Can Not Act KungFu Role.\") &#125;&#125; 12345678910111213public interface Role&#123; public void accept(AbsActor actor);&#125;public class KungFuRole extends Role&#123; public void accept(AbsActor actor)&#123; actor.act(this); &#125;&#125;public class IdiotRole extends Role&#123; public void accept(AbsActor actor)&#123; actor.act(this); &#125;&#125; 1234AbsActor actor = new OldActor();Role role = new KungFuRole();actor.act(role); //oldActor.act(Role)actor.act(new KungFuRole()); //oldActor.act(KungFuRole); 1234AbsActor actor = new OldActor();Role role = new KungFuRole();role.accept(actor); //KungFuRole.accept(OldActor); //OldActor.act(KungFuRole)","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è®¿é—®è€…æ¨¡å¼","slug":"è®¿é—®è€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/"}]},{"title":"çŠ¶æ€æ¨¡å¼","slug":"çŠ¶æ€æ¨¡å¼","date":"2020-06-29T12:18:02.000Z","updated":"2020-07-03T05:38:52.332Z","comments":true,"path":"2020/06/29/çŠ¶æ€æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/29/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"çŠ¶æ€æ¨¡å¼åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œ ç±»çš„è¡Œä¸ºæ—¶ç»™äºˆå®ƒçš„çŠ¶æ€æ”¹å˜çš„ã€‚æŠ˜ä¸­ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚ å®šä¹‰å½“ä¸€ä¸ªå¯¹è±¡å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸å…¶æ”¹å˜è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ”¹å˜äº†å…¶ç±»ã€‚ å®ç°æŠ½è±¡çŠ¶æ€è§’è‰²Stateæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œè´Ÿè´£å¯¹è±¡çŠ¶æ€çš„å®šä¹‰ï¼Œå¹¶ä¸”å°è£…ç¯å¢ƒè§’è‰²ä»¥å®ç°çŠ¶æ€åˆ‡æ¢ã€‚ 12345678910111213public interface IState &#123; void open(); void close(); void run(); void stop();&#125;public abstract class BaseState implements IState &#123; protected Car context; public void setContext(Car context) &#123; this.context = context; &#125;&#125; å…·ä½“çŠ¶æ€è§’è‰²ConcreteStateæ¯ä¸ªå…·ä½“çŠ¶æ€å¿…é¡»å®Œæˆä¸¤ä¸ªèŒè´£ï¼šæœ¬çŠ¶æ€ä¸‹è¦åšçš„äº‹æƒ…ä»¥åŠæœ¬çŠ¶æ€å¦‚ä½•è¿‡æ¸¡åˆ°å…¶ä»–çŠ¶æ€ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071public class OpenState extends BaseState &#123; public void open() &#123; super.context.setCurrentState(Car.OPEN_STATE); System.out.println(\"è½¦é—¨å·²å¼€å¯\"); &#125; public void close() &#123; super.context.setCurrentState(Car.CLOSE_STATE); System.out.println(\"å…³é—­è½¦é—¨ã€‚ã€‚ã€‚\"); &#125; public void run() &#123; System.out.println(\"å¼€é—¨çŠ¶æ€ä¸‹ä¸å…è®¸é£™è½¦start\"); &#125; public void stop() &#123; System.out.println(\"å¼€é—¨çŠ¶æ€ä¸‹ä¸å…è®¸é£™è½¦Stop\"); &#125;&#125;public class StopState extends BaseState &#123; public void open() &#123; super.context.setCurrentState(Car.OPEN_STATE); System.out.println(\"åœè½¦åå¼€å¯è½¦é—¨\"); &#125; public void close() &#123; super.context.setCurrentState(Car.CLOSE_STATE); System.out.println(\"åœè½¦åå…³é—­è½¦é—¨\"); &#125; public void run() &#123; super.context.setCurrentState(Car.RUN_STATE); System.out.println(\"åœè½¦åå†æ¬¡è·‘èµ·æ¥\"); &#125; public void stop() &#123; super.context.setCurrentState(Car.STOP_STATE); System.out.println(\"åœè½¦åã€‚ã€‚åœæ­¢ä¸åŒ\"); &#125;&#125;public class RunState extends BaseState &#123; public void open() &#123; System.out.println(\"é£™è½¦æ—¶ä¸èƒ½å¼€é—¨\"); &#125; public void close() &#123; System.out.println(\"é£™è½¦æ—¶è½¦é—¨å·²å…³é—­\"); &#125; public void run() &#123; super.context.setCurrentState(Car.RUN_STATE); System.out.println(\"é£™è½¦Run\"); &#125; public void stop() &#123; super.context.setCurrentState(Car.STOP_STATE); System.out.println(\"é£™è½¦ stop\"); &#125;&#125;public class CloseState extends BaseState &#123; public void open() &#123; super.context.setCurrentState(Car.OPEN_STATE); System.out.println(\"å¼€å¯è½¦é—¨ã€‚ã€‚ã€‚\"); &#125; public void close() &#123; System.out.println(\"è½¦é—¨å·²ç»å…³é—­ï¼\"); &#125; public void run() &#123; this.context.setCurrentState(Car.RUN_STATE); System.out.println(\"æ±½è½¦å¼€å§‹è¿è¡Œã€‚ã€‚ã€‚\"); &#125; public void stop() &#123; this.context.setCurrentState(Car.STOP_STATE); System.out.println(\"æ±½è½¦åœæ­¢ã€‚\"); &#125;&#125; ç¯å¢ƒè§’è‰²Contextå®šä¹‰å®¢æˆ·ç«¯éœ€è¦çš„æ¥å£ï¼Œå¹¶ä¸”è´Ÿè´£å…·ä½“çŠ¶æ€çš„åˆ‡æ¢ã€‚ æŠŠçŠ¶æ€å¯¹è±¡å£°æ˜ä¸ºé™æ€å¸¸é‡ï¼Œæœ‰å‡ ä¸ªçŠ¶æ€å¯¹è±¡å°±å£°æ˜å‡ ä¸ªé™æ€å¸¸é‡ã€‚ç¯å¢ƒè§’è‰²å…·æœ‰çŠ¶æ€æŠ½è±¡è§’è‰²å®šä¹‰çš„æ‰€æœ‰è¡Œä¸ºï¼Œå…·ä½“æ‰§è¡Œä½¿ç”¨å§”æ‰˜æ–¹å¼ã€‚ 12345678910111213141516171819202122232425262728293031public class Car implements IState &#123; public static final BaseState OPEN_STATE = new OpenState(); public static final BaseState CLOSE_STATE = new CloseState(); public static final BaseState RUN_STATE = new RunState(); public static final BaseState STOP_STATE = new StopState(); private BaseState currentState; public Car() &#123; this.setCurrentState(CLOSE_STATE); &#125; public BaseState getCurrentState() &#123; return currentState; &#125; public Car setCurrentState(BaseState currentState) &#123; this.currentState = currentState; this.currentState.setContext(this); return this; &#125; public void open() &#123; this.currentState.open(); &#125; public void close() &#123; this.currentState.close(); &#125; public void run() &#123; this.currentState.run(); &#125; public void stop() &#123; this.currentState.stop(); &#125;&#125; ä½¿ç”¨ç»“åˆå»ºé€ è€…æ¨¡å¼å°†å·²æœ‰çš„çŠ¶æ€æŒ‰ç…§ä¸€å®šçš„é¡ºåºå†é‡æ–°ç»„è£…ã€‚ 1234567891011121314Car car = new Car();car.setCurrentState(Car.CLOSE_STATE);car.run(); //æ±½è½¦å¼€å§‹è¿è¡Œã€‚ã€‚ã€‚car.stop(); //é£™è½¦ stopcar.run(); //åœè½¦åå†æ¬¡è·‘èµ·æ¥car.open(); //é£™è½¦æ—¶ä¸èƒ½å¼€é—¨car.stop(); //é£™è½¦ stopcar.open(); //åœè½¦åå¼€å¯è½¦é—¨car.close(); //å…³é—­è½¦é—¨ã€‚ã€‚ã€‚ åº”ç”¨ä¼˜ç‚¹ ç»“æ„æ¸…æ™°é¿å…è¿‡å¤šçš„switch caseå’Œif elseï¼Œé™ä½äº†ç¨‹åºçš„å¤æ‚æ€§ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚ éµå¾ªè®¾è®¡åŸåˆ™éµå¾ªäº†å¼€é—­åŸåˆ™ä»¥åŠå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªå­ç±»ï¼Œè¦å¢åŠ çŠ¶æ€å°±è¦å¢åŠ å­ç±»ï¼Œä¿®æ”¹çŠ¶æ€æ—¶åªä¿®æ”¹ä¸€ä¸ªå­ç±»å³å¯ã€‚ å°è£…æ€§è‰¯å¥½çŠ¶æ€å˜æ¢é˜²æ­¢åˆ°ç±»çš„å†…éƒ¨æ¥å®ç°ï¼Œå¤–éƒ¨è°ƒç”¨ä¸éœ€è¦çŸ¥é“ç±»å†…éƒ¨å¦‚ä½•å®ç°çŠ¶æ€å’Œè¡Œä¸ºçš„å˜æ¢ã€‚ ç¼ºç‚¹ çŠ¶æ€è¿‡å¤šæ—¶å­ç±»è†¨èƒ€ ä½¿ç”¨åœºæ™¯ è¡Œä¸ºè·ŸéšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜çš„åœºæ™¯ æ¡ä»¶ã€åˆ†æ”¯åˆ¤æ–­è¯­å¥çš„æ›¿ä»£","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"çŠ¶æ€æ¨¡å¼","slug":"çŠ¶æ€æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"}]},{"title":"ä»£ç†æ¨¡å¼","slug":"ä»£ç†æ¨¡å¼","date":"2020-06-28T12:25:10.000Z","updated":"2020-06-29T10:22:03.456Z","comments":true,"path":"2020/06/28/ä»£ç†æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/28/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ä»£ç†æ¨¡å¼ä»£ç†æ¨¡å¼ä¹Ÿå«å§”æ‰˜æ¨¡å¼ï¼Œè®¸å¤šå…¶ä»–çš„æ¨¡å¼å¦‚çŠ¶æ€æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼æœ¬è´¨ä¸Šæ˜¯åœ¨æ›´ç‰¹æ®Šçš„åœºåˆé‡‡ç”¨äº†ä»£ç†æ¨¡å¼ã€‚åœ¨æ—¥å¸¸åº”ç”¨ä¸­ï¼Œä»£ç†æ¨¡å¼å¯ä»¥æä¾›éå¸¸å¥½çš„è®¿é—®æ§åˆ¶ã€‚ å®šä¹‰ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬çš„DBçš„è®¿é—®æƒé™ä¸èƒ½ç›´æ¥å…¬å¼€ï¼Œä¸€èˆ¬ä¼šå…¬å¼€ä¸€ä¸ªæ¥å£æ¥æä¾›å¯¹è¿™äº›æ•°æ®ã€‚ å®ç°æŠ½è±¡ä¸»é¢˜Subjectå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–è€…æ¥å£ï¼Œæ™®é€šçš„ä¸šåŠ¡ç±»å‹å®šä¹‰ã€‚ 123public interface Subject&#123; public void request();&#125; å…·ä½“ä¸»é¢˜RealSubjectå§”æ‰˜è§’è‰²æˆ–è€…è¢«ä»£ç†è§’è‰²ã€‚ä¸šåŠ¡é€»è¾‘çš„å…·ä½“æ‰§è¡Œè€…ã€‚ 12345public class RealSubject implements Subject&#123; public void request()&#123; //do something. &#125;&#125; ä»£ç†ä¸»é¢˜Proxyä»£ç†ç±»ã€å§”æ‰˜ç±»ï¼Œ è´Ÿè´£å¯¹çœŸå®è§’è‰²çš„è°ƒç”¨ï¼ŒæŠŠæ‰€æœ‰æŠ½è±¡ä¸»é¢˜ç±»å®šä¹‰çš„æ–¹æ³•é™åˆ¶å§”æ‰˜ç»™çœŸå®ä¸»é¢˜è§’è‰²å®ç°ï¼Œå¹¶ä¸”åœ¨çœŸå®ä¸»é¢˜è§’è‰²å¤„ç†å®Œæ¯•å‰ååšé¢„å¤„ç†å’Œå–„åå¤„ç†å·¥ä½œã€‚ 123456789101112131415161718192021222324public class Proxy implements Subject&#123; private Subject subject = null; public Proxy()&#123; this.subject = new Proxy(); &#125; public Proxy(Subject subject)&#123; this.subject = subject; &#125; public void request()&#123; this.before(); this.subject.request(); this.after(); &#125; private void before()&#123; //before &#125; private void after()&#123; //after. &#125;&#125; åº”ç”¨ä¼˜ç‚¹ èŒè´£æ¸…æ™°çœŸå®çš„è§’è‰²å°±æ˜¯å®ç°å®é™…çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒå…¶ä»–éæœ¬èŒè´£çš„äº‹ç‰©ï¼Œé€šè¿‡åæœŸçš„ä»£ç†å®Œæˆä¸€ä»¶äº‹ç‰©ï¼Œé™„å¸¦çš„ç»“æœå°±æ˜¯å˜æˆç®€æ´æ¸…æ™°ã€‚ æ‰©å±•æ€§å¥½å…·ä½“ä¸»é¢˜è§’è‰²æ˜¯éšæ—¶éƒ½ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼Œåªè¦å®ƒå®ç°äº†æ¥å£ï¼Œä»£ç†ç±»å¯ä»¥åœ¨ä¸åšä»»ä½•ä¿®æ”¹çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ æ™ºèƒ½åŒ–ç”¨äºåŠ¨æ€ä»£ç†ã€‚ æ‰©å±•æ™®é€šä»£ç†å®¢æˆ·ç«¯åªèƒ½è®¿é—®ä»£ç†è§’è‰²ï¼Œè€Œä¸èƒ½è®¿é—®çœŸå®è§’è‰²ã€‚å±è”½äº†çœŸå®è§’è‰²çš„å˜æ›´å¯¹é«˜å±‚æ¨¡å—çš„å½±å“ã€‚è¯¥æ¨¡å¼é€‚åˆå¯¹æ‰©å±•æ€§è¦æ±‚è¾ƒé«˜çš„åœºåˆã€‚ä¸€èˆ¬é€šè¿‡ç¼–ç¨‹è§„èŒƒç±»çº¦æŸæ¥ç¦æ­¢newä¸€ä¸ªçœŸå®çš„è§’è‰²ã€‚ è¿™ç§æ–¹å¼è°ƒç”¨è€…ä¹‹éœ€è¦çŸ¥é“ä»£ç†å³å¯ï¼Œ ä¸éœ€è¦çŸ¥é“ä»£ç†äº†è°ã€‚ æ™®é€šä»£ç†çš„å®ç°è€…ï¼š 123456789101112public class GamePlayer implements IGamePlayer&#123; private String name = \"\"; public GamePlayer(IGamePlayer _gamePlayer, String _name)throws Exception&#123; if(_gamePlayer == null || !(_gamePlayer instanceof GameProxy))&#123; throw new Exception(\"Create Not Allowed!\"); &#125; this.name = _name; &#125; public void do()&#123; //do... &#125;&#125; æ™®é€šä»£ç†çš„ä»£ç†è€…ï¼š 1234567891011121314public class GamePlayerProxy implements IGamePlayer&#123; private IGamePlayer gamePlayer = null; public GamePlayerProxy(String name)&#123; try&#123; gamePlayer = new GamePlayer(this,name); &#125;catch(Exception e)&#123; //TODO &#125; &#125; public void do()&#123; this.gamePlayer.do(); &#125;&#125; å¼ºåˆ¶ä»£ç†åªæœ‰é€šè¿‡çœŸå®è§’è‰²æŒ‡å®šçš„ä»£ç†ç±»æ‰å¯ä»¥è®¿é—®ã€‚ 1234public interface IGamePlayer&#123; void do(); public IGamePlayer getProxy();&#125; 1234567891011121314public class GamePlayer implements IGamePlayer&#123; private String name = \"\"; private IGamePlayer proxy = null; public GamePlayer(String _name)&#123; this.name = _name; this.proxy = new GamepPlayerProxy(this); &#125; public IGamePlayer getProxy()&#123; return this.proxy; &#125; public void do()&#123; //do... &#125;&#125; 123456789public class GamePlayerProxy implements IGamePlayer&#123; private IGamePlayer gamePlayer = null; public GamePlayerProxy(IGamePlayer _gamePlayer)&#123; this.gamePlayer = _gamePlayer; &#125; public void do()&#123; this.gamePlayer.do(); &#125;&#125; åŠ¨æ€ä»£ç†åœ¨å®ç°é˜¶æ®µä¸éœ€è¦å…³å¿ƒä»£ç†è°ï¼Œ åœ¨è¿è¡Œé˜¶æ®µæ‰æŒ‡å®šä»£ç†å“ªä¸ªå¯¹è±¡ã€‚ é€šè¿‡InvocationHandleræ¥å£ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½ç”±è¯¥Handleræ¥æ¥ç®¡å®é™…çš„ä¸šåŠ¡å¤„ç†ã€‚ åœ¨ä¸æ”¹å˜å·²æœ‰ä»£ç ç»“æ„çš„æƒ…å†µä¸‹å¢å¼ºæˆ–è€…æ§åˆ¶å¯¹è±¡çš„è¡Œä¸ºã€‚ åŠ¨æ€ä»£ç†Handlerç±»ï¼š 123456789public class MyInvocationHandler implements InvocationHandler&#123; private Object target = null; public MyInvocationHandler(Object _obj)&#123; this.target = _obj; &#125; public Object invoke(Object proxy, Method method, Object[] args)throws Throwable&#123; return method.invoke(this.target, args); &#125;&#125; é€šçŸ¥æ¥å£ä¸å®ç° 12345678public interface IAdvice&#123; public void exec();&#125;public class BeforeAdvice implements IAdvice&#123; public void exec()&#123; //.... &#125;&#125; åŠ¨æ€ä»£ç†ç±»ï¼š 12345678public class DynamicProxy&lt;T&gt;&#123; public static &lt;T&gt; T newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)&#123; if(condition)&#123; //åœ¨conditionè¿æ¥ç‚¹æ‰§è¡ŒBeforeAdviceé€šçŸ¥ã€‚ (new BeforeAdvice()).exec(); &#125; return (T)Proxy.newProxyInstance(loader, interface, h); &#125;&#125; Client: 1234Subject subject = new RealSubject();InvocationHandler handler = new MyInvocationHandler(subject);Subject proxy = DynamicProxy.newProxyInstance(subject.getClass().getClassLoader(), subject.getClass().getInterfaces(), handler);proxy.do(); æ‰©å±• CGLib ASM AOP æ‰©å±•é˜…è¯»cglibåŠ¨æ€ä»£ç†ã€asmå­¦ä¹ ç¬”è®°","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"ä»£ç†æ¨¡å¼","slug":"ä»£ç†æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"}]},{"title":"ç­–ç•¥æ¨¡å¼","slug":"ç­–ç•¥æ¨¡å¼","date":"2020-06-28T10:41:18.000Z","updated":"2020-06-29T14:33:58.285Z","comments":true,"path":"2020/06/28/ç­–ç•¥æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/28/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ç­–ç•¥æ¨¡å¼ç­–ç•¥æ¨¡å¼ä½¿ç”¨çš„å°±æ˜¯é¢å‘å¯¹è±¡çš„ç»§æ‰¿å’Œå¤šæ€æœºåˆ¶ã€‚ å®šä¹‰å®šä¹‰ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•éƒ½å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬ä¹‹é—´å¯ä»¥äº’æ¢ã€‚ å®ç°Strategy æŠ½è±¡ç­–ç•¥è§’è‰²ç­–ç•¥ç®—æ³•çš„æŠ½è±¡ï¼Œé€šå¸¸æ˜¯æ¥å£ï¼Œå®šä¹‰æ¯ä¸ªç­–ç•¥æˆ–è€…ç®—æ³•å¿…é¡»å…·æœ‰çš„æ–¹æ³•å’Œå±æ€§ã€‚ 123public interface Strategy&#123; void doSomething();&#125; ConcreteStrategy å…·ä½“ç­–ç•¥è§’è‰²å®ç°æŠ½è±¡ç­–ç•¥çš„å…·ä½“ç®—æ³•ã€‚ 1234567891011public class ConcreteStrategy1 implements Strategy&#123; public void doSomething()&#123; //Do Strategy1. &#125;&#125;public class ConcreteStrategy2 implements Strategy&#123; public void doSomething()&#123; //Do Strategy2. &#125;&#125; Context å°è£…è§’è‰²å°è£…ä¸Šä¸‹æ–‡ï¼Œå±è”½é«˜å±‚æ¨¡å—å¯¹ç­–ç•¥ã€ç®—æ³•çš„ç›´æ¥è®¿é—®ï¼Œå°è£…å¯èƒ½å­˜åœ¨çš„å˜åŒ–ã€‚ç­–ç•¥æ¨¡å¼çš„é‡ç‚¹å°±æ˜¯å°è£…è§’è‰²ï¼Œå®ƒå€Ÿç”¨äº†ä»£ç†æ¨¡å¼çš„æ€è·¯ã€‚ 123456789public class Context&#123; private Strategy strategy = null; public Context(Strategy strategy)&#123; this.strategy = strategy; &#125; public void doAny()&#123; this.strategy.doSomething(); &#125;&#125; Use123Strategy strategy = new ConcreteStrategy1();Context context = new Context(strategy);context.doAny(strategy); åº”ç”¨ä¼˜ç‚¹ ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢åªéœ€è¦å®ç°ç­–ç•¥æ¥å£ç±»ï¼Œé€šè¿‡å°è£…è§’è‰²å¯¹å…¶è¿›è¡Œå°è£…å³å¯ã€‚ é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­123456if (condition1)&#123; strategy1.do();&#125;else if(condition2)&#123; strategy2.do();&#125; // ..... æ‰©å±•æ€§å¥½ ç¼ºç‚¹ ç­–ç•¥ç±»æ•°é‡å¤š æ‰€æœ‰ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²ä¸Šå±‚æ¨¡å—å¿…é¡»çŸ¥é“æœ‰å“ªäº›ç­–ç•¥ï¼Œ ç„¶åæ‰èƒ½å†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ï¼Œä¸è¿ªç±³ç‰¹æ³•åˆ™ç›¸è¿èƒŒã€‚(è¿ªç±³ç‰¹æ³•åˆ™ï¼šä¸€ä¸ªç±»å¯¹äºå…¶ä»–ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½) æ³¨æ„äº‹é¡¹å½“å…·ä½“çš„ç­–ç•¥æ•°é‡è¶…è¿‡ä¸€å®šä¸ªæ•°æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨æ··åˆæ¨¡å¼ï¼Œè§£å†³ç­–ç•¥ç±»è†¨èƒ€å’Œå¯¹å¤–æš´éœ²çš„é—®é¢˜ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤§çš„ç³»ç»Ÿç»´æŠ¤æˆæœ¬ã€‚ ä½¿ç”¨åœºæ™¯ å¤šä¸ªç±»åªæœ‰åœ¨ç®—æ³•æˆ–è€…è¡Œä¸ºä¸Šç¨æœ‰ä¸åŒçš„åœºæ™¯ ç®—æ³•éœ€è¦è‡ªç”±åˆ‡æ¢çš„åœºæ™¯ éœ€è¦å±è”½ç®—æ³•è§„åˆ™çš„åœºæ™¯ ç­–ç•¥æšä¸¾å½“ç­–ç•¥æšä¸¾ä¸ç»å¸¸å‘ç”Ÿå˜åŒ–æ—¶å¯ä»¥ä½¿ç”¨ã€‚ 12345678910111213141516171819202122public enum StrategyEnum &#123; ADD(\"+\") &#123; @Override public int exec(int a, int b) &#123; return a + b; &#125; &#125;, SUB(\"-\") &#123; @Override public int exec(int a, int b) &#123; return a - b; &#125; &#125;; private String opt; StrategyEnum(String opt) &#123; this.opt = opt; &#125; abstract int exec(int a, int b);&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"ç­–ç•¥æ¨¡å¼","slug":"ç­–ç•¥æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"}]},{"title":"å¯¹è±¡æ± æ¨¡å¼","slug":"å¯¹è±¡æ± æ¨¡å¼","date":"2020-06-24T09:13:34.000Z","updated":"2020-06-28T10:41:59.732Z","comments":true,"path":"2020/06/24/å¯¹è±¡æ± æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/24/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å¯¹è±¡æ± æ¨¡å¼ä¸€ç§ç‰¹æ®Šçš„å·¥å‚å¯¹è±¡ï¼Œä¸€ä¸ªå¯¹è±¡æ± åŒ…å«ä¸€ç»„å·²ç»åˆå§‹åŒ–è¿‡ä¸”å¯ä»¥ä½¿ç”¨çš„å¯¹è±¡ã€‚ç”¨æˆ·å¯ä»¥ä»æ± ä¸­å–å¾—å¯¹è±¡ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œåœ¨ä¸éœ€è¦çš„æ—¶å€™å°†å…¶å½’è¿˜ç»™å¯¹è±¡æ± ã€‚ ä½¿ç”¨å¯¹è±¡æ± çš„ç›®çš„æ˜¯ä¸ºäº†æå‡æ€§èƒ½ï¼Œå½“éœ€è¦åˆ›å»ºæ¯”è¾ƒè€—è´¹æ—¶é—´çš„å¯¹è±¡æ—¶å°¤ä¸ºæ˜æ˜¾ã€‚ è§’è‰²å’ŒèŒè´£å¯¹è±¡æ± çš„ç®¡ç†è€…ç®¡ç†è€…æ¥ç»´æŠ¤å¯¹è±¡æ± ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–å¯¹è±¡æ± ã€æ‰©å……å¯¹è±¡æ± çš„å¤§å°ã€è·å–å¯¹è±¡æ—¶çš„ç­–ç•¥ã€é‡ç½®å½’è¿˜å¯¹è±¡çš„çŠ¶æ€ã€‚ 12345678910111213141516171819202122232425262728public class PoolMgr&#123; private int init ; private int max; private int factor; private Colection c; // public void init()&#123; //init &#125; //æ ¹æ®ç­–ç•¥æ¥åŠ¨æ€çš„ç”Ÿæˆå¯¹è±¡ã€‚ã€‚ //å¦‚æœå¯¹è±¡ä¸è¶³å¯ä»¥å¢åŠ å¯¹è±¡æ± çš„å¯¹è±¡ï¼Œæˆ–è€…blockingç›´åˆ°æœ‰å¯¹è±¡é‡Šæ”¾ã€‚ public Object aquire()&#123; return c.remove(); &#125; public void release(Object o)&#123; if(o == null) return; reset(o); c.add(o); &#125;&#125; å¯¹è±¡æ± çš„ä½¿ç”¨è€…ä½¿ç”¨è€…ä»ç®¡ç†è€…å¤„è·å–å¯¹è±¡ï¼Œä½¿ç”¨å®Œæˆåå¿…é¡»å½’è¿˜å¯¹è±¡é¿å…ä¸€è‡´å ç”¨ã€‚ 123456Object o = null;try&#123; o = PoolMgr.getInstance(); &#125;finaly&#123; PoolMgr.release(o); &#125; ä¼˜ç‚¹å¤ç”¨æ± ä¸­çš„å¯¹è±¡ï¼Œæ¶ˆé™¤åˆ›å»º/å›æ”¶å¯¹è±¡æ‰€äº§ç”Ÿçš„å†…å­˜å¼€é”€ï¼ŒCPUå¼€é”€ä»¥åŠIOå¼€é”€ã€‚å¸¸è§çš„æœ‰ï¼šSocketçš„é“¾æ¥æ± ã€çº¿ç¨‹æ± ã€æ•°æ®åº“è¿æ¥æ± ç­‰ã€‚ ç¼ºç‚¹å¤šçº¿ç¨‹å¹¶å‘ç¯å¢ƒä¸­ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œéœ€è¦åœ¨æ•°æ®ç»“æ„ä¸Šè¿›è¡ŒåŒæ­¥æˆ–è€…ä¸ºé”ç«äº‰äº§ç”Ÿé˜»å¡ï¼Œè¿™ç§å¼€é”€å¤„ç†ä¸å¥½ä¼šæ¯”åˆ›å»ºé”€æ¯ç‹¬äº«çš„å¼€é”€é«˜å¾ˆå¤šã€‚ç”±äºæ± ä¸­çš„å¯¹è±¡æ•°é‡æœ‰é™ï¼Œå¯¹è±¡æ± å°å¯èƒ½ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œå¤ªå¤§å ç”¨å†…å­˜èµ„æºé«˜ï¼›è½»é‡çº§å¯¹è±¡çš„åˆ›å»º/é”€æ¯ä¸éœ€è¦ä½¿ç”¨å¯¹è±¡æ± ï¼Œå¾’å¢ç³»ç»Ÿçš„å¤æ‚åº¦ï¼› Common Pool2Commons Pool2æ ¸å¿ƒéƒ¨åˆ†ç”±ä¸‰ä¸ªåŸºç¡€æ¥å£å’Œç›¸å…³çš„å®ç°ç±»å®ç°ï¼š PooledObjectæ± åŒ–å¯¹è±¡ï¼Œå¯¹æ± ä¸­çš„å¯¹è±¡è¿›è¡Œå°è£…ï¼Œå°è£…å¯¹è±¡çš„çŠ¶æ€å’Œä¸€äº›å…¶ä»–ä¿¡æ¯ã€‚PooldedObject æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼ŒDefaultPoolObjectæ—¶æ™®é€šé€šç”¨çš„å®ç°ï¼ŒPooledSoftReferenceä½¿ç”¨SoftReferenceå°è£…äº†å¯¹è±¡ï¼Œä¾›SoftReferenceObjectPoolä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637public interface PooledObject&lt;T&gt; extends Comparable&lt;PooledObject&lt;T&gt;&gt; &#123; // è·å–å°è£…çš„å¯¹è±¡ T getObject(); // å¯¹è±¡åˆ›å»ºçš„æ—¶é—´ long getCreateTime(); // å¯¹è±¡ä¸Šæ¬¡å¤„äºæ´»åŠ¨çŠ¶æ€çš„æ—¶é—´ long getActiveTimeMillis(); // å¯¹è±¡ä¸Šæ¬¡å¤„äºç©ºé—²çŠ¶æ€çš„æ—¶é—´ long getIdleTimeMillis(); // å¯¹è±¡ä¸Šæ¬¡è¢«å€Ÿå‡ºçš„æ—¶é—´ long getLastBorrowTime(); // å¯¹è±¡ä¸Šæ¬¡è¿”è¿˜çš„æ—¶é—´ long getLastReturnTime(); // å¯¹è±¡ä¸Šæ¬¡ä½¿ç”¨çš„æ—¶é—´ long getLastUsedTime(); // å°†çŠ¶æ€ç½®ä¸º PooledObjectState.INVALID void invalidate(); // æ›´æ–° lastUseTime void use(); // è·å–å¯¹è±¡çŠ¶æ€ PooledObjectState getState(); // å°†çŠ¶æ€ç½®ä¸º PooledObjectState.ABANDONED void markAbandoned(); // å°†çŠ¶æ€ç½®ä¸º PooledObjectState.RETURNING void markReturning();&#125; PooledObjectFactory æ± åŒ–å¯¹è±¡å·¥å‚ï¼Œè´Ÿè´£å¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ã€é”€æ¯å’ŒéªŒè¯å·¥ä½œï¼ŒFactoryå¯¹è±¡ç”±ObjectPoolæŒæœ‰å¹¶ä½¿ç”¨ã€‚å› ä¸ºå¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ã€é”€æ¯å’Œä»°æ­£çš„å·¥ä½œæ— æ³•é€šç”¨ï¼ŒCommons Pool2å¹¶æ²¡æœ‰æä¾›PooledObjectFactoryçš„é»˜è®¤å­ç±»å®ç°ï¼Œåªæä¾›äº†æŠ½è±¡å­ç±»BasePooledObjectFactoryå¯ä»¥å®ç°createå’Œwrapä¸¤ä¸ªæ–¹æ³•ã€‚ 12345678910111213141516public interface PooledObjectFactory&lt;T&gt; &#123; // åˆ›å»ºä¸€ä¸ªæ± å¯¹è±¡ PooledObject&lt;T&gt; makeObject() throws Exception; // é”€æ¯å¯¹è±¡ void destroyObject(PooledObject&lt;T&gt; p) throws Exception; // éªŒè¯å¯¹è±¡æ˜¯å¦å¯ç”¨ boolean validateObject(PooledObject&lt;T&gt; p); // æ¿€æ´»å¯¹è±¡ï¼Œä»æ± ä¸­å–å¯¹è±¡æ—¶ä¼šè°ƒç”¨æ­¤æ–¹æ³• void activateObject(PooledObject&lt;T&gt; p) throws Exception; // é’åŒ–å¯¹è±¡ï¼Œå‘æ± ä¸­è¿”è¿˜å¯¹è±¡æ—¶ä¼šè°ƒç”¨æ­¤æ–¹æ³• void passivateObject(PooledObject&lt;T&gt; p) throws Exception;&#125; ObjectPool æŒæœ‰å¯¹è±¡å¹¶æä¾›å–/è¿˜ç­‰æ“ä½œ. 12345678910111213141516171819202122232425 public interface ObjectPool&lt;T&gt; &#123; &#x2F;&#x2F; ä»æ± ä¸­è·å–ä¸€ä¸ªå¯¹è±¡ï¼Œå®¢æˆ·ç«¯åœ¨ä½¿ç”¨å®Œå¯¹è±¡åå¿…é¡»ä½¿ç”¨ returnObject æ–¹æ³•è¿”è¿˜è·å–çš„å¯¹è±¡ T borrowObject() throws Exception, NoSuchElementException, IllegalStateException; &#x2F;&#x2F; å°†å¯¹è±¡è¿”è¿˜åˆ°æ± ä¸­ã€‚å¯¹è±¡å¿…é¡»æ˜¯ä» borrowObject æ–¹æ³•è·å–åˆ°çš„ void returnObject(T obj) throws Exception; &#x2F;&#x2F; ä½¿æ± ä¸­çš„å¯¹è±¡å¤±æ•ˆï¼Œå½“è·å–åˆ°çš„å¯¹è±¡è¢«ç¡®å®šæ— æ•ˆæ—¶ï¼ˆç”±äºå¼‚å¸¸æˆ–å…¶ä»–é—®é¢˜ï¼‰ï¼Œåº”è¯¥è°ƒç”¨è¯¥æ–¹æ³• void invalidateObject(T obj) throws Exception; &#x2F;&#x2F; æ± ä¸­å½“å‰é—²ç½®çš„å¯¹è±¡æ•°é‡ int getNumIdle(); &#x2F;&#x2F; å½“å‰ä»æ± ä¸­å€Ÿå‡ºçš„å¯¹è±¡çš„æ•°é‡ int getNumActive(); &#x2F;&#x2F; æ¸…é™¤æ± ä¸­é—²ç½®çš„å¯¹è±¡ void clear() throws Exception, UnsupportedOperationException; &#x2F;&#x2F; å…³é—­è¿™ä¸ªæ± ï¼Œå¹¶é‡Šæ”¾ä¸ä¹‹ç›¸å…³çš„èµ„æº void close(); ...&#125; å¯¹è±¡æ± é…ç½®å¯¹è±¡æ± é…ç½®æä¾›äº†å¯¹è±¡æ± åˆå§‹åŒ–æ‰€éœ€è¦çš„å‚æ•°ï¼ŒCommon Pool2ä¸­çš„åŸºç¡€é…ç½®ç±»æ—¶BaseObjectPoolConfig, æœ‰GenericObjectPoolConfigå’ŒGenericKeyedObjectPoolConfigï¼Œåˆ†åˆ«ä¸ºGenericObjectPoolå’ŒGenericKeyedObjectPoolä½¿ç”¨ã€‚ å‚æ•° è§£é‡Š é»˜è®¤å€¼ lifo è¿æ¥æ± å­˜æ”¾æ± å¯¹è±¡çš„æ–¹å¼ï¼› true:æ”¾åœ¨ç©ºé—²é˜Ÿåˆ—çš„å˜´é’±ä¹°å‘¢ï¼Œ false:æ”¾åœ¨ç©ºé—²é˜Ÿåˆ—çš„æœ€åé¢ true fairness ä»æ± ä¸­è·å–/è¿”è¿˜å¯¹è±¡æ—¶æ˜¯å¦ä½¿ç”¨å…¬å¹³é”æœºåˆ¶ false maxWaitMillis è·å–èµ„æºçš„ç­‰å¾…æ—¶é—´ã€‚blockWhenExhaustedä¸ºtrueæ—¶æœ‰æ•ˆã€‚-1ä»£è¡¨æ— æ—¶é—´é™åˆ¶ï¼Œä¸€è‡´é˜»å¡åˆ°æœ‰å¯ç”¨çš„èµ„æº minEvictableIdleTimeMillis å¯¹è±¡ç©ºé—²çš„æœ€å°æ—¶é—´ï¼Œæ‰“åˆ°æ­¤å€¼åç©ºé—²å¯¹è±¡å¯èƒ½ä¼šè¢«ç§»é™¤ï¼Œ-1è¡¨ç¤ºä¸ç§»é™¤ 30åˆ†é’Ÿ softMinEvictableIdletimeMillis å¯¹è±¡ç©ºé—²çš„æœ€å°æ—¶é—´ï¼Œå¹¶ä¸”æ± ä¸­ä¹‹å°‘ä¿ç•™æœ‰minidleæ‰€æŒ‡å®šçš„ä¸ªæ•° numTestsPerEvictionRun èµ„æºå›æ”¶çº¿ç¨‹æ‰§è¡Œä¸€æ¬¡å›æ”¶æ“ä½œå›æ”¶èµ„æºçš„ä¸ªæ•° 3 evictionPolicyClassName èµ„æºå›æ”¶ç­–ç•¥ org.apache.commons.pool2.impl.DefaultEvictionPolicy testOnCreate åˆ›å»ºå¯¹è±¡æ—¶æ˜¯å¦è°ƒç”¨factory.validateObject false testOnBorrow è·å–å¯¹å½¢åŠ¿æ˜¯å¦è°ƒç”¨factory.validateObject false testOnReturn è¿”è¿˜å¯¹è±¡æ—¶æ˜¯å¦è°ƒç”¨factory.validateObject false timeBetweenEvictionRunsMills å›æ”¶èµ„æºçº¿ç¨‹çš„æ‰§è¡Œå‘¨æœŸï¼Œé»˜è®¤-1è¡¨ç¤ºä¸å¯ç”¨å›æ”¶èµ„æºçº¿ç¨‹ -1 blockWhenExhausted èµ„æºè€—å°½æ—¶ï¼Œæ˜¯å¦é˜»å¡ç­‰å¾…è·å–èµ„æº true testWhileIdel æ± ä¸­çš„é™åˆ¶å¯¹è±¡æ˜¯å¦ç”±é€å‡ºå™¨éªŒè¯ï¼Œæ— æ³•éªŒè¯çš„å¯¹è±¡å°†ä»æ± ä¸­åˆ é™¤é”€æ¯ false æ± åŒ–å¯¹è±¡çš„çŠ¶æ€ å‚æ•°å€¼ æè¿° IDEL åœ¨æ± ä¸­ï¼Œå¤„äºç©ºé—²çŠ¶æ€ ALLOCATED è¢«ä½¿ç”¨ä¸­ EVICTION æ­£åœ¨è¢«é€å‡ºå™¨éªŒè¯ VALIDAITTON æ­£åœ¨éªŒè¯ INVALID é©±é€æµ‹è¯•æˆ–è€…éªŒè¯å¤±è´¥å¹¶å°†è¢«é”€æ¯ ABANDONED å¯¹è±¡è¢«å®¢æˆ·ç«¯æ‹¿å‡ºåï¼Œé•¿æ—¶é—´æœªè¿”å›æ± ä¸­ï¼Œæˆ–è€…æ²¡æœ‰è°ƒç”¨useæ–¹æ³•ï¼Œè¢«æ ‡è®°ä¸ºæŠ›å¼ƒ Demo12345678910111213141516171819public class StringBufferFactory extends BasePooledObjectFactory&lt;StringBuffer&gt; &#123; // åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ @Override public StringBuffer create() &#123; return new StringBuffer(); &#125; // å°è£…ä¸ºæ± åŒ–å¯¹è±¡ @Override public PooledObject&lt;StringBuffer&gt; wrap(StringBuffer buffer) &#123; return new DefaultPooledObject&lt;&gt;(buffer); &#125; // ä½¿ç”¨å®Œè¿”è¿˜å¯¹è±¡æ—¶å°† StringBuffer æ¸…ç©º @Override public void passivateObject(PooledObject&lt;StringBuffer&gt; pooledObject) &#123; pooledObject.getObject().setLength(0); &#125;&#125; ä½¿ç”¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243 // åˆ›å»ºå¯¹è±¡æ± é…ç½®GenericObjectPoolConfig config = new GenericObjectPoolConfig();// åˆ›å»ºå¯¹è±¡å·¥å‚PooledObjectFactory factory = new StringBufferFactory();// åˆ›å»ºå¯¹è±¡æ± ObjectPool&lt;StringBuffer&gt; pool = new GenericObjectPool&lt;&gt;(factory, config);StringReader in = new StringReader(\"abcdefg\");StringBuffer buf = null;try &#123; // ä»æ± ä¸­è·å–å¯¹è±¡ buf = pool.borrowObject(); // ä½¿ç”¨å¯¹è±¡ for (int c = in.read(); c != -1; c = in.read()) &#123; buf.append((char) c); &#125; return buf.toString();&#125; catch (Exception e) &#123; try &#123; // å‡ºç°é”™è¯¯å°†å¯¹è±¡ç½®ä¸ºå¤±æ•ˆ pool.invalidateObject(buf); // é¿å… invalidate ä¹‹åå† return æŠ›å¼‚å¸¸ buf = null; &#125; catch (Exception ex) &#123; // ignored &#125; throw e;&#125; finally &#123; try &#123; in.close(); &#125; catch (Exception e) &#123; // ignored &#125; try &#123; if (null != buf) &#123; // ä½¿ç”¨å®Œåå¿…é¡» returnObject pool.returnObject(buf); &#125; &#125; catch (Exception e) &#123; // ignored &#125;&#125; å‚è€ƒï¼šApache Common Pool2 å¯¹è±¡æ± åº”ç”¨æµ…æä¸€ä¸ªå¹¿ä¸ºäººçŸ¥ä½†é²œæœ‰äººç”¨çš„æŠ€å·§ï¼šå¯¹è±¡æ± ","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"å¯¹è±¡æ± æ¨¡å¼","slug":"å¯¹è±¡æ± æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E6%A8%A1%E5%BC%8F/"}]},{"title":"åŸå‹æ¨¡å¼","slug":"åŸå‹æ¨¡å¼","date":"2020-06-24T03:20:07.000Z","updated":"2020-06-24T09:25:09.837Z","comments":true,"path":"2020/06/24/åŸå‹æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/24/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"åŸå‹æ¨¡å¼ä¸é€šè¿‡newå…³é”®å­—æ¥äº§ç”Ÿä¸€ä¸ªå¯¹è±¡ï¼Œè€Œé€šè¿‡å¯¹è±¡å¤åˆ¶æ¥ç”Ÿäº§å¯¹è±¡çš„æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼çš„æ ¸å¿ƒæ˜¯cloneæ–¹æ³•ï¼Œé€šè¿‡è¯¥æ–¹æ³•è¿›è¡Œå¯¹è±¡çš„æ‹·è´ã€‚ ä¹Ÿå°±æ˜¯å…ˆç”Ÿäº§å‡ºä¸€ä¸ªåŒ…å«å¤§é‡å…±æœ‰ä¿¡æ¯çš„ç±»å¯¹è±¡ï¼Œç„¶åæ‹·è´å‡ºå‰¯æœ¬ä¿®æ­£ç»†èŠ‚ä¿¡æ¯ï¼Œå»ºç«‹ä¸€ä¸ªå®Œæ•´çš„ä¸ªæ€§å¯¹è±¡ã€‚ å®šä¹‰ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ ä¼˜ç¼ºç‚¹ æ€§èƒ½å¥½åŸå‹æ¨¡å¼æ˜¯å†…å­˜äºŒè¿›åˆ¶æµä¾§æ‹·è´ï¼Œè¦æ¯”ç›´æ¥newä¸€ä¸ªå¯¹è±¡æ€§èƒ½å¥½å¾ˆå¤šï¼Œç‰¹åˆ«åœ¨ä¸€ä¸ªå¾ªç¯ä½“å†…äº§ç”Ÿå¤§é‡çš„å¯¹è±¡æ—¶ï¼ŒåŸå‹æ¨¡å¼å¯ä»¥æ›´å¥½çš„ä½“ç°å…¶ä¼˜ç‚¹ã€‚ é€ƒé¿æ„é€ å‡½æ•°çš„çº¦æŸç›´æ¥åœ¨å†…å­˜ä¸­æ‹·è´ï¼Œæ„é€ å‡½æ•°ä¸ä¼šæ‰§è¡Œã€‚ä¼˜ç‚¹å’Œç¼ºç‚¹éƒ½æ˜¯å‡å°‘äº†çº¦æŸã€‚ ä½¿ç”¨åœºæ™¯éœ€è¦é¢‘ç¹çš„newä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¯¥å¯¹è±¡éœ€è¦ç¹ççš„æ•°æ®å‡†å¤‡æ—¶ï¼›ä¸€ä¸ªå¯¹è±¡è¦æä¾›ç»™å…¶ä»–å¯¹è±¡è®¿é—®ï¼Œå„ä¸ªè°ƒç”¨è€…å¯èƒ½éœ€è¦ä¿®æ”¹å…¶å€¼æ—¶ï¼› åŸå‹æ¨¡å¼ä¸€èˆ¬ä¸å·¥å‚æ–¹æ³•æ¨¡å¼ä¸€èµ·å‡ºç°ï¼Œé€šè¿‡cloneçš„æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼Œç„¶åç”±å·¥å‚æ–¹æ³•æä¾›ç»™è°ƒç”¨è€…ã€‚ å®ç°123456789101112public class PrototypeClass implements Cloneable&#123; @Override public PrototypeClass clone()&#123; PrototypeClass p = null; try&#123; p = (PrototypeClass)super.clone(); &#125;catch(CloneNotSupportedException e)&#123; //TODO &#125; return p; &#125;&#125; æ³¨æ„äº‹é¡¹æ„é€ å‡½æ•°ä¸ä¼šè¢«æ‰§è¡ŒObjectç±»çš„cloneæ–¹æ³•åŸç†æ˜¯ä»å†…å­˜ä¸­ï¼ˆå †å†…å­˜ï¼‰ä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼è¿›è¡Œæ‹·è´ï¼Œé‡æ–°åˆ†é…ä¸€ä¸ªå†…å­˜å¿«ï¼Œæ„é€ å‡½æ•°æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚ æµ…æ‹·è´Objectç±»æä¾›çš„æ–¹æ³•cloneåªæ˜¯æ‹·è´æœ¬å¯¹è±¡ï¼Œå¯¹äºå…¶å†…éƒ¨çš„æ•°ç»„ã€å¼•ç”¨å¯¹è±¡éƒ½ä¸æ‹·è´è¿˜æ˜¯æŒ‡å‘åŸå£°å¯¹è±¡çš„å†…éƒ¨å…ƒç´ åœ°å€ã€‚ 1234567891011121314public class PrototypeClass implements Cloneable&#123; public ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;(); @Override public PrototypeClass clone()&#123; PrototypeClass p = null; try&#123; p = (PrototypeClass) super.clone(); &#125;catch(CloneNotSupportedException e) ) &#123; // &#125; return p; &#125;&#125; æ·±æ‹·è´æ·±æ‹·è´éœ€è¦æ‹·è´å¯¹è±¡è‡ªèº«å¤–ï¼Œè¿˜éœ€è¦æ‹·è´å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨çš„å¯¹è±¡ã€‚ é€šè¿‡cloneæ–¹å¼å®ç°ï¼š 123456789101112131415public class PrototypeClass implements Cloneable&#123; public ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;(); @Override public PrototypeClass clone()&#123; PrototypeClass p = null; try&#123; p = (PrototypeClass) super.clone(); p.arrayList = (ArrayList&lt;String&gt;) this.arrayList.clone(); &#125;catch(CloneNotSupportedException e) ) &#123; // &#125; return p; &#125;&#125; é€šè¿‡åºåˆ—åŒ–æ–¹å¼æ¥å®ç°ï¼Œé€šè¿‡åºåˆ—åŒ–å°†å¯¹è±¡(è¯¥å¯¹è±¡çš„ç±»å¿…é¡»å®ç°Serializableæ¥å£)å†™åˆ°ä¸€ä¸ªæµä¸­ï¼Œç„¶åå†ä»æµé‡ŒæŠŠå¯¹è±¡è¯»å‡ºæ¥ä»¥å®ç°æ·±å…‹éš†ã€‚ 123456789public static &lt;T extends Serializable&gt; T clone(T t) throws Exception &#123; ByteArrayOutputStream baos = new ByteArrayOutputStream(); ObjectOutputStream oos = new ObjectOutputStream(baos); oos.writeObject(t); ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray()); ObjectInputStream ois = new ObjectInputStream(bais); return (T)ois.readObject();&#125; cloneä¸finalçš„å†²çªå½“ä½¿ç”¨cloneæ–¹æ³•çš„æ—¶å€™ï¼Œç±»çš„æˆå‘˜å˜é‡ä¸å¯ä»¥å¢åŠ finalå…³é”®å­—ã€‚ æ‹“å±•ï¼šJavaæé«˜ç¯‡â€”â€”å¯¹è±¡å…‹éš†ï¼ˆå¤åˆ¶ï¼‰","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"åŸå‹æ¨¡å¼","slug":"åŸå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"å»ºé€ è€…æ¨¡å¼","slug":"å»ºé€ è€…æ¨¡å¼","date":"2020-06-23T11:29:40.000Z","updated":"2020-06-23T14:27:50.937Z","comments":true,"path":"2020/06/23/å»ºé€ è€…æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/23/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å»ºé€ è€…æ¨¡å¼å»ºé€ è€…æ¨¡å¼ä¸å·¥å‚æ¨¡å¼å…³æ³¨ç‚¹ä¸åŒï¼Œå»ºé€ è€…æ¨¡å¼å…³æ³¨é›¶ä»¶çš„ç»„è£…è¿‡ç¨‹ï¼Œå·¥å‚æ¨¡å¼æ³¨é‡é›¶ä»¶çš„åˆ›å»ºè¿‡ç¨‹ã€‚ å®šä¹‰å»ºé€ è€…æ¨¡å¼ä¹Ÿå«ç”Ÿæˆå™¨æ¨¡å¼ï¼Œ å®ƒå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„å»ºé€ æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚ ä¼˜ç‚¹ å°è£…æ€§è‰¯å¥½ä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥ä½¿å¾—å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ã€‚ å»ºé€ è€…ç‹¬ç«‹ï¼Œæ˜“æ‰©å±•ä¸åŒçš„å®ç°ç±»Builderæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå¯¹ç³»ç»Ÿçš„æ‰©å±•æœ‰åˆ©ã€‚ ä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ç”±äºå»ºé€ è€…ç‹¬ç«‹ï¼Œå› æ­¤å¯ä»¥ä¸ªæ€§åŒ–ï¼Œä¿®æ”¹ä¸€ä¸ªå»ºé€ è€…ä¸ä¼šå¯¹å…¶ä»–æ¨¡å—äº§ç”Ÿå½±å“ã€‚ ç¼ºç‚¹ äº§å“çš„ç»„æˆéƒ¨åˆ†å¿…é¡»ç›¸åŒï¼Œé™åˆ¶äº†å…¶ä½¿ç”¨èŒƒå›´ äº§å“å†…éƒ¨å˜åŒ–å¤æ‚æ—¶ï¼Œéœ€è¦å¢åŠ å¾ˆå¤šå»ºé€ è€…ç±» ä½¿ç”¨åœºæ™¯ ç›¸åŒçš„æ–¹æ³•ï¼Œä¸åŒçš„æ‰§è¡Œé¡ºåºï¼Œäº§ç”Ÿä¸åŒçš„äº‹ä»¶ç»“æœæ—¶ï¼› å¤šä¸ªéƒ¨ä»¶æˆ–è€…é›¶ä»¶éƒ½å¯ä»¥è£…é…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œä½†æ˜¯äº§ç”Ÿçš„è¿è¡Œç»“æœä¸åŒæ—¶ï¼› äº§å“ç±»éå¸¸å¤æ‚ï¼Œæˆ–è€…äº§å“ç±»ä¸­çš„è°ƒç”¨é¡ºåºä¸åŒäº§ç”Ÿäº†ä¸åŒçš„æ•ˆèƒ½ï¼› å®ç°Product äº§å“ç±»12345public class Product&#123; public void doSomething()&#123; &#125;&#125; BuilderæŠ½è±¡å»ºé€ è€…1234public abstract class Builder&#123; abstract void setPart(); //è®¾ç½®ä¸ªæ€§éƒ¨åˆ† abstract Product buildProduct();//å»ºé€ äº§å“&#125; ConcreteBuilder å…·ä½“å»ºé€ è€…12345678public class ConcreteBuilder extends Builder&#123; public void setPart()&#123; //... &#125; pbulic Product buildProduct()&#123; return new Product(); &#125;&#125; Director å¯¼æ¼”ç±»å¯¼æ¼”ç±»èµ·åˆ°å°è£…çš„ä½œç”¨ï¼Œé¿å…é«˜å±‚æ¨¡å—æ·±å…¥åˆ°å»ºé€ è€…å†…éƒ¨çš„å®ç°ç±»ã€‚å½“å»ºé€ è€…æ¨¡å¼æ¯”è¾ƒåºå¤§æ—¶ï¼Œå¯¼æ¼”ç±»å¯ä»¥æœ‰å¤šä¸ªã€‚ 123456789public class Director&#123; public Product buildProductA()&#123; Builder b = new ConcreteBuilder(); b.setPart(); return b.buildProduct(); &#125;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"å»ºé€ è€…æ¨¡å¼","slug":"å»ºé€ è€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"}]},{"title":"å‰åç«¯åˆ†ç¦»","slug":"å‰åç«¯åˆ†ç¦»","date":"2020-06-22T12:37:02.000Z","updated":"2020-06-22T14:31:18.845Z","comments":true,"path":"2020/06/22/å‰åç«¯åˆ†ç¦»/","link":"","permalink":"https://pickonebyone.github.io/2020/06/22/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/","excerpt":"","text":"åŠ¨é™åˆ†ç¦»æŠ€æœ¯ï¼šCDNã€è´Ÿè½½å‡è¡¡ï¼š å®ç°æ‰‹æ®µï¼š 1ï¼‰ lvs / lb / å››å±‚æ•°æ®åŒ…ï¼Œ é€Ÿåº¦å¿«ï¼Œä¸è§£åŒ…ã€‚ 2ï¼‰ åå‘ä»£ç†ï¼ˆnginx ã€ Node.js ä¸ƒå±‚ URI/location å»ºç«‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œè¯·æ±‚ä¼ é€’ã€è½¬å‘ å­˜å‚¨ipã€è¯·æ±‚uriã€æ¬¡æ•°ã€æ—¶é—´ç­‰ï¼Œ ï¼‰ Load Balance å¥åº·æ£€æŸ¥ ç®—æ³•ï¼š éšæœº è½®è®­ å“ˆå¸Œ æœ€å°‘è¿æ¥æ•° æƒé‡/åŠ¨æ€æƒé‡å¤šçº§ç¼“å­˜é˜²ç©¿é€ é™æµç†”æ–­é™çº§ç°åº¦å‘å¸ƒ æœåŠ¡æ— çŠ¶æ€ï¼šåˆ†å¸ƒå¼é—®é¢˜ update user set status = 2 where status = 1 and id = 1;","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"}],"tags":[]},{"title":"æŠ½è±¡å·¥å‚æ¨¡å¼","slug":"æŠ½è±¡å·¥å‚æ¨¡å¼","date":"2020-06-21T23:51:26.000Z","updated":"2020-07-13T09:11:17.180Z","comments":true,"path":"2020/06/22/æŠ½è±¡å·¥å‚æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/22/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"æŠ½è±¡å·¥å‚æ¨¡å¼æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å‡çº§ç‰ˆæœ¬ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åªç”Ÿäº§ä¸€ä¸ªç­‰çº§çš„äº§å“ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥ç”Ÿäº§å¤šä¸ªç­‰çº§çš„äº§å“ã€‚ æ¦‚å¿µäº§å“ç­‰çº§ï¼šä¸åŒäº§å“çš„ç§ç±»å°±æ˜¯ä¸åŒçš„äº§å“ç­‰çº§ï¼ˆç”µè§†æœºå’Œæ´—è¡£æœºå°±æ˜¯ä¸åŒçš„äº§å“ç­‰çº§ï¼‰äº§å“æ—ï¼šä¸€ä¸ªå…·ä½“å·¥å‚ç”Ÿäº§çš„ä¸åŒç­‰çº§çš„äº§å“ï¼ˆå·¥å‚ç”Ÿäº§çš„ç”µè§†æœºå’Œæ´—è¡£æœºå±äºä¸€ä¸ªäº§å“æ—ï¼‰ å®šä¹‰ä¸€ç§ä¸ºè®¿é—®ç±»æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œä¸”è®¿é—®ç±»æ— éœ€æŒ‡å®šæ‰€éœ€è¦äº§å“çš„å…·ä½“ç±»å°±èƒ½å¾—åˆ°åŒæ—çš„ä¸åŒç­‰çº§çš„äº§å“ã€‚ ä½¿ç”¨åœºæ™¯1ï¼‰ å®¢æˆ·ç«¯ä¸ä¾èµ–äºäº§å“ç±»å®ä¾‹å¦‚ä½•è¢«åˆ›å»ºã€å®ç°2ï¼‰ å¼ºè°ƒä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ï¼ˆåŒä¸€äº§å“æ—ï¼‰ä¸€èµ·ä½¿ç”¨åˆ›å»ºå¯¹è±¡éœ€è¦å¤§é‡çš„ä»£ç 3ï¼‰ æä¾›ä¸€ä¸ªäº§å“ç±»çš„åº“ï¼Œæ‰€æœ‰çš„äº§å“ä»¥åŒæ ·çš„æ¥å£å‡ºç°ï¼Œä»è€Œä½¿å®¢æˆ·ç«¯ä¸ä¾èµ–äºå…·ä½“å®ç°ã€‚ä¸€ä¸ªå¯¹è±¡æ—éƒ½æœ‰ç›¸åŒçš„çº¦æŸï¼Œåˆ™å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚ å®ç°äº§å“è§’è‰²å®ç°æŠ½è±¡äº§å“ï¼šProductï¼Œå®šä¹‰äº§å“çš„è§„èŒƒï¼Œæè¿°äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¤šä¸ªæŠ½è±¡äº§å“ã€‚å…·ä½“äº§å“ï¼šConcreteProductï¼Œå®ç°æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œä¸å…·ä½“å·¥å‚ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ 123456789101112131415161718192021222324252627282930public abstract Product&#123; //all product base filds &amp; methods. abstract int on(); abstract int off();&#125;public abstract AbstractTvProduct extends Product&#123; abstract int switchChannel();&#125;public abstract AbstractFridgeProduct extends Product&#123; abstract int increaseTemp(); abstract int decreaseTemp();&#125;public HaierTVProduct extends AbstractTvProduct&#123;&#125;public HaierFridgeProduct extends AbstractFridgeProduct&#123;&#125;public TCLTVProduct extends AbstractTvProduct&#123;&#125;public TCLFridgeProduct extends AbstractFridgeProduct&#123; &#125; å·¥å‚è§’è‰²å®ç°æŠ½è±¡å·¥å‚ï¼šAbstract Factoryï¼Œæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼ŒåŒ…å«å¤šä¸ªåˆ›å»ºäº§å“çš„æ–¹æ³•,å¯ä»¥åˆ›å»ºå¤šä¸ªä¸åŒç­‰çº§çš„äº§å“ã€‚å…·ä½“å·¥å‚ï¼šå®ç°æŠ½è±¡å·¥å‚ä¸­çš„å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚ 1234567891011121314151617181920212223public interface IFactory&#123; Product createTV(); Product createFridge();&#125;public class HaierFactory implements IFactory&#123; Product createTV()&#123; return new HaierTVProduct(); &#125; Product createFridge()&#123; return new HaierFridgeProduct(); &#125;&#125;public class TCLFactory implements IFactory&#123; Product createTV()&#123; return new TCLTVProduct(); &#125; Product createFridge()&#123; return new TCLFridgeProduct(); &#125;&#125; ä¼˜ç¼ºç‚¹ éš”ç¦»äº†å…·ä½“ç±»çš„ç”Ÿæˆï¼Œä½¿å¾—å®¢æˆ·å¹¶ä¸éœ€è¦çŸ¥é“ä»€ä¹ˆè¢«åˆ›å»ºï¼Œå…·æœ‰è‰¯å¥½çš„å°è£…æ€§ã€‚ å¦‚æœè¦æ‰©å±•äº§å“æ—ï¼ˆæœ‰æ–°çš„å·¥å‚è¦ç”Ÿäº§ç”µè§†å’Œå†°ç®±æ—¶ï¼‰çš„æ—¶å€™ï¼Œåªéœ€è¦å¢åŠ å…·ä½“çš„äº§å“ç±»å’Œå®ç°å·¥å‚æ–¹æ³•å³å¯ï¼ŒåŸæœ‰çš„ä»£ç ä¸éœ€è¦å˜åŠ¨ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚ å¦‚æœè¦æ‰©å±•äº§å“ç­‰çº§æ—¶ï¼Œä»æŠ½è±¡äº§å“åˆ°å·¥å‚ç±»ï¼ŒåŸæœ‰çš„ä»£ç éƒ½éœ€è¦å˜åŠ¨ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚ å‚é˜…ï¼šæŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆè¯¦è§£ç‰ˆï¼‰","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"æŠ½è±¡å·¥å‚æ¨¡å¼","slug":"æŠ½è±¡å·¥å‚æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"}]},{"title":"åˆ†å¸ƒå¼IDç”Ÿæˆå™¨","slug":"åˆ†å¸ƒå¼IDç”Ÿæˆå™¨","date":"2020-06-20T01:26:44.000Z","updated":"2020-06-22T07:17:01.707Z","comments":true,"path":"2020/06/20/åˆ†å¸ƒå¼IDç”Ÿæˆå™¨/","link":"","permalink":"https://pickonebyone.github.io/2020/06/20/%E5%88%86%E5%B8%83%E5%BC%8FID%E7%94%9F%E6%88%90%E5%99%A8/","excerpt":"","text":"1)èµ„æºé”ç»†ç²’åº¦åŒ– å°†100ä¸ªèµ„æºæ‹†åˆ†æˆ10ä»½ã€‚ è¿™10ä»½åˆ†åˆ«ä¸Šé”ï¼Œåº”ç”¨åœºæ™¯å¦‚ç§’æ€ã€‚ 2ï¼‰ä¸šåŠ¡ä½¿ç”¨é”ç»†ç²’åº¦åŒ– åªå¯¹éœ€è¦çš„èµ„æºåŠ é”ï¼Œé¿å…å¤§èŒƒå›´åŠ é”ã€‚ 3ï¼‰æ— é”åŒ–ï¼ˆçœŸæ— é”ï¼Œå‡æ— é”ï¼‰ ThreadLocal çœŸæ— é” CAS å‡æ— é”4ï¼‰å¼‚æ­¥+çº¿ç¨‹æ±  Completeable hystrix/sentinel é™æµ Leaf / Snowflake ç¼ºç‚¹ï¼š 1ï¼‰ä¾èµ–äºæ—¶é—´ï¼Œéœ€è¦ntp 2ï¼‰ä¾èµ–äºNodeIdå’ŒAreaIDçš„åˆ†å‘ï¼Œç”¨ZKè§£å†³ é€šè¿‡zkçš„é¡ºåºæ€§åˆ†é…å”¯ä¸€çš„nodeå’Œarea åŸºäºMysqlçš„å‘å¸ƒåŸºäºMysqlçš„ä¼˜åŒ– åŸºäºé›ªèŠ±ç®—æ³• åŸºäºZK","categories":[{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"https://pickonebyone.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"IDç”Ÿæˆå™¨","slug":"åˆ†å¸ƒå¼/IDç”Ÿæˆå™¨","permalink":"https://pickonebyone.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F/ID%E7%94%9F%E6%88%90%E5%99%A8/"}],"tags":[]},{"title":"å·¥å‚æ–¹æ³•æ¨¡å¼","slug":"å·¥å‚æ–¹æ³•æ¨¡å¼","date":"2020-06-19T13:51:15.000Z","updated":"2020-07-13T09:05:05.118Z","comments":true,"path":"2020/06/19/å·¥å‚æ–¹æ³•æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/19/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"åœºæ™¯ new å¯¹è±¡çš„æ›¿ä»£æ–¹æ¡ˆ éœ€è¦çµæ´»ã€å¯æ‰©å±•çš„æ¡†æ¶æ—¶ åœ¨å¼‚æ„é¡¹ç›®ä¸­ï¼Œä»å¤–éƒ¨äº§ç”Ÿçš„å¯¹è±¡ æµ‹è¯•é©±åŠ¨å¼€å‘æ¡†æ¶ä¸‹ä½¿ç”¨ã€‚æµ‹è¯•é©±åŠ¨å¼€å‘ -TDD å·¥å‚æ–¹æ³•æ¨¡å¼å®šä¹‰å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚ æŠ½è±¡äº§å“ç±»Productè´Ÿè´£å®šä¹‰äº§å“çš„å…±æ€§ï¼Œå®ç°å¯¹äº‹ç‰©æœ€æŠ½è±¡çš„å®šä¹‰ï¼›Creatorä¸ºæŠ½è±¡çš„åˆ›å»ºç±»ï¼Œå³æŠ½è±¡å·¥å‚ï¼Œå…·ä½“å¦‚ä½•åˆ›å»ºäº§å“ç±»æ˜¯ç”±å…·ä½“çš„å®ç°å·¥å‚ConcreteCreatorå®Œæˆçš„ã€‚ ä¼˜ç‚¹ è‰¯å¥½çš„å°è£…ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆï¼› è‰¯å¥½çš„æ‰©å±•æ€§ï¼› å±è”½å…·ä½“çš„äº§å“ç±»ï¼Œåªè¦æ¥å£ä¸å˜ï¼Œç³»ç»Ÿä¸­ä¸Šå±‚æ¨¡å—å°±ä¸éœ€è¦å‘ç”Ÿå˜åŒ–ã€‚ é«˜å±‚æ¨¡å—åªéœ€è¦çŸ¥é“äº§å“çš„æŠ½è±¡ç±»ï¼Œä¸å…³å¿ƒå®ç°ç±»ï¼Œç¬¦åˆè¿ªç±³ç‰¹æ³•åˆ™ï¼›åªä¾èµ–äº§å“çš„æŠ½è±¡ï¼Œç¬¦åˆå€’ç½®åŸåˆ™ï¼›ä½¿ç”¨äº§å“å­ç±»æ›¿æ¢çˆ¶ç±»æ—¶ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œç¬¦åˆé‡Œæ°æ›¿æ¢åŸåˆ™ï¼› ç¼ºç‚¹å¯¹äºä¸åŒç±»å‹çš„äº§å“éƒ½è¦å¢åŠ ä¸åŒç±»å‹çš„å·¥å‚æ¥ç®¡ç†ï¼Œå¢åŠ ä»£ç çš„å¤æ‚æ€§ å®ç°é€šç”¨å®ç°äº§å“ç±»ï¼š 123456789101112public abstract class Product&#123; public abstract void method1(); public void method2()&#123;&#125;&#125;public class Product1 extends Product&#123; public void method1()&#123;&#125;&#125;public class Product2 extends Product&#123; public void method1()&#123;&#125;&#125; å·¥å‚ç±»ï¼š 12345678910111213141516public abstract class Factory&#123; public abstract &lt;T extends Product&gt; T create(Class&lt;T&gt; c);&#125;public class ConcreteFactory extends Factory&#123; public &lt;T extends Product&gt; T create(Class&lt;T&gt; c)&#123; Product p = null; try&#123; p = (Product)Class.forName(c.getName()).newInstance(); &#125;catch(Exception e)&#123; &#125; return (T)p; &#125;&#125; ä½¿ç”¨ï¼š 12Factory factory &#x3D; new ConcreteFactory();Product p &#x3D; factory.createt(Product1.class); ç¼©å°ä¸ºç®€å•å·¥å‚å»æ‰æŠ½è±¡çš„Factoryç±»ï¼Œcreate()æ–¹æ³•å˜ä¸ºé™æ€æ–¹æ³•å³å¯ã€‚ 123456789101112public void Factory&#123; public static &lt;T extends Product&gt; T create(Class&lt;T&gt; c)&#123; Product p = null; try&#123; p = (Product)Class.forName(c.getName()).newInstance(); &#125;catch(Exception e)&#123; &#125; return (T)p; &#125;&#125; è°ƒç”¨ä»£ç ï¼š 1Product p = Factory.create(Product1.class); å‡çº§ä¸ºå¤šä¸ªå·¥å‚ç±»é‡åˆ°å¤æ‚æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå·¥å‚ç±»åˆå§‹åŒ–éœ€è¦è€—è´¹å¾ˆå¤šèµ„æºï¼Œè¿™æ ·å¯ä»¥å°†å·¥å‚ç±»ç»†åŒ–æ‹†åˆ†ã€‚ 123456789101112public class Factory1 extends Factory&#123; public static Product create()&#123; return new Product1(); &#125;&#125;public class Factory2 extends Factory&#123; public static Product create()&#123; return new Product2(); &#125;&#125; è¿™æ ·çš„å¥½å¤„æ˜¯èŒè´£æ¸…æ™°ï¼Œç»“æ„ç®€å•ï¼Œä½†æ˜¯å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§å·®äº†äº›ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå†å¢åŠ ä¸€ä¸ªåè°ƒç±»ï¼Œé¿å…è°ƒç”¨è€…ç›´æ¥ä¸å„ä¸ªå­å·¥å‚ç±»äº¤æµï¼Œåè°ƒç±»çš„ä½œç”¨æ˜¯å°è£…å­å·¥å‚ç±»ï¼Œå¯¹é«˜å±‚æ¨¡å—æä¾›ç»Ÿä¸€çš„è®¿é—®æ¥å£ã€‚ æ›¿ä»£å•ä¾‹æ¨¡å¼é€šè¿‡åå°„çš„æ–¹å¼æ¥åˆ›å»ºå”¯ä¸€ä¸€ä¸ªå®ä¾‹ å»¶è¿Ÿåˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡è¢«ä½¿ç”¨å®Œæ¯•åï¼Œå¹¶ä¸ç«‹å³é‡Šæ”¾ï¼Œå·¥å‚ç±»ä¿æŒå…¶åˆå§‹çŠ¶æ€ï¼Œç­‰å¾…å†æ¬¡è¢«ä½¿ç”¨ã€‚ å»¶è¿ŸåŠ è½½æ¡†æ¶å¯ä»¥è¢«æ‰©å±•ä¸ºï¼Œé™åˆ¶æŸä¸ªäº§å“ç±»çš„æœ€å¤§å®ä¾‹åŒ–æ•°é‡ï¼ˆå¦‚é“¾æ¥æ± çš„æœ€å¤§é“¾æ¥æ•°é‡ï¼‰ 123456789101112131415161718public class ProductFactory&#123; private static final Map&lt;String,Product&gt; pMap = new HashMap(); public static synchronized Product createProduct(String type) throws Exception&#123; Product p = null; if(pMap.containsKey(type))&#123; p = pMap.get(type); &#125;else&#123; if(type.equals(\"Product1\"))&#123; p = new Product1(); &#125;else&#123; p = new Product2(); &#125; &#125; return product; &#125;&#125; å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚ https://www.zhihu.com/question/24843188 https://www.jianshu.com/p/83ef48ce635b https://blog.csdn.net/buyulian/article/details/79203880 https://blog.csdn.net/qianhaifeng2012/article/details/52014773 https://www.cnblogs.com/aspirant/p/8980573.html http://www.akathink.com/2016/08/01/%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"å·¥å‚æ–¹æ³•æ¨¡å¼","slug":"å·¥å‚æ–¹æ³•æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"}]},{"title":"å•ä¾‹æ¨¡å¼","slug":"å•ä¾‹æ¨¡å¼","date":"2020-06-18T14:20:29.000Z","updated":"2020-06-23T13:12:58.090Z","comments":true,"path":"2020/06/18/å•ä¾‹æ¨¡å¼/","link":"","permalink":"https://pickonebyone.github.io/2020/06/18/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å•ä¾‹æ¨¡å¼åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œè¦æ±‚ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœå‡ºç°å¤šä¸ªå¯¹è±¡å°±ä¼šå‡ºç°â€œæ··ä¹±â€ã€‚ è¦æ±‚ç”Ÿæˆå”¯ä¸€åºå·çš„åœºæ™¯ æ•´ä¸ªé¡¹ç›®ä¸­éœ€è¦ä¸€ä¸ªå…±äº«æ•°æ®ï¼Œå¦‚è®¡æ•°å™¨ åˆ›å»ºå¯¹è±¡è¦æ¶ˆè€—è¿‡å¤šèµ„æºï¼ˆIOè®¿é—®æˆ–è€…æ•°æ®åº“èµ„æºç­‰ï¼‰ å®šä¹‰å¤§é‡çš„é™æ€å¸¸é‡å’Œé™æ€æ–¹æ³•çš„å·¥å…·ç±» å®šä¹‰ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶ä¸”å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚ ä¼˜ç‚¹å•ä¾‹æ¨¡å¼åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜å¼€æ”¯ã€‚å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦é¢‘ç¹åœ°åˆ›å»ºã€é”€æ¯æ—¶ï¼Œè€Œä¸”åˆ›å»ºæˆ–è€…é”€æ¯æ—¶çš„æ€§èƒ½æ— æ³•ä¼˜åŒ–æ—¶ï¼Œå•ä¾‹æ¨¡å¼çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ã€‚ ç¼ºç‚¹æ²¡æœ‰æ¥å£ï¼Œæ— æ³•æ‰©å±•ï¼Œæ²¡æœ‰æ¥å£ä¹Ÿä¸èƒ½ä½¿ç”¨Mockæ–¹å¼è™šæ‹Ÿå¯¹è±¡ã€‚åœ¨å¹¶è¡Œå¼€å‘ç¯å¢ƒä¸­ï¼Œå•ä¾‹æ¨¡å¼æ²¡æœ‰å®Œæˆæ— æ³•è¿›è¡Œæµ‹è¯•ã€‚ä¸å•ä¸€èŒè´£åŸåˆ™å†²çªï¼Œå•ä¾‹æ¨¡å¼æŠŠä¸šåŠ¡é€»è¾‘å’Œå•ä¾‹æ··åˆåœ¨ä¸€ä¸ªç±»ä¸­ã€‚ æ³¨æ„äº‹é¡¹é«˜å¹¶å‘æƒ…å†µä¸‹ï¼Œå•ä¾‹æ¨¡å¼çš„çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚ æå‰åŠ è½½12345678910public class Singleton&#123; private static Singleton instance = new Singleton(); private Singleton()&#123;&#125; public static Singleton getInstance()&#123; return instance; &#125;&#125; å»¶ååŠ è½½123456789101112131415161718public class Singleton&#123; private volatile static Singleton instance = null; private Singleton()&#123;&#125; public static Singleton getInstance()&#123; if(instance == null)&#123; synchronized(Singleton.class)&#123; if(instance == null)&#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; æšä¸¾123public enum Singleton&#123; instance;&#125;","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"å•ä¾‹æ¨¡å¼","slug":"å•ä¾‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"Redisé›†ç¾¤","slug":"Redisé›†ç¾¤","date":"2020-06-18T12:03:20.000Z","updated":"2020-06-18T14:02:18.174Z","comments":true,"path":"2020/06/18/Redisé›†ç¾¤/","link":"","permalink":"https://pickonebyone.github.io/2020/06/18/Redis%E9%9B%86%E7%BE%A4/","excerpt":"","text":"IDCæœºæˆ¿ç¡¬ä»¶è®¾å¤‡é€‰è´­æ–¹æ¡ˆ 1.1 ç”Ÿäº§ç¯å¢ƒä¸­é€‰è´­ä¾æ® ä»·æ ¼ æ€§èƒ½ å†—ä½™ 1.1.1 ç”Ÿäº§ç¯å¢ƒè´Ÿè½½å‡è¡¡ç³»ç»Ÿæ¶æ„è®¾å¤‡é€‰è´­æ–¹æ¡ˆ è´Ÿè½½å‡è¡¡ï¼š LVS1 DELL R610 1U CPU E52 8G * 2/4 ç¡¬ç›˜ SAS 146 * 2 RAID1 LVS2 DELL R610 1U CPU E52 8G * 2/4 ç¡¬ç›˜ SAS 146 * 2 RAID1 1.1.2 Webå±‚ç¡¬ä»¶é€‰æ‹©RAID wwwä¸»ç«™1 ä¸šåŠ¡2 DELL R730 2U CPU E5 * 2 8G(16G/32G) SAS 300G * 2 RAID0 wwwä¸»ç«™2 ä¸šåŠ¡2 DELL R730 2U CPU E5 * 2 8G(16G/32G) SAS 300G * 2 RAID0 1.1.3 æ•°æ®åº“å±‚ç¡¬ä»¶ä»¥åŠRAID Mysqlä¸»åº“1-1 DELL R730 2U CPU E52 8/16/32 SAS 300G * 6 RAID10(å…¼é¡¾å†—ä½™/é€Ÿåº¦ï¼‰ Mysqlä¸»åº“1-2 DELL R730 2U CPU E52 8/16/32 SAS 300G * 6 RAID10(å…¼é¡¾å†—ä½™/é€Ÿåº¦ï¼‰ Mysqlä»åº“1-1 DELL R730 2U CPU E52 8/16/32 SAS 300G * 6 RAID0/5 Mysqlä»åº“1-2 DELL R730 2U CPU E52 8/16/32 SAS 300G * 6 RAID0/5 Mysqlä»åº“2-1 DELL R730 2U CPU E52 8/16/32 SAS 300G * 6 RAID0/5 Mysqlä»åº“2-2 DELL R730 2U CPU E52 8/16/32 SAS 300G * 6 RAID0/5 1.1.4 å­˜å‚¨å±‚ç¡¬ä»¶ä»¥åŠRAID DELL R610 E5 * 2 16/32G SAS 10K 2T * 6 ä¸åšRAIDäº¤å‰å¤‡ä»½/ RAID5DELL R730 E5 * 2 16/32G SAS 10K 2T * 6 RAID5æŠ˜ä¸­æ–¹æ¡ˆ å¤‡ä»½æœåŠ¡å™¨ä¸€èˆ¬è€ƒè™‘å®¹é‡å’Œå†—ä½™ï¼Œå¯¹æ€§èƒ½è¦æ±‚ä¸é«˜ã€‚ 1.1.5 NFSç¡¬ä»¶ä»¥åŠRAID NFS1 DELL R730 E5 8G * 2 SAS 15K 600G * 6 RAID10/RAID5/RAID0NFS2 DELL R730 E5 8G * 2 SAS 15K 600G * 6 RAID10/RAID5/RAID0 1.1.6 GFSã€MFSåˆ†å¸ƒå¼å­˜å‚¨ NFS1 DELL R730 E5 8G * 2 SAS 15K 600G * 6 RAID10/RAID5/RAID0NFS2 DELL R730 E5 8G * 2 SAS 15K 600G * 6 RAID10/RAID5/RAID0 1.1.7 ç›‘æ§ç®¡ç†/ç½‘å…³å±‚ç¡¬ä»¶ä»¥åŠRAID DELL R610/R430 E5*1 8/16G 146 SAS * 2 RAID1 1.1.8 ç½‘ç»œè®¾å¤‡ å…¨åƒå…†è®¾å¤‡/ç½‘çº¿åä¸º H3C CISCO DLINK éƒ½éœ€è¦å¸¦æœ‰è¿œç¨‹ç®¡ç†å¡ 4+1 Redisæ­å»ºä¸»æœºè§„åˆ’ï¼š åºå· ä¸»æœºåç§° è§’è‰² æ•°é‡ IPå†…ç½‘ IPå¤–ç½‘ ç«¯å£ è½¯ä»¶ å¤‡æ³¨ 1 Redis-Master-01 Node01 1 10.0.0.1 6379 Centos7.7 â€“ 1 Redis-Master-02 Node02 1 10.0.0.2 6379 Centos7.7 â€“ 1 Redis-Master-03 Node03 1 10.0.0.3 6379 Centos7.7 â€“ 1 Redis-slave-01 slave01 1 10.0.0.4 6389 Centos7.7 â€“ 1 Redis-slave-02 slave02 1 10.0.0.5 6389 Centos7.7 â€“ 1 Redis-slave-03 slave03 1 10.0.0.6 6389 Centos7.7 â€“ 1234567bind 10.0.0.1port 6379pidfile &#x2F;var&#x2F;run&#x2F;redis_7000.pidcluster-enabled yesdaemonize yescluster-config-file nodes-63679.conf appendonly yes ESå®‰è£…cd /etc/yum.repos.d/vim elasticsearcg.repoyum makecache &amp;&amp; yum install -y elasticsearch","categories":[{"name":"Redis","slug":"Redis","permalink":"https://pickonebyone.github.io/categories/Redis/"},{"name":"é›†ç¾¤éƒ¨ç½²","slug":"Redis/é›†ç¾¤éƒ¨ç½²","permalink":"https://pickonebyone.github.io/categories/Redis/%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/"}],"tags":[]},{"title":"è®¾è®¡æ¨¡å¼å’ŒåŸåˆ™","slug":"è®¾è®¡æ¨¡å¼å’ŒåŸåˆ™","date":"2020-06-18T08:40:27.000Z","updated":"2020-07-13T09:30:05.584Z","comments":true,"path":"2020/06/18/è®¾è®¡æ¨¡å¼å’ŒåŸåˆ™/","link":"","permalink":"https://pickonebyone.github.io/2020/06/18/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%8E%9F%E5%88%99/","excerpt":"","text":"åˆ›å»ºè½¯ä»¶åº”ç”¨ç¨‹åºæ—¶ä¸ºäº†æ»¡è¶³ä¸æ–­å˜åŒ–å’Œå‘å±•çš„éœ€æ±‚ï¼Œä¸€ä¸ªæˆåŠŸçš„åº”ç”¨ç¨‹åºåº”è¯¥æä¾›ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥æ‰©å±•å®ƒä»¥æ»¡è¶³ä¸æ–­å˜åŒ–çš„æœŸæœ›ã€‚ SOLIDè®¾è®¡åŸåˆ™å•ä¸€èŒè´£åŸåˆ™æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŸå› å¼•èµ·ç±»çš„å˜æ›´ã€‚ é—®é¢˜ï¼šClass IUser è´Ÿè´£ä¸¤ä¸ªä¸åŒçš„èŒè´£,èŒè´£1ç»´æŠ¤Userçš„å±æ€§(id, name, age)ï¼ŒèŒè´£2ç»´æŠ¤DBæ“ä½œï¼ˆsave/update/delete/findï¼‰.å½“ç”±äºèŒè´£1éœ€æ±‚å‘ç”Ÿæ”¹å˜è¦å¢åŠ ä¸€ä¸ªsexçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´åŸæœ¬è¿è¡Œæ­£å¸¸çš„èŒè´£2åŠŸèƒ½å‘ç”Ÿæ•…éšœã€‚ è§£å†³æ–¹æ³•ï¼šå°†IUseræ‹†åˆ†ä¸º UserInfoå’ŒUserDaoã€‚ ä¼˜ç‚¹ï¼šé™ä½ç±»çš„å¤æ‚æ€§ï¼Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ï¼›æé«˜ç±»çš„å¯è¯»æ€§ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ï¼›é™ä½å˜æ›´å¼•èµ·çš„é£é™©ï¼Œå½“ä¿®æ”¹ä¸€ä¸ªæ¥å£çš„åŠŸèƒ½æ—¶ï¼Œå¯ä»¥é™ä½å¯¹å…¶ä»–åŠŸèƒ½çš„å½±å“ã€‚ å¼€é—­åŸåˆ™ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡æ‰©å±•æ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚ å¯ä»¥é€šè¿‡æŠ½è±¡çº¦æŸã€å°è£…å˜åŒ–æ¥å®ç°å¼€é—­åŸåˆ™ã€‚é€šè¿‡æ¥å£æˆ–è€…æŠ½è±¡ç±»ä¸ºè½¯ä»¶å®ä½“å®šä¹‰ä¸€ä¸ªç›¸å¯¹ç¨³å®šçš„æŠ½è±¡å±‚ï¼Œè€Œå°†ç›¸åŒçš„å¯å˜å› ç´ å°è£…åœ¨ç›¸åŒçš„å…·ä½“å®ç°ç±»ä¸­ã€‚ é‡Œæ°æ›¿æ¢åŸåˆ™æ´¾ç”Ÿç±»å‹å¿…é¡»å®Œå…¨å¯æ›¿ä»£å…¶åŸºç±»å‹ã€‚åœ¨è®¾è®¡æ¨¡å—å’Œç±»æ—¶ï¼Œå¿…é¡»ç¡®ä¿æ´¾ç”Ÿç±»å‹ä»è¡Œä¸ºçš„è§’åº¦æ¥çœ‹æ˜¯å¯æ›¿ä»£çš„ã€‚å½“æ´¾ç”Ÿç±»å‹è¢«å…¶çˆ¶ç±»æ›¿æ¢æ—¶ï¼Œå…¶ä½™ä»£ç å°±åƒå®ƒæ˜¯è‡ªç±»å‹é‚£æ ·ä½¿ç”¨å®ƒã€‚ å­ç±»å¿…é¡»å®Œå…¨å®ç°çˆ¶ç±»çš„æ–¹æ³• å­ç±»å¯ä»¥æœ‰è‡ªå·±çš„ä¸ªæ€§ è¦†ç›–æˆ–è€…å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œè¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§ è…¹æ³»æˆ–è€…å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œè¾“å‡ºç»“æœå¯ä»¥è¢«ç¼©å° æ¥å£éš”ç¦»åŸåˆ™å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–äºå®ƒæ‰€ä¸éœ€è¦çš„æ¥å£ã€‚æ¥å£éš”ç¦»åŸåˆ™å‡å°‘äº†ä»£ç è€¦åˆï¼Œä½¿è½¯ä»¶æ›´å¼ºå£®ï¼Œæ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚æ¥å£éš”ç¦»åŸåˆ™è¦æ±‚æ¥å£çš„å®šä¹‰å’Œè®¾è®¡å°½é‡çš„ç»†åŒ–ã€‚ æ¥å£å°½é‡å°ï¼Œä½†æ˜¯è¦æœ‰é™åº¦ã€‚å¯¹æ¥å£è¿›è¡Œç»†åŒ–å¯ä»¥æé«˜ç¨‹åºè®¾è®¡çš„çµæ´»æ€§ï¼Œä½†æ˜¯å¦‚æœè¿‡å°ï¼Œä¼šé€ æˆæ¥å£æ•°é‡è¿‡å¤šï¼Œä½¿è®¾è®¡å¤æ‚åŒ–ã€‚ ä¸ºä¾èµ–æ¥å£çš„ç±»å®šåˆ¶æœåŠ¡ï¼Œåªæš´éœ²ç»™è°ƒç”¨çš„ç±»å®ƒéœ€è¦çš„æ–¹æ³•ï¼Œä¸éœ€è¦çš„æ–¹æ³•éšè—èµ·æ¥ï¼Œåªæœ‰ä¸“æ³¨åœ°ä¸ºä¸€ä¸ªæ¨¡å—æä¾›å®šåˆ¶æœåŠ¡ï¼Œæ‰èƒ½å»ºç«‹æœ€å°ä¾èµ–å…³ç³»ã€‚ æé«˜å†…èšï¼Œå‡å°‘å¯¹å¤–äº¤äº’ã€‚ä½¿æ¥å£ç”¨æœ€å°‘çš„æ–¹æ³•å®Œæˆæœ€å¤šçš„äº‹æƒ…ã€‚ ä¾èµ–å€’ç½®åŸåˆ™é«˜çº§æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½çº§æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚ æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®ç°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œå™¨ä¾èµ–å…³ç³»æ˜¯é€šè¿‡æ¥å£æˆ–è€…æŠ½è±¡ç±»äº§ç”Ÿã€‚ æ¥å£æˆ–è€…æŠ½è±¡ç±»ä¸ä¾èµ–å®ç°ç±» å®ç°ç±»ä¾èµ–æ¥å£æˆ–è€…æŠ½è±¡ç±» åˆ›å»ºå‹æ¨¡å¼(6/6) å•ä¾‹æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ å»ºé€ è€…æ¨¡å¼ åŸå‹æ¨¡å¼ å¯¹è±¡æ± æ¨¡å¼ è¡Œä¸ºå‹æ¨¡å¼(12/12) ç­–ç•¥æ¨¡å¼ çŠ¶æ€æ¨¡å¼ è®¿é—®è€…æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼ è´£ä»»é“¾æ¨¡å¼ æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ å‘½ä»¤æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼ è§£é‡Šå™¨æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ ä¸­ä»‹è€…æ¨¡å¼ ç©ºå¯¹è±¡æ¨¡å¼ ç»“æ„å‹æ¨¡å¼(7/7) ä»£ç†æ¨¡å¼ ç»„åˆæ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ é—¨é¢æ¨¡å¼ äº«å…ƒæ¨¡å¼","categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è®¾è®¡åŸåˆ™","slug":"è®¾è®¡æ¨¡å¼/è®¾è®¡åŸåˆ™","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è®¾è®¡åŸåˆ™","slug":"è®¾è®¡åŸåˆ™","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"}]},{"title":"å¸¸ç”¨JVMå‚æ•°","slug":"å¸¸ç”¨JVMå‚æ•°","date":"2020-06-17T13:46:30.000Z","updated":"2020-06-17T14:19:26.326Z","comments":true,"path":"2020/06/17/å¸¸ç”¨JVMå‚æ•°/","link":"","permalink":"https://pickonebyone.github.io/2020/06/17/%E5%B8%B8%E7%94%A8JVM%E5%8F%82%E6%95%B0/","excerpt":"","text":"HotSpot è™šæ‹Ÿæœºå¸¸ç”¨é…ç½® é…ç½® è¯´æ˜ -Xms1g æœ€å°å †å†…å­˜ -Xmx4g æœ€å¤§å †å†…å­˜ -XX:+UseG1GC ä½¿ç”¨G1åƒåœ¾å›æ”¶å™¨ -Xss256k æ¯ä¸ªçº¿ç¨‹æ ˆå¤§å°256k -XX:MetaspaceSize=256m å…ƒæ•°æ®åŒºå¤§å°256M -XX:MaxMetaspaceSize=256m å…ƒæ•°æ®åŒºæœ€å¤§256M -XX:MaxGCPauseMillis=500 GCæœ€å¤§åœé¡¿æ¯«ç§’æ•° -XX:+DisableExplicitGC ç¦ç”¨ä»£ç ä¸­æ˜¾å¼è°ƒç”¨GCï¼ŒSystem.gc()å°†ä¼šå¤±æ•ˆ -XX:+UnlockExperimentalVMOptions è§£é”å®éªŒå‚æ•° -XX:+UseStringDeduplication GCçš„åŒæ—¶åšé‡å¤å­—ç¬¦ä¸²æ¶ˆé™¤ï¼Œåªç”¨äºG1 -XX:InitiatingHeapOccupancyPercent=60 å¯åŠ¨å¹¶å‘GCå‘¨æœŸæ—¶çš„å †å†…å­˜å ç”¨ç™¾åˆ†æ¯”. G1ä¹‹ç±»çš„åƒåœ¾æ”¶é›†å™¨ç”¨å®ƒæ¥è§¦å‘å¹¶å‘GCå‘¨æœŸ,åŸºäºæ•´ä¸ªå †çš„ä½¿ç”¨ç‡,è€Œä¸åªæ˜¯æŸä¸€ä»£å†…å­˜çš„ä½¿ç”¨æ¯”. å€¼ä¸º 0 åˆ™è¡¨ç¤ºâ€ä¸€ç›´æ‰§è¡ŒGCå¾ªç¯â€. é»˜è®¤å€¼ä¸º 45. -XX:ParallelGCThreads=8 è®¾ç½®åƒåœ¾æ”¶é›†å™¨åœ¨å¹¶è¡Œé˜¶æ®µä½¿ç”¨çš„çº¿ç¨‹æ•°,é»˜è®¤å€¼éšJVMè¿è¡Œçš„å¹³å°ä¸åŒè€Œä¸åŒ. -XX:G1MixedGCCountTarget=4 è®¾ç½®åœ¨æ ‡è®°å‘¨æœŸå®Œæˆä¹‹åæ··åˆæ”¶é›†çš„æ•°é‡ï¼Œä»¥ç»´æŒold regionï¼ˆä¹Ÿå°±æ˜¯è€å¹´ä»£ï¼‰ä¸­ï¼Œæœ€å¤šæœ‰G1MixedGCLiveThresholdPercentçš„å­˜æ´»å¯¹è±¡ã€‚é»˜è®¤å€¼ä¸º8ï¼Œæ··åˆæ”¶é›†çš„æ•°é‡å°†ç»´æŒåœ¨è¿™ä¸ªå€¼ä¹‹å†…ã€‚ï¼ˆJVM build &gt; 23ï¼‰ -XX:MaxTenuringThreshold=7 å¹´è€ä»£çš„æœ€å¤§ä¸´ç•Œå€¼(tenuring threshold). é»˜è®¤å€¼ä¸º 15. -XX:+UseGCLogFileRotation æ»šåŠ¨è®°å½•GCæ—¥å¿—æ–‡ä»¶ -XX:NumberOfGCLogFiles=5 GCæ—¥å¿—æ–‡ä»¶æ•°é‡ä¸º5ä¸ª -XX:GCLogFileSize=64M å•ä¸ªGCæ—¥å¿—æ–‡ä»¶å¤§å°64M -Xloggc:/app/data/logs/gc-date +%Y%m%d-%H-%M.log GCæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç›®å½•å’Œåç§° -XX:+PrintGCDetails æ‰“å°GCè¯¦æƒ… -XX:+PrintGCDateStamps æ‰“å°GCæ—¶æ—¶é—´æˆ³ -XX:+PrintHeapAtGC GCæ—¶æ‰“å°å †ä¿¡æ¯ -XX:+PrintAdaptiveSizePolicy è‡ªé€‚åº”å¤§å°ç­–ç•¥ï¼Œæ¯æ¬¡ GC åä¼šé‡æ–°è®¡ç®— Edenã€From å’Œ To åŒºçš„å¤§å°ï¼Œè®¡ç®—ä¾æ®æ˜¯ GC è¿‡ç¨‹ä¸­ç»Ÿè®¡çš„ GC æ—¶é—´ã€ååé‡ã€å†…å­˜å ç”¨é‡ã€‚ -XX:+UseFastAccessorMethods -XX:SoftRefLRUPolicyMSPerMB=0 softly reachable objects will remain alive for some amount of time after the last time they were referenced. The default value is one second of lifetime per free megabyte in the heap","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"è°ƒä¼˜","slug":"è°ƒä¼˜","permalink":"https://pickonebyone.github.io/tags/%E8%B0%83%E4%BC%98/"},{"name":"å‚æ•°","slug":"å‚æ•°","permalink":"https://pickonebyone.github.io/tags/%E5%8F%82%E6%95%B0/"}]},{"title":"å¸¸ç”¨ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·","slug":"å¸¸ç”¨ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·","date":"2020-06-16T14:17:33.000Z","updated":"2020-06-17T13:44:45.184Z","comments":true,"path":"2020/06/16/å¸¸ç”¨ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·/","link":"","permalink":"https://pickonebyone.github.io/2020/06/16/%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/","excerpt":"","text":"å‘½ä»¤è¡Œå·¥å…·jpsåˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œå¹¶æ˜¾ç¤ºè™šæ‹Ÿæœºæ‰§è¡Œä¸»ç±»åç§°ä»¥åŠè¿™äº›è¿›ç¨‹çš„æœ¬åœ°è™šæ‹Ÿå”¯ä¸€IDï¼ˆä¸æ“ä½œç³»ç»Ÿè¿›ç¨‹IDä¸€è‡´ï¼‰ã€‚ jps [option] [hostid] é€‰é¡¹ ä½œç”¨ -q åªè¾“å‡ºlvmidï¼Œçœç•¥ä¸»ç±»çš„åç§° -m è¾“å‡ºè™šæ‹Ÿæœºå¯åŠ¨æ—¶ä¼ é€’ç»™ä¸»ç±»mainï¼ˆï¼‰çš„å‚æ•° -l è¾“å‡ºä¸»ç±»çš„å…¨åï¼Œå¦‚æœæ˜¯jaråŒ…ï¼Œåˆ™è¾“å‡ºjarè·¯å¾„ -v è¾“å‡ºè™šæ‹Ÿæœºå¯åŠ¨æ—¶çš„jvmå‚æ•° jstatç”¨äºç›‘è§†è™šæ‹Ÿæœºå„ç§è¿è¡ŒçŠ¶æ€ä¿¡æ¯çš„å‘½ä»¤è¡Œå·¥å…·ã€‚æ˜¾ç¤ºæœ¬åœ°æˆ–è€…è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»åŠ è½½ã€å†…å­˜ã€åƒåœ¾æ”¶é›†ã€å³æ—¶ç¼–è¯‘ç­‰è¿è¡Œæ—¶æ•°æ®ã€‚ jstat [option vimid [interval[s|ms] [count]]][protocal:][//]lvmid[@hostname[:port]/servername] é€‰é¡¹ ä½œç”¨ -class ç›‘è§†ç±»åŠ è½½ã€å¸è½½æ•°é‡ã€æ€»ç©ºé—´ä»¥åŠç±»è£…è½½è€—è´¹çš„æ—¶é—´ -gc ç›‘è§†Javaå †çŠ¶å†µï¼ŒåŒ…æ‹¬Edenã€Survivorã€è€å¹´ä»£ã€æ°¸ä¹…ä»£çš„å®¹é‡ï¼Œå·²ç”¨ç©ºé—´ï¼Œåƒåœ¾æ”¶é›†æ—¶é—´ -gccapacity ç›‘è§†å†…å®¹ä¸-gcåŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨javaå †å„ä¸ªåŒºåŸŸä½¿ç”¨åˆ°æœ€å¤§æœ€å°ç©ºé—´ -gcutil ç›‘è§†å†…å®¹ä¸-gcåŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨å·²ä½¿ç”¨ç©ºé—´å æ€»ç©ºé—´çš„ç™¾åˆ†æ¯” -gccause ä¸-gcutilåŠŸèƒ½ä¸€æ ·ï¼Œä¼šé¢å¤–è¾“å‡ºå¯¼è‡´ä¸Šä¸€æ¬¡åƒåœ¾æ”¶é›†äº§ç”Ÿçš„åŸå›  -gcnew ç›‘è§†æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†æƒ…å†µ -gcnewcapacity ç›‘è§†å†…å®¹ä¸-gcnewåŸºæœ¬ç›¸åŒï¼Œè¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ -gcold ç›‘è§†è€å¹´ä»£åƒåœ¾æ”¶é›†çŠ¶å†µ -gcoldcapacity ä¸-gcoldç›¸åŒï¼Œè¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ -gcpermcapacity è¾“å‡ºæ°¸ä¹…ä»£ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ -compiler è¾“å‡ºå³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘è¿‡çš„æ–¹æ³•ã€è€—æ—¶ç­‰ä¿¡æ¯ -printcompilation è¾“å‡ºå·²ç»è¢«å³æ—¶ç¼–è¯‘çš„æ–¹æ³• æ¯éš”1sæŸ¥è¯¢ä¸€æ¬¡2105çš„gcæƒ…å†µï¼ŒæŸ¥è¯¢10æ¬¡ã€‚jstat -gc 2105 1000 10 jstat -gcutil 2105 S0 S1 E O P YGC YGCT FGC FGCT GCT 0.00 0.00 6.20 41.42 47.20 16 0.105 3 0.472 0.577 jinfoå®æ—¶æŸ¥çœ‹å’Œè°ƒæ•´è™šæ‹Ÿæœºå„é¡¹å‚æ•°ã€‚ 12345678910111213141516Usage: jinfo [option] &lt;pid&gt; (to connect to running process) jinfo [option] &lt;executable &lt;core&gt; (to connect to a core file) jinfo [option] [server_id@]&lt;remote server IP or hostname&gt; (to connect to remote debug server)where &lt;option&gt; is one of: -flag &lt;name&gt; to print the value of the named VM flag -flag [+|-]&lt;name&gt; to enable or disable the named VM flag -flag &lt;name&gt;&#x3D;&lt;value&gt; to set the named VM flag to the given value -flags to print VM flags -sysprops to print Java system properties &lt;no option&gt; to print both of the above -h | -help to print this help message jmapç”¨äºç”Ÿæˆå †è½¬å‚¨å¿«ç…§ï¼ŒæŸ¥è¯¢finalizeæ‰§è¡Œé˜Ÿåˆ—ã€Javaå †å’Œæ–¹æ³•åŒºçš„è¯¦ç»†ä¿¡æ¯ï¼ˆç©ºé—´ä½¿ç”¨ç‡ã€å½“å‰ä½¿ç”¨æ”¶é›†å™¨ç±»å‹ï¼‰ ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶çš„æ–¹å¼ï¼š 1234-XX:+HeapDumpOnOutOfMemoryError åœ¨è™šæ‹Ÿæœºå†…å­˜æº¢å‡ºå¼‚å¸¸å‡ºç°åè‡ªåŠ¨ç”Ÿæˆå †è½¬å‚¨å¿«ç…§æ–‡ä»¶ã€‚-XX:HeapDumpOnCtrlBreak ä½¿ç”¨ctrl+Break ç”Ÿæˆå †è½¬å‚¨å¿«ç…§æ–‡ä»¶kill -3 pid ç”Ÿæˆå †è½¬å‚¨å¿«ç…§æ–‡ä»¶jmap -dump:format&#x3D;b,file&#x3D;heap.dump 3120 é€‰é¡¹ ä½œç”¨ -dump ç”Ÿæˆjavaå †è½¬å‚¨å¿«ç…§ï¼Œæ ¼å¼ä¸º-dump:[live,]format=b,file=,liveå­å‚æ•°è¯´æ˜æ˜¯å¦åªdumpå‡ºå­˜æ´»å¯¹è±¡ -finalizerinfo æ˜¾ç¤ºå†F-Queueä¸­ç­‰å¾…Finalizerçº¿ç¨‹æ‰§è¡Œfinalizeæ–¹æ³•çš„å¯¹è±¡ã€‚åªæœ‰åœ¨Linuxå¹³å°æœ‰æ•ˆ -heap æ˜¾ç¤ºJavaå †è¯¦ç»†ä¿¡æ¯ï¼Œä½¿ç”¨å›æ”¶å™¨ç±»å‹ã€å‚æ•°é…ç½®ã€åˆ†ä»£çŠ¶å†µï¼Œåªåœ¨Linuxå¹³å°ä¸‹æœ‰æ•ˆ -histo æ˜¾ç¤ºå †ä¸­å¯¹è±¡ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»ã€å®ä¾‹æ•°é‡ã€åˆè®¡å®¹é‡ -permstat åœ¨ä»¥ClassLoaderä¸ºç»Ÿè®¡å£å¾„æ˜¾ç¤ºæ°¸ä¹…ä»£å†…å­˜çŠ¶æ€ã€‚åªåœ¨Linuxä¸‹æœ‰æ•ˆ -F å½“è™šæ‹Ÿæœºè¿›ç¨‹å¯¹-dumpé€‰é¡¹æ²¡æœ‰å“åº”æ—¶ï¼Œå¯ä»¥ä½¿ç”¨-Få¼ºåˆ¶ç”Ÿæˆdumpå¿«ç…§ï¼Œåªåœ¨Linuxä¸‹æœ‰æ•ˆ jhatç”¨äºåˆ†æjmapç”Ÿæˆçš„å †è½¬å‚¨å¿«ç…§ã€‚ jhat heap.dump jhatåŠŸèƒ½ç›¸å¯¹ç®€é™‹ï¼Œåˆ†æå·¥ä½œè€—æ—¶ä¸”è€—è´¹ç¡¬ä»¶èµ„æºï¼Œä¸€èˆ¬ä¸åœ¨æœ¬æœºä½¿ç”¨ã€‚æ›¿ä»£æ–¹æ¡ˆï¼šVisualVMã€Eclipse Memory Analyzerã€IBM HeapAnalyzerã€‚ jstackç”Ÿæˆè™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ã€‚ç›®çš„æ˜¯å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ï¼Œå¦‚çº¿ç¨‹é—´æ­»é”ã€æ­»å¾ªç¯ã€è¯·æ±‚å¤–éƒ¨èµ„æºå¯¼è‡´çš„é•¿æ—¶é—´æŒ‚èµ·ç­‰ã€‚ 123456789101112131415Usage: jstack [-l] &lt;pid&gt; (to connect to running process) jstack -F [-m] [-l] &lt;pid&gt; (to connect to a hung process) jstack [-m] [-l] &lt;executable&gt; &lt;core&gt; (to connect to a core file) jstack [-m] [-l] [server_id@]&lt;remote server IP or hostname&gt; (to connect to a remote debug server)Options: -F to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung) -m to print both java and native frames (mixed mode) -l long listing. Prints additional information about locks -h or -help to print this help message é«˜çº§å·¥å…·JConsoleåŸºäºJMXçš„å¯è§†åŒ–ç›‘è§†ã€ç®¡ç†å·¥å…·ã€‚ JHSDBåŸºäºæœåŠ¡æ€§ä»£ç†å®ç°çš„è¿›ç¨‹å¤–è°ƒè¯•å·¥å…·ã€‚æœåŠ¡æ€§ä»£ç†æ˜¯HotSpotè™šæ‹Ÿæœºä¸­ä¸€ç»„ç”¨äºæ˜ å°„Javaè™šæ‹Ÿæœºè¿è¡Œä¿¡æ¯çš„ã€ä¸»è¦åŸºäºJavaè¯­è¨€å®ç°çš„APIé›†åˆã€‚ VisualVMå¤šåˆä¸€æ•…éšœå¤„ç†å·¥å…·ï¼Œä¸éœ€è¦è¢«ç›‘è§†çš„ç¨‹åºåŸºäºç‰¹æ®ŠAgentæ‰§è¡Œï¼Œé€šç”¨æ€§å¼ºï¼Œå¯¹åº”ç”¨ç¨‹åºçš„å®é™…æ€§èƒ½å½±å“è¾ƒå°ï¼Œå¯ä»¥ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚ Java Mission Controlå¯æŒç»­åœ¨çº¿ç›‘æ§å·¥å…·ã€‚ arthasé˜¿é‡Œå·´å·´æä¾›çš„æ€§èƒ½åˆ†æå·¥å…·https://alibaba.github.io/arthas/","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"å¸¸ç”¨å·¥å…·","slug":"å¸¸ç”¨å·¥å…·","permalink":"https://pickonebyone.github.io/tags/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"},{"name":"æ•…éšœæ’æŸ¥","slug":"æ•…éšœæ’æŸ¥","permalink":"https://pickonebyone.github.io/tags/%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/"}]},{"title":"LinuxæŸ¥çœ‹Swap","slug":"LinuxæŸ¥çœ‹Swap","date":"2020-06-12T10:39:54.000Z","updated":"2020-06-16T09:31:32.131Z","comments":true,"path":"2020/06/12/LinuxæŸ¥çœ‹Swap/","link":"","permalink":"https://pickonebyone.github.io/2020/06/12/Linux%E6%9F%A5%E7%9C%8BSwap/","excerpt":"","text":"123456789101112131415161718#!&#x2F;bin&#x2F;bash# Get current swap usage for all running processes# Erik Ljungstrom 27&#x2F;05&#x2F;2011SUM&#x3D;0OVERALL&#x3D;0for DIR in &#96;find &#x2F;proc&#x2F; -maxdepth 1 -type d | egrep &quot;^&#x2F;proc&#x2F;[0-9]&quot;&#96; ;do PID&#x3D;&#96;echo $DIR | cut -d &#x2F; -f 3&#96; PROGNAME&#x3D;&#96;ps -p $PID -o comm --no-headers&#96; for SWAP in &#96;grep Swap $DIR&#x2F;smaps 2&gt;&#x2F;dev&#x2F;null| awk &#39;&#123; print $2 &#125;&#39;&#96; do let SUM&#x3D;$SUM+$SWAP done echo &quot;PID&#x3D;$PID - Swap used: $SUM - ($PROGNAME )&quot; let OVERALL&#x3D;$OVERALL+$SUM SUM&#x3D;0doneecho &quot;Overall swap used: $OVERALL&quot;","categories":[{"name":"Linux","slug":"Linux","permalink":"https://pickonebyone.github.io/categories/Linux/"},{"name":"VIM","slug":"Linux/VIM","permalink":"https://pickonebyone.github.io/categories/Linux/VIM/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://pickonebyone.github.io/tags/linux/"},{"name":"swap","slug":"swap","permalink":"https://pickonebyone.github.io/tags/swap/"}]},{"title":"åˆ†å¸ƒå¼IDç”Ÿæˆå™¨","slug":"åˆ†å¸ƒå¼ID","date":"2020-06-11T12:38:52.000Z","updated":"2020-06-11T13:10:59.296Z","comments":true,"path":"2020/06/11/åˆ†å¸ƒå¼ID/","link":"","permalink":"https://pickonebyone.github.io/2020/06/11/%E5%88%86%E5%B8%83%E5%BC%8FID/","excerpt":"","text":"Centos ç®€å•ä¼˜åŒ–å®‰è£…åŸºæœ¬å·¥å…·1yum install -y wget vim net-tools lrzsz åˆ é™¤UUID123vim ifcfg-ens33vim ifcfg-eth0vim em1 é…ç½®é™æ€IP12345IPADDR&#x3D;10.0.0.130GATEWAY&#x3D;10.0.0.2NETMASK&#x3D;255.255.255.0DNS1&#x3D;10.0.0.2DNS2&#x3D;1.2.4.8 å…³é—­é˜²ç«å¢™ä»¥åŠNetworkManagerå’ŒSELINX12345systemctl restart networksystemctl stop firewalldsystemctl disable firewalldsystemctl stop NetworkManagersystemctl disable NetworkManager æ›¿æ¢YUMæº1234yum clean all &amp;&amp; yum makecachecd &#x2F;etc&#x2F;yum.repos.d&#x2F;mv CentOS-Base.repo CentOS-Base.repo.bakvim CentOS-Base.repo","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"}],"tags":[]},{"title":"ç¼–è¯‘ä¸ä¼˜åŒ–","slug":"ç¼–è¯‘ä¸ä¼˜åŒ–","date":"2020-06-11T11:41:40.000Z","updated":"2020-06-17T14:19:48.964Z","comments":true,"path":"2020/06/11/ç¼–è¯‘ä¸ä¼˜åŒ–/","link":"","permalink":"https://pickonebyone.github.io/2020/06/11/%E7%BC%96%E8%AF%91%E4%B8%8E%E4%BC%98%E5%8C%96/","excerpt":"","text":"ç¼–è¯‘ å‰ç«¯ç¼–è¯‘å™¨ï¼š JDKçš„Javac ã€EclipseJDTä¸­çš„å¢é‡å¼ç¼–è¯‘å™¨ï¼ˆECJï¼‰ å³æ—¶ç¼–è¯‘å™¨ï¼šHotSpotè™šæ‹Ÿæœºçš„C1\\c2ç¼–è¯‘å™¨ã€Graalç¼–è¯‘å™¨ æå‰ç¼–è¯‘å™¨ï¼šJDKçš„Jaotcã€GNU Compiler for Java, Excelsisor JET. å‰ç«¯ç¼–è¯‘å™¨ç¼–è¯‘è¿‡ç¨‹åˆ†ä¸º1ä¸ªå‡†å¤‡è¿‡ç¨‹å’Œ3ä¸ªå¤„ç†è¿‡ç¨‹ï¼š1ï¼‰åˆå§‹åŒ–æ’å…¥å¼æ³¨è§£å¤„ç†å™¨2ï¼‰è§£æä¸å¡«å……ç¬¦å·è¡¨ è¯­æ³•ã€è¯æ³•åˆ†æè¯æ³•åˆ†ææ˜¯å°†æºä»£ç çš„å­—ç¬¦æµè½¬å˜ä¸ºæ ‡è®°é›†åˆçš„è¿‡ç¨‹ï¼Œå•ä¸ªå­—ç¬¦æ˜¯ç¨‹åºç¼–å†™çš„æœ€å°å…ƒç´ ï¼Œä½†æ ‡è®°æ‰æ˜¯ç¼–è¯‘æ—¶çš„æœ€å°å…ƒç´ ã€‚å…³é”®å­—ã€å˜é‡åã€å­—é¢é‡ã€è¿ç®—ç¬¦éƒ½å¯ä»¥ä½œä¸ºæ ‡è®°ã€‚ è¯­æ³•åˆ†ææ—¶æ ¹æ®æ ‡è®°åºåˆ—æ„é€ æŠ½è±¡è¯­æ³•æ ‘çš„è¿‡ç¨‹ï¼ŒæŠ½è±¡è¯­æ³•æ ‘æ˜¯ç”¨æ¥æè¿°ç¨‹åºä»£ç è¯­æ³•ç»“æ„çš„æ ‘å½¢è¡¨ç¤ºæ–¹å¼ï¼ŒæŠ½è±¡è¯­æ³•æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä»£è¡¨ç¨‹åºä»£ç ä¸­çš„ä¸€ä¸ªè¯­æ³•ç»“æ„ã€‚ä¾‹å¦‚åŒ…ã€ç±»å‹ã€ä¿®é¥°ç¬¦ã€è¿ç®—ç¬¦ã€æ¥å£ã€è¿”å›å€¼ã€ä»£ç æ³¨é‡Šç­‰ã€‚ ç»è¿‡è¯æ³•å’Œè¯­æ³•åˆ†æç”Ÿæˆè¯­æ³•æ ‘ä»¥åï¼Œç¼–è¯‘å™¨åç»­çš„æ“ä½œéƒ½å»ºç«‹åœ¨æŠ½è±¡è¯­æ³•æ ‘ä¹‹ä¸Šã€‚ å¡«å……ç¬¦å·è¡¨ç¬¦å·è¡¨æ˜¯ä¸€ç»„ç¬¦å·åœ°å€å’Œç¬¦å·ä¿¡æ¯æ„æˆçš„æ•°æ®ç»“æ„ï¼Œç¬¦å·è¡¨ä¸­æ‰€ç™»è®°çš„ä¿¡æ¯åœ¨ç¼–è¯‘çš„ä¸åŒé˜¶æ®µéƒ½è¦è¢«ç”¨åˆ°ã€‚å¦‚ï¼Œåœ¨è¯­ä¹‰åˆ†æè¿‡ç¨‹ä¸­ï¼Œç¬¦å·è¡¨æ‰€ç™»è®°çš„å†…å®¹å°†ç”¨äºè¯­ä¹‰æ£€æŸ¥å’Œäº§ç”Ÿä¸­é—´ä»£ç ï¼Œåœ¨ç›®æ ‡ä»£ç ç”Ÿæˆé˜¶æ®µï¼Œå¯¹ç¬¦å·åè¿›è¡Œåœ°å€åˆ†é…æ—¶ï¼Œç¬¦å·è¡¨æ˜¯åœ°å€è§£æåˆ†é…çš„ç›´æ¥ä¾æ®ã€‚ 3ï¼‰æ³¨è§£å¤„ç†å™¨ æ’å…¥å¼æ³¨è§£å¤„ç†å™¨å¯ä»¥æå‰è‡³ç¼–è¯‘æœŸå¯¹ä»£ç ä¸­çš„ç‰¹å®šæ³¨è§£è¿›è¡Œå¤„ç†ï¼Œä»è€Œå½±å“åˆ°å‰ç«¯ç¼–è¯‘å™¨ï¼ˆjavacï¼‰çš„å·¥ä½œè¿‡ç¨‹ã€‚ å¦‚æœåœ¨å¤„ç†æ³¨è§£æœŸé—´å¯¹è¯­æ³•æ ‘è¿›è¡Œè¿‡ä¿®æ”¹ï¼Œç¼–è¯‘å™¨å°†å›åˆ°è§£æä»¥åŠå¡«å……ç¬¦å·è¡¨çš„è¿‡ç¨‹é‡æ–°å¤„ç†ï¼ŒçŸ¥é“æ‰€æœ‰æ’å…¥å¼æ³¨è§£å¤„ç†å™¨éƒ½æ²¡æœ‰å†å¯¹è¯­æ³•æ ‘è¿›è¡Œä¿®æ”¹ä½ç½®ï¼Œæ¯æ¬¡å¾ªç¯ç§°ä¸ºä¸€ä¸ªè½®æ¬¡ã€‚ 4ï¼‰è¯­ä¹‰åˆ†æä¸å­—èŠ‚ç ç”Ÿæˆ è¯­ä¹‰åˆ†æè¿‡ç¨‹åˆ†ä¸ºæ ‡æ³¨æ£€æŸ¥å’Œæ•°æ®ä»¥åŠæ§åˆ¶æµåˆ†æä¸¤ä¸ªæ­¥éª¤ã€‚ åœ¨ç»è¿‡è¯­æ³•åˆ†æåï¼Œç¼–è¯‘å™¨è·å¾—äº†ç¨‹åºä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘è¡¨ç¤ºï¼ŒæŠ½è±¡è¯­æ³•æ ‘èƒ½å¤Ÿè¡¨ç¤ºä¸€ä¸ªç»“æ„æ­£ç¡®çš„æºç¨‹åºï¼Œä½†æ— æ³•ä¿è¯æºç¨‹åºçš„è¯­ä¹‰æ˜¯ç¬¦åˆé€»è¾‘çš„ã€‚è€Œè¯­ä¹‰åˆ†æçš„ä¸»è¦ä»»åŠ¡åˆ™æ˜¯å¯¹ç»“æ„ä¸Šæ­£ç¡®çš„æºç¨‹åºè¿›è¡Œä¸Šä¸‹æ–‡ç›¸å…³æ€§è´¨çš„æ£€æŸ¥ï¼Œè­¬å¦‚è¿›è¡Œç±»å‹æ£€æŸ¥ã€æ§åˆ¶æµæ£€æŸ¥ã€æ•°æ®æµæ£€æŸ¥ç­‰ç­‰ã€‚ æ ‡æ³¨æ£€æŸ¥æ£€æŸ¥çš„å†…å®¹åŒ…æ‹¬å˜é‡æ˜¯ç”¨é’±æ˜¯å¦å·²ç»è¢«å£°æ˜ã€å˜é‡ä¸èµ‹å€¼ä¹‹é—´çš„æ•°æ®ç±»å‹æ˜¯å¦èƒ½å¤ŸåŒ¹é…ç­‰ç­‰ã€‚å¸¸é‡æŠ˜å ï¼šint a = 1 + 1 ; ==&gt; int a = 2; æ•°æ®æµä»¥åŠæ§åˆ¶æµåˆ†ææ•°æ®æµåˆ†æä»¥åŠæ§åˆ¶æµåˆ†ææ˜¯å¯¹ç¨‹åºä¸Šä¸‹æ–‡é€»è¾‘æ›´è¿›ä¸€æ­¥çš„éªŒè¯ï¼Œå®ƒå¯ä»¥æ£€æŸ¥å‡ºè¯¸å¦‚ç¨‹åºå±€éƒ¨å˜é‡åœ¨ä½¿ç”¨å‰æ˜¯å¦æœ‰èµ‹å€¼ã€æ–¹æ³•çš„æ¯æ¡è·¯å¾„æ˜¯å¦éƒ½æœ‰è¿”å›å€¼ã€æ˜¯å¦æ‰€æœ‰çš„å—æ£€æŸ¥å¼‚å¸¸éƒ½è¢«æ­£ç¡®å¤„ç†äº†ç­‰é—®é¢˜ã€‚ç¼–è¯‘å™¨çš„æ•°æ®ä»¥åŠæ§åˆ¶æµåˆ†æä¸ç±»åŠ è½½æ—¶çš„æ•°æ®ä»¥åŠæ§åˆ¶æµåˆ†æçš„ç›®çš„åŸºæœ¬å“ˆæ¡‘ä¸€è‡´ï¼Œä½†æ˜¯æ ¡éªŒèŒƒå›´æœ‰æ‰€åŒºåˆ«ã€‚ è§£è¯­æ³•ç³–Javaè¯­è¨€çš„è¯­æ³•ç³–åŒ…å«æ³›å‹ã€å˜é•¿å‚æ•°ã€è‡ªåŠ¨è£…ç®±æ‹†ç®±ç­‰ï¼ŒJavaè™šæ‹Ÿæœºåœ¨è¿è¡Œæ—¶å¹¶ä¸çŸ¥èŠ‚æ”¯æŒè¿™äº›è¯­æ³•ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘é˜¶æ®µè¢«è¿˜åŸå›åŸå§‹çš„åŸºç¡€è¯­æ³•ç»“æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè§£è¯­æ³•ç³–ã€‚ å­—èŠ‚ç ç”Ÿæˆ å­—èŠ‚ç ç”Ÿæˆé˜¶æ®µéœ€è¦æŠŠå‰é¢å“¥å“¥æ­¥éª¤ç”Ÿæˆçš„ä¿¡æ¯è½¬åŒ–æˆå­—èŠ‚ç æŒ‡ä»¤å†™åˆ°ç£ç›˜ä¸­å¤–ï¼Œè¿˜è¦è¿›è¡Œå°‘é‡çš„ä»£ç æ·»åŠ å’Œè½¬æ¢å·¥ä½œã€‚å¦‚å®ä¾‹æ„é€ å™¨&lt;init&gt;()æ–¹æ³•å’Œ&lt;cinit&gt;()æ–¹æ³•çš„æ·»åŠ ã€‚å¦‚æœç”¨æˆ·ä»£ç ä¸­æ²¡æœ‰æä¾›ä»»ä½•æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†ä¼šæ·»åŠ ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„ã€å¯è®¿é—®æ€§ä¸å½“å‰ç±»å‹ä¸€è‡´çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªå·¥ä½œåœ¨å¡«å……ç¬¦å·è¡¨é˜¶æ®µå·²ç»å®Œæˆã€‚ ç¼–è¯‘å™¨ä¼šæŠŠè¯­å¥å—ã€å˜é‡å˜é‡åˆå§‹åŒ–ã€è°ƒç”¨çˆ¶ç±»çš„å®ä¾‹æ„é€ å™¨æ–¹ç­‰æ“ä½œæ”¶æ•›åˆ°&lt;init&gt;()å’Œ&lt;cinit&gt;()æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”ä¿è¯æ— è®ºæºç ä¸­å‡ºç°çš„é¡ºåºå¦‚ä½•ï¼Œéƒ½ä¸€å®šæ˜¯æŒ‰å…ˆæ‰§è¡Œçˆ¶ç±»çš„å®ä¾‹æ„é€ å™¨ï¼Œç„¶ååˆå§‹åŒ–å˜é‡ï¼Œæœ€åæ‰§è¡Œè¯­å¥å—çš„é¡ºåºæ‰§è¡Œï¼Œ è¯­æ³•ç³–æ³›å‹ã€è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±ã€éå†å¾ªç¯ã€å˜é•¿å‚æ•°å’Œæ¡ä»¶ç¼–è¯‘ã€å†…éƒ¨ç±»ã€æšä¸¾ç±»ã€æ–­è¨€ã€æ•°å€¼ç›´é¢é‡ã€æšä¸¾å’Œå­—ç¬¦ä¸²çš„switchã€try with resourceï¼Œ lambdaç­‰ã€‚ æ³›å‹ç±»å‹æ“¦é™¤ è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å’Œå¾ªç¯éå†1ï¼‰å¤§äº127çš„å€¼ä¸ä¼šè‡ªåŠ¨æ‹†ç®±2ï¼‰æ²¡æœ‰é‡åˆ°è¿ç®—ç¬¦çš„æƒ…å†µä¸‹ä¸ä¼šè‡ªåŠ¨æ‹†ç®±3ï¼‰equalsæ–¹æ³•ä¸å¤„ç†æ•°æ®è½¬å‹ å˜é•¿å‚æ•°æ¡ä»¶ç¼–è¯‘Javaç¼–è¯‘å™¨å°†æ‰€æœ‰ç¼–è¯‘ä½†æ„¿çš„è¯­æ³•æ ‘é¡¶çº§èŠ‚ç‚¹è¾“å…¥åˆ°å¾…å¤„ç†åˆ—è¡¨åå†è¿›è¡Œç¼–è¯‘ï¼Œå› æ­¤å„ä¸ªæ–‡ä»¶ä¹‹é—´å¯ä»¥äº’ç›¸æä¾›ç¬¦å·ä¿¡æ¯ã€‚ æ ¹æ®æ¡ä»¶ä¸­å¸ƒå°”å€¼å¸¸é‡å€¼çš„çœŸå‡ï¼Œç¼–è¯‘å™¨å°†æŠŠåˆ†æ”¯ä¸­ä¸æˆç«‹çš„ä»£ç å—æ¶ˆé™¤æ‰ã€‚ åç«¯ç¼–è¯‘å½“ç¨‹åºéœ€è¦è¿…é€Ÿå¯åŠ¨å’Œæ‰§è¡Œçš„æ—¶å€™ï¼Œè§£é‡Šå™¨å¯ä»¥é¦–å…ˆå‘æŒ¥ä½œç”¨ï¼Œçœå»ç¼–è¯‘çš„æ—¶é—´ï¼Œç«‹å³è¿è¡Œã€‚å½“ç¨‹åºè¿è¡Œç¯å¢ƒä¸­å†…å­˜èµ„æºé™åˆ¶è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨è§£é‡Šæ‰§è¡ŒèŠ‚çº¦å†…å­˜ã€‚å½“ç¨‹åºå¯åŠ¨ä»¥åï¼Œç¼–è¯‘å™¨é€æ¸å‘æŒ¥ä½œç”¨ï¼ŒæŠŠè¶Šæ¥è¶Šå¤šçš„ä»£ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼Œå‡å°‘è§£é‡Šå™¨çš„ä¸­é—´æŸè€—ï¼Œè·å¾—æ›´é«˜çš„æ•ˆç‡ã€‚ å³æ—¶ç¼–è¯‘å™¨å³æ—¶ç¼–è¯‘å™¨å°†è¿è¡Œæ¯”è¾ƒé¢‘ç¹çš„ä»£ç å—æˆ–è€…æ–¹æ³•ç¼–è¯‘æˆæœ¬åœ°æœºå™¨å—ï¼Œå¹¶ä¸”å¯¹è¿™æ®µä»£ç è¿›è¡Œä¼˜åŒ–ã€‚ åœ¨Hotspotä¸­å†…ç½®äº†2ä¸ªå³æ—¶ç¼–è¯‘å™¨ Client Compilerã€ Server Compilerã€‚ è™šæ‹Ÿæœºä¼šæ ¹æ®è‡ªèº«ç‰ˆæœ¬ä¸å®¿ä¸»æœºçš„ç¡¬ä»¶æ€§èƒ½è‡ªåŠ¨é€‰æ‹©è¿è¡Œæ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨-client æˆ–è€… -Server æ¥å¼ºåˆ¶æŒ‡å®šè™šæ‹Ÿæœºè¿è¡Œåœ¨å®¢æˆ·ç«¯æ¨¡å¼æˆ–è€…æœåŠ¡ç«¯æ¨¡å¼ã€‚ è§£é‡Šæ¨¡å¼(Interperted Mode)ï¼š-Xintç¼–è¯‘æ¨¡å¼(Compiled Mode): -Xcompæ··åˆæ¨¡å¼(Mixed Mode): -Xmixed (é»˜è®¤) ç¼–è¯‘å™¨ç¼–è¯‘æœ¬åœ°ä»£ç éœ€è¦å ç”¨ç¨‹åºè¿è¡Œæ—¶é—´ï¼Œä½äº†æ‰“åˆ°å“åº”é€Ÿåº¦ä¸è¿è¡Œæ•ˆç‡ä¹‹é—´æ‰“åˆ°æœ€ä½³å¹³è¡¡ï¼ŒHotSpotåœ¨ç¼–è¯‘å­ç³»ç»Ÿä¸­åŠ å…¥äº†åˆ†å±‚ç¼–è¯‘çš„åŠŸèƒ½ã€‚åˆ†å±‚ç¼–è¯‘æ ¹æ®ç¼–è¯‘å™¨ç¼–è¯‘ã€ä¼˜åŒ–çš„è§„æ¨¡ä¸è€—æ—¶ï¼Œåˆ’åˆ†å‡ºä¸åŒçš„ç¼–è¯‘å±‚æ¬¡ï¼šç¬¬0å±‚ï¼Œç¨‹åºæ˜¥è§£é‡Šæ‰§è¡Œï¼Œå¹¶ä¸”è§£é‡Šå™¨ä¸å¼€å¯æ€§èƒ½ç›‘æ§ã€‚ç¬¬ä¸€å±‚ï¼šä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç ï¼Œè¿›è¡Œç®€å•å¯é çš„ç¨³å®šä¼˜åŒ–ï¼Œä¸å¼€å¯æ€§èƒ½ç›‘æ§åŠŸèƒ½ã€‚ç¬¬äºŒå±‚ï¼šä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨æ‰§è¡Œï¼Œä»…å¼€å¯æ–¹æ³•ä»¥åŠå›è¾¹æ¬¡æ•°ç»Ÿè®¡ç­‰ä¼˜å…ˆçš„æ€§èƒ½ç›‘æ§åŠŸèƒ½ã€‚ç¬¬ä¸‰å±‚ï¼šä½¿ç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨æ‰§è¡Œï¼Œå¼€å¯å…¨éƒ¨æ€§èƒ½ç›‘æ§ï¼Œé™¤äº†ç¬¬2å±‚çš„ç—›å°±ä¹‹å¤–ï¼Œè¿˜ä¼šæ”¶é›†å¦‚åˆ†æ”¯è·³è½¬ã€è™šæ–¹æ³•è°ƒç”¨ç‰ˆæœ¬ç­‰å…¨éƒ¨çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ç¬¬å››å±‚ï¼šä½¿ç”¨æœåŠ¡ç«¯ç¼–è¯‘å™¨å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºæœ¬åœ°ä»£ç ï¼ŒæœåŠ¡ç«¯ç¼–è¯‘å™¨ä¼šå¯ç”¨æ›´å¤šç¼–è¯‘è€—æ—¶æ›´é•¿çš„ä¼˜åŒ–ï¼Œè¿˜ä¼šæ ¹æ®æ€§èƒ½ç›‘æ§ä¿¡æ¯è¿›è¡Œä¸€äº›ä¸å¯é çš„æ¿€è¿›ä¼˜åŒ–ã€‚ å®æ–½åˆ†å±‚ç¼–è¯‘åï¼Œ è§£é‡Šå™¨ã€å®¢æˆ·ç«¯ç¼–è¯‘å™¨å’ŒæœåŠ¡ç«¯ç¼–è¯‘å™¨å°±ä¼šåŒæ—¶å·¥ä½œï¼Œçƒ­ç‚¹ä»£ç éƒ½å¯èƒ½ä¼šè¢«å¤šæ¬¡ç¼–è¯‘ï¼Œç”¨å®¢æˆ·ç«¯ç¼–è¯‘å™¨è·å¾—æ›´é«˜çš„ç¼–è¯‘é€Ÿåº¦ï¼Œç”¨æœåŠ¡ç«¯ç¼–è¯‘å™¨æ¥è·å–æ›´å¥½çš„ç¼–è¯‘è´¨é‡ï¼Œåœ¨è§£é‡Šæ‰§è¡Œçš„æ—¶å€™ä¹Ÿæ— éœ€é¢å¤–æ‰¿æ‹…æ‰‹æœºæ€§èƒ½ç›‘æ§ä¿¡æ¯çš„ä»»åŠ¡ï¼Œè€Œåœ¨æœåŠ¡ç«¯ç¼–è¯‘å™¨é‡‡ç”¨é«˜å¤æ‚åº¦çš„ä¼˜åŒ–ç®—æ³•æ—¶ï¼Œ å®¢æˆ·ç«¯ç¼–è¯‘å™¨å¯å…ˆé‡‡ç”¨ç®€å•ä¼˜åŒ–æ¥ä¸ºå®ƒäº‰å–æ›´å¤šçš„ç¼–è¯‘æ—¶é—´ã€‚ ç¼–è¯‘å¯¹è±¡ä¸è§¦å‘æ¡ä»¶è¢«ç¼–è¯‘çš„çƒ­ç‚¹ä»£ç æœ‰ï¼šè¢«å¤šæ¬¡è°ƒç”¨çš„æ–¹æ³•å’Œè¢«å¤šæ¬¡æ‰§è¡Œçš„å¾ªç¯ä½“ã€‚è¿™ä¸¤ç§æƒ…å†µç¼–è¯‘çš„ç›®æ ‡å¯¹è±¡éƒ½æ˜¯æ•´ä¸ªæ–¹æ³•ä½“ï¼Œè€Œä¸æ˜¯å•ç‹¬çš„å¾ªç¯ä½“ã€‚ åŸºäºé‡‡æ ·çš„çƒ­ç‚¹æ¢æµ‹å‘¨æœŸæ€§çš„æ£€æŸ¥çº¿ç¨‹çš„è°ƒç”¨æ ˆé¡¶ï¼Œå¦‚æœå‘ç°æŸä¸ªæ–¹æ³•ç»å¸¸å‡ºç°åœ¨æ ˆé¡¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±æ˜¯çƒ­ç‚¹æ–¹æ³•ã€‚ä¼˜ç‚¹ï¼šç®€å•é«˜æ•ˆï¼Œå®¹æ˜“è·å–æ–¹æ³•çš„è°ƒç”¨å…³ç³»ç¼ºç‚¹ï¼šä¸èƒ½ç²¾ç¡®ç¡®è®¤æ–¹æ³•çš„å¿ç¹ï¼Œå®¹æ˜“å—åˆ°çº¿ç¨‹é˜»å¡æˆ–è€…å¤–ç•Œå› ç´ å½±å“æ‰°ä¹±çƒ­ç‚¹æ¢æµ‹ã€‚ åŸºäºè®¡æ•°å™¨çš„çƒ­ç‚¹æ¢æµ‹ä¸ºæ¯ä¸ªæ–¹æ³•å»ºç«‹è®¡æ•°å™¨ï¼Œç»Ÿè®¡æ–¹æ³•çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šçš„é˜ˆå€¼å°±è®¤ä¸ºå®ƒæ˜¯çƒ­ç‚¹æ–¹æ³•ã€‚ä¼˜ç‚¹ï¼šç»“æœç²¾ç¡®ä¸¥è°¨ç¼ºç‚¹ï¼šæ¯ä¸ªæ–¹æ³•å»ºç«‹å¹¶ç»´æŠ¤è®¡æ•°å™¨ï¼Œä¸èƒ½ç›´æ¥è·å–åˆ°æ–¹æ³•çš„è°ƒç”¨å…³ç³»ã€‚HotSpotä¸ºæ¯ä¸ªæ–¹æ³•å‡†å¤‡äº†ä¸¤ç±»è®¡æ•°å™¨ï¼šæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨å’Œå›è¾¹è®¡æ•°å™¨ï¼ˆåœ¨å¾ªç¯è¾¹ç•Œå¾€å›è·³ï¼‰,å½“è°ƒç”¨æ¬¡æ•°è¶…è¿‡è®¾å®šçš„é˜ˆå€¼ï¼Œå°±ä¼šè§¦å‘å³æ—¶ç¼–è¯‘ã€‚-XX:CompileThreshold æ¥è®¾å®šè§¦å‘å³æ—¶ç¼–è¯‘çš„é˜ˆå€¼ã€‚é»˜è®¤è®¾ç½®ä¸‹ï¼Œæ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ç»Ÿè®¡çš„æ˜¯ç›¸å¯¹æ‰§è¡Œç“¶ç»¿ï¼Œå½“ä¸€ä¸ªæ—¶é—´æ®µå†…è°ƒç”¨æ¬¡æ•°ä¸è¶³ä»¥æäº¤å³æ—¶ç¼–æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è®¡æ•°å™¨å°±ä¼šè¢«å‡åŠï¼ˆè¡°å‡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨-XX:-UseCounterDecayå…³é—­çƒ­åº¦è¡°å‡ã€‚å¯ä»¥è®¾ç½®-XX:CounterHalfLifeTimeè®¾ç½®åŠè¡°å‘¨æœŸçš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚ å½“æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦è¢«å³ä½¿ç¼–è¯‘å™¨ç¼–è¯‘è¿‡ï¼Œæ˜¯åˆ™ä¼˜å…ˆä½¿ç”¨ç¼–è¯‘åçš„ç‰ˆæœ¬æ‰§è¡Œï¼Œå¦åˆ™å°†æ–¹æ³•è°ƒç”¨çš„è®¡æ•°å™¨åŠ ä¸€ï¼Œç„¶ååˆ¤æ–­æ–¹æ³•è°ƒç”¨è®¡æ•°å™¨ä¸å›è¾¹è®¡æ•°å™¨å€¼ä¹‹å’Œæ˜¯å¦è¶…è¿‡é˜ˆå€¼ï¼Œè¶…è¿‡åˆ™åƒå³æ—¶ç¼–è¯‘å™¨æäº¤è¯¥æ–¹æ³•çš„ä»£ç ç¼–è¯‘è¯·æ±‚ã€‚å¦‚æœæ²¡æœ‰åšè¿‡ä»»ä½•è®¾ç½®ï¼Œæ‰§è¡Œå¼•æ“é»˜è®¤ä¸ä¼šåŒæ­¥ç­‰å¾…ç¼–è¯‘è¯·æ±‚å®Œæˆï¼Œè€Œæ˜¯ç»§ç»­è¿›å…¥è§£é‡Šå™¨æŒ‰ç…§è§£é‡Šæ–¹å¼æ‰§è¡Œå­—èŠ‚ç ï¼Œç›´åˆ°æäº¤çš„è¯·æ±‚è¢«å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘å®Œæˆã€‚å½“ç¼–è¯‘å·¥ä½œå®Œæˆåï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨å…¥å£åœ°å€ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨æ”¹å†™æˆæ–°å€¼ï¼Œä¸‹æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶å°±ä¼šä½¿ç”¨å·²ç¼–è¯‘ç‰ˆæœ¬ã€‚ å›è¾¹è®¡æ•°å™¨ï¼šç»Ÿè®¡ä¸€ä¸ªæ–¹æ³•ä¸­å¾ªç¯ä½“ä»£ç æ‰§è¡Œçš„æ¬¡æ•°ï¼Œåœ¨å­—èŠ‚ç ä¸­é‡åˆ°æ§åˆ¶æµå‘åè·³è½¬çš„æŒ‡ä»¤ç§°ä¸ºâ€œå›è¾¹â€,å›è¾¹è®¡æ•°å™¨çš„ç›®çš„æ˜¯ä¸ºäº†è§¦å‘æ ˆä¸Šçš„æ›¿æ¢ç¼–è¯‘ã€‚å›è¾¹è®¡æ•°å™¨æ²¡æœ‰çƒ­åº¦è¡°å‡è¿‡ç¨‹ã€‚ ç¼–è¯‘è¿‡ç¨‹ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–¹æ³•è°ƒç”¨äº§ç”Ÿçš„æ ‡å‡†ç¼–è¯‘è¯·æ±‚å’Œæ ˆä¸Šæ›¿æ¢ç¼–è¯‘è¯·æ±‚ï¼Œåœ¨è™šæ‹Ÿæœºç¼–è¯‘å™¨æœªå®Œæˆç¼–è¯‘ä¹‹å‰ï¼Œéƒ½å°†æŒ‰ç…§è§£é‡Šæ–¹å¼æ‰§è¡Œä»£ç ï¼Œç¼–è¯‘åŠ¨ä½œåœ¨åå°çš„ç¼–è¯‘çº¿ç¨‹å®Œæˆã€‚è®¾ç½®-XX:-BackgroundCompilationç¦æ­¢åå°ç¼–è¯‘ï¼Œç¦æ­¢åè§¦å‘å³æ—¶ç¼–è¯‘æ¡ä»¶æ—¶ï¼Œæ‰§è¡Œçº¿ç¨‹å‘è™šæ‹Ÿæœºæäº¤ç¼–è¯‘è¯·æ±‚åä¸€è‡´é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°ç¼–è¯‘è¿‡ç¨‹å®Œæˆåå†å¼€å§‹æ‰§è¡Œç¼–è¯‘å™¨è¾“å‡ºçš„æœ¬åœ°ä»£ç ã€‚ æœåŠ¡ç«¯ç¼–è¯‘å™¨æ•ˆç‡è¾ƒä½ï¼Œä½†æ˜¯ç¼–è¯‘é€Ÿåº¦è¿œè¶…ä¼ ç»Ÿçš„é™æ€ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œç›¸å¯¹äºå®¢æˆ·ç«¯ç¼–è¯‘å™¨ç¼–è¯‘è¾“å‡ºçš„ä»£ç è´¨é‡æœ‰å¾ˆå¤§çš„æäº¤ï¼Œå¯ä»¥å¤§å¹…é™ä½æœ¬åœ°ä»£ç çš„æ‰§è¡Œæ—¶é—´ï¼Œä»è€ŒæŠµæ¶ˆæ‰é¢å¤–çš„ç¼–è¯‘æ°´é—´å¼€é”€ã€‚ å³æ—¶ç¼–è¯‘çš„ç¼ºç‚¹1ï¼‰å ç”¨ç¨‹åºè¿è¡Œæ—¶é—´2ï¼‰å ç”¨ç¨‹åºè¿ç®—èµ„æº æå‰ç¼–è¯‘å™¨æå‰ç¼–è¯‘å™¨çš„åˆ†æ”¯ï¼šä¸ä¼ ç»ŸCã€C++ç¼–è¯‘å™¨ç±»ä¼¼ï¼Œåœ¨ç¨‹åºè¿è¡Œä¹‹å‰æŠŠç¨‹åºä»£ç ç¼–è¯‘æˆæœºå™¨ç çš„é™æ€ç¿»è¯‘å·¥ä½œï¼›æŠŠåŸæœ¬å³æ—¶ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶è¦åšçš„ç¼–è¯‘å·¥ä½œæå‰åšå¥½å¹¶ä¿å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡è¿è¡Œåˆ°è¿™äº›ä»£ç æ—¶ç›´æ¥åŠ è½½è¿›æ¥ä½¿ç”¨ã€‚ ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯æ–¹æ³•å†…è”æœ€é‡è¦çš„ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€ã€‚ é€ƒé€¸åˆ†ææœ€å‰æ²¿çš„ä¼˜åŒ–æŠ€æœ¯ä¹‹ä¸€ã€‚ æ ˆä¸Šåˆ†é…æ”¯æŒæ–¹æ³•é€ƒé€¸ï¼Œä½†ä¸æ”¯æŒçº¿ç¨‹é€ƒé€¸ æ ‡é‡æ›¿æ¢å¦‚æœä¸€ä¸ªæ•°æ®å·²ç»æ— æ³•åœ¨åˆ†è§£ä¸ºæ›´å°çš„æ•°æ®è¡¨ç¤ºæ—¶ï¼ˆåŸå§‹æ•°æ®ç±»å‹ï¼‰ï¼Œè¿™äº›æ•°æ®å°±å¯ä»¥ç§°ä¸ºæ ‡é‡ã€‚æ ‡é‡æ›¿æ¢å°±æ˜¯å°†ç”¨åˆ°çš„æˆå‘˜å˜é‡æ¢å¤ä¸ºåŸå§‹ç±»å‹æ¥è®¿é—®çš„è¿‡ç¨‹ã€‚åŠ å…¥é€ƒé€¸åˆ†æå¯ä»¥è¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«æ–¹æ³•å¤–éƒ¨è®¿é—®ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«æ‹†æ•£ï¼Œé‚£ä¹ˆç¨‹åºçœŸæ­£æ‰§è¡Œçš„æ—¶å€™å¯èƒ½ä¸å»åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ”¹ä¸ºç›´æ¥åˆ›å»ºå®ƒçš„è‹¥å¹²ä¸ªè¢«è¿™ä¸ªçš„æ–¹æ³•ä½¿ç”¨çš„æˆå‘˜å˜é‡æ¥æ›¿ä»£ï¼Œæˆå‘˜å˜é‡å­˜å‚¨åœ¨æ ˆä¸Šã€‚ åŒæ­¥æ¶ˆé™¤ï¼šå¦‚æœé€ƒé€¸åˆ†æèƒ½å¤Ÿç¡®å®šä¸€ä¸ªå˜é‡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ï¼Œæ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡çš„è¯»å†™è‚¯å®šä¸ä¼šæœ‰ç«äº‰ï¼Œå¯¹è¿™ä¸ªå˜é‡çš„åŒæ­¥æªæ–½ä¹Ÿå¯ä»¥å®‰å…¨åœ°æ¶ˆé™¤æ‰ã€‚ å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤è¯­è¨€æ— å…³çš„ç»å…¸ä¼˜åŒ–æŠ€æœ¯ã€‚å¦‚æœä¸€ä¸ªè¡¨è¾¾å¼Eä¹‹å‰å·²ç»è¢«è®¡ç®—è¿‡ï¼Œå¹¶ä¸”ä»å…ˆå‰çš„è®¡ç®—åˆ°ç°åœ¨Eä¸­æ‰€æœ‰å˜é‡çš„å€¼éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆEçš„è¿™æ¬¡å‡ºç°å°±ç§°ä¸ºå…¬å…±å­è¡¨è¾¾å¼ã€‚ æ•°ç»„è¾¹ç•Œæ£€æŸ¥æ¶ˆé™¤è¯­è¨€ç›¸å…³çš„ç»å…¸ä¼˜åŒ–æŠ€æœ¯ã€‚","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"ç¼–è¯‘","slug":"ç¼–è¯‘","permalink":"https://pickonebyone.github.io/tags/%E7%BC%96%E8%AF%91/"},{"name":"ä¼˜åŒ–","slug":"ä¼˜åŒ–","permalink":"https://pickonebyone.github.io/tags/%E4%BC%98%E5%8C%96/"}]},{"title":"å†…å­˜åˆ†é…ä¸å›æ”¶","slug":"å†…å­˜åˆ†é…ä¸å›æ”¶","date":"2020-06-10T14:32:46.000Z","updated":"2020-06-12T14:35:10.856Z","comments":true,"path":"2020/06/10/å†…å­˜åˆ†é…ä¸å›æ”¶/","link":"","permalink":"https://pickonebyone.github.io/2020/06/10/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6/","excerpt":"","text":"JavaæŠ€æœ¯ä½“ç³»çš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœ€æ ¹æœ¬ç›®æ ‡æ˜¯è‡ªåŠ¨åŒ–åœ°ç»™å¯¹è±¡åˆ†é…å†…å­˜ä»¥åŠè‡ªåŠ¨å›æ”¶åˆ†é…ç»™å¯¹è±¡çš„å†…å­˜ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æœªè§„å®šæ–°å¯¹è±¡çš„åˆ›å»ºå’Œå­˜å‚¨ç»†èŠ‚ï¼Œè¿™å–å†³äºè™šæ‹Ÿæœºå½“å‰ä½¿ç”¨çš„æ˜¯å“ªç§åƒåœ¾æ”¶é›†å™¨ï¼Œä»¥åŠè™šæ‹Ÿæœºä¸­ä¸å†…å­˜ç›¸å…³çš„å‚æ•°è®¾å®šã€‚ HotSpotè™šæ‹Ÿæœºä¸­å¯¹è±¡çš„åˆ†é…åŸåˆ™å¯¹è±¡ä¼˜å…ˆåœ¨Edenåˆ†é…åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹è±¡åœ¨æ–°ç”Ÿä»£EdenåŒºä¸­åˆ†é…ã€‚ å½“EdenåŒºæ²¡æœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œåˆ†é…æ—¶ï¼Œè™šæ‹Ÿæœºå°†å‘èµ·ä¸€æ¬¡minorGCã€‚å½“survivoråŒºçš„ç©ºé—´æ— æ³•å­˜æ”¾EdenåŒºçš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šé€šè¿‡æ‹…ä¿æœºåˆ¶æå‰è½¬ç§»åˆ°è€å¹´ä»£å»ã€‚ -Xms:20M å †å†…å­˜åˆå§‹å€¼20M-Xmx:20M å †å†…å­˜æœ€å¤§20M-Xmn10M æ–°ç”Ÿä»£å ç”¨10Mï¼ˆå‰©ä¸‹çš„10Mç•™ç»™è€å¹´ä»£ï¼‰-XX:SurvivorRatio=8 å†³å®šäº†æ–°ç”Ÿä»£EdenåŒºä¸ä¸€ä¸ªSurvivoråŒºçš„ç©ºé—´æ¯”ä¾‹æ˜¯8:1:1 å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£å¤§å¯¹è±¡æ˜¯éœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„Javaå¯¹è±¡ï¼Œå¦‚å¾ˆé•¿çš„å­—ç¬¦ä¸²æˆ–è€…å…ƒç´ æ•°é‡å¾ˆå¤šçš„æ•°ç»„ã€‚ åœ¨åˆ†é…ç©ºé—´æ—¶ï¼Œå¦‚æœå¯¹è±¡æ¯”è¾ƒå¤§ï¼Œå°±ä¼šæå‰è§¦å‘åƒåœ¾æ”¶é›†ï¼Œä»¥è·å–è¶³å¤Ÿçš„è¿ç»­ç©ºé—´æ‰èƒ½å­˜æ”¾è¯¥å¯¹è±¡ï¼Œ å½“å¤åˆ¶å¯¹è±¡æ—¶å¤§å¯¹è±¡æ„å‘³ç€é«˜é¢çš„å†…å­˜å¤åˆ¶å¼€é”€ã€‚ -XX:PretenureSizeThreshold=3145728 ï¼ˆå¤§äº3Mçš„å¯¹è±¡ä¼šç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ä¸­ï¼‰è¯¥å‚æ•°åªå¯¹Serialå’ŒParNewä¸¤æ¬¾æ”¶é›†å™¨æœ‰æ•ˆã€‚ é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£å†…å­˜å›æ”¶æ—¶å¿…é¡»å†³ç­–é‚£äº›å­˜æ´»å¯¹è±¡åº”è¯¥å­˜æ”¾åœ¨æ–°ç”Ÿä»£ï¼Œå“ªäº›å­˜æ´»å¯¹è±¡å­˜æ”¾åœ¨è€å¹´ä»£ã€‚è™šæ‹Ÿæœºä¸ºæ¯ä¸ªå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å¹´é¾„ï¼ˆAgeï¼‰å­˜å‚¨åœ¨å¯¹è±¡å¤´é‡ã€‚ å¯¹è±¡é€šå¸¸åœ¨EdenåŒºè¯ç”Ÿï¼Œå¦‚æœç»è¿‡ä¸€æ¬¡MinorGCåä»ç„¶å­˜æ´»ï¼Œå¹¶ä¸”èƒ½è¢«Survivorå®¹çº³çš„è¯ï¼Œä¼šè¢«ç§»åŠ¨åˆ°Survivorç©ºé—´ï¼Œå¹¶ä¸”å°†å¯¹è±¡çš„å¹´é¾„è®¾ç½®ä¸º1å²ã€‚å¯¹è±¡åœ¨Survivorä¸­æ¯ç»è¿‡ä¸€æ¬¡MinorGCï¼ŒAgeå¢åŠ 1ï¼Œ å½“å¹´é¾„å¢åŠ åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°è€å¹´ä»£ä¸­ã€‚å¯ä»¥é€šè¿‡-XX:MaxTenuringThresholdè®¾ç½®ï¼ˆé»˜è®¤ä¸º15æ¬¡ï¼‰ã€‚ åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®šå¦‚æœåœ¨Survivorç©ºé—´ä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°çš„æ€»å’Œå¤§äºSurvivorç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºæˆ–è€…ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼Œæ— éœ€ç­‰åˆ°-XX:MaxTenuringThresholdä¸­è¦æ±‚çš„å¹´é¾„ã€‚ ä¹Ÿå°±æ˜¯å½“å‰Survivorç©ºé—´å¤§å°ä¸º1Mï¼Œæœ‰ä¸¤ä¸ªAge=1ä¸”å¤§å°ä¸º256kçš„å¯¹è±¡æ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å°±ä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚ ç©ºé—´åˆ†é…æ‹…ä¿åœ¨å‘ç”ŸMinorGCä¹‹å‰ï¼Œè™šæ‹Ÿæœºå¿…é¡»å…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡æ€»ç©ºé—´ã€‚å¦‚æœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆè¿™æ¬¡MinorGCæ—¶å®‰å…¨çš„ï¼›ï¼›å¦‚æœä¸æˆç«‹ï¼Œè™šæ‹Ÿæœºä¼šå…ˆæŸ¥çœ‹-XX:HandlerPromotionFailureå‚æ•°çš„è®¾ç½®å€¼æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥ å¦‚æœå…è®¸æ‹…ä¿å¤±è´¥ï¼Œç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡ä»Šç”Ÿåˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å° å¤§äºï¼Œå°è¯•è¿›è¡Œä¸€æ¬¡MinorGCï¼› å°äºï¼Œæˆ–è€…-XX:HandlePromotionFailureä¸å…è®¸å†’é™©ï¼Œåˆ™å˜æ›´ä¸ºFullGCã€‚ åœ¨JDK6 Update24ä¹‹åçš„è§„åˆ™å˜ä¸ºåªè¦è€å¹´ä»£çš„è¿ç»­ç©ºé—´å¤§äºæ–°ç”Ÿä»£æ€»å¤§å°æˆ–è€…å†æ¬¡æ™‹å‡çš„å¹³å‡å¤§å°ï¼Œå°±ä¼šè¿›è¡ŒMinorGCï¼Œå¦åˆ™å°±è¿›è¡ŒFullGcã€‚-XX:HandlePromotionFailureå‚æ•°ä¸åœ¨ç”Ÿæ•ˆã€‚ åƒåœ¾çš„å›æ”¶ å“ªäº›å†…å­˜éœ€è¦å›æ”¶ ä»€ä¹ˆæ—¶å€™å›æ”¶ å¦‚ä½•å›æ”¶ å¦‚ä½•åˆ¤æ–­å¯¹è±¡å·²æ­» å¼•ç”¨è®¡æ•°å™¨ å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆå›ºå®šå¯ä½œä¸ºGCRootçš„å¯¹è±¡æœ‰ï¼‰ åœ¨è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚æ¯ä¸ªçº¿ç¨‹èƒŒè°ƒç”¨çš„æ–¹æ³•å †æ ˆä¸­ä½¿ç”¨çš„å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸´æ—¶å˜é‡ åœ¨æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œå¦‚Javaç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡ åœ¨æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼Œå¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å¼•ç”¨ åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIå¼•ç”¨çš„å¯¹è±¡ Javaè™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„Classå¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨ æ‰€æœ‰èƒŒåŒæ­¥é”æŒæœ‰çš„å¯¹è±¡ åæ˜ Javaè™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„JMXBeanã€JVMTIä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰ã€‚ å¯¹è±¡çš„å¼•ç”¨ å¼ºå¼•ç”¨ï¼Œå¦‚Object obj = new Object(); æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰èƒŒå¼•ç”¨çš„å¯¹è±¡ã€‚ è½¯å¼•ç”¨ï¼Œæè¿°æœ‰ç”¨ä½†éå¿…é¡»çš„å¯¹è±¡ï¼Œè¢«è½¯å¼•ç”¨å…³è”çš„å¯¹è±¡åœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå‰ä¼šæŠŠè¿™äº›å¯¹è±¡ä¾‹å¦‚å›æ”¶èŒƒå›´å†…è¿›è¡ŒäºŒæ¬¡å›æ”¶ã€‚ï¼ˆSoftReferenceï¼‰ å¼±å¼•ç”¨ï¼Œæè¿°éå¿…é¡»å¯¹è±¡ï¼Œè¢«å¼±å¼•ç”¨çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä½ç½®ã€‚æ— è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚ è™šå¼•ç”¨ï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„æ—¶ä¸ºäº†èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶å—åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ï¼ˆNIOç”¨çš„RdirectMemoryï¼‰ åƒåœ¾æ”¶é›†å™¨ç®—æ³•åˆ†ä»£æ”¶é›†ç†è®ºå»ºç«‹åœ¨ä¸¤ä¸ªåˆ†ä»£å‡è¯´ä¸Šï¼š1ï¼‰å¼±åˆ†ä»£å‡è¯´ï¼Œç»å¤§æ•°å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•ç­çš„ã€‚2ï¼‰å¼ºåˆ†ä»£å‡è¯´ï¼Œç»è¿‡è¶Šå¤šæ¬¡æ”¶é›†è¿‡ç¨‹çš„å¯¹è±¡æœˆéš¾æ¶ˆäº¡ã€‚3ï¼‰ï¼ˆæ¨ç†å‡è¯´ï¼‰è·¨ä»£å¼•ç”¨å‡è¯´ï¼Œè·¨ä»£å¼•ç”¨ç›¸å¯¹äºåŒä»£æ¥è¯´ä»…å æå°‘æ•°ã€‚ åˆ†ä»£æ”¶é›†åŒºåŸŸ éƒ¨åˆ†æ”¶é›†ï¼ˆPartial GCï¼‰ æ–°ç”Ÿä»£æ”¶é›†ï¼ˆMinor GC/ Yong GCï¼‰ è€å¹´ä»£æ”¶é›†ï¼ˆMajor GC / Old GCï¼‰ï¼ˆåªæœ‰CMSä¼šå•ç‹¬å›æ”¶è€å¹´ä»£ï¼‰ æ··åˆæ”¶é›†(Mixed GC)ï¼Œç›®å‰åªæœ‰GCå­˜åœ¨æ··åˆå›æ”¶è¡Œä¸ºã€‚ æ•´å †æ”¶é›†(Full GC) æ ‡è®°æ¸…é™¤ç®—æ³•æ ‡è®°éœ€è¦è¢«å›æ”¶çš„å¯¹è±¡åï¼Œå›æ”¶æ‰æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ï¼›æˆ–è€…æ ‡è®°ä¸éœ€è¦è¢«å›æ”¶çš„å¯¹è±¡ï¼ŒåŒä¸€å›æ”¶æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚ ç¼ºç‚¹ï¼šä¸ç¨³å®šï¼Œæ ‡è®°æ¸…é™¤çš„æ€§èƒ½éšç€å¯¹è±¡çš„å¢å¤šè€Œé™ä½ï¼›ç©ºé—´ç¢ç‰‡åŒ–é—®é¢˜ï¼Œè‚¯èƒ½ä¼šå¯¼è‡´åœ¨åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶æ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­ç©ºé—´å†…å­˜ä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†åŠ¨ä½œã€‚ æ ‡è®°å¤åˆ¶ç®—æ³•ä¸ºäº†è§£å†³æ ‡è®°æ¸…é™¤ç®—æ³•é¢å¯¹å¤§é‡å¯å›æ”¶å¯¹è±¡æ—¶æ‰§è¡Œæ•ˆç‡ä½çš„é—®é¢˜ã€‚ ä¼˜ç‚¹ï¼šåªéœ€è¦å¤åˆ¶å°‘æ•°å­˜æ´»å¯¹è±¡ï¼Œç®€å•é«˜æ•ˆç¼ºç‚¹ï¼šæµªè´¹å†…å­˜ç©ºé—´ã€‚ æ ¹æ®å¼±åˆ†ä»£å‡è¯´ï¼Œä»¥åŠå®é™…æƒ…å†µï¼Œå¤§éƒ¨åˆ†çš„å¯¹è±¡åœ¨ç¬¬ä¸€æ¬¡åƒåœ¾å›æ”¶æ—¶å°±ä¼šè¢«å›æ”¶ï¼Œå› æ­¤å¹¶ä¸éœ€è¦æŒ‰ç…§1:1çš„æ¯”ä¾‹æ¥åˆ’åˆ†æ–°ç”Ÿä»£çš„å†…å­˜ç©ºé—´ã€‚å†…å­˜è¢«åˆ†ä¸ºè¾ƒå¤§çš„EdenåŒºå’Œè¾ƒå°çš„ä¸¤ä¸ªSurvivoråŒºåŸŸï¼ŒHotSpoté»˜è®¤æ¯”ä¾‹æ˜¯8:1:1ã€‚æ‰“ç»™ä½ Survivorç©ºé—´ä¸è¶³å®¹çº³ä¸€æ¬¡MinorGCåå­˜æ´»çš„å¯¹æˆé‚£ä¸ªæ—¶ï¼Œå°±éœ€è¦ä¾èµ–å…¶ä»–å†…å­˜åŒºåŸŸè¿›è¡Œåˆ†é…æ‹…ä¿ã€‚ æ ‡è®°æ•´ç†ç®—æ³•æ ¹æ®è€å¹´ä»£å¯¹è±¡çš„å­˜äº¡ç‰¹å¾ä»¥åŠå¼ºåˆ†ä»£å‡è¯´æå‡ºçš„ç®—æ³•ã€‚å°†æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å‘å†…å­˜ç©ºé—´çš„ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚ ååé‡ï¼šèµ‹å€¼å™¨å’Œæ”¶é›†å™¨çš„æ•ˆç‡æ€»å’Œã€‚å¦‚æœåœ¨æ¸…ç†æ—¶ç§»åŠ¨ï¼Œå¿…ç„¶ä¼šå½±å“åˆ°å¯¹è±¡å›æ”¶çš„æ•ˆç‡ã€‚å¦‚æœæ¸…ç†æ—¶ä¸ç§»åŠ¨ï¼Œå¿…ç„¶ä¼šå½±å“åˆ°å¯¹è±¡åˆ†é…çš„æ•ˆç‡ã€‚ å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨Serial / SerialOldSerialæ”¶é›†å™¨æ˜¯æœ€å¤è€çš„æ”¶é›†å™¨ï¼Œä½¿ç”¨æ ‡è®°æ‹·è´ç®—æ³•ï¼Œåœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°å®ƒæ”¶é›†ç»“æŸã€‚ä¼˜ç‚¹ï¼šåœ¨å†…å­˜è¾ƒå°çš„æ¡Œé¢åº”ç”¨æˆ–è€…Clientæ¨¡å¼ä¸‹ï¼Œé¢å¤–å†…å­˜æ¶ˆè€—æœ€å°ï¼Œç®€å•é«˜æ•ˆã€‚ SerialOldåŒæ ·æ˜¯å•çº¿ç¨‹æ”¶é›†èµ·ï¼Œä½¿ç”¨æ ‡è®°æ•´ç†ç®—æ³•ã€‚å½“CMSæ”¶é›†èµ·å‘ç”Ÿå¤±è´¥æ—¶ä¼šè½¬ä¸ºSerialOldå·¥ä½œã€‚ PS / POParalle Scavenge/ Paralle Old çš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§çš„ååé‡ã€‚ ParalleScavenge åŒæ ·æ˜¯åŸºäºæ ‡è®°-å¤åˆ¶ç®—æ³•ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘æ”¶é›†ï¼Œååé‡ = ï¼ˆè¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ï¼‰/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+è¿è¡Œåƒåœ¾æ”¶é›†æ—¶é—´)-XX:MaxGCPauseMillis æ§åˆ¶æœ€å¤§åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´-XX:GCTimeRatio æ§åˆ¶åƒåœ¾æ”¶é›†æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ç‡-XX:+UseAdaptiveSizePolicy å°±ä¸éœ€è¦äººå·¥æŒ‡å®šæ–°ç”Ÿä»£çš„å¤§å°ï¼ŒEdenäºSurvivorçš„æ¯”ä¾‹ï¼Œä»¥åŠæ™‹å‡è€å¹´ä»£çš„å¤§å°ï¼Œè™šæ‹Ÿæœºä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´è¿™äº›å‚æ•°ä»¥æä¾›æœ€åˆé€‚çš„åœé¡¿æ—¶é—´æˆ–è€…æœ€å¤§çš„ååé‡ã€‚ ParalleOld æ”¶é›†è€å¹´ä»£ï¼ŒåŸºäºæ ‡è®°æ•´ç†ç®—æ³•ã€‚ ParNew / CMSParNewæ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹å¹¶è¡Œç‰ˆæœ¬ï¼Œé™¤äº†ä½¿ç”¨å¤šæ¡çº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ä¹‹å¤–ï¼Œå…¶ä½™è¡Œä¸ºä¸Serialæ”¶é›†èµ·å®Œå…¨ä¸€è‡´ã€‚ CMDæ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®çš„çš„æ”¶é›†å™¨ã€‚ç¬¦åˆå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´å°½å¯èƒ½çŸ­ï¼Œä»¥ç»™ç”¨æˆ·å¸¦æ¥è‰¯å¥½äº¤äº’ä½“éªŒçš„éœ€æ±‚ã€‚ä»–æ˜¯ä¸€ç§æ ‡è®°-æ¸…é™¤ç®—æ³•å®ç°çš„ã€‚åŒ…å«å››ä¸ªæ­¥éª¤ï¼š1ï¼‰åˆå§‹æ ‡è®°2ï¼‰å¹¶å‘æ ‡è®°3ï¼‰é‡æ–°æ ‡è®°4ï¼‰å¹¶å‘æ¸…é™¤ å…¶ä¸­åˆå§‹æ ‡è®°å’Œé‡æ–°æ ‡è®°è¿™ä¸¤ä¸ªæ­¥éª¤ä»éœ€è¦STWã€‚åˆå§‹æ ‡è®°ä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ã€é€Ÿåº¦å¾ˆå¿«ï¼›å¹¶å‘æ ‡è®°é˜¶æ®µå°±æ˜¯ä»GC Rootsçš„ç›´æ¥å…³è”å¯¹è±¡å¼€å§‹éå†æ•´ä¸ªå¯¹è±¡å›¾çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—æ—¶é•¿ï¼Œä½†ä¸éœ€è¦åœé¡¿ç”¨æˆ·çº¿ç¨‹ï¼Œå¯ä»¥ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸€èµ·å¹¶å‘è¿è¡Œï¼›é‡æ–°æ ‡è®°ä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ä¸ºç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„éƒ¨åˆ†ï¼Œè¿™ä¸ªé˜¶æ®µæ¯”åˆå§‹æ ‡è®°è€—æ—¶ç¨é•¿ï¼›å¹¶å‘æ¸…é™¤ï¼Œæ¸…ç†åˆ é™¤æ‰æ ‡è®°é˜¶æ®µåˆ¤æ–­å·²ç»æ­»äº¡çš„å¯¹è±¡ï¼Œä¸éœ€è¦ç§»åŠ¨å“¦å­˜æ´»å¯¹è±¡ï¼Œå› æ­¤è¿™ä¸ªé˜¶æ®µä¹Ÿæ˜¯ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å¹¶å‘ã€‚ CMSç¼ºç‚¹ï¼š1ï¼‰ è€—CPUèµ„æº2ï¼‰ æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œç”±äºé¢„ç•™çš„å†…å­˜æ— æ³•åˆ†é…æ–°å¯¹è±¡æ—¶ï¼Œæœ‰å¯èƒ½å‡ºç°å›æ”¶å¤±è´¥è€Œå¯¼è‡´é€€åŒ–åˆ°Serial Oldçš„æ¨¡å¼æ”¶é›†ã€‚3ï¼‰åˆ†é…å ç”¨å¤§ç©ºé—´çš„å¯¹è±¡æ—¶ï¼Œä¼šå‡ºç°è€å¹´ä»£è¿˜æœ‰å¾ˆå¤šå‰©ä½™ç©ºé—´ï¼Œä½†æ˜¯æ— æ³•æ‰¾åˆ°è¶³å¤Ÿå¤§çš„è¿ç»­ç©ºé—´åˆ†é…å¯¹è±¡ï¼Œä¸å¾—ä¸æå‰è§¦å‘FullGCã€‚æä¾›äº†ä¸¤ä¸ªå‚æ•°ä¼˜åŒ–ï¼Œä½†æ˜¯JDK1.9ä¹‹åå·²ç»åºŸå¼ƒï¼š-XX:UseCMS-CompactAtFullCollection ä¸å¾—ä¸è¿›è¡ŒFullGCæ—¶å¼€å¯å†…å­˜ç¢ç‰‡çš„åˆå¹¶æ•´ç†ã€‚-XX:CMSFullGCsBefore-Compactionï¼Œè¦æ±‚CMSæ”¶é›†å™¨åœ¨æ‰§è¡Œè¿‡è‹¥å¹²æ¬¡ä¸æ•´ç†ç©ºé—´çš„FullGCä¹‹åï¼Œä¸‹ä¸€æ¬¡è¿›å…¥FullGCå‰è¿›è¡Œç¢ç‰‡æ•´ç†ã€‚ Garbage FirstG1æ—¶ä¸€æ¬¾ä¸»è¦é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ã€‚ åœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´å¤§æ¦‚ç‡ä¸è¶…è¿‡Næ¯«ç§’è¿™æ ·çš„ç›®æ ‡ã€‚ G1é¢å‘å †å†…å­˜ä»»ä½•éƒ¨åˆ†æ¥ç»„æˆå›æ”¶é›†ï¼ˆCollectionSetï¼‰è¿›è¡Œå›æ”¶ï¼Œè¡¡é‡æ ‡å‡†ä¸å†æ˜¯å®ƒå±äºå“ªä¸ªåˆ†ä»£ï¼Œè€Œæ˜¯å“ªå—å†…å­˜ä¸­å­˜æ”¾çš„åƒåœ¾æ•°é‡æœ€å¤šï¼Œå›æ”¶æ”¶ç›Šæœ€å¤§ï¼Œè¿™å°±æ˜¯G1æ”¶é›†å™¨çš„MixedGCæ¨¡å¼ã€‚ G1æŠŠè¿ç»­çš„Javaå †å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œæ¯ä¸ªRegionéƒ½å¯ä»¥æ ¹æ®éœ€è¦æ‰®æ¼” æ–°ç”Ÿä»£çš„Edenç©ºé—´Survivorç©ºé—´ï¼Œæˆ–è€…è€å¹´ä»£ç©ºé—´ã€‚æ”¶é›†å™¨èƒ½å¤Ÿå¯¹ä¸åŒè§’è‰²çš„Regioné‡‡ç”¨ä¸åŒçš„=ç­–ç•¥å–å¤„ç†ï¼Œè¿™æ ·æ— è®ºæ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡è¿˜æ˜¯å­˜æ´»äº†ä¸€æ®µæ—¶é—´ã€ç»è¿‡å¤šæ¬¡æ”¶é›†çš„æ—§å¯¹è±¡éƒ½èƒ½è·å¾—å¾ˆå¥½çš„æ”¶é›†å†ç†¬è¿‡ã€‚ Regionä¸­æœ‰ä¸€ç±»HumongousåŒºåŸŸä¸“é—¨å­˜æ”¾å¤§å¯¹è±¡ã€‚ G1è®¤ä¸ºåªè¦å¤§å°è¶…è¿‡äº†ä¸€ä¸ªRegionå®¹é‡çš„ä¸€èˆ¬çš„å¯¹è±¡å°±å¯ä»¥åˆ¤å®šä¸ºå¤§å¯¹è±¡ã€‚æ¯ä¸ªRegionçš„å¤§å°å¯ä»¥é€šè¿‡å‚æ•°-XX:G1HeapRegionSizeè®¾å®šï¼Œå–å€¼èŒƒå›´1MBï½32MBï¼Œä¸”åº”ä¸º2çš„Næ¬¡å¹‚ã€‚é‚£äº›è¶…è¿‡äº†æ•´ä¸ªRegionå®¹é‡çš„è¶…çº§å¤§å¯¹è±¡ï¼Œä¼šè¢«å­˜æ”¾åœ¨Nä¸ªè¿ç»­çš„HumongousRegionä¹‹ä¸­ï¼ŒG1çš„å¤§å¤šæ•°è¡Œä¸ºéƒ½æŠŠHumongousRegionä½œä¸ºè€å¹´ä»£çš„ä¸€éƒ¨åˆ†è¿›è¡Œçœ‹å¾…ã€‚ Gå› ä¸ºå°†Regionä½œä¸ºå•è¯å›æ”¶çš„æœ€å°å•å…ƒï¼Œæ‰€ä»¥å¯ä»¥å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ã€‚æ¯æ¬¡æ ¹æ®ç”¨æˆ·è®¾ç½®çš„åœé¡¿æ—¶é—´-XX:MaxGCPauseMillisï¼Œ ä¼˜å…ˆå¤„ç†å›æ”¶ä»·å€¼æ”¶ç›Šæœ€å¤§çš„é‚£äº›Regionã€‚è¿™ç§ä½¿ç”¨Regionåˆ’åˆ†å†…å­˜ç©ºé—´ï¼Œä»¥åŠå…·æœ‰ä¼˜å…ˆçº§çš„åŒºåŸŸå›æ”¶æ–¹å¼ï¼Œä¿è¯äº†G1æ”¶é›†å™¨åœ¨æ‚ é—²çš„æ—¶é—´å†…è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚ éœ€è¦è§£å†³çš„é—®é¢˜1ï¼‰è·¨Regionå¼•ç”¨çš„å¯¹è±¡ï¼š æ¯ä¸ªRegionéƒ½ç»´æŠ¤è‡ªå·±çš„è®°å¿†é›†é¿å…å…¨å †ä½œä¸ºGCRootsæ‰«æï¼Œ è¿™äº›è®°å¿†é›†ä¼šè®°å½•ä¸‹åˆ«çš„RegionæŒ‡å‘è‡ªå·±çš„æŒ‡é’ˆï¼Œå¹¶æ ‡è®°è¿™äº›æŒ‡é’ˆåˆ†åˆ«åœ¨å“ªäº›å¡é¡µçš„èŒƒå›´ä¹‹å†…ã€‚G1çš„è®°å¿†é›†æ˜¯ä¸€ç§Hashè¡¨ï¼ŒKeyæ—¶åˆ«çš„Regionçš„èµ·å§‹åœ°å€ï¼ŒValueæ—¶ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢å­˜å‚¨çš„å…ƒç´ æ—¶å¡è¡¨çš„ç´¢å¼•å·ã€‚è¿™ç§åŒå‘çš„å¡è¡¨ç»“æ„è®°å½•äº†æˆ‘æŒ‡å‘è°å’Œè°æŒ‡å‘äº†æˆ‘ï¼Œå› æ­¤G1åªå°‘éœ€è¦è€—è´¹å¤§çº¦10%ï½20%çš„é¢å¤–å†…å­˜æ¥ç»´æŒæ”¶é›†å·¥ä½œã€‚ 2ï¼‰åœ¨å¹¶å‘é˜¶æ®µå¦‚ä½•ä¿è¯æ”¶é›†çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹äº’ä¸å¹²æ‰°åœ°è¿è¡Œï¼Ÿç”¨æˆ·çº¿ç¨‹åœ¨æ”¹å˜å¯¹è±¡å¼•ç”¨å…³ç³»çš„æ—¶å€™ï¼Œå¿…é¡»ä¿è¯ä¸èƒ½æ‰“ç ´åŸæœ¬çš„å¯¹è±¡å›¾ç»“æ„ï¼Œå¯¼è‡´æ¯”é˜¿å‰ç»“æœå‡ºç°é”™è¯¯ï¼ŒCMSä½¿ç”¨å¢é‡æ›´æ–°ç®—æ³•ï¼ŒG1ä½¿ç”¨åŸå§‹å¿«ç…§ç®—æ³•æ¥å®ç°ã€‚ åƒåœ¾æ”¶é›†å¯¹ç”¨æˆ·çº¿ç¨‹çš„å½±å“è¿˜ä½“ç°åœ¨å›æ”¶è¿‡ç¨‹ä¸­å¿ƒçª—å·å¯¹è±¡çš„å†…å­˜åˆ†é…ä¸Šï¼Œç¨‹åºè¦ç»§ç»­è¿è¡Œå°±è‚¯å®šä¼šæŒç»­æœ‰æ–°å¯¹è±¡å‘—åˆ›å»ºï¼ŒG1ä½æ¯ä¸ªRegionè®¾è®¡äº†ä¸¤ä¸ªåä¸ºTAMSï¼ˆTOp at Mark Startï¼‰çš„æŒ‡é’ˆï¼ŒæŠŠRegionä¸­çš„ä¸€éƒ¨åˆ†ç©ºé—´åˆ’åˆ†å‡ºæ¥ç”¨äºå¹¶å‘å›æ”¶è¿‡ç¨‹ä¸­çš„æ–°å¯¹è±¡åˆ†é…ï¼Œå¹¶å‘å›æ”¶æ—¶å¿ƒåˆ†é…çš„å¯¹è±¡åœ°å€éƒ½å¿…é¡»è¦åœ¨è¿™ä¸¤ä¸ªæŒ‡é’ˆä½ç½®ä»¥ä¸Šã€‚G1æ”¶é›†å™¨é»˜è®¤åœ¨è¿™ä¸ªåœ°å€ä»¥ä¸Šçš„å¯¹è±¡æ—¶è¢«éšå¼æ ‡è®°è¿‡çš„ï¼Œä¸çº³å…¥å›æ”¶èŒƒå›´ã€‚å¦‚æœå†…å­˜å›æ”¶çš„é€Ÿåº¦èµ¶ä¸ä¸Šå†…å­˜åˆ†é…çš„é€Ÿåº¦ï¼ŒG1æ”¶é›†å™¨ä¹Ÿè¦è¢«è¿«å†»ç»“ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œï¼Œå¯¼è‡´FullGCè€Œäº§ç”Ÿé•¿æ—¶é—´çš„STWã€‚ 3ï¼‰å¦‚ä½•å»ºç«‹å¯é çš„åœé¡¿æ¨¡å‹G1çš„åœé¡¿é¢„æµ‹æ¨¡å‹æ—¶ä»¥è¡°å‡å‡å€¼ä¸ºç†è®ºåŸºç¡€å®ç°çš„ï¼Œåœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­ï¼ŒG1æ”¶é›†å™¨ä¼šè®°å½•æ¯ä¸ªRegionçš„å›æ”¶è€—æ—¶ã€æ¯ä¸ªRegionè®°å¿†é›†é‡Œçš„è„å¡æ•°é‡ç­‰å„ä¸ªå¯ä»¥æµ‹é‡çš„æ­¥éª¤è¯è´¹çš„æˆæœ¬ï¼Œå¹¶åˆ†æå¾—å‡ºå¹³å‡å€¼ï¼Œæ ‡å‡†åå·®ã€å¯è¡Œåº¦ç­‰ç»Ÿè®¡ä¿¡æ¯ï¼Œè¡°å‡å¹³å‡å€¼æ—¶æ¯”æ™®é€šçš„å¹³å‡å€¼æ›´å®¹æ˜“å—åˆ°æ–°æ•°æ®çš„å½±å“ï¼Œå¹³å‡å€¼æ›´å®¹æ˜“å—åˆ°æ–°æ•°æ®çš„å½±å“ï¼Œå¹³å‡å€¼ä»£è¡¨æ•´ä½“å¹³å‡çŠ¶æ€ï¼Œè¡°å‡å‡å€¼ä»£è¡¨æœ€è¿‘çš„å¹³å‡çŠ¶æ€ã€‚ Regionçš„ç»Ÿè®¡çŠ¶æ€è¶Šæ–°è¶Šèƒ½å†³å®šå™¨å›æ”¶çš„ä»·å€¼ã€‚é€šè¿‡è¿™äº›ä¿¡æ¯é¢„æµ‹ç°åœ¨å¼€å§‹å›æ”¶çš„è¯ï¼Œå“ªäº›regionç»„æˆå›æ”¶é›†é‡‡å¯ä»¥åœ¨ä¸è¶…è¿‡æœŸæœ›åœé¡¿æ—¶é—´çš„çº¦æŸä¸‹è·å¾—æœ€é«˜çš„æ”¶ç›Šã€‚ G1çš„å›æ”¶æ­¥éª¤åˆå§‹æ ‡è®° åªæ ‡è®°ä¸€ä¸‹GCRootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹TAMSæŒ‡é’ˆçš„å€¼ï¼Œè®©ä¸‹ä¸€ä¸ªé˜¶æ®µçš„ç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿è¡Œæ—¶ï¼Œèƒ½æ­£ç¡®æ»´åœ¨å¯ç”¨çš„Regionä¸­åˆ†é…æ–°å¯¹è±¡ã€‚è¿™ä¸ªé˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†æ˜¯è€—æ—¶çŸ­ï¼Œè€Œä¸”æ˜¯å€Ÿç”¨è¿›è¡ŒMinorGCçš„æ—¶å€™åŒæ­¥å®Œæˆï¼Œæ‰€ä»¥G1æ”¶é›†å™¨åœ¨è¿™ä¸ªé˜¶æ®µå®é™…å¹¶æ²¡æœ‰é¢å¤–çš„åœé¡¿ã€‚ å¹¶å‘æ ‡è®°ä»GCRootså¼€å§‹å¯¹å¯¹å­çº¢å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œé€’å½’æ‰«ææ•´ä¸ªå †é‡Œçš„å¯¹è±¡å›¾ï¼Œæ‰¾å‡ºè¦å›æ”¶çš„å¯¹è±¡ï¼Œè¿™ä¸ªé˜¶æ®µè€—æ—¶è¾ƒé•¿ï¼Œä½†æ˜¯å¯ä»¥å’Œç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå½“å¯¹è±¡å›¾æ‰«æå®Œæˆä»¥åï¼Œè¿˜è¦é‡æ–°å¤„ç†SATBè®°å½•ä¸‹çš„åœ¨å¹¶å‘æ—¶æœ‰å¼•ç”¨å˜åŠ¨çš„å¯¹è±¡ã€‚ æœ€ç»ˆæ ‡è®°å¯¹ç”¨æˆ·çº¿ç¨‹åšå¦å¤–ä¸€ä¸ªçŸ­æš‚çš„æš‚åœï¼Œç”¨äºå¤„ç†å¹¶å‘é˜¶æ®µç»“æŸåä»é—ç•™ä¸‹æ¥çš„æœ€åé‚£å°‘é‡çš„SATBè®°å½•ã€‚ ç­›é€‰å›æ”¶è´Ÿè´£æ›´æ–°Regionçš„ç»Ÿè®¡æ•°æ®ï¼Œå¯¹å“¥å“¥Regionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„åœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©ä»»æ„å¤šä¸ªRegionæ„æˆå›æ”¶é›†ï¼Œç„¶åæŠŠå†³å®šå›æ”¶çš„é‚£ä¸€éƒ¨åˆ†Regionçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°ç©ºçš„Regionä¸­ï¼Œå†æ¸…ç†æ‰æ•´ä¸ªæ—§çš„Regionçš„å…¨éƒ¨ç©ºé—´ï¼Œå¯¹å­˜æ´»å¯¹è±¡ç§»åŠ¨æ—¶å¿…é¡»æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œä½†æ˜¯ç”±å¤šæ¡çº¿ç¨‹å®Œæˆçš„ã€‚ G1ä»æ•´ä½“ä¸Šæ¥çœ‹æ˜¯åŸºäºæ ‡è®°æ•´ç†ç®—æ³•ï¼Œä½†ä»å±€éƒ¨æ¥çœ‹æ—¶åŸºäºæ ‡è®°å¤åˆ¶ç®—æ³•ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™ä¸¤ç§ç®—æ³•æ„å‘³ç€G1å†ä¸æ€§æœŸé—´ä¸ä¼šäº§ç”Ÿå†…å­˜ç©ºé—´ç¢ç‰‡ï¼Œåƒåœ¾æ”¶é›†å®Œæˆä¹‹åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜ã€‚è¿™ç§ç‰¹æ€§æœ‰åˆ©äºç¨‹åºé•¿æ—¶é—´è¿è¡Œï¼Œåœ¨ç¨‹åºä¸ºå¤§å¯¹è±¡åˆ†é…å†…å­˜æ—¶ä¸å®¹æ˜“å› æ— æ³•æ‰¾åˆ°è¿ç»­å†…å­˜ç©ºé—´è€Œæå‰è§¦å‘é™ä¸€æ¬¡æ”¶é›†ã€‚ G1ä½äº†åƒåœ¾æ”¶é›†äº§ç”Ÿçš„å†…å­˜å ç”¨ä»¥åŠé¢å¤–çš„æ‰§è¡Œå‰¯åœ¨éƒ½æ¯”CMSæã€‚å†…å­˜å ç”¨æ˜¯ç”±äºåŒå‘å¡è¡¨å ç”¨ç©ºé—´å¤§ã€‚CMsåªè®°å½•äº†è€å¹´ä»£åˆ°æ–°ç”Ÿä»£çš„å¡è¡¨è®°å½•ã€‚ è´Ÿè½½ï¼šCMSç”¨å†™åå±éšœç»´æŠ¤æ›´æ–°å¡è¡¨ï¼›G1é™¤äº†ä½¿ç”¨å†™åå±éšœç»´æŠ¤å¡è¡¨å¤–ï¼Œä½äº†å®ç°åŸå§‹å¿«ç…§æœç´¢ï¼ˆSATBï¼‰ç®—æ³•ï¼Œè¿˜éœ€è¦ä½¿ç”¨å†™å‰å±éšœæ¥è·Ÿè¸ªå¹¶å‘å‰çš„æŒ‡é’ˆå˜åŒ–ã€‚ åŸå§‹å¿«ç…§æœç´¢èƒ½å¤Ÿå‡å°‘å¹¶å‘æ ‡è®°å’Œé‡æ–°æ ‡è®°é˜¶æ®µçš„æ¶ˆè€—ï¼Œé¿å…CMSé‚£æ ·åœ¨æœ€ç»ˆæ ‡è®°é˜¶æ®µåœé¡¿æ—¶é—´è¿‡é•¿çš„ç¼ºç‚¹ã€‚ CMSçš„å†™å±éšœæ˜¯åŒæ­¥æ“ä½œï¼ŒG1ä½¿ç”¨çš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒæŠŠå†™å‰å±éšœå’Œå†™åå±éšœä¸­è¦åšçš„äº‹æƒ…éƒ½æ”¾åœ¨é˜Ÿåˆ—é‡Œï¼Œå†å¼‚æ­¥å¤„ç†ã€‚","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"å†…å­˜åˆ†é…","slug":"å†…å­˜åˆ†é…","permalink":"https://pickonebyone.github.io/tags/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/"},{"name":"GC","slug":"GC","permalink":"https://pickonebyone.github.io/tags/GC/"}]},{"title":"çº¿ç¨‹å’Œå¹¶å‘","slug":"çº¿ç¨‹å’Œå¹¶å‘","date":"2020-06-08T10:44:20.000Z","updated":"2020-06-15T11:50:13.466Z","comments":true,"path":"2020/06/08/çº¿ç¨‹å’Œå¹¶å‘/","link":"","permalink":"https://pickonebyone.github.io/2020/06/08/%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%B9%B6%E5%8F%91/","excerpt":"","text":"ç›®å‰çº¿ç¨‹æ˜¯javaä¸­è¿›è¡Œå¤„ç†å™¨èµ„æºè°ƒåº¦çš„æœ€åŸºæœ¬å•ä½ã€‚ï¼ˆLoomé¡¹ç›®æ­£åœ¨å°è¯•æ”¹å˜çº¿ç¨‹è¿™ä¸€é‡é‡çº§çš„å®ç°ï¼‰ å®ç°çº¿ç¨‹çš„æ–¹å¼ä¸»è¦æœ‰ä¸‰ç§ï¼š ä½¿ç”¨å†…æ ¸çº¿ç¨‹1:1å®ç°ï¼›å†…æ ¸ç³»ç»Ÿå°±æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„çº¿ç¨‹ï¼Œè¿™ç§çº¿ç¨‹ç”±å†…æ ¸æ¥å®Œæˆçº¿ç¨‹åˆ‡æ¢ï¼Œå†…æ ¸é€šè¿‡æ“çºµè°ƒåº¦å™¨å¯¹çº¿ç¨‹è¿›è¡Œè°ƒåº¦ï¼Œå¹¶è´Ÿè´£å°†çº¿ç¨‹çš„ä»»åŠ¡æ˜ å°„åˆ°å„ä¸ªå¤„ç†å™¨ä¸Šã€‚ ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹1:nå®ç°ï¼› ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹ä»·è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°ï¼ˆnï¼šMå®ç°ï¼‰ Javaçº¿ç¨‹çš„å®ç°ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ²¡æœ‰é™å®šä½¿ç”¨å“ªç§çº¿ç¨‹æ¨¡å‹æ¥å®ç°ï¼Œä¸»æµå¹³å°ä¸Šçš„ä¸»æµå•†ç”¨Javaè™šæ‹Ÿæœºçº¿ç¨‹æ¨¡å‹æ™®ééƒ½ç»™äºˆæ“ä½œç³»ç»ŸåŸç”Ÿçº¿ç¨‹æ¨¡å‹æ¥å®ç°ï¼ˆ1:1çš„çº¿ç¨‹æ¨¡å‹ï¼‰ Javaçº¿ç¨‹è°ƒåº¦çº¿ç¨‹è°ƒåº¦æ˜¯æŒ‡ç³»ç»Ÿä¸ºçº¿ç¨‹åˆ†é…å¤„ç†å™¨ä½¿ç”¨æƒçš„è¿‡ç¨‹ï¼Œè°ƒåº¦æ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼š ååŒå¼çº¿ç¨‹è°ƒåº¦çº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´ç”±çº¿ç¨‹æœ¬èº«æ¥æ§åˆ¶ï¼Œçº¿ç¨‹æŠŠè‡ªå·±çš„å·¥ä½œæ‰§è¡Œå®Œä¹‹åï¼ŒåŒå¿—ç³»ç»Ÿåˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹ã€‚ æŠ¢å å¼çº¿ç¨‹è°ƒåº¦æ¯ä¸ªçº¿ç¨‹ç”±ç³»ç»Ÿæ¥åˆ†é…æ‰§è¡Œæ—¶é—´ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ä¸ç”±çº¿ç¨‹æœ¬èº«æ¥å†³å®šã€‚Javaå¯ä»¥ä½¿ç”¨thread.yield()æ–¹æ³•ä¸»åŠ¨è®©å‡ºæ‰§è¡Œæ—¶é—´ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¸»åŠ¨è·å–æ‰§è¡Œæ—¶é—´ã€‚ çº¿ç¨‹çš„ä¼˜å…ˆçº§æˆ‘ä»¬å¹¶ä¸èƒ½åœ¨ç¨‹åºä¸­é€šè¿‡ä¼˜å…ˆçº§æ¥å®Œå…¨å‡†ç¡®åˆ¤æ–­ä¸€ç»„çŠ¶æ€éƒ½ä¸ºReadyçš„çº¿ç¨‹å…ˆæ‰§è¡Œå“ªä¸€ä¸ªï¼Ÿ çŠ¶æ€è½¬æ¢Javaè¯­è¨€å®šä¹‰äº†6ä¸­çº¿ç¨‹çŠ¶æ€ï¼Œåœ¨ä»»æ„ä¸€ä¸ªæ—¶é—´ç‚¹ä¸­ï¼Œ ä¸€ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸”åªæœ‰ä¸€ç§çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç‰¹å®šçš„æ–¹æ³•åœ¨ä¸åŒçŠ¶æ€ä¹‹é—´è½¬æ¢ã€‚ æ–°å»ºï¼šnewï¼Œåˆ›å»ºåå°šæœªå¯åŠ¨çš„çº¿ç¨‹å¤„äºæ–°å»ºçŠ¶æ€ï¼› è¿è¡Œï¼šrunnableï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€ä¸­çš„Runningå’ŒReadyï¼Œ ç­‰å¾…ï¼šWaitingï¼Œå¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šè¢«åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´ï¼Œå®ƒä»¬éœ€è¦è¢«å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºå”¤é†’ã€‚ä»¥ä¸‹æ–¹æ³•å¯ä»¥è®©çº¿ç¨‹æ— é™æœŸç­‰å¾…ï¼š æ²¡æœ‰è®¾ç½®timeoutå‚æ•°çš„Object.wait()æ–¹æ³•ï¼› æ²¡æœ‰è®¾ç½®timeoutå‚æ•°çš„Thread.join()æ–¹æ³•ï¼› LockSupport.part()æ–¹æ³•ï¼› é™æœŸç­‰å¾…ï¼šå¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¹Ÿä¸ä¼šè¢«åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´ï¼Œåœ¨ä¸€å®šæ—¶é—´åä¼šæœ‰ç³»ç»Ÿè‡ªåŠ¨å”¤é†’ã€‚ Thread.sleep() è®¾ç½®äº†Timeoutçš„Object.wait() è®¾ç½®äº†Timeoutçš„Thread.join() LockSupport.parkNanos(); LockSupport.parkUntil(); é˜»å¡ï¼šBlockedï¼Œåœ¨ç¨‹åºç­‰å¾…è¿›å…¥åŒæ­¥åŒºåŸŸçš„æ—¶å€™ï¼Œçº¿ç¨‹å°†è¿›å…¥é˜»å¡çŠ¶æ€ã€‚ ç»“æŸ: Terminatedï¼Œå·²ç»ˆæ­¢çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ï¼Œçº¿ç¨‹å·²ç»ç»“æŸæ‰§è¡Œã€‚ çº¿ç¨‹å®‰å…¨å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœä¸ç”¨è€ƒè™‘è¿™äº›çº¿ç¨‹åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸‹çš„è°ƒåº¦å’Œäº¤æ›¿æ‰§è¡Œï¼Œä¹Ÿä¸éœ€è¦æ‰§è¡Œé¢å¤–çš„åŒæ­¥ï¼Œæˆ–è€…åœ¨è°ƒç”¨æ–¹è¿›è¡Œä»»ä½•å…¶ä»–çš„åè°ƒæ“ä½œï¼Œè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºéƒ½å¯ä»¥è·å¾—æ­£ç¡®çš„ç»“æœï¼Œé‚£å°±ç§°è¿™ä¸ªå¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ ä¹Ÿå°±æ˜¯ä»£ç æœ¬èº«å°è£…äº†æ‰€æœ‰å¿…è¦çš„æ­£ç¡®æ€§ä¿éšœæ‰‹æ®µï¼Œä»¤è°ƒç”¨è€…æ— åºå…³å¿ƒå¤šçº¿ç¨‹ä¸‹çš„è°ƒç”¨é—®é¢˜ï¼Œæ›´æ— éœ€è‡ªå·±å®ç°ä»»ä½•æªæ–½æ¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ­£ç¡®è°ƒç”¨ã€‚ ä¸å¯å˜åœ¨Javaè¯­è¨€ä¸­ï¼Œä¸å¯å˜å¯¹è±¡ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ— è®ºæ˜¯å¯¹è±¡çš„æ–¹æ³•å®ç°è¿˜æ˜¯æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œéƒ½ä¸éœ€è¦å†è¿›è¡Œä»»ä½•çº¿ç¨‹å®‰å…¨ä¿éšœæªæ–½ã€‚ åªè¦ä¸€ä¸ªä¸å¯å˜çš„å¯¹è±¡è¢«æ­£ç¡®çš„æ„å»ºå‡ºæ¥ï¼Œé‚£å…¶å¤–éƒ¨çš„å¯è§çŠ¶æ€æ°¸è¿œéƒ½ä¸ä¼šæ”¹å˜ï¼Œæ°¸è¿œéƒ½ä¸ä¼šçœ‹åˆ°ä»–åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹ä¸­å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚ ç»å¯¹çº¿ç¨‹å®‰å…¨ç»å¯¹çš„çº¿ç¨‹å®‰å…¨é™¤äº†å¯¹è±¡æœ¬èº«å¤–ï¼Œ è¿˜éœ€è¦åœ¨è°ƒç”¨ç«¯åšç›¸åº”çš„åŒæ­¥æªæ–½ã€‚ ç›¸å¯¹çº¿ç¨‹å®‰å…¨ä¿è¯è¿™ä¸ªå¯¹è±¡åœ¨å•æ¬¡çš„æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™ä¸éœ€è¦è¿›è¡Œé¢å¤–çš„ä¿éšœæªæ–½ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ç‰¹å®šé¡ºåºçš„è¿ç»­è°ƒç”¨ï¼Œå°±å¯èƒ½éœ€è¦åœ¨è°ƒç”¨ç«¯ä½¿ç”¨é¢å¤–çš„åŒæ­¥æ‰‹æ®µæ¥ä¿è¯è°ƒç”¨çš„æ­£ç¡®æ€§ã€‚åœ¨Javaä¸­ï¼Œç›¸å¯¹çº¿ç¨‹å®‰å…¨çš„ç±»å‹æœ‰Vectorã€HashTableã€Collections.synchronizedCollection(); çº¿ç¨‹å…¼å®¹å¯¹è±¡æœ¬èº«å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œ ä½†æ˜¯å¯ä»¥é€šè¿‡åœ¨è°ƒç”¨ç«¯æ­£ç¡®çš„ä½¿ç”¨åŒæ­¥æ‰‹æ®µæ¥ä¿è¯å¯¹è±¡åœ¨å¹¶å‘ç¯å¢ƒä¸­å¯ä»¥å®‰å…¨ä½¿ç”¨ã€‚Vectorã€HashTableã€ArrayListã€HashMapç­‰éƒ½æ˜¯çº¿ç¨‹å…¼å®¹çš„ã€‚ çº¿ç¨‹å¯¹ç«‹å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æŒæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä¸€ä¸ªå°è¯•å»ä¸­æ–­çº¿ç¨‹ã€ä¸€ä¸ªå°è¯•å»æ¢å¤çº¿ç¨‹ï¼Œåœ¨å¹¶å‘è¿›è¡Œçš„æƒ…å†µä¸‹ï¼Œæ— è®ºè°ƒç”¨æ—¶æ˜¯å¦è¿›è¡Œäº†åŒæ­¥ï¼Œç›®æ ‡çº¿ç¨‹éƒ½å­˜åœ¨æ€ç´¢çš„é£é™©ã€‚ï¼ˆThreadç±»çš„suspendå’Œresumeæ–¹æ³•ï¼‰ï¼Œå¸¸è§çš„å¯¹ç«‹æ“ä½œè¿˜æœ‰System.in() System.out()å’ŒSystem.runFinalizersOnExit(); çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•äº’æ–¥åŒæ­¥ç”¨äº’æ–¥æ¥å®ç°åŒæ­¥ã€‚åŒæ­¥æ˜¯æŒ‡åœ¨å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®å…±äº«æ•°æ®æ—¶ï¼Œä¿è¯å…±äº«æ•°æ®åœ¨åŒä¸€ä¸ªæ—¶åˆ»åªè¢«ä¸€æ¡çº¿ç¨‹ä½¿ç”¨ã€‚äº’æ–¥æ˜¯å®ç°åŒæ­¥çš„ä¸€ç§æ‰‹æ®µï¼Œä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰ã€äº’æ–¥é‡ï¼ˆMutexï¼‰å’Œä¿¡å·é‡ï¼ˆSemaphoreï¼‰éƒ½æ˜¯å¸¸è§çš„äº’æ–¥å®ç°æ–¹å¼ã€‚å› æ­¤å®ƒé¢ä¸´çš„é—®é¢˜æ˜¯è¿›è¡Œçº¿ç¨‹é˜»å¡å’Œå”¤é†’æ‰€å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼Œå› æ­¤ä¹Ÿå«é˜»å¡åŒæ­¥ã€‚å±äºä¸€ç§æ‚²è§‚çš„å¹¶å‘ç­–ç•¥ã€‚ synchronizedï¼ˆéå…¬å¹³é”ï¼‰java.util.concurrent.locks.LockReentrantLockï¼ˆéå…¬å¹³é”ï¼‰ å¯é‡å…¥é”æ¯”synchronizedå¢åŠ äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼š ç­‰å¾…å¯ä¸­æ–­å½“æŒæœ‰é”çš„çº¿ç¨‹é•¿æœŸä¸é‡Šæ”¾æ‰€å¾—æ—¶å€™ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œæ”¹ä¸ºå¤„ç†å…¶ä»–äº‹æƒ…ã€‚ å…¬å¹³é”å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åŒä¸€ä¸ªé”çš„æ—¶å€™ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´é¡ºåºä¾æ¬¡è·å¾—é”ã€‚ é”ç»‘å®šå¤šä¸ªæ¡ä»¶ä¸€ä¸ªReentrantLockå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªConditionå¯¹è±¡ï¼Œ å¤šæ¬¡è°ƒç”¨newCondition()å³å¯ã€‚ éé˜»å¡åŒæ­¥åŸºäºç¡¬ä»¶å†²çªæ£€æµ‹çš„ä¹è§‚å¹¶å‘ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆè¿›æ€§æ“ä½œï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çº¿ç¨‹äº‰ç”¨å…±äº«æ•°æ®ï¼Œæ“ä½œæˆåŠŸï¼›å¦‚æœå…±äº«æ•°æ®è¢«äº‰ç”¨ï¼Œäº§ç”Ÿå†²çªï¼Œé‚£ä¹ˆå†è¿›è¡Œå…¶ä»–çš„è¡¥å¿æªæ–½ï¼Œæœ€å¸¸ç”¨çš„è¡¥å¿æªæ–½å°±æ˜¯ä¸æ–­é‡è¯•ï¼Œç›´åˆ°æˆåŠŸã€‚è¿™ç§æ–¹å¼ä¸éœ€è¦é˜»å¡çº¿ç¨‹ï¼Œå› æ­¤ä¹Ÿå«æ— é”ç¼–ç¨‹ã€‚å¸¸ç”¨çš„å…·æœ‰åŸå­æ€§çš„ç¡¬ä»¶æ“ä½œå’Œå†²çªæ£€æµ‹æŒ‡ä»¤æœ‰ï¼š æµ‹è¯•å¹¶è®¾ç½®ï¼ˆTest-And-Setï¼‰ è·å–å¹¶å¢åŠ ï¼ˆFetch-And-Incrementï¼‰ äº¤æ¢ï¼ˆSwapï¼‰ æ¯”è¾ƒå¹¶äº¤æ¢ï¼ˆCompare And Swapï¼‰ åŠ è½½é“¾æ¥/æ¡ä»¶å­˜å‚¨ï¼ˆLoad-Linked/ Store-Conditionalï¼‰ Javaä¸­æš´éœ²å‡ºæ¥çš„æ˜¯CASæŒ‡ä»¤ï¼Œå½“CASæŒ‡ä»¤æ‰§è¡Œæ—¶ï¼Œå½“ä¸”ä»…å½“å†…å­˜åœ°å€Vçš„å€¼ç¬¦åˆé¢„æœŸå€¼Aæ—¶ï¼Œå¤„ç†å™¨æ‰ä¼šç”¨æ–°çš„å€¼Bæ›´æ–°å†…å­˜åœ°å€Vçš„å€¼ï¼Œè¯¥è¿‡ç¨‹æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ‰§è¡ŒæœŸé—´ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹ä¸­æ–­ã€‚ CASå­˜åœ¨çš„ABAé—®é¢˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸ä¼šå½±å“ç¨‹åºå¹¶å‘çš„æ­£ç¡®æ€§ï¼Œå¦‚æœéœ€è¦è§£å†³è¯¥é—®é¢˜ï¼Œä¼ ç»Ÿçš„äº’æ–¥åŒæ­¥å¯èƒ½ä¼šæ¯”åŸå­ç±»æ›´ä¸ºé«˜æ•ˆã€‚ æ— åŒæ­¥æ–¹æ¡ˆå¦‚æœå¯ä»¥è®©ä¸€ä¸ªæ–¹æ³•æœ¬æ¥å°±ä¸æ¶‰åŠå…±äº«æ•°æ®ï¼Œé‚£å®ƒè‡ªç„¶å°±ä¸éœ€è¦ä»»ä½•åŒæ­¥æªæ–½å»ä¿è¯å…¶æ­£ç¡®æ€§ï¼Œå› æ­¤ä¼šæœ‰ä¸€äº›ä»£ç å¤©ç”Ÿå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å¯é‡å…¥ä»£ç å¦‚æœä¸€ä¸ªæ–¹æ³•çš„è¿”å›ç»“æœæ˜¯å¯é¢„æµ‹çš„ï¼Œåªè¦è¾“å…¥äº†ç›¸åŒçš„æ•°æ®ï¼Œå°±å°±èƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œé‚£ä¹ˆå®ƒå°±æ»¡è¶³å¯é‡å…¥æ€§çš„è¦æ±‚ï¼Œå½“ç„¶ä»–å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¯é‡å…¥ä»£ç ä¸ä¾èµ–äºå…¨å±€å˜é‡ã€å­˜å‚¨åœ¨é˜Ÿä¸Šçš„æ•°æ®å’Œå…¬ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œç”¨åˆ°çš„çŠ¶æ€é‡éƒ½ç”±å‚æ•°é‡ä¼ å…¥ï¼Œæ¯”è°ƒç”¨éå¯é‡å…¥çš„æ–¹æ³•ç­‰ã€‚ çº¿ç¨‹æœ¬åœ°å­˜å‚¨å¦‚æœä¸€æ®µä»£ç ä¸­ä½¿ç”¨çš„æ•°æ®å¿…é¡»ä¸å…¶ä»–ä»£ç å…±äº«ï¼Œé‚£å°±çœ‹çœ‹è¿™äº›å…±äº«æ•°æ®çš„ä»£ç æ˜¯å¦èƒ½ä¿è¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œã€‚è¿™æ ·å°±å¯ä»¥æŠŠå…±äº«æ•°æ®çš„å¯è§èŒƒå›´é™åˆ¶åœ¨ä¸€ä¸ªçº¿ç¨‹ä¹‹å†…ã€‚å¸¸è§çš„æœ‰ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼ˆWebäº¤äº’æ¨¡å‹ï¼‰ã€‚ThreadLocalçš„ä½¿ç”¨ã€‚ é”ä¼˜åŒ–è‡ªæ—‹é”å’Œè‡ªé€‚åº”è‡ªæ—‹äº’æ–¥åŒæ­¥çš„æ—¶å€™éœ€è¦å¯¹çº¿ç¨‹è¿›è¡ŒæŒ‚èµ·å’Œæ¢å¤ï¼Œä½†æ˜¯æŒ‚èµ·å’Œæ¢å¤éœ€è¦é™·å…¥å†…æ ¸æ€æ¥å®Œæˆã€‚å› æ­¤å½“ä¸€ä¸ªçº¿ç¨‹è·å–é”çš„æ—¶å€™ï¼Œå¦‚æœæš‚æ—¶æ²¡æœ‰è·å–åˆ°ï¼Œé‚£ä¹ˆè®©ä»–ç¨å¾®ç­‰ä¸€ä¼šå„¿ï¼Œä½†ä¸æ”¾å¼ƒå¤„ç†å™¨çš„æ‰§è¡Œæ—¶é—´ï¼Œçœ‹çœ‹æŒæœ‰é”çš„çº¿ç¨‹æ˜¯å¦å¾ˆå¿«ä¼šé‡Šæ”¾é”ã€‚ å¦‚æœé”è¢«å ç”¨å¾ˆé•¿çš„æ—¶é—´ï¼Œé‚£ä¹ˆè‡ªæ—‹çš„çº¿ç¨‹åªä¼šç™½ç™½æ¶ˆè€—å¤„ç†å™¨èµ„æºã€‚å› æ­¤è‡ªæ—‹ç­‰å¾…æ—¶é—´å¿…é¡»æœ‰ä¸€å®šçš„é™åº¦ã€‚å¦‚æœè‡ªæ—‹è¶…è¿‡äº†é™å®šçš„æ¬¡æ•°ï¼Œä»ç„¶æ²¡æœ‰æˆåŠŸè·å¾—é”ï¼Œå°±åº”å½“ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å»æŒ‚èµ·çº¿ç¨‹ã€‚ è‡ªæ—‹é”çš„å®ç°å‡ ç§è‡ªæ—‹é”çš„javaå®ç°è®¤çœŸçš„è®²ä¸€è®²ï¼šè‡ªæ—‹é”åˆ°åº•æ˜¯ä»€ä¹ˆçœ‹å®Œä½ å°±æ˜ç™½çš„é”ç³»åˆ—ä¹‹è‡ªæ—‹é” é”æ¶ˆé™¤è™šæ‹Ÿæœºå³ä½¿ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶ï¼Œåˆ¤æ–­åˆ°ä¸€æ®µä»£ç ä¸­ï¼Œåœ¨å †ä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½ä¸ä¼šé€ƒé€¸å‡ºå»è¢«å…¶ä»–çº¿ç¨‹è®¿é—®åˆ°ï¼Œé‚£å°±å¯ä»¥æŠŠä»–ä»¬å½“ä½œæ ˆä¸Šçš„æ•°æ®å¯¹å¾…ï¼Œè®¤ä¸ºä»–ä»¬æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæ¶ˆé™¤åŒæ­¥é”çš„è¿‡ç¨‹ã€‚ é”ç²—åŒ–å¦‚æœä¸€ç³»åˆ—çš„è¿ç»­æ“ä½œéƒ½å¯¹åŒä¸€ä¸ªå¯¹è±¡åå¤åŠ é”å’Œè§£é”ï¼Œç”šè‡³åŠ é”æ“ä½œæ˜¯å‡ºç°åœ¨å¾ªç¯ä½“ä¸­çš„ï¼Œ å¯ä»¥æŠŠåŠ é”åŒæ­¥çš„èŒƒå›´æ‰©å±•åˆ°æ•´ä¸ªæ“ä½œåºåˆ—çš„å¤–éƒ¨ã€‚ è½»é‡çº§é”åœ¨æ²¡æœ‰å¤šçº¿ç¨‹ç«äº‰çš„å‰æä¸‹ï¼Œå‡å°‘ä¼ ç»Ÿçš„é‡é‡çº§é”ä½¿ç”¨æ“ä½œç³»ç»Ÿäº’æ–¥é‡äº§ç”Ÿçš„æ€§èƒ½æ¶ˆè€—ã€‚ Hotspotå¯¹è±¡å¤´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š1ï¼‰ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«è¿è¡Œçš„æ•°æ®ï¼Œå¦‚å“ˆå¸Œå—ï¼ŒGCåˆ†ä»£å¹´é¾„ã€‚è¿™éƒ¨åˆ†æ•°æ®çš„é•¿åº¦åœ¨32ä½å’Œ64ä½çš„Javaè™šæ‹Ÿæœºä¸­åˆ†åˆ«å ç”¨32ä¸ªæˆ–è€…64æ¯”ç‰¹ã€‚è¿™éƒ¨åˆ†æ˜¯å®ç°è½»é‡çº§é”å’Œåå‘é”çš„å…³é”®ã€‚2ï¼‰ç”¨äºå­˜å‚¨æŒ‡å‘æ–¹æ³•åŒºå¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆï¼Œå¦‚æœæ˜¯æ•°ç»„å¯¹è±¡ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªé¢å¤–çš„éƒ¨åˆ†å­˜å‚¨æ•°ç»„é•¿åº¦ã€‚ ç”±äºå¯¹è±¡å¤´ä¿¡æ¯æ˜¯ä¸å¯¹è±¡è‡ªèº«å®šä¹‰çš„æ•°æ®æ— å…³çš„é¢å¤–å­˜å‚¨æˆæœ¬ï¼Œè€ƒè™‘åˆ°Javaè™šæ‹Ÿæœºçš„ç©ºé—´ä½¿ç”¨æ•ˆç‡ï¼ŒMarkWordè¢«è®¾è®¡æˆä¸€ä¸ªéå›ºå®šçš„åŠ¨æ€æ•°æ®ç»“æ„ï¼Œä»¥ä¾¿åœ¨æå°çš„ç©ºé—´å†…å­˜å‚¨å°½é‡å¤šçš„ä¿¡æ¯ã€‚å®ƒä¼šæ ¹æ®å¯¹è±¡çš„çŠ¶æ€æœç”¨è‡ªå·±çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨32ä½çš„Hotspotè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡æœªè¢«é”å®šçš„çŠ¶æ€ä¸‹ï¼ŒMarkWordçš„32ä¸ªæ¯”ç‰¹ç©ºé—´æœ‰25ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨å¯¹è±¡çš„å“ˆå¸Œç ï¼Œ4ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨å¯¹è±¡åˆ†ä»£å¹´é¾„ï¼Œ2ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨é”æ ‡å¿—ä½ï¼Œè¿˜æœ‰1ä¸ªæ¯”ç‰¹è‚¡å®šä½0ï¼ˆè¡¨ç¤ºæœªè¿›å…¥åå‘æ¨¡å¼ï¼‰ã€‚å¯¹è±¡é™¤äº†è¿èƒŒé”å®šçš„æ­£å¸¸çŠ¶æ€å¤–ï¼Œè¿˜æœ‰è½»é‡çº§é”å®šã€é‡é‡çº§é”å®šã€GCæ ‡è®°ã€å¯åå‘ç­‰å‡ ç§çŠ¶æ€ã€‚ å¦‚æœä»£ç å³å°†è¿›å…¥åŒæ­¥å—çš„æ—¶å€™ï¼Œå¦‚æœæ­¤åŒæ­¥å¯¹è±¡æ²¡æœ‰è¢«é”å®šï¼ˆæ ‡å¿—ä½ä½01ï¼‰ï¼Œè™šæ‹Ÿæœºé¦–å…ˆå°†åœ¨å½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­å»ºç«‹ä¸€ä¸ªåä¸ºé”è®°å½•ï¼ˆLockRecordï¼‰çš„ç©ºé—´,ç”¨äºå­˜å‚¨é”å¯¹è±¡ç›®å‰çš„MarkWordçš„æ‹·è´ã€‚ ç„¶åè™šæ‹Ÿæœºå°†ä½¿ç”¨CASæ“ä½œå°è¯•æŠŠå¯¹è±¡çš„markwordæ›´æ–°ä¸ºæŒ‡å‘LockRecordçš„æŒ‡é’ˆã€‚å¦‚æœè¿™ä¸ªæ›´æ–°æˆåŠŸï¼Œé‚£ä¹ˆä»£è¡¨è¯¥çº¿ç¨‹æ‹¥æœ‰äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œå¹¶ä¸”å¯¹åƒMarkWordçš„é”æ ‡å¿—ä½å°†è½¬å˜ä¸º00ï¼Œè¡¨ç¤ºæ­¤å¯¹è±¡å¤„äºè½»é‡çº§é”å®šçŠ¶æ€ã€‚ å¦‚æœæ›´æ–°æ“ä½œå¤±è´¥ï¼Œæ„å‘³ç€è‡³å°‘å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸å½“å‰çº¿ç¨‹ç«äº‰è·å–è¯¥å¯¹è±¡çš„é”ã€‚è™šæ‹Ÿæœºé¦–å…ˆæ£€æŸ¥å¯¹è±¡çš„MarkWordæ˜¯å¦åªæƒ³å½“å‰çº¿ç¨‹çš„æ ˆå¸§ï¼Œå¦‚æœæ˜¯ï¼Œè¯´æ˜çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œé‚£ä¹ˆç›´æ¥è¿›å…¥åŒæ­¥å—ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™è¯´æ˜è¿™ä¸ªå¯¹è±¡å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŠ¢å äº†ã€‚å¦‚æœå‡ºç°ä¸¤æ¡ä»¥ä¸Šçš„çº¿ç¨‹äº‰ç”¨åŒä¸€ä¸ªé”çš„æƒ…å†µï¼Œé‚£ä¹ˆè½»é‡çº§é”ä¸å†æœ‰æ•ˆï¼Œå¿…é¡»è¦è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œé”æ ‡å¿—çš„çŠ¶æ€å˜ä¸º10ï¼Œ æ­¤æ—¶Markwordä¸­å­˜å‚¨çš„å°±æ˜¯æŒ‡å‘é‡é‡çº§é”çš„æŒ‡é’ˆï¼Œåé¢ç­‰å¾…é”çš„çº¿ç¨‹ä¹Ÿå¿…é¡»è¿›å…¥é˜»å¡çŠ¶æ€ã€‚ å®ƒçš„è§£é”è¿‡ç¨‹ä¹Ÿæ˜¯é€šè¿‡CASæ¥è¿›è¡Œçš„ï¼Œå¦‚æœå¯¹è±¡çš„MarkWordä»ç„¶æŒ‡å‘çº¿ç¨‹çš„é”è®°å½•ï¼Œé‚£å°±ç”¨CASæ“ä½œæŠŠå¯¹è±¡å½“å‰çš„MarkWordå’Œçº¿ç¨‹ä¸­å¤åˆ¶çš„DisplacedMarkWordæ›¿æ¢å›æ¥ï¼Œå¦‚æœæ›¿æ¢æˆåŠŸï¼Œè¯´æ˜è§£é”æˆåŠŸã€‚æ›¿æ¢å¤±è´¥ï¼Œè¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹å°è¯•è¿‡è·å–è¯¥é”ï¼Œéœ€è¦åœ¨é‡Šæ”¾é”çš„åŒæ—¶å”¤é†’è¢«æŒ‚èµ·çš„çº¿ç¨‹ã€‚ å¦‚æœæ²¡æœ‰ç«äº‰ï¼Œè½»é‡çº§é”èƒ½é€šè¿‡CASæ“ä½œæˆåŠŸé¿å…ä½¿ç”¨äº’æ–¥é‡çš„å¼€é”€ï¼›å¦‚æœå­˜åœ¨ç«äº‰ï¼Œé™¤äº†äº’æ–¥é‡æœ¬èº«å¼€é”€å¤–ï¼Œè¿˜é¢å¤–å‘ç”Ÿäº†CASæ“ä½œçš„å¼€é”€ï¼Œå› æ­¤æ€§èƒ½æ›´å·®ã€‚ åå‘é”ç”¨äºæ¶ˆé™¤æ•°æ®åœ¨æ— ç«äº‰æƒ…å†µä¸‹çš„åŒæ­¥ï¼Œè¿CASéƒ½å»æ‰äº†ï¼Œè¿›ä¸€æ­¥æé«˜ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚åå‘é”ä¼šåå‘äºç¬¬ä¸€ä¸ªè·å¾—å®ƒçš„çº¿ç¨‹ï¼Œå¦‚æœåœ¨æ¥ä¸‹æ¥çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é”ä¸€è‡´æ²¡æœ‰è¢«å…¶ä»–çš„çº¿ç¨‹è·å–ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹æ°¸è¿œä¸éœ€è¦å†åŒæ­¥ã€‚ å¦‚æœå½“å‰è™šæ‹Ÿæœºå¯ç”¨äº†åå‘é”ï¼Œé‚£ä¹ˆå½“é”å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«çº¿ç¨‹è·å–çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºå°†ä¼šæŠŠå¯¹è±¡å¤´ä¸­çš„æ ‡å¿—ä½è®¾ç½®ä¸º01ï¼ŒæŠŠåå‘æ¨¡å¼è®¾ç½®ä¸º1ï¼Œè¡¨ç¤ºè¿›å…¥åå‘æ¨¡å¼ã€‚åŒæ—¶ä½¿ç”¨CASæ“ä½œæŠŠè·å–åˆ°è¿™ä¸ªé”çš„çº¿ç¨‹IDè®°å½•åœ¨å¯¹è±¡çš„MarkWordä¸­ã€‚å¦‚æœCASæˆåŠŸï¼ŒæŒæœ‰åå‘é”çš„çº¿ç¨‹ä»¥åæ¯æ¬¡è¿›å…¥è¿™ä¸ªé”ç›¸å…³çš„åŒæ­¥å—æ˜¯ï¼Œè™šæ‹Ÿæœºéƒ½å¯ä»¥ä¸å†è¿›è¡Œä»»ä½•åŒæ­¥æ“ä½œã€‚ ä¸€æ—¦å‡ºç°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°è¯•è·å–è¿™ä¸ªé”çš„æƒ…å†µï¼Œåå‘æ¨¡å¼é©¬ä¸Šå®£å‘Šç»“æŸã€‚æ ¹æ®é”å¯¹è±¡ç›®å‰æ˜¯å¦å¤„äºè¢«é”å®šçš„çŠ¶æ€å†³å®šæ˜¯å¦æ’¤é”€åå‘ï¼ˆæŠŠåå‘æ¨¡å¼è®¾ç½®ä¸º0ï¼‰ï¼Œæ’¤é”€åæ ‡å¿—ä½æ¢å¤åˆ°ä¸ºé”å®šæˆ–è€…è½»é‡çº§é”å®šçš„è½§è¾Šå°ï¼Œåç»­çš„åŒæ­¥æ“ä½œæŒ‰ç…§è½»é‡çº§é”æ‰§è¡Œã€‚ å½“è¿›å…¥åå‘çŠ¶æ€æ˜¯ï¼ŒMarkWordå¤§éƒ¨åˆ†çš„ç©ºé—´éƒ½ç”¨äºå­˜å‚¨æŒæœ‰é”çš„çº¿ç¨‹IDï¼Œè¿™éƒ¨åˆ†ç©ºé—´å ç”¨äº†åŸæœ‰å­˜å‚¨å¯¹è±¡Hashç çš„ä½ç½®ã€‚å½“ä¸€ä¸ªå¯¹è±¡å·²ç»è®¡ç®—è¿‡ä¸€æ¬¡ä¸€è‡´æ€§å“ˆå¸Œç åï¼Œå®ƒå°±å†ä¹Ÿæ— æ³•è¿›å…¥åå‘é”çŠ¶æ€ã€‚å½“ä¸€ä¸ªå¯¹è±¡æ­£åœ¨å¤„äºåå‘é”çŠ¶æ€æ—¶ï¼Œå—åˆ°è®¡ç®—hashç çš„è¯·æ±‚æ—¶ï¼Œå®ƒçš„åå‘çŠ¶æ€ä¼šè¢«ç«‹å³æ’¤é”€ï¼Œå¹¶ä¸”é”ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚ åœ¨é‡é‡çº§é”çš„å®ç°ä¸­ï¼Œå¯¹è±¡å¤´æŒ‡å‘äº†é‡é‡çº§é”çš„ä½ç½®ï¼Œä»£è¡¨é‡é‡çº§é”çš„ObjectMonitorç±»ä¸­æœ‰å­—æ®µå¯ä»¥è®°å½•éåŠ é”çŠ¶æ€ä¸‹çš„MarkWorkï¼Œå…¶ä¸­è‡ªç„¶å¯ä»¥å­˜å‚¨åŸæ¥çš„å“ˆå¸Œç ã€‚ åå‘é”å¯ä»¥æé«˜å¸¦æœ‰åŒæ­¥ä½†æ— ç«äº‰çš„ç¨‹åºæ€§èƒ½ï¼Œä½†å¦‚æœç¨‹åºä¸­å¤§å¤šæ•°çš„é”éƒ½æ€»æ˜¯è¢«å¤šä¸ªä¸åŒçš„çº¿ç¨‹è®¿é—®ï¼Œé‚£åå‘é”å°±æ˜¯å¤šä½™çš„ã€‚","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[]},{"title":"IO-2","slug":"IO-2","date":"2020-06-07T12:37:05.000Z","updated":"2020-06-07T14:36:42.472Z","comments":true,"path":"2020/06/07/IO-2/","link":"","permalink":"https://pickonebyone.github.io/2020/06/07/IO-2/","excerpt":"","text":"å¤šè·¯å¤ç”¨å™¨ï¼šselect/poll/epoll man 2 select man 2 poll 2.é“¾è·¯å±‚ï¼Œ3ç½‘ç»œå±‚ï¼Œ4ä¼ è¾“å±‚å°å­˜ã‚è®°å¿†","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"}],"tags":[]},{"title":"åˆ†å¸ƒå¼é”","slug":"åˆ†å¸ƒå¼é”","date":"2020-06-06T01:10:02.000Z","updated":"2020-06-06T03:06:00.089Z","comments":true,"path":"2020/06/06/åˆ†å¸ƒå¼é”/","link":"","permalink":"https://pickonebyone.github.io/2020/06/06/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/","excerpt":"","text":"1) å¯é‡å…¥é”CAS2ï¼‰åŒæ­¥ï¼š3ï¼‰ä¿¡å·é‡å…¬å¹³é”ã€éå…¬å¹³é”ã€è¯»å†™é”ã€è‡ªæ—‹é”åˆ†å¸ƒå¼é”ï¼Œ æ‚²è§‚é”ã€ä¹è§‚é”, é”ç»­ç§Ÿ","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"}],"tags":[]},{"title":"å­—èŠ‚ç æ‰§è¡Œå¼•æ“","slug":"å­—èŠ‚ç æ‰§è¡Œå¼•æ“","date":"2020-06-04T22:56:36.000Z","updated":"2020-06-07T02:07:51.747Z","comments":true,"path":"2020/06/05/å­—èŠ‚ç æ‰§è¡Œå¼•æ“/","link":"","permalink":"https://pickonebyone.github.io/2020/06/05/%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E/","excerpt":"","text":"å½“ä»£ç è¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶å­—èŠ‚ç ï¼Œç”±ClassloaderåŠ è½½åˆ°å†…å­˜ï¼Œç»è¿‡åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£é‡Šåå°†æ•°æ®è½¬åŒ–ä¸ºJVMå¯ä»¥æ¥å—çš„æ ¼å¼å­˜å‚¨åˆ°æ–¹æ³•åŒºï¼Œå¹¶åœ¨å †å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªClasså¯¹è±¡ï¼Œä½œä¸ºå¤–éƒ¨è®¿é—®çš„å…¥å£ã€‚æ¥ä¸‹æ¥å°±ç”±å­—èŠ‚ç æ‰§è¡Œå¼•æ“æ¥è§£é‡Šæ‰§è¡Œä»£ç ã€‚ ã€ŠJavaã€‹è™šæ‹Ÿæœºè§„èŒƒä¸­è§„å®šäº†Javaè™šæ‹Ÿæœºå­—èŠ‚ç æ‰§è¡Œå¼•æ“çš„æ¦‚å¿µæ¨¡å‹ï¼Œè¾“å…¥å­—èŠ‚ç äºŒè¿›åˆ¶æµï¼Œè¾“å‡ºæ‰§è¡Œç»“æœã€‚ åœ¨ä¸åŒçš„è™šæ‹Ÿæœºå®ç°ä¸­ï¼Œæ‰§è¡Œå¼•æ“åœ¨æ‰§è¡Œå­—èŠ‚ç çš„æ—¶å€™ä¼šæœ‰ä¸¤ç§ï¼š è§£é‡Šæ‰§è¡Œï¼ˆSun Classic è™šæ‹Ÿæœºï¼‰ ç¼–è¯‘æ‰§è¡Œï¼ˆJrockitï¼‰ ä¸¤ç§å…¼å¤‡ (HotSpot) è¿è¡Œæ—¶æ ˆå¸§ç»“æ„æ ˆå¸§æ˜¯ç”¨äºæ”¯æŒè™šæ‹Ÿæœºæ–¹æ³•è¿›è¡Œè°ƒç”¨å’Œæ‰§è¡Œçš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨å¼€å§‹åˆ°æ‰§è¡Œç»“æŸçš„è¿‡ç¨‹ï¼Œéƒ½å¯¹åº”ä¸€ä¸ªæ ˆå¸§ä»è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚ æ ˆå¸§å­˜å‚¨äº†æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€æ–¹æ³•è¿”å›åœ°å€å’Œä¸€äº›é¢å¤–çš„é™„åŠ ä¿¡æ¯ã€‚ æ ˆå¸§ä¸­éœ€è¦å¤šå¤§çš„å±€éƒ¨å˜é‡è¡¨ã€å¤šæ·±çš„æ“ä½œæ•°æ ˆåœ¨ç¼–è¯‘Javaçš„æ—¶å€™å°±å·²ç»è®¡ç®—å‡ºæ¥å­˜æ”¾åœ¨æ–¹æ³•è¡¨çš„Codeå±æ€§ä¸­ã€‚ å±€éƒ¨å˜é‡è¡¨ç”¨äºå­˜æ”¾æ–¹æ³•å‚æ•°å’Œæ–¹æ³•å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡ã€‚ åœ¨ä»£ç è¢«ç¼–è¯‘æˆClassæ–‡ä»¶æ—¶ï¼Œåœ¨æ–¹æ³•çš„Codeå±æ€§ä¸­max_localsæ•°æ®é¡¹ä¸­ç¡®å®šäº†è¯¥æ–¹æ³•æ‰€éœ€è¦åˆ†é…çš„å±€éƒ¨å˜é‡è¡¨çš„æœ€å¤§å®¹é‡ã€‚å±€éƒ¨å˜é‡è¡¨çš„å®¹é‡ä»¥å˜é‡æ§½ï¼ˆVariable Slotï¼‰ä¸ºæœ€å°å•ä½ï¼Œæ¯ä¸ªå˜é‡æ§½åº”è¯¥å¯ä»¥å­˜æ”¾ä¸€ä¸ªbooleanã€byteã€charã€shortã€intã€floatã€referenceã€returnAddressè¿™8ç§ä¸è¶…è¿‡32ä½æ•°æ®ç±»å‹ï¼ˆå¯¹äºè¶…è¿‡32ä½çš„longå’Œdoubleï¼Œåˆ™ä½¿ç”¨ä¸¤ä¸ª32ä½çš„å˜é‡æ§½ï¼‰ã€‚ å¼•ç”¨ç±»å‹ï¼š é€šè¿‡å¼•ç”¨å¯ä»¥æ‰¾åˆ°è¿™ä¸ªå¯¹è±¡åœ¨å †ä¸­çš„æ•°æ®å­˜æ”¾çš„èµ·å§‹åœ°å€æˆ–è€…ç´¢å¼•ï¼› æ‰¾åˆ°å¯¹è±¡æ‰€å±ç±»å‹åœ¨æ–¹æ³•åŒºä¸­çš„å­˜å‚¨ç±»å‹ï¼› returnAddressæ˜¯ä¸ºå­—èŠ‚ç æŒ‡ä»¤jsrã€jsr_w å’ŒretæœåŠ¡ï¼ŒæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼Œä¸€äº›jvmä½¿ç”¨è¿™å‡ æ¡æŒ‡ä»¤æ¥å®ç°å¼‚å¸¸å¤„ç†æ—¶çš„è·³è½¬ã€‚ç°åœ¨å…¨éƒ¨æ”¹ä¸ºé‡‡ç”¨å¼‚å¸¸è¡¨æ¥ä»£æ›¿ã€‚ å½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºä¼šä½¿ç”¨å±€éƒ¨å˜é‡è¡¨æ¥å®Œæˆå‚æ•°å€¼åˆ°å‚æ•°å˜é‡åˆ—è¡¨çš„ä¼ é€’è¿‡ç¨‹ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•å±€éƒ¨å˜é‡è¡¨ç¬¬0ä½ç´¢å¼•çš„å˜é‡æ§½å­˜æ”¾çš„æ˜¯thisã€‚ ä»¥æ°å½“çš„å˜é‡ä½œç”¨åŸŸæ¥æ§åˆ¶å˜é‡çš„å›æ”¶æ—¶é—´æ‰æ˜¯æœ€ä¼˜é›…çš„è§£å†³æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å®Œåå°±å°†å…¶å¼•ç”¨èµ‹äºˆnullï¼Œ å› ä¸ºè¿™ä»…ä»…æ˜¯åŸºäºè™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹å±‚é¢ä½œå‡ºçš„ä¼˜åŒ–ï¼Œè™šæ‹Ÿæœºçš„å…·ä½“å®ç°ä¸åŒï¼Œè§£é‡Šæ‰§è¡Œä¸ç¼–è¯‘æ‰§è¡Œç»“æœéƒ½ä¸åŒã€‚ æ“ä½œæ•°æ ˆä¸€ä¸ªåå…¥å…ˆå‡ºçš„æ ˆï¼ŒåŒå±€éƒ¨å˜é‡è¡¨ä¸€æ ·ï¼Œæ“ä½œæ•°æ ˆçš„æœ€å¤§æ·±åº¦ä¹Ÿåœ¨ç¼–è¯‘çš„æ—¶å€™å°±è¢«å†™å…¥åˆ°Codeå±æ€§çš„max_stacksæ•°æ®é¡¹ä¸­ã€‚32ä½æ•°æ®ç±»å‹æ‰€å ç”¨çš„æ ˆå®¹é‡æ˜¯1ï¼Œ 64ä½æ•°æ®ç±»å‹æ‰€å çš„æ ˆå®¹é‡æ˜¯2. é€šè¿‡å°†æ“ä½œæ•°å…¥æ ˆå‡ºæ ˆæ¥è¿›è¡Œç®—æœ¯è¿ç®—ï¼›é€šè¿‡æ“ä½œæ•°æ ˆå°†æ–¹æ³•çš„å‚æ•°è¿›è¡Œä¼ é€’ï¼› åŠ¨æ€è¿æ¥æ¯ä¸ªæ ˆå¸§éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆå¸§æ‰€å±æ–¹æ³•çš„å¼•ç”¨ï¼ŒæŒæœ‰è¿™ä¸ªå¼•ç”¨æ—¶ä¸ºäº†æ”¯æŒæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­çš„åŠ¨æ€è¿æ¥ã€‚ Classæ–‡ä»¶çš„å¸¸é‡æ± ä¸­å­˜æœ‰å¤§é‡çš„ç¬¦å·å¼•ç”¨ï¼Œå­—èŠ‚ç ä¸­çš„æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ä»¥å¸¸é‡æ± æŒ‡å‘æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ä½œä¸ºå‚æ•°ã€‚ è¿™äº›ç¬¦å·å¼•ç”¨ä¸€éƒ¨åˆ†åœ¨ç±»åŠ è½½é˜¶æ®µæˆ–è€…ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¼šè¢«è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼›å¦ä¸€éƒ¨åˆ†åœ¨æ¯æ¬¡è¿è¡ŒæœŸé—´éƒ½è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†ç§°ä¸ºåŠ¨æ€è¿æ¥ï¼› æ–¹æ³•è¿”å›åœ°å€å½“ä¸€ä¸ªæ–¹æ³•é€€å‡ºä»¥åï¼Œå¿…é¡»è¿”å›åˆ°æœ€åˆæ–¹æ³•è¢«è°ƒç”¨æ—¶çš„ä½ç½®ï¼Œç¨‹åºæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œæ–¹æ³•è¿”å›æ—¶å¯èƒ½éœ€è¦åœ¨æ ˆå¸§ä¸­ä¿å­˜ä¸€äº›ä¿¡æ¯ï¼Œæ¥å¸®åŠ©æ¢å¤ä¸»è°ƒæ–¹æ³•çš„æ‰§è¡ŒçŠ¶æ€ã€‚ ä¸€ä¸ªæ–¹æ³•çš„é€€å‡ºæœ‰ä¸¤ç§æ–¹å¼ï¼šç¬¬ä¸€ç§æ˜¯æ‰§è¡Œå¼•æ“é‡åˆ°æ–¹æ³•è¿”å›çš„å­—èŠ‚ç æŒ‡ä»¤ï¼›ä¸»è°ƒæ–¹æ³•çš„PCè®¡æ•°å™¨çš„å€¼å°±å¯ä»¥ä½œä¸ºè¿”å›åœ°å€ã€‚å¦ä¸€ç§æ˜¯é‡åˆ°äº†å¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨æœ¬æ–¹æ³•çš„å¼‚å¸¸è¡¨ä¸­æ²¡æœ‰æœç´¢åˆ°åŒ¹é…çš„å¼‚å¸¸å¤„ç†å™¨å¯¼è‡´æ–¹æ³•é€€å‡ºï¼› æ–¹æ³•è°ƒç”¨æ–¹æ³•è°ƒç”¨é˜¶æ®µçš„ä»»åŠ¡æ˜¯ç¡®è®¤è¢«è°ƒç”¨æ–¹æ³•çš„ç‰ˆæœ¬ã€‚Classæ–‡ä»¶çš„ç¼–è¯‘è¿‡ç¨‹ä¸åŒ…å«ä¼ ç»Ÿç¨‹åºè¯­è¨€çš„è¿æ¥æ­¥éª¤ï¼Œä¸€åˆ‡æ–¹æ³•è°ƒç”¨åœ¨Classæ–‡ä»¶é‡Œé¢å­˜å‚¨çš„éƒ½æ˜¯ç¬¦å·å¼•ç”¨ï¼Œè€Œä¸æ˜¯æ–¹æ³•åœ¨å®é™…è¿è¡Œæ—¶å†…å­˜å¸ƒå±€ä¸­çš„å…¥å£åœ°å€ã€‚å› æ­¤ä¸€äº›è°ƒç”¨éœ€è¦åœ¨åŠ è½½æœŸé—´ï¼Œç”šè‡³åˆ°è¿è¡ŒæœŸé—´æ‰èƒ½ç¡®å®šç›®æ ‡æ–¹æ³•çš„ç›´æ¥å¼•ç”¨ã€‚ è§£æåœ¨ç±»åŠ è½½çš„è§£æé˜¶æ®µï¼Œå°†é™æ€æ–¹æ³•å’Œç§æœ‰æ–¹æ³•å¯¹åº”çš„ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ã€‚å› ä¸ºé™æ€æ–¹æ³•ä¸ç±»å…³è”ï¼Œç§æœ‰æ–¹æ³•ä¸å¯èƒ½è¢«ç»§æ‰¿æˆ–è€…é‡å†™ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå³å¯ç¡®å®šã€‚ å­—èŠ‚ç æŒ‡ä»¤é›†è®¾è®¡äº†ä¸åŒçš„æŒ‡ä»¤è°ƒç”¨ä¸åŒç±»å‹çš„æ–¹æ³•ï¼š invokestatic, è°ƒç”¨é™æ€æ–¹æ³• invokespecial, è°ƒç”¨å®ä¾‹æ„é€ å™¨æ–¹æ³•ï¼Œç§æœ‰æ–¹æ³•ï¼Œçˆ¶ç±»ä¸­çš„æ–¹æ³•ã€‚ invokevirtual, ç”¨äºè°ƒç”¨æ‰€æœ‰çš„è™šæ–¹æ³•ï¼ˆè¢«finalä¿®é¥°çš„æ–¹æ³•ï¼‰ invokeinterface,ç”¨äºè°ƒç”¨æ¥å£æ–¹æ³•ï¼Œä¼šåœ¨è¿è¡Œæ—¶å†ç¡®å®šä¸€ä¸ªå®ç°æ¥å£çš„å¯¹è±¡ invokedynamic, åœ¨è¿è¡Œæ—¶åŠ¨æ€è§£æå‡ºè°ƒç”¨ç‚¹é™å®šç¬¦å¼•ç”¨çš„æ–¹æ³•ã€‚ å‰å››æ¡æŒ‡ä»¤ï¼Œåˆ†æ´¾é€»è¾‘éƒ½å›ºåŒ–åœ¨Javaè™šæ‹Ÿæœºå†…éƒ¨ï¼ŒinvokedynamicæŒ‡ä»¤çš„åˆ†æ´¾é€»è¾‘æ˜¯ç”±ç”¨æˆ·è®¾å®šçš„å¼•å¯¼æ–¹æ³•æ¥å†³å®šçš„ã€‚ åªè¦èƒ½è¢«invokestatic å’Œ invokespecialæŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ï¼Œéƒ½å¯ä»¥åœ¨è§£æé˜¶æ®µç¡®å®šå”¯ä¸€çš„è°ƒç”¨ç‰ˆæœ¬ã€‚Javaè¯­è¨€ä¸­ç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„æ–¹æ³•æœ‰é™æ€æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€ç§æœ‰æ–¹æ³•ã€çˆ¶ç±»æ–¹æ³•å’Œè¢«finalä¿®é¥°çš„æ–¹æ³•,è¿™äº”ç§æ–¹æ³•è¢«ç§°ä¸ºéè™šæ–¹æ³•ï¼Œå…¶ä»–çš„è¢«ç§°ä¸ºè™šæ–¹æ³•ã€‚ è§£æè°ƒç”¨æ˜¯ä¸€ä¸ªé™æ€çš„è¿‡ç¨‹ï¼Œ åœ¨ç±»åŠ è½½çš„è§£æé˜¶æ®µå°±æŠŠæ¶‰åŠçš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºæ˜ç¡®çš„ç›´æ¥å¼•ç”¨ï¼Œä¸å¿…å»¶è¿Ÿåˆ°è¿è¡ŒæœŸå†å»å®Œæˆã€‚ åˆ†æ´¾ é™æ€åˆ†æ´¾æ‰€æœ‰ä¾èµ–é™æ€ç±»å‹æ¥å†³å®šæ–¹æ³•æ‰§è¡Œç‰ˆæœ¬çš„åˆ†æ´¾å«åšé™æ€åˆ†æ´¾ã€‚é™æ€åˆ†æ´¾çš„å…¸å‹åº”ç”¨è¡¨ç°æ˜¯æ–¹æ³•é‡è½½ã€‚æ–¹æ³•é‡è½½å‘ç”Ÿåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç§°ç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ä¸åŒã€‚ åŠ¨æ€åˆ†æ´¾ä¸å®ç°åœ¨è¿è¡ŒæœŸæ ¹æ®æ—¶æœºç±»å‹ç¡®å®šæ–¹æ³•æ‰§è¡Œç‰ˆæœ¬çš„åˆ†æ´¾è¿‡ç¨‹å«åŠ¨æ€åˆ†æ´¾ï¼Œå®ƒå°±æ˜¯Javaè¯­è¨€ä¸­æ–¹æ³•é‡å†™çš„æœ¬è´¨ã€‚å¤šæ€çš„æ ¹æºåœ¨äºè™šæ–¹æ³•è°ƒç”¨æŒ‡ä»¤invokevirtualçš„æ‰§è¡Œé€»è¾‘ï¼Œå› æ­¤å¤šæ€åªå¯¹æ–¹æ³•æœ‰æ•ˆï¼Œå¯¹å­—æ®µæ— æ•ˆï¼ˆå­—æ®µæ°¸è¿œä¸å‚ä¸å¤šæ€ï¼‰ã€‚ åŠ¨æ€åˆ†æ´¾æ˜¯æ‰§è¡Œéå¸¸é¢‘ç¹çš„åŠ¨ä½œï¼Œè€Œä¸”åŠ¨æ€åˆ†æ´¾çš„æ–¹æ³•ç‰ˆæœ¬é€‰æ‹©è¿‡ç¨‹éœ€è¦è¿è¡Œæ—¶åœ¨æ¥å—ç€ç±»å‹æ–¹æ³•å…ƒæ•°æ®ä¸­æœç´¢åˆé€‚çš„ç›®æ ‡æ–¹æ³•ï¼Œ å•åˆ†æ´¾å’Œå¤šåˆ†æ´¾æ–¹æ³•çš„æ¥æ”¶è€…ï¼ˆè¦è¢«æ‰§è¡Œçš„æ–¹æ³•çš„æ‰€æœ‰è€…å«æ¥æ”¶è€…ï¼‰ä¸å‚æ•°ç»Ÿç§°ä¸ºæ–¹æ³•çš„å®—é‡ã€‚å•åˆ†æ´¾æ˜¯æ ¹æ®ä¸€ä¸ªå®—é‡å¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œé€‰æ‹©ï¼›å¤šåˆ†æ´¾æ˜¯æ ¹æ®å¤šä¸ªå®—é‡å¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œé€‰æ‹©ï¼› Javaä¸­çš„è§£é‡Šæ‰§è¡Œä¸ç¼–è¯‘æ‰§è¡Œ åœ¨æ‰§è¡Œå‰å…ˆå¯¹ç¨‹åºæºç è¿›è¡Œè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æå¤„ç†ï¼ŒæŠŠæºç è½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘ã€‚ å¯¹äºC/C++æ¥è¯´ï¼Œè¯æ³•ã€è¯­æ³•åˆ†æä»¥ååˆ°åé¢çš„ä¼˜åŒ–å™¨å’Œç›®æ ‡ä»£ç ç”Ÿæˆå™¨éƒ½å¯ä»¥é€‰æ‹©ç‹¬ç«‹äºæ‰§è¡Œå¼•æ“ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´æœ‰æ„ä¹‰çš„ç¼–è¯‘å™¨å»å®ç°ï¼Œè¿™ç±»å°±æ˜¯ç¼–è¯‘æ‰§è¡Œã€‚ å¯¹äºJavaæ¥è¯´ï¼Œjavacç¼–è¯‘å™¨å®Œæˆäº†ç¨‹åºä»£ç ç»è¿‡è¯æ³•åˆ†æã€è¯­æ³•åˆ†æåˆ°æŠ½è±¡è¯­æ³•æ ‘ï¼Œå†ä¾¿åˆ©è¯­æ³•æ ‘ç”Ÿæˆçº¿æ€§çš„å­—èŠ‚ç æŒ‡ä»¤æµçš„è¿‡ç¨‹ã€‚ åŸºäºæ ˆçš„æŒ‡ä»¤é›†ä¸ç»™äºˆå¯„å­˜å™¨çš„æŒ‡ä»¤é›† åŸºäºæ ˆçš„æŒ‡ä»¤é›†é›¶åœ°å€æŒ‡ä»¤ï¼Œä¾èµ–æ“ä½œæ•°æ ˆè¿›è¡Œå·¥ä½œï¼Œä¼˜ç‚¹æ˜¯å¯ç§»æ¤æ€§é«˜ï¼Œä¸ä¸å…·ä½“çš„ç¡¬ä»¶ç»‘å®šã€‚ç¼–è¯‘å™¨å®ç°ç®€å•ã€‚ç¼ºç‚¹æ˜¯é€Ÿåº¦æ…¢ã€‚ ç»™äºˆå¯„å­˜å™¨çš„æŒ‡ä»¤é›†è€Œåœ°å€æŒ‡ä»¤é›†ï¼Œç‰©ç†ç¡¬ä»¶ç›´æ¥æ”¯æŒçš„æŒ‡ä»¤é›†æ¶æ„ï¼Œä¾èµ–å¯„å­˜å™¨å·¥ä½œã€‚ è™šæ‹Ÿæœºæœ€ç»ˆä¼šå¯¹æ‰§è¡Œè¿‡ç¨‹ä½œå‡ºä¸€ç³»åˆ—ä¼˜åŒ–æ¥æé«˜æ€§èƒ½ï¼Œ å®é™…çš„æƒ…å†µä¼šå’Œç›–é¢æ¨¡å‹å·®è·éå¸¸å¤§ï¼Œå·®è·äº§ç”Ÿçš„æ ¹æœ¬åŸå› æ˜¯è™šæ‹Ÿæœºä¸­è§£æèµ·å’Œå³æ—¶ç¼–è¯‘èµ·éƒ½ä¼šå¯¹è¾“å…¥çš„å­—èŠ‚ç è¿›è¡Œä¼˜åŒ–ï¼Œå³ä½¿è§£é‡Šå…¶ä¸­ä¹Ÿä¸æ˜¯æŒ‰ç…§å­—èŠ‚ç æŒ‡ä»¤å»é€æ¡æ‰§è¡Œçš„ã€‚","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"å­—èŠ‚ç æ‰§è¡Œå¼•æ“","slug":"å­—èŠ‚ç æ‰§è¡Œå¼•æ“","permalink":"https://pickonebyone.github.io/tags/%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E/"}]},{"title":"etcd","slug":"etcd","date":"2020-06-04T13:34:15.000Z","updated":"2020-06-04T14:30:39.437Z","comments":true,"path":"2020/06/04/etcd/","link":"","permalink":"https://pickonebyone.github.io/2020/06/04/etcd/","excerpt":"","text":"åŸ¹å…»è‰¯å¥½çš„ç”Ÿæ´»ã€å­¦ä¹ ã€å·¥ä½œä¹ æƒ¯ã€‚ ç›¸å…³æ¦‚å¿µï¼š Etcd coreOS RancherOS ä¸»æœºè§„åˆ’ï¼š è¦æ±‚ï¼šä¸»æœºåç§°è§„èŒƒã€IPæ®µç›¸é‚»ã€å¤‡æ³¨æ˜ç¡® ä¸»æœºåºå· åç§° å†…ç½‘IP å¤–ç½‘IP CPUæ ¸æ•° å†…å­˜å¤§å° å¤‡æ³¨ 01 etcd-node-master-01 10.0.0.1 å¤–ç½‘IP 2 4G å¤‡æ³¨ 02 etcd-node-slave-02 10.0.0.2 å¤–ç½‘IP 2 4G å¤‡æ³¨ 03 etcd-node-slave-03 10.0.0.3 å¤–ç½‘IP 2 4G å¤‡æ³¨ è®¾ç½®ä¸»æœºåç§°123hostnamectl set-hostname etcd-node-master-01hostnamectl set-hostname etcd-node-slave-02hostnamectl set-hostname etcd-node-slave-03 ä¿®æ”¹å†…ç½‘IPåœ°å€ï¼š1vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33 é‡å¯ç½‘å…³ï¼š1systemctl restart network é˜²ç«å¢™è®¾ç½®ï¼š12firewall-cmd --zone&#x3D;public --add-port&#x3D;2379&#x2F;tcp --permanentfirewall-cmd --reload YUMå®‰è£…ï¼š1yum install -y etcd éªŒè¯&amp;æŸ¥çœ‹ç‰ˆæœ¬12rpm -qa etcdetcdctl -v ä¿®æ”¹é…ç½®ï¼šåˆ†åˆ«ä¿®æ”¹3ä¸ªä¸»æœºçš„é…ç½®æ–‡ä»¶/etc/etcd/etcd.conf æ³¨æ„ï¼ä¿®æ”¹å‰ä¸€å®šè¦å¤‡ä»½ï¼ cp /etc/etcd/etcd.conf /etc/etcd/etcd.conf.bak 12345678ETCD_LISTEN_PEER_URLS&#x3D;&quot;http:&#x2F;&#x2F;10.0.0.1:2380&quot;ETCD_LISTEN_CLIENT_URLS&#x3D;&quot;http:&#x2F;&#x2F;10.0.0.1:2379,http:&#x2F;&#x2F;127.0.0.1:2379&quot;ETCD_NAME&#x3D;MasterETCD_INITIAL_ADVERTISE_PEER_URLS&#x3D;&quot;http:&#x2F;&#x2F;10.0.0.1:2380&quot;ETCD_ADVERTISE_CLIENT_URLS&#x3D;&quot;http:&#x2F;&#x2F;10.0.0.1:2379&quot;ETCD_INITIAL_CLUSTER&#x3D;â€œMaster&#x3D;http:&#x2F;&#x2F;10.0.0.1:2380,Node02&#x3D;http:&#x2F;&#x2F;10.0.0.2:2380,Node03&#x3D;http:&#x2F;&#x2F;10.0.0.3:2380&quot;ETCD_INITIAL_CLUSTER_TOKEN&#x3D;&quot;etcd-cluster&quot;ETCD_INITIAL_CLUSTER_STATE&#x3D;&quot;new&quot; é‡å¯etcdæœåŠ¡1systemctl restart etcd æŸ¥çœ‹Etcdé›†ç¾¤1etcdctl member list Etcd æµ‹è¯•12etcdctl set name testetcdctl get name æ‰©å±•æ¦‚å¿µ123456789101112131415161718è´Ÿè½½å‡è¡¡ï¼šåŒºåŸŸè´Ÿè½½å‡è¡¡ï¼šDNSç¡¬ä»¶è´Ÿè½½å‡è¡¡ï¼šF5&#x2F;A10è½¯ä»¶è´Ÿè½½å‡è¡¡ï¼šNginx&#x2F;LVS&#x2F;HAProxyç£ç›˜é˜µåˆ—ï¼šraidé˜²ç«å¢™æŠ€æœ¯ï¼šç¡¬ä»¶&#x2F;è½¯ä»¶NTPï¼ˆNetwork Time Protocalï¼‰æ˜¯ç”¨æ¥ä½¿è®¡ç®—æœºæ—¶é—´åŒæ­¥åŒ–çš„ä¸€ç§åè®®ï¼Œå®ƒå¯ä»¥ä½¿è®¡ç®—æœºå¯¹å…¶æœåŠ¡å™¨æˆ–æ—¶é’Ÿæºï¼ˆå¦‚çŸ³è‹±é’Ÿï¼ŒGPSç­‰ç­‰)åšåŒæ­¥åŒ–tongbuwangã€‚Radisçš„åˆ†å¸ƒå¼ç¼“å­˜;mysqlä¸»ä»ã€è¯»å†™åˆ†ç¦»ã€é«˜å¯ç”¨ã€åˆ†åº“åˆ†è¡¨ï¼›MHAå¤‡ä»½elk ci&#x2F;cdcentos8 &#x2F; podman","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Etcd","slug":"JavaæŠ€æœ¯æ ˆ/Etcd","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Etcd/"}],"tags":[{"name":"Etcd","slug":"Etcd","permalink":"https://pickonebyone.github.io/tags/Etcd/"}]},{"title":"JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸ","slug":"JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸ","date":"2020-06-02T13:01:41.000Z","updated":"2020-06-04T00:26:33.272Z","comments":true,"path":"2020/06/02/JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸ/","link":"","permalink":"https://pickonebyone.github.io/2020/06/02/JVM%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/","excerpt":"","text":"å½“ä¸€ä¸ªç±»åŠ è½½åˆ°å†…å­˜åï¼ŒJVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸéƒ½éœ€è¦å­˜å‚¨ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ 1ï¼‰ç±»çš„æ ¼å¼ä¿¡æ¯ã€ä¸»æ¬¡ç‰ˆæœ¬å·ã€ å¸¸é‡æ± ã€å­—æ®µã€æ–¹æ³•ã€å±æ€§ä¿¡æ¯éœ€è¦å­˜å‚¨ï¼Œè¿™éƒ¨åˆ†æ•°æ®éœ€è¦æ¯ä¸ªçº¿ç¨‹å…±äº«ï¼› å½“ç±»åŠ è½½å™¨å°†é™æ€çš„äºŒè¿›åˆ¶å­—èŠ‚ç ä»ç±»æ–‡ä»¶åŠ è½½åˆ°å†…å­˜åï¼Œå¯¹å†…å®¹è¿›è¡ŒéªŒè¯ã€è§£æè½¬æ¢ä¸ºç¬¦åˆJVMå­˜å‚¨çš„æ•°æ®æ ¼å¼ã€‚ 2ï¼‰ç”Ÿæˆçš„Classç±»å¯¹è±¡å’Œä»£ç è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡å’Œæ•°ç»„éœ€è¦å­˜å‚¨ï¼› é€šè¿‡loadingã€linkingã€initializingåç”Ÿæˆçš„Classå¯¹è±¡ï¼Œåšä¸ºç¨‹åºè®¿é—®è¿™ä¸ªç±»çš„å…¥å£ï¼Œ ä»¥åŠç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„å¯¹è±¡å’Œæ•°ç»„ï¼Œéƒ½æœ‰å¯èƒ½ä¼šè¢«ä¸åŒçš„çº¿ç¨‹å¼•ç”¨å’Œè®¿é—®ï¼Œå› æ­¤è¿™éƒ¨åˆ†åŒºåŸŸçš„æ•°æ®ä¹Ÿéœ€è¦çº¿ç¨‹å…±äº«ã€‚3ï¼‰æ¯ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ•°æ®éœ€è¦å­˜å‚¨å’Œæ¯ä¸ªçº¿ç¨‹ä¸‹æ–¹æ³•çš„æ–¹æ³•æ•°æ®éœ€è¦å­˜å‚¨ï¼› å½“çº¿ç¨‹åˆ›å»ºçš„æ—¶å€™éœ€è¦æœ‰ä¸€ä¸ªçº¿ç¨‹æ ˆæ¥å­˜æ”¾çº¿ç¨‹ä¿¡æ¯ï¼Œä»¥åŠPCè®¡æ•°å™¨è®°å½•å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„ä»£ç è¡Œå·ã€‚ è¿˜æœ‰JVMæœ¬åœ°çº¿ç¨‹æ‰§è¡Œæ—¶éœ€è¦çš„æœ¬åœ°çº¿ç¨‹æ ˆå­˜æ”¾æœ¬åœ°çº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µã€‚ ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹è§„å®šäº†å¦‚ä¸‹å†…å­˜åŒºåŸŸæ¥å­˜å‚¨æ•°æ® å…±äº«åŒºåŸŸ å †åŒº æ–¹æ³•åŒº è¿è¡Œæ—¶å¸¸é‡æ±  çº¿ç¨‹ç§æœ‰åŒºåŸŸ JVMçº¿ç¨‹æ ˆ æœ¬åœ°æ–¹æ³•æ ˆ PCè®¡æ•°å™¨ å †åŒº å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡ä»¥åŠæ•°ç»„éƒ½å­˜æ”¾åœ¨å †åŒºã€‚ æ–¹æ³•åŒº ç”¨äºå­˜å‚¨å·²ç»è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€åŠæ—¶ç¼–è¯‘å™¨å˜å¼‚åçš„ä»£ç ç¼“å­˜ç­‰æ•°æ®ã€‚ è¿è¡Œæ—¶å¸¸é‡æ±  è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸæˆ–è€…è¿è¡ŒæœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚ Javaè™šæ‹Ÿæœºæ ˆ æ¯ä¸ªçº¿ç¨‹ä¼šç”Ÿæˆä¸€ä¸ªçº¿ç¨‹æ ˆï¼Œæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ä¿¡æ¯ã€‚ å±€éƒ¨å˜é‡è¡¨å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§Javaè™šæ‹ŸæœºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€long ã€floatã€doubleï¼‰ã€å¼•ç”¨ç±»å‹ã€returnAddressç±»å‹ã€‚ è¿™äº›æ•°æ®ç±»å‹åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­çš„å­˜å‚¨ç©ºé—´ä»¥å±€éƒ¨å˜é‡æ§½æ¥è¡¨ç¤ºï¼ˆ64ä½çš„longå’Œdoubleå ç”¨2ä¸ªå˜é‡æ§½ï¼Œå…¶ä½™æ•°æ®ç±»å‹å ç”¨1ä¸ªå˜é‡æ§½ï¼‰ã€‚å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸå®Œæˆåˆ†é…ï¼Œå› æ­¤å½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨æ ˆå¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯ç¡®å®šçš„ã€‚åœ¨è¿è¡ŒæœŸé—´æ˜¯ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ï¼ˆæ§½çš„å¤šå°‘ï¼‰ã€‚ æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆä½œç”¨ç±»ä¼¼ï¼Œä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°æ–¹æ³•æœåŠ¡ã€‚ PCè®¡æ•°å™¨ å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚åœ¨Javaè™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ å¯¹äºJDK1.8ä»¥åHotSpotè™šæ‹Ÿæœºæ”¹ç”¨ä¸Jrokitã€J9ä¸€æ ·ä¸æœ¬åœ°å†…å­˜ä¸­å®ç°çš„å…ƒç©ºé—´ï¼ˆMeta-spaceï¼‰æ¥å®ç°æ–¹æ³•åŒºã€‚æ— è®ºæ˜¯åŸç©ºé—´è¿˜æ˜¯æ°¸ä¹…ä»£ï¼Œä»–ä»¬åªæ˜¯æ–¹æ³•åŒºçš„å®ç°ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å’Œé™æ€å˜é‡çš„å­˜å‚¨é€»è¾‘ä¸Šä»ç„¶å±äºæ–¹æ³•åŒºã€‚å…ƒç©ºé—´ä½¿ç”¨çš„æ˜¯ç‰©ç†å†…å­˜ã€æ°¸ä¹…ä»£ä½¿ç”¨çš„æ˜¯JVMå†…å­˜ã€‚å› æ­¤å…ƒç©ºé—´çš„å¤§å°åªå—é™äºç‰©ç†å†…å­˜ã€‚ HotSpot è™šæ‹Ÿæœºå¯¹è±¡çš„åˆ›å»ºä¸å¼•ç”¨å¯¹è±¡çš„åˆ›å»º1ï¼‰ åœ¨newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå…ˆéœ€è¦é€šè¿‡ç±»åŠ è½½æ£€æŸ¥ï¼Œç„¶åè™šæ‹Ÿæœºä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚ å¯¹è±¡æ‰€éœ€è¦çš„å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯ä»¥å®Œå…¨ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡å®é™…ä¸Šä¾¿ç­‰åŒäºæŠŠä¸€å—ç¡®å®šå¤§å°çš„å†…å­˜å—ä»Javaå †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚ æŒ‡é’ˆç¢°æ’å‡è®¾å†…å­˜è§„æ•´ï¼Œå°†ä½¿ç”¨è¿‡çš„åœ¨ä¸€è¾¹ï¼Œç©ºé—²çš„åœ¨ä¸€è¾¹ï¼Œä¸­é—´æ”¾ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œæ‰€åˆ†é…å†…å­˜å°±æ˜¯æŠŠæŒ‡é’ˆå‘ç©ºé—²ç©ºé—´æ–¹å‘æŒªåŠ¨ä¸€æ®µä¸å¯¹è±¡ç›¸ç­‰çš„è·ç¦»ã€‚ä½¿ç”¨Serialã€ParNewå¸¦å‹ç¼©æ•´ç†è¿‡ç¨‹çš„GCæ”¶é›†å™¨æ—¶ï¼Œé‡‡ç”¨æŒ‡é’ˆç¢°æ’ï¼Œç®€å•é«˜æ•ˆï¼› ç©ºé—²åˆ—è¡¨å‡è®¾å†…å­˜ä¸è§„æ•´ï¼Œæ˜¯ä¸€å—å—ä¸è¿ç»­çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨è®°å½•å“ªå—å†…å­˜å¯ç”¨ï¼Œå“ªå—å†…å­˜ä¸å¯ç”¨ï¼Œåœ¨åˆ†é…çš„æ—¶å€™åœ¨åˆ—è¡¨ä¸­æ‰¾ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´åˆ’åˆ†ç»™å¯¹è±¡å®ä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„è®°å½•ã€‚ä½¿ç”¨CMSåŸºäºæ¸…é™¤ç®—æ³•çš„æ”¶é›†å™¨æ—¶ï¼Œç†è®ºä¸Šåªèƒ½é‡‡ç”¨å¤æ‚çš„ç©ºé—²åˆ—è¡¨æ¥åˆ†é…å†…å­˜ã€‚ Thread Local Allocation Bufferåœ¨å †ä¸­åˆ›å»ºå¯¹è±¡æ˜¯ç‰¹åˆ«é¢‘ç¹çš„äº‹æƒ…ï¼Œå¹¶ä¸”æ¶‰åŠåˆ°å¤šçº¿ç¨‹çš„è®¿é—®ã€‚å¦‚ä½•ä¿è¯é«˜æ•ˆä¸”å®‰å…¨çš„ç”³è¯·ç©ºé—´ï¼Ÿ åŒæ­¥æˆ–è€…CAS+å¤±è´¥é‡è¯•çš„æ–¹å¼ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§ï¼› ä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨å †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œé€šè¿‡-XX:+/-UseTLAB è®¾å®šï¼› 2ï¼‰åˆ†é…å®Œå†…å­˜åï¼Œä¸ºå†…å­˜ç©ºé—´åˆå§‹åŒ–é›¶å€¼ä»¥åŠå¿…è¦çš„è®¾ç½®ã€‚åˆå§‹åŒ–é›¶å€¼å¯ä»¥ä¿è¯å¯¹è±¡å®ä¾‹å­—æ®µåœ¨Javaå¯¹è±¡ä¸­å¯ä»¥ä¸èµ‹åˆå§‹å€¼å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„é›¶å€¼ã€‚ä¹‹åè®¾ç½®è¿™ä¸ªå¯¹è±¡çš„ç±»å‹ã€å…³è”ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€GCåˆ†ä»£å¹´é¾„ä¿¡æ¯ç­‰ã€‚ 3ï¼‰æ‰§è¡Œ &lt;init&gt;() æ–¹æ³•ï¼Œå°†å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ã€‚ å¯¹è±¡çš„å†…å­˜å¸ƒå±€åœ¨Hotspotè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¸ƒå±€åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ† å¯¹è±¡å¤´ï¼ˆHeaderï¼‰ ä¸€éƒ¨åˆ†æ˜¯å¯¹è±¡è‡ªèº«è¿è¡Œæ—¶æ•°æ®ï¼ŒHashCode, GCåˆ†ä»£å¹´é¾„ï¼Œé”çŠ¶æ€æ ‡å¿—ï¼Œçº¿ç¨‹æŒæœ‰é”ï¼Œåå‘çº¿ç¨‹ID,åå‘æ—¶é—´æˆ³ï¼ˆæ•°ç»„é•¿åº¦ï¼‰ã€‚ ä¸€éƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼ŒæŒ‡å‘å®ƒçš„ç±»å‹å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œç”¨æ¥ç¡®å®šæ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚ å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰å­—æ®µçš„å­˜å‚¨é¡ºåºå—åˆ°è™šæ‹Ÿæœºåˆ†é…ç­–ç•¥ï¼ˆ-XX:FieldsAllocationStyleï¼‰å’Œå­—æ®µåœ¨æºç ä¸­çš„é¡ºåºå½±å“ã€‚é»˜è®¤ç›¸åŒå®½åº¦çš„å­—æ®µè¢«åˆ†é…åˆ°ä¸€èµ·å­˜æ”¾ï¼Œçˆ¶ç±»ä¸­å®šä¹‰çš„å˜é‡ä¼šå‡ºç°åœ¨å­ç±»ä¹‹å‰ã€‚ä½¿ç”¨+XX:CompactFields=trueå­—ç±»ä¸­è¾ƒçª„çš„å˜é‡ä¹Ÿä¼šæ’å…¥åˆ°çˆ¶ç±»å˜é‡çš„ç©ºéš™ä¹‹ä¸­ã€‚ å¡«å……ï¼ˆPaddingï¼‰ä¸ºäº†æ»¡è¶³ç¡¬ä»¶çš„æ€§èƒ½éœ€æ±‚å’Œæé«˜åƒåœ¾å›æ”¶æ—¶æŒ‡é’ˆæ‰«æçš„æ–¹ä¾¿æ€§ã€‚HotSpotè™šæ‹Ÿæœºçš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å¯¹è±¡çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯8ä¸ªå­—èŠ‚çš„æ•´æ•°å€ï¼ˆä»»ä½•å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯8ä¸ªå­—èŠ‚çš„æ•´æ•°å€ï¼‰ã€‚ å¯¹è±¡çš„è®¿é—®å®šä½å¯¹è±¡åœ¨å †ä¸­åˆ›å»ºå¥½äº†ï¼ŒJavaç¨‹åºä¼šé€šè¿‡æ ˆä¸Šå±€éƒ¨å˜é‡è¡¨ä¸­çš„referenceå­—æ®µæ¥å¼•ç”¨å †ä¸Šçš„å¯¹è±¡ã€‚ å¥æŸ„è®¿é—®Javaå †ä¸­åˆ’åˆ†å‡ºä¸€å—å†…å­˜ä½œä¸ºå¥æŸ„æ± ï¼Œreferenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªå…·ä½“çš„åœ°å€ä¿¡æ¯ã€‚å¥½å¤„ï¼šreferenceä¸­å­˜å‚¨çš„äº‹ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œå¯¹è±¡è¢«ç§»åŠ¨æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆã€‚ ç›´æ¥æŒ‡é’ˆreferenceä¸­å­˜å‚¨çš„æ˜¯å¯¹è±¡çš„åœ°å€ã€‚å¥½å¤„æ˜¯é€Ÿåº¦å¿«ï¼ŒèŠ‚çº¦äº†æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ã€‚","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"è¿è¡Œæ—¶åŒºåŸŸ","slug":"è¿è¡Œæ—¶åŒºåŸŸ","permalink":"https://pickonebyone.github.io/tags/%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8C%BA%E5%9F%9F/"}]},{"title":"JVMå†…å­˜æ¨¡å‹","slug":"JVMå†…å­˜æ¨¡å‹","date":"2020-06-02T12:11:09.000Z","updated":"2020-06-08T10:41:45.604Z","comments":true,"path":"2020/06/02/JVMå†…å­˜æ¨¡å‹/","link":"","permalink":"https://pickonebyone.github.io/2020/06/02/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/","excerpt":"","text":"è®¡ç®—æœºä¸ºäº†æå‡æ•ˆç‡ï¼Œå¢åŠ äº†å¤šå†…æ ¸ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªå†…æ ¸å¢åŠ äº†è‡ªå·±çš„é«˜é€Ÿç¼“å­˜ï¼Œè€Œä»–ä»¬åˆå…±äº«åŒä¸€ä¸ªä¸»å†…å­˜ã€‚ é™¤äº†å¢åŠ é«˜é€Ÿç¼“å­˜å¤–ï¼Œä¸ºäº†ä½¿å¤„ç†å™¨å†…éƒ¨çš„è¿ç®—å•å…ƒèƒ½å°½é‡è¢«å……åˆ†åˆ©ç”¨ï¼Œå¤„ç†å™¨å¯èƒ½ä¼šå¯¹è¾“å…¥ä»£ç è¿›è¡Œä¹±åºæ‰§è¡Œä¼˜åŒ–ï¼Œä½†ä¿è¯ç»“æœä¸é¡ºåºæ‰§è¡Œçš„ç»“æœä¸€è‡´ã€‚ ä¸å¤„ç†å™¨çš„ä¹±åºæ‰§è¡Œä¼˜åŒ–ç±»ä¼¼ï¼ŒJavaè™šæ‹Ÿæœºçš„å³æ—¶ç¼–è¯‘å™¨ä¹Ÿæœ‰æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ã€‚ Javaå†…å­˜æ¨¡å‹ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ›¾è¯•å›¾å®šä¹‰ä¸€ç§Javaå†…å­˜æ¨¡å‹æ¥å±è”½å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ã€‚ ä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜Javaå†…å­˜æ¨¡å‹çš„ä¸»è¦ç›®çš„æ˜¯å®šä¹‰ç¨‹åºä¸­å„ç§å˜é‡çš„è®¿é—®è§„åˆ™ï¼ˆå…³æ³¨è™šæ‹Ÿæœºä¸­æŠŠå˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡çš„åº•å±‚ç»†èŠ‚ã€‚ï¼‰Javaå†…å­˜æ¨¡å‹è§„å®šäº†æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆé™¤çº¿ç¨‹ç§æœ‰çš„ä»¥å¤–ï¼‰ã€‚çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¿å­˜äº†è¢«è¯¥çº¿ç¨‹ä½¿ç”¨çš„å˜é‡çš„ä¸»å†…å­˜å‰¯æœ¬ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜çš„æ•°æ®ã€‚ä¸åŒçš„çº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜çš„å˜é‡ï¼Œçº¿ç¨‹ä¹‹é—´å˜é‡å€¼çš„ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚ å†…å­˜é—´äº¤äº’æ“ä½œå…³äºä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’åè®®ï¼ŒJavaå†…å­˜æ¨¡å‹ä¸­å®šä¹‰äº†8ç§çš„æ“ä½œã€‚ Javaè™šæ‹Ÿæœºå®ç°æ—¶å¿…é¡»ä¿è¯æ¯ç§æ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œä¸å¯å†åˆ†çš„ï¼ˆå¯¹äºdoubleå’Œlongæ¥è®²ï¼Œloadã€storeã€ã€readã€writeå…è®¸æœ‰ä¾‹å¤–ï¼‰ã€‚ lock ï¼š é”å®šï¼Œä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çš„çŠ¶æ€ã€‚ unlock: è§£é”ï¼Œä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶ä½“çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®šã€‚ read: è¯»å–ï¼Œä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°å·¥ä½œå†…å­˜ï¼Œä»¥ä¾¿éšåçš„loadåŠ¨ä½œä½¿ç”¨ã€‚ write: å†™å…¥ï¼Œä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠstoreæ“ä½œä»å·¥ä½œå†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼å­˜æ”¾åˆ°ä¸»å†…å­˜å˜é‡ä¸­ã€‚ load: è½½å…¥ï¼Œä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠreadæ“ä½œä»ä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œå†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­ã€‚ useï¼šä½¿ç”¨ï¼Œä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨å˜é‡çš„å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ assign: èµ‹å€¼ï¼Œä½œç”¨äºå·¥ä½œå˜é‡ï¼ŒæŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“æ¥æ”¶çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜å˜é‡ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ store: å­˜å‚¨ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°å†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåçš„writeæ“ä½œä½¿ç”¨ã€‚ Javaå†…å­˜æ¨¡å‹è§„å®šå¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š 1) ä¸å…è®¸read å’Œ loadã€storeå’Œwriteæ“ä½œå•ç‹¬å‡ºç°ï¼Œå³ä¸å…è®¸ä¸€ä¸ªå˜é‡ä»ä¸»å†…å­˜è¯»å–äº†ä½†å·¥ä½œå†…å­˜ä¸æ¥å—ï¼Œæˆ–è€…å·¥ä½œå†…å­˜å‘èµ·å›å†™å•ä¸»å†…å­˜ä¸æ¥å—2ï¼‰ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹ä¸¢å¼ƒå®ƒæœ€è¿‘çš„assignæ“ä½œï¼Œå³å˜é‡åœ¨å·¥ä½œå†…å­˜ä¸­æ”¹å˜äº†ä¹‹åå¿…é¡»æŠŠè¯¥å˜åŒ–åŒæ­¥å›ä¸»å†…å­˜ã€‚3ï¼‰ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹åœ¨æ²¡æœ‰å‘ç”Ÿassignæ“ä½œå°±æŠŠæ•°æ®ä»çº¿ç¨‹çš„å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ä¸­ã€‚4) ä¸€ä¸ªæ–°çš„å˜é‡åªèƒ½åœ¨ä¸»å†…å­˜ä¸­â€œè¯ç”Ÿâ€ï¼Œä¸å…è®¸åœ¨å·¥ä½œå†…å­˜ä¸­ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–ï¼ˆload\\assignï¼‰çš„å˜é‡,å³å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œuseä¹‹å‰å¿…é¡»ä½¿ç”¨loadï¼Œ ä½¿ç”¨storeä¹‹å‰å¿…é¡»ä½¿ç”¨assignã€‚ã€‚5ï¼‰ä¸€ä¸ªå˜é‡åœ¨åŒä¸€ä¸ªæ—¶åˆ»å†…åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œlockæ“ä½œï¼Œ ä½†lockæ“ä½œå¯ä»¥è¢«åŒä¸€ä¸ªçº¿ç¨‹é‡å¤æ‰§è¡Œå¤šæ¬¡ï¼Œ å¤šæ¬¡æ‰§è¡Œlockåï¼Œ åªæœ‰æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„unlockæ“ä½œï¼Œå˜é‡æ‰ä¼šè¢«è§£é”ã€‚6)å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockä¹‹å‰ï¼Œ å¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥å›ä¸»å†…å­˜ä¸­ï¼ˆæ‰§è¡Œstoreã€writeæ“ä½œï¼‰ volatileå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™volatileæ˜¯Javaè™šæ‹Ÿæœºæœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚å®ƒæœ‰ä¸¤ä¸ªç‰¹æ€§ï¼š1ï¼‰ä¿è¯æ­¤å˜é‡å¯¹äºæ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼ˆä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹ç«‹å³å¯è§ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨è¢«volatileä¿®é¥°çš„å˜é‡æ—¶ï¼Œéƒ½ä¼šå¼ºåˆ¶ä»ä¸»å†…å­˜ä¸­åŒæ­¥è¯¥å˜é‡çš„å€¼åˆ°å·¥ä½œå†…å­˜ä¸­ï¼‰ åœ¨ä¸ç¬¦åˆä»¥ä¸‹ä¸¤æ¡è§„åˆ™çš„åœºæ™¯ä¸­ï¼Œä»ç„¶éœ€è¦é€šè¿‡åŠ é”æ¥ä¿è¯åŸå­æ€§ï¼ˆsynchronizedã€java.util.concurrentä¸­çš„é”æˆ–è€…åŸå­ç±»ï¼‰ï¼š è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡çš„å½“å‰å€¼ï¼Œæˆ–è€…èƒ½å¤Ÿç¡®ä¿åªæœ‰å•ä¸€çš„çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ï¼› å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸï¼› 2ï¼‰ ç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ– volatileå˜é‡è¯»æ“ä½œçš„æ€§èƒ½ä¸æ™®é€šå˜é‡å‡ ä¹æ²¡æœ‰å·®åˆ«ï¼Œä½†æ˜¯å†™æ“ä½œä¼šæ…¢äº›ï¼Œ å› ä¸ºå®ƒéœ€è¦åœ¨æœ¬åœ°ä»£ç ä¸­æ’å…¥è®¸å¤šå†…å­˜å±éšœæŒ‡ä»¤æ¥ä¿è¯å¤„ç†å™¨ä¸å‘ç”Ÿä¹±åºæ‰§è¡Œã€‚ Singleton DoubleCheck12345678910111213141516public class Singleton &#123; private Singleton() &#123;&#125; private volatile static Singleton instance &#x3D; null; public static Singleton getInstance() &#123; if (instance &#x3D;&#x3D; null) &#123; synchronized (Singleton.class) &#123; if (instance &#x3D;&#x3D; null) &#123; instance &#x3D; new Singleton(); &#x2F;&#x2F;warning &#125; &#125; &#125; return instance; &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œinstance = new Singleton()æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆå¤šæ¡æ±‡ç¼–æŒ‡ä»¤ã€‚ï¼ˆ1ï¼‰ä¸ºSingletonçš„å®ä¾‹åˆ†é…å†…å­˜ã€‚ï¼ˆ2ï¼‰è°ƒç”¨Singletonçš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼ˆ3ï¼‰å°†instanceå¯¹è±¡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚ æˆ–è€…å¯èƒ½è¢«é‡æ’åºä¸º(1)ã€(3)ã€ï¼ˆ2ï¼‰ï¼Œ ä¹Ÿå°±æ˜¯å½“åˆ†é…å†…å­˜åï¼Œå¦‚æœæ²¡æœ‰å¯¹instance åŠ volatileï¼Œå°†instanceå¯¹è±¡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´åï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¯»åˆ°æœªè¢«åˆå§‹åŒ–çš„å¯¹è±¡ã€‚ é’ˆå¯¹longå’Œdoubleç±»å‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™Javaå†…å­˜æ¨¡å‹è¦æ±‚lockã€unlockã€readã€writeã€ loadã€assignã€useã€storeè¿™8ç§æ“ä½œéƒ½å…·æœ‰åŸå­æ€§ï¼Œä½†æ˜¯å¯¹äº64ä½æ•°æ®ç±»å‹çš„long å’Œdouble, åœ¨æ¨¡å‹ä¸­å®šä¹‰äº†ä¸€æ¡å®½æ¾çš„è§„å®šï¼Œ å…è®¸è™šæ‹Ÿæœºå°†æ²¡æœ‰è¢«volatileä¿®é¥°çš„64ä½æ•°æ®çš„è¯»å†™æ“ä½œåˆ’åˆ†ä¸º2æ¬¡32ä¸ºçš„æ“ä½œæ¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è™šæ‹Ÿæœºè‡ªå·±é€‰æ‹©æ˜¯å¦è¦ä¿è¯64ä½æ•°æ®ç±»å‹çš„loadã€storeã€readã€writeè¿™å››ä¸ªæ“ä½œçš„åŸå­æ€§ã€‚ ç»è¿‡å®é™…çš„æµ‹è¯•ï¼Œåœ¨ç›®å‰çš„ä¸»æµå¹³å°ä¸‹å•†ç”¨çš„64ä½Javaè™šæ‹Ÿæœºä¸­å¹¶ä¸ä¼šå‡ºç°éåŸå­æ€§è®¿é—®è¡Œä¸ºï¼Œä½†æ˜¯å¯¹äº32ä½çš„Javaè™šæ‹Ÿæœºï¼ˆå¦‚32ä½çš„X86Hotspotï¼‰å­˜åœ¨éåŸå­æ€§è®¿é—®çš„é£é™©ã€‚ å› æ­¤ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œé™¤éè¯¥æ•°æ®æœ‰æ˜ç¡®å¯çŸ¥çš„çº¿ç¨‹ç«äº‰ï¼Œå¦åˆ™æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ä¸€èˆ¬ä¸éœ€è¦å› ä¸ºè¿™ä¸ªåŸå› åˆ»æ„æŠŠç”¨åˆ°çš„longå’Œdoubleå˜é‡ä¸“é—¨å£°æ˜ä½volatileã€‚ åŸå­æ€§ã€å¯è§æ€§ä¸æœ‰åºæ€§åŸå­æ€§ï¼ˆAtomicityï¼‰æœ‰Javaå†…å­˜æ¨¡å‹æ¥ç›´æ¥ä¿è¯çš„åŸå­æ€§å˜é‡æ“ä½œåŒ…æ‹¬readã€loadã€assignã€useã€storeã€writeã€‚å› æ­¤åŸºæœ¬æ•°æ®ç±»å‹çš„è®¿é—®éƒ½æ˜¯å…·å¤‡åŸå­æ€§çš„ã€‚ å¦‚æœåº”ç”¨åœºæ™¯éœ€è¦ä¸€ä¸ªæ›´å¤§èŒƒå›´çš„ä¿è¯ï¼Œéœ€è¦ä½¿ç”¨é”ã€æˆ–è€…synchronizedå…³é”®å­—æ¥ä¿è¯åŸå­æ€§ã€‚ï¼ˆlockã€unlockå¹¶æ²¡æœ‰ç›´æ¥å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼‰ã€‚ å¯è§æ€§ï¼ˆvisibilityï¼‰å¯è§æ€§å°±æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼æ—¶ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚ volatilevolatileçš„ç‰¹æ®Šè§„åˆ™ä¿è¯äº†æ–°å€¼ç«‹å³èƒ½åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œä»¥åŠæ¯æ¬¡ä½¿ç”¨å‰éƒ½ç«‹å³ä»ä¸»å†…å­˜åˆ·æ–°ã€‚è€Œæ™®é€šå˜é‡åˆ™ä¸èƒ½ä¿è¯â€œç«‹å³â€ã€‚ synchronizedåŒæ­¥å—çš„å¯è§æ€§æ—¶ç”±â€œå¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥å›ä¸»å†…å­˜ä¸­â€è¿™æ¡è§„åˆ™è·å¾—ã€‚ finalè¢«finalä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦è¢«åˆå§‹åŒ–å®Œæˆï¼Œå¹¶ä¸”æ„é€ å™¨æ²¡æœ‰æŠŠthisçš„å¼•ç”¨ä¼ é€’å‡ºå»ï¼Œé‚£ä¹ˆåœ¨å…¶ä»–çº¿ç¨‹ä¸­å°±èƒ½çœ‹è§finalå­—æ®µçš„å€¼ã€‚ thiså¼•ç”¨é€ƒé€¸ï¼Œå…¶ä»–çº¿ç¨‹æœ‰å¯èƒ½é€šè¿‡è¿™ä¸ªå¼•ç”¨è®¿é—®åˆ°â€œåˆå§‹åŒ–äº†ä¸€èˆ¬â€çš„å¯¹è±¡ã€‚ æœ‰åºæ€§å¦‚æœåœ¨æœ¬çº¿ç¨‹ä¸­è§‚å¯Ÿï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼ˆçº¿ç¨‹å†…ä¼¼è¡¨ç°ä¸ºä¸²è¡Œçš„è¯­ä¹‰ï¼‰ï¼›å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— åºçš„ï¼ˆæŒ‡ä»¤é‡æ’åºå’Œå·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿç°è±¡ï¼‰ï¼› Javaè¯­è¨€æä¾›äº†volatileå’Œsychronizedä¸¤ä¸ªå…³é”®å­—æ¥ä¿è¯çº¿ç¨‹ä¹‹é—´çš„æœ‰åºæ€§ã€‚volatileï¼šæœ¬èº«åŒ…å«äº†ç¦ç”¨æŒ‡ä»¤é‡æ’åºçš„è¯­ä¹‰ï¼›synchronizedï¼šä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œlockæ“ä½œï¼› å…ˆè¡Œå‘ç”ŸåŸåˆ™å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼šåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ç«äº‰ï¼Œçº¿ç¨‹æ˜¯å¦å®‰å…¨çš„é‡è¦æ‰‹æ®µã€‚ ç¨‹åºæ¬¡åºè§„åˆ™ï¼šåœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§æ§åˆ¶æµé¡ºåºï¼ˆåˆ†æ”¯ã€å¾ªç¯ç­‰ï¼‰ï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿåœ¨ä¹¦å†™åœ¨åé¢çš„æ“ä½œï¼› ç®¡ç¨‹é”å®šè§„åˆ™ï¼šä¸€ä¸ªunlockçš„æ“ä½œå…ˆè¡Œå‘ç”Ÿåœ¨åé¢å¯¹åŒä¸€ä¸ªé”çš„æ“ä½œã€‚ volatileå˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ªvolatileå˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼› çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼šThreadå¯¹è±¡çš„startï¼ˆï¼‰æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œï¼› çº¿ç¨‹çš„ä¸­æ­¢è§„åˆ™ï¼šçº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œå¯ä»¥é€šè¿‡thread.join()æ–¹æ³•æ˜¯å¦ç»“æŸã€thread.isAlive()è¿”å›å€¼æ¥æ£€æµ‹çº¿ç¨‹æ˜¯å¦å·²ç»åœæ­¢ï¼› çº¿ç¨‹çš„ç»ˆç«¯è§„åˆ™ï¼šå¯¹çº¿ç¨‹interrupt()æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿï¼Œå¯ä»¥é€šè¿‡thread.interrupted()æ£€æµ‹æ˜¯å¦æœ‰ä¸­æ–­å‘ç”Ÿï¼› å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼šä¸€ä¸ªå¯¹è±¡åˆå§‹åŒ–å®Œæˆï¼ˆæ„é€ å‡½æ•°æ‰§è¡Œç»“æŸï¼‰å…ˆè¡Œå‘ç”Ÿäºä»–çš„finalize()æ–¹æ³•çš„å¼€å§‹ï¼› ä¼ é€’æ€§ï¼šå¦‚æœæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œBï¼Œæ“ä½œBå…ˆè¡Œå‘ç”Ÿäºæ“ä½œCï¼Œé‚£å°±å¯ä»¥å¾—å‡ºï¼Œæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œCã€‚","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"JMM","slug":"JMM","permalink":"https://pickonebyone.github.io/tags/JMM/"}]},{"title":"ç±»åŠ è½½å™¨å’Œç±»åŠ è½½æœºåˆ¶","slug":"ClassLoader","date":"2020-05-31T23:34:37.000Z","updated":"2020-06-04T00:26:39.606Z","comments":true,"path":"2020/06/01/ClassLoader/","link":"","permalink":"https://pickonebyone.github.io/2020/06/01/ClassLoader/","excerpt":"","text":"Javaä»£ç è¦åœ¨JVMä¸­æ­£å¸¸è¿è¡Œï¼Œé¦–å…ˆè¦å…ˆç¼–è¯‘æˆ.classæ–‡ä»¶ï¼Œç”±ç±»åŠ è½½å™¨å°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ä¹‹åç”±ç±»ç¼–è¯‘å™¨æ¥ç¼–è¯‘æ‰§è¡Œã€‚åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ä»€ä¹ˆå‘¢ï¼Ÿ1ï¼‰ä»€ä¹ˆæ—¶å€™éœ€è¦åŠ è½½ä¸€ä¸ªç±»å‘¢ï¼Ÿ2ï¼‰éšä¾¿ä»»ä½•ä¸€ä¸ªæ–‡ä»¶éƒ½æ˜¯å¦å¯ä»¥è¢«åŠ è½½å‘¢ï¼Œå®ƒçš„åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ3ï¼‰ç±»åŠ è½½å™¨éœ€è¦å¯¹å†…å­˜ä¸­çš„å†…å®¹åšä»€ä¹ˆå·¥ä½œæ‰å¯ä»¥è¢«JVMç›´æ¥ä½¿ç”¨ï¼Ÿ è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä» Class æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Classç±»å‹ï¼Œè¿™å°±æ˜¯è™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶ã€‚â€”ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ 12ç±»å‹çš„åŠ è½½ã€é“¾æ¥å’Œåˆå§‹åŒ–è¿‡ç¨‹éƒ½æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å®Œæˆçš„ã€‚Javaå¯ä»¥åŠ¨æ€æ‰©å±•çš„è¯­è¨€ç‰¹æ€§å°±æ˜¯ä¾èµ–è¿è¡ŒæœŸåŠ¨æ€åŠ è½½å’ŒåŠ¨æ€è¿æ¥è¿™ä¸ªç‰¹ç‚¹å®ç°çš„ã€‚ ç±»çš„åŠ è½½æ—¶æœº Javaè™šæ‹Ÿæœºè§„èŒƒå¹¶æ²¡æœ‰è§„å®šä»€ä¹ˆæ—¶å€™åŠ è½½ç±»ï¼Œä½†æ˜¯è§„å®šäº†ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–ä¸€ä¸ªç±»ã€‚ è™šæ‹Ÿæœºè§„èŒƒä¸¥æ ¼è§„å®šäº†æœ‰ä¸”åªæœ‰5ä¸­æƒ…å†µå¿…é¡»ç«‹å³å¯¹ç±»è¿›è¡Œâ€œåˆå§‹åŒ–â€ã€‚ 1ï¼‰é‡åˆ°newã€getstaticã€putstaticã€invokestaticï¼› 2ï¼‰åˆå§‹åŒ–ç±»çš„æ—¶å€™ï¼Œå¯¹çˆ¶ç±»è¿›è¡Œåˆå§‹åŒ–ï¼› 3ï¼‰JVMæ‰§è¡Œçš„æ—¶å€™ï¼Œå¯¹ä¸»ç±»è¿›è¡Œåˆå§‹åŒ–ï¼› 4ï¼‰ä½¿ç”¨java.lang.reflectåŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼› 5ï¼‰ä½¿ç”¨jdk1.7çš„åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æœä¸€ä¸ªjava.lang.invoke.MethodHandlerå®ä¾‹æœ€åè§£æç»“æœæ˜¯REF_getstatic, REF_putstatic, REF_invokestaticæ—¶ï¼Œå¯¹è¯¥ç±»è¿›è¡Œåˆå§‹åŒ–ï¼› 6) jdk1.8ä¸­å­ç±»å®ç°çš„æ¥å£ä¸­å®šä¹‰äº†defaultæ–¹æ³•æ—¶ï¼› ç±»çš„åŠ è½½è¿‡ç¨‹ç±»çš„åŠ è½½è¿‡ç¨‹æ€»å…±åˆ†ä¸ºï¼šLoadingï¼ˆåŠ è½½ï¼‰ã€Linkingï¼ˆè¿æ¥ï¼‰ã€Initializingï¼ˆåˆå§‹åŒ–ï¼‰ã€Usingï¼ˆä½¿ç”¨ï¼‰ã€Unloadingï¼ˆå¸è½½ï¼‰ã€‚å…¶ä¸­ Linkingé˜¶æ®µ åˆ†ä¸º Verificationï¼ˆéªŒè¯ï¼‰ã€Preparationï¼ˆå‡†å¤‡ï¼‰ã€Resolutionï¼ˆè§£æï¼‰ã€‚ åŠ è½½åŠ è½½é˜¶æ®µçš„æˆæœæ˜¯ç”ŸæˆClassç±»å¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡å­˜å‚¨åœ¨å †ä¸­ã€‚Classå¯¹è±¡ä½œä¸ºè®¿é—®è¯¥å¯¹è±¡æ•°æ®çš„è®¿é—®å…¥å£ã€‚åŠ è½½çš„æ­¥éª¤ï¼š1ï¼‰ æ ¹æ®ç±»çš„å…¨é™å®šåè¯»å–ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼›2ï¼‰ å¯¹äºŒè¿›åˆ¶å­—èŠ‚æµè¿›è¡Œè§£æè½¬æ¢ï¼Œå¹¶å°†ç±»ä¿¡æ¯å­˜å‚¨åœ¨æ–¹æ³•åŒºä¸­ï¼›3ï¼‰ å †ä¸­ç”ŸæˆClassç±»å¯¹è±¡ï¼Œä½œä¸ºç¨‹åºè®¿é—®æ–¹æ³•åŒºä¸­çš„ç±»å‹æ•°æ®çš„å¤–éƒ¨æ¥å£ï¼› æ³¨æ„ï¼šæ•°ç»„ç±»ä¸é€šè¿‡ç±»åŠ è½½å™¨åˆ›å»ºï¼Œç”±javaè™šæ‹Ÿæœºç›´æ¥åœ¨å†…å­˜ä¸­åŠ¨æ€æ„é€ å‡ºæ¥çš„ã€‚æ•°ç»„çš„å…ƒç´ ç±»å‹ï¼ˆå»æ‰æ‰€æœ‰ç»´åº¦ï¼‰è¦é ç±»åŠ è½½å™¨åŠ è½½å®Œæˆã€‚æ•°ç»„çš„ç»„ä»¶ç±»å‹ï¼ˆå»æ‰ä¸€ä¸ªç»´åº¦ï¼‰æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ•°ç»„å°†è¢«æ ‡è¯†åœ¨åŠ è½½è¯¥ç»„å»ºç±»å‹çš„ç±»åŠ è½½å™¨çš„ç±»åç§°ç©ºé—´ä¸Šã€‚å¦‚æœæ•°ç»„çš„ç»„ä»¶ç±»å‹ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼ŒJavaè™šæ‹Ÿæœºä¼šæŠŠæ•°ç»„æ ‡è®°ä¸ºä¸å¼•å¯¼ç±»åŠ è½½å™¨å…³è”ã€‚ éªŒè¯éªŒè¯åŠ è½½çš„ç±»ä¿¡æ¯æ˜¯å¦ç¬¦åˆJavaè™šæ‹Ÿæœºè§„èŒƒï¼Œç±»çš„å®ç°å’Œç»§æ‰¿ã€æ–¹æ³•çš„æ‰§è¡Œã€å¯¹è±¡å’Œæ–¹æ³•çš„å¯è®¿é—®æ€§ç­‰ç­‰ï¼Œä¸»è¦åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š 1ï¼‰æ–‡ä»¶æ ¼å¼çš„éªŒè¯ ä¸»è¦å¯¹Classæ–‡ä»¶ä¸­å†…å®¹è¿›è¡ŒéªŒè¯ï¼Œæ˜¯å¦ç¬¦åˆJavaè™šæ‹Ÿæœºè§„èŒƒã€‚ æ¯”å¦‚é­”æ•°ã€å¸¸é‡æ± çš„ç±»å‹ã€æŒ‡å‘å¸¸é‡çš„ç´¢å¼•å€¼æ˜¯å¦å­˜åœ¨æˆ–è€…ç±»å‹æ˜¯å¦æ­£ç¡®ç­‰ç­‰ï¼› è¿™ä¸ªé˜¶æ®µçš„éªŒè¯æ˜¯åŸºäºäºŒè¿›åˆ¶å­—èŠ‚æµè¿›è¡Œçš„ï¼Œåªæœ‰é€šè¿‡äº†éªŒè¯æ‰ä¼šè¢«å…è®¸è¿›å…¥Javaè™šæ‹Ÿæœºçš„å†…å­˜æ–¹æ³•åŒºå­˜å‚¨ã€‚ 2ï¼‰å…ƒæ•°æ®éªŒè¯ å¯¹å­—èŠ‚ç æè¿°ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œä¿è¯æè¿°ä¿¡æ¯ç¬¦åˆã€ŠJavaè¯­è¨€è§„èŒƒã€‹æ¯”å¦‚: è¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»ã€çˆ¶ç±»æ˜¯å¦å…è®¸ç»§æ‰¿ï¼ˆè¢«finalä¿®é¥°ï¼‰ï¼› è¿™ä¸ªç±»æ˜¯å¦å®ç°äº†çˆ¶ç±»æ‰€è¦æ±‚å®ç°çš„æ‰€æœ‰æ–¹æ³•ï¼› ç±»ä¸­çš„å­—æ®µã€æ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»äº§ç”ŸçŸ›ç›¾ï¼› 3ï¼‰å­—èŠ‚ç éªŒè¯ å¯¹ç±»çš„æ–¹æ³•ä½“è¿›è¡ŒéªŒè¯ï¼Œä¿è¯ä»»ä½•è·³è½¬æŒ‡ä»¤éƒ½ä¸ä¼šè·³è½¬åˆ°æ–¹æ³•ä½“ä»¥å¤–çš„å­—èŠ‚ç æŒ‡ä»¤ä¸Šï¼› ä¿è¯ç±»å‹è½¬åŒ–éƒ½æ˜¯æœ‰æ•ˆçš„. 4ï¼‰ç¬¦å·å¼•ç”¨éªŒè¯ è™šæ‹Ÿæœºåœ¨è§£æé˜¶æ®µå°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨çš„æ—¶å€™ï¼Œå¯¹ç¬¦å·å¼•ç”¨è¿›è¡ŒéªŒè¯ï¼› ç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å­—ç¬¦ä¸²æè¿°çš„å…¨é™å®šåèƒ½å¦æ‰¾åˆ°å¯¹åº”çš„ç±»ï¼› åœ¨æŒ‡å®šç±»ä¸­æ˜¯å¦å­˜åœ¨ç¬¦åˆæ–¹æ³•çš„å­—æ®µæè¿°ä»¥åŠç®€å•åç§°æ‰€æè¿°çš„æ–¹æ³•å’Œå­—æ®µï¼› ç¬¦å·å¼•ç”¨ä¸­çš„ç±»ã€å­—æ®µã€æ–¹æ³•çš„å¯è®¿é—®æ€§æ˜¯å¦å¯ä»¥è¢«å½“å‰ç±»è®¿é—®ï¼› ç¬¦å·å¼•ç”¨é˜¶æ®µæŠ›å‡ºçš„å¼‚å¸¸æœ‰ï¼šIllegalAccessErrorã€NoSuchFieldErrorã€NoSuchMethodErrorï¼› å‡†å¤‡å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»ä¸­å®šä¹‰çš„å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µï¼› å¯¹äºç±»å˜é‡ï¼ˆé™æ€å±æ€§ï¼‰ï¼Œè®¾ç½®çš„æ˜¯â€œé›¶å€¼â€ï¼ŒçœŸæ­£èµ‹å€¼æ˜¯åœ¨åˆå§‹åŒ–é˜¶æ®µï¼›å¯¹äºå¸¸é‡ï¼ˆfinal staticï¼‰ï¼Œä¼šè¢«è®¾ç½®ä¸ºConstantValueå±æ€§æ‰€æŒ‡å®šçš„åˆå§‹å€¼ã€‚ å¯¹äºå¸¸é‡ï¼ŒJavacæ—¶ä¼šä¸ºvalueç”ŸæˆConstantValueå±æ€§ã€‚ è§£æè§£æé˜¶æ®µæ˜¯Javaè™šæ‹Ÿæœºå°†å¸¸é‡æ± çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æ²¡æœ‰è§„å®šä½•æ—¶è¿›è¡Œè§£æã€‚ ç¬¦å·å¼•ç”¨ï¼šå¯ä»¥æ— æ­§ä¹‰çš„å®šä½åˆ°ç›®æ ‡å³å¯ï¼›ä¸è™šæ‹Ÿæœºçš„å†…å­˜å¸ƒå±€æ— å…³ï¼›å¼•ç”¨çš„ç›®æ ‡ä¸ä¸€å®šå·²ç»åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­ï¼›å¿…é¡»éµå¾ªã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ï¼› ç›´æ¥å¼•ç”¨ï¼šç›´æ¥å¯ä»¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€åç§»é‡ï¼Œæˆ–è€…å¯ä»¥é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ï¼›ä¸è™šæ‹Ÿæœºçš„å†…å­˜å¸ƒå±€ç›´æ¥ç›¸å…³ï¼›ç›´æ¥å¼•ç”¨çš„ç›®æ ‡ä¸€å®šå·²ç»åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­ï¼› è§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–è€…æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ã€æ–¹æ³•å¥æŸ„å’Œè°ƒç”¨ç‚¹é™å®šç¬¦å·å¼•ç”¨è¿›è¡Œã€‚ ç±»ã€æ¥å£è§£æï¼šè™šæ‹Ÿæœºçš„å®Œæ•´è§£æè¿‡ç¨‹ï¼š1ï¼‰å¦‚æœä¸æ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼Œè™šæ‹Ÿæœºå°†ä¼šæŠŠå…¨é™å®šåä¼ ç»™å½“å‰ç±»çš„åŠ è½½å™¨å»åŠ è½½ï¼Œåœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œç”±äºå…ƒæ•°æ®éªŒè¯ã€å­—èŠ‚ç éªŒè¯çš„éœ€è¦ï¼Œåˆå¯èƒ½å‡ºå‘å…¶ä»–ç›¸å…³ç±»çš„åŠ è½½åŠ¨ä½œã€‚2ï¼‰å¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼Œå¹¶ä¸”æ•°ç»„çš„å…ƒç´ ç±»å‹ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆä¼šæŒ‰ç…§ç¬¬ä¸€ç‚¹çš„è§„åˆ™åŠ è½½æ•°ç»„å…ƒç´ ç±»å‹ã€‚å¦‚æœæ˜¯åŸºç¡€æ•°æ®ç±»å‹åŒ…è£…ç±»ï¼Œé‚£ä¹ˆç”±è™šæ‹Ÿæœºç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥æ•°ç»„å”¯ç‹¬å’Œå…ƒç´ çš„æ•°ç»„å¯¹è±¡ï¼›3ï¼‰å‰é¢ä¸¤éƒ¨è§£æOKåè¿›è¡Œç¬¦å·å¼•ç”¨éªŒè¯ï¼Œç¡®å®šå½“å‰ç±»æ˜¯å¦æœ‰åŠ è½½ç±»çš„è®¿é—®æƒé™ã€‚ å¦‚æœä¸€ä¸ªç±»æ‹¥æœ‰å¦å¤–ä¸€ä¸ªç±»çš„è®¿é—®æƒé™ï¼Œé‚£ä¹ˆè‡³å°‘æœ‰ä¸€æ¡æ˜¯æˆç«‹çš„ï¼š1ï¼‰è¢«è®¿é—®ç±»æ˜¯publicçš„ï¼Œå¹¶ä¸”ä¸è®¿é—®ç±»å¤„äºåŒä¸€ä¸ªæ¨¡å—ï¼›2ï¼‰è¢«è®¿é—®ç±»æ˜¯publicçš„ï¼Œä¸ä¸è®¿é—®ç±»å¤„äºåŒä¸€ä¸ªæ¨¡å—ï¼Œä½†æ˜¯è¢«è®¿é—®ç±»çš„æ¨¡å—å…è®¸è®¿é—®ç±»è®¿é—®ï¼›3ï¼‰è¢«è®¿é—®ç±»ä¸æ˜¯publicçš„ï¼Œä½†æ˜¯ä¸è®¿é—®ç±»å¤„äºåŒä¸€ä¸ªåŒ…ä¸­ å­—æ®µè§£æå¯¹å­—æ®µè¡¨å†…class_indexé¡¹ä¸­ç´¢å¼•çš„CONSTANT_Class_Infoç¬¦å·å¼•ç”¨è¿›è¡Œè§£æï¼ˆå³å­—æ®µæ‰€å±ç±»ï¼‰ 1ï¼‰å…ˆæŸ¥æ‰¾å½“å‰ç±»æ˜¯å¦åŒ…å«äº†ç®€å•åç§°ä¸æè¿°ç¬¦ä¸ç›®æ ‡ç›¸åŒ¹é…2ï¼‰ä»ä¸‹å¾€ä¸Šçš„é¡ºåºæŸ¥æ‰¾å®ç°çš„æ¥å£ç±»3ï¼‰ä»ä¸‹å¾€ä¸Šçš„é¡ºåºæŸ¥æ‰¾çˆ¶ç±»4ï¼‰éƒ½æ— æ³•æŸ¥æ‰¾åˆ°ï¼ŒæŠ›å‡ºjava.lang.NoSuchFieldError. å¦‚æœæŸ¥æ‰¾æˆæœè¿”å›äº†å¼•ç”¨ï¼Œå°†ä¼šå¯¹è¿™ä¸ªå­—æ®µè¿›è¡Œæƒé™éªŒè¯ï¼Œå¯¹äºä¸å…·å¤‡æƒé™çš„è®¿é—®ä¼šæŠ›å‡ºIllegalAccessErrorï¼› æ–¹æ³•è§£æè§£æå‡ºæ–¹æ³•è¡¨class_indexé¡¹ä¸­ç´¢å¼•çš„æ–¹æ³•æ‰€å±çš„ç±»æˆ–è€…æ¥å£çš„ç¬¦å·å¼•ç”¨ã€‚å…·ä½“çš„è§£æè¿‡ç¨‹ä¸å­—æ®µè§£æç±»ä¼¼ã€‚ æ¥å£æ–¹æ³•è§£æä¸æ–¹æ³•è§£æç±»ä¼¼ã€‚ åˆå§‹åŒ–è¿™ä¸ªé˜¶æ®µJavaè™šæ‹Ÿæœºæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­ç¼–å†™çš„ç¨‹åºä»£ç ã€‚ç¨‹åºåœ¨è¿™ä¸ªé˜¶æ®µåˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æºã€‚ åˆå§‹åŒ–é˜¶æ®µä¹Ÿæ˜¯æ‰§è¡Œ&lt;clinit&gt;()çš„è¿‡ç¨‹ã€‚&lt;clinit&gt;()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ï¼›ç¼–è¯‘å™¨æ”¶é›†é¡ºåºæ˜¯ç”±è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºå†³å®šçš„ï¼›é™æ€è¯­å¥å—ä¸­æ™ºèƒ½è®¿é—®åˆ°å®šä¹‰åœ¨é™æ€è¯­å¥å—ä¹‹å‰çš„å˜é‡ï¼›å®šä¹‰åœ¨é™æ€è¯­å¥å—åçš„å˜é‡ï¼Œé™æ€è¯­å¥å—å¯ä»¥èµ‹å€¼ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®ï¼›Javaè™šæ‹Ÿæœºä¿è¯çˆ¶ç±»çš„&lt;clinit&gt;() æ€»æ˜¯ä¼˜å…ˆäºå­ç±»çš„&lt;clinit&gt;()æ‰§è¡Œï¼› å¦‚æœä¸€ä¸ªç±»ä¸­æ²¡æœ‰é™æ€è¯­å¥å—ï¼Œä¹Ÿæ²¡æœ‰å¯¹å˜é‡çš„èµ‹å€¼æ“ä½œï¼Œç¼–è¯‘å™¨å¯ä»¥ä¸ä¸ºè¿™ä¸ªç±»ç”Ÿæˆclinit()æ–¹æ³•ã€‚ ç±»åŠ è½½å™¨ç±»åŠ è½½å™¨ä¸»è¦é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼Œå®ƒå¤„äºJavaè™šæ‹Ÿæœºçš„å¤–éƒ¨ï¼Œæ–¹ä¾¿è®©åº”ç”¨ç¨‹åºè‡ªå·±å†³å®šå¦‚ä½•è·å–æ‰€éœ€çš„ç±»ã€‚ å¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œå¿…é¡»ç”±åŠ è½½å®ƒçš„ç±»åŠ è½½å™¨ä¸ç±»æœ¬èº«æ¥ç¡®å®šåœ¨Javaè™šæ‹Ÿæœºä¸­çš„å”¯ä¸€æ€§ã€‚æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç±»åç§°ç©ºé—´ã€‚ ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æ¨¡å‹ åŒäº²å§”æ´¾æ¨¡å‹è¦æ±‚é™¤äº†é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¹‹å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½åº”æœ‰è‡ªå·±çš„çˆ¶â€œç±»åŠ è½½å™¨â€ã€‚å½“ç±»åŠ è½½å™¨éœ€è¦åŠ è½½ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œé¦–å…ˆçœ‹è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰è¢«åŠ è½½åˆ™å°è¯•ç€è®©çˆ¶â€œç±»åŠ è½½å™¨â€å»åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰çˆ¶â€œç±»åŠ è½½å™¨â€åˆ™è®©bootstrapClassLoaderä½œä¸ºçˆ¶â€œç±»åŠ è½½å™¨â€ï¼Œå¦‚æœçˆ¶â€œç±»åŠ è½½å™¨â€åŠ è½½å¤±è´¥ï¼Œåˆ™ä½¿ç”¨è‡ªå·±çš„find_classæ–¹æ³•å»åŠ è½½ã€‚ å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap Class Loaderï¼‰å¯åŠ¨ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½&lt;JAVA_HOME&gt;\\lib ç›®å½•ä¸‹çš„jaråŒ…ï¼ˆæŒ‰åå­—è¯†åˆ«ï¼Œåå­—ä¸ç¬¦åˆçš„ç±»åº“å­˜æ”¾åœ¨libç›®å½•ä¸‹ä¹Ÿä¸ä¼šè¢«åŠ è½½ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®š -Xbootclasspathå‚æ•°æŒ‡å®šåŠ è½½ç›®å½•ã€‚å¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•è¢«javaç¨‹åºç›´æ¥å¼•ç”¨ã€‚ æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension Class Loaderï¼‰æ‰©å±•ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½&lt;JAVA_HOME&gt;\\lib\\extç›®å½•ä¸‹çš„jaråŒ…ï¼Œæˆ–è€…è¢«java.ext.dirsæŒ‡å®šçš„è·¯å¾„è¿™ç§çš„æ‰€æœ‰ç±»åº“ã€‚è¿™ä¸ªç±»åŠ è½½å™¨æ˜¯åœ¨ç±»sun.misc.Launcher$ExtClassLoaderä¸­ä»¥Javaä»£ç å®ç°çš„ã€‚ åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication Class Loaderï¼‰è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸Šçš„æ‰€æœ‰ç±»åº“ã€‚è¿™ä¸ªç±»åŠ è½½å™¨æ˜¯åœ¨sun.misc.Launcher$AppClassLoaderå®ç°ã€‚ å®šåˆ¶è‡ªå·±çš„ç±»åŠ è½½å™¨123456789101112131415161718192021222324252627282930313233public class CustomClassLoader extends ClassLoader &#123; public CustomClassLoader(ClassLoader parent) &#123; super(parent); &#125; @Override protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException &#123; String path = \"/classes/\"; try &#123; InputStream ins = new FileInputStream(path + name.replace(\".\", File.separator) + \".class\"); ByteArrayOutputStream baos = new ByteArrayOutputStream(); int bufferSize = 4096; byte[] buffer = new byte[bufferSize]; int bytesNumRead = 0; while ((bytesNumRead = ins.read(buffer)) != -1) &#123; baos.write(buffer, 0, bytesNumRead); &#125; byte[] classData = baos.toByteArray(); return defineClass(name, classData, 0, classData.length); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125; public static void main(String[] args) throws Exception &#123; CustomClassLoader classLoader = new CustomClassLoader(null); Class clazz = classLoader.loadClass(\"com.*.ClassLoader\"); System.out.println(clazz.getClassLoader()); System.out.println(clazz.getClass()); &#125;","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"ClassLoader","slug":"ClassLoader","permalink":"https://pickonebyone.github.io/tags/ClassLoader/"},{"name":"ç±»åŠ è½½æœºåˆ¶","slug":"ç±»åŠ è½½æœºåˆ¶","permalink":"https://pickonebyone.github.io/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/"}]},{"title":"ç±»æ–‡ä»¶ç»“æ„","slug":"ç±»æ–‡ä»¶ç»“æ„","date":"2020-05-29T06:44:50.000Z","updated":"2020-06-04T00:26:39.602Z","comments":true,"path":"2020/05/29/ç±»æ–‡ä»¶ç»“æ„/","link":"","permalink":"https://pickonebyone.github.io/2020/05/29/%E7%B1%BB%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/","excerpt":"","text":"Javaè™šæ‹Ÿæœºè§„èŒƒè§„å®šClassæ–‡ä»¶æ ¼å¼ç»Ÿä¸€é‡‡ç”¨ä¸€ç§ç±»ä¼¼äºCè¯­è¨€ç»“æ„ä½“çš„ä¼ªç»“æ„ä½“æ¥å­˜å‚¨æ•°æ®ï¼Œè¿™ç§ä¼ªç»“æ„ä½“å­˜å‚¨ä¸¤ç§æ•°æ®ç±»å‹ï¼šæ— ç¬¦å·æ•°å’Œè¡¨ã€‚ æ— ç¬¦å·æ•°ï¼šå±äºåŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä»¥u1ã€u2ã€u4ã€u8åˆ†åˆ«ä»£è¡¨1ä¸ªå­—èŠ‚ã€2ä¸ªå­—èŠ‚ã€4ä¸ªå­—èŠ‚ã€8ä¸ªå­—èŠ‚çš„æ— ç¬¦å·æ•°ï¼Œæ— ç¬¦å·æ•°å¯ä»¥ç”¨æ¥æè¿°æ•°å­—ã€ç´¢å¼•å¼•ç”¨ã€æ•°é‡å€¼æˆ–è€…æŒ‰ç…§UTF-8ç¼–ç ç»“æ„æ„æˆçš„å­—ç¬¦ä¸²å€¼ã€‚ è¡¨ï¼šç”±å¤šä¸ªæ— ç¬¦å·æ•°æˆ–è€…å…¶ä»–è¡¨ä½œä¸ºæ•°æ®é¡¹æ„æˆçš„ç¬¦åˆæ•°æ®ç±»å‹ï¼Œæ‰€ä»¥è¡¨éƒ½ä¹ æƒ¯æ€§åœ°ä»¥_infoç»“å°¾ã€‚è¡¨ç”¨äºæè¿°æœ‰å±‚æ¬¡å…³ç³»çš„ç¬¦åˆç»“æ„çš„æ•°æ®ï¼Œæ•´ä¸ªClassæ–‡ä»¶å°±æ˜¯ä¸€å¼ è¡¨ï¼Œç”±ä¸‹è¡¨ä¸­æ•°æ®é¡¹æ„æˆã€‚ ç±»å‹ åç§° ä¸ªæ•° u4 Magic 1 u2 minor_version 1 u2 major_version 1 u2 constant_pool_count 1 cp_info constant_pool constant_pool_count - 1 u2 access_flag 1 u2 this_class 1 u2 super_class 1 u2 interface_count 1 u2 interfaces interface_count u2 fields_count 1 field_info fields fields_count u2 method_count 1 method_info methods methods_count u2 attributes_count 1 attribute_info attributes attributes_count é­”æ•°æ¯ä¸ªClassæ–‡ä»¶çš„å¤´å››ä¸ªå­—èŠ‚ç§°ä¸ºé­”æ•°ï¼Œå…¶å€¼çš„16è¿›åˆ¶è¡¨ç¤ºä¸º0xCAFEBABEï¼ˆæ¢ç®—ä¸ºäºŒè¿›åˆ¶ä¸º1100 1010 1111 1110 1011 1010 1011 1110ï¼‰ï¼Œè™šæ‹Ÿæœºåœ¨åŠ è½½ç±»æ—¶åˆ†æè¯¥æ–‡ä»¶æ˜¯å¦ä¸ºClassæ–‡ä»¶ã€‚ ç‰ˆæœ¬å·ç¬¬5ã€6ä¸ªå­—èŠ‚è¡¨ç¤ºæ¬¡ç‰ˆæœ¬å·ã€‚ç¬¬7ã€8ä¸ªå­—èŠ‚è¡¨ç¤ºä¸»ç‰ˆæœ¬å·ã€‚é«˜ç‰ˆæœ¬çš„JDKèƒ½å¤Ÿå‘ä¸‹å…¼å®¹ä½ç‰ˆæœ¬çš„Classæ–‡ä»¶ï¼Œè™šæ‹Ÿæœºä¼šæ‹’ç»æ‰§è¡Œè¶…è¿‡å…¶ç‰ˆæœ¬çš„Classæ–‡ä»¶ã€‚ å¸¸é‡æ± å¸¸é‡æ± ä¸­å­˜æ”¾ä¸¤å¤§ç±»å¸¸é‡ï¼š å­—é¢é‡å¸¸é‡ï¼šæ¯”è¾ƒæ¥è¿‘Javaè¯­è¨€å±‚é¢çš„å¸¸é‡æ¦‚å¿µï¼Œæ¯”å¦‚å­—ç¬¦ä¸²å’Œè¢«å£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ã€‚å¯¹äºèŒƒå›´åœ¨-127ï½128ä¹‹é—´çš„åŒ…è£…ç±»å‹ä¹Ÿæ˜¯å¸¸é‡ã€‚ ç¬¦å·å¼•ç”¨å¸¸é‡ï¼šå±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…å« ç±»å’Œæ¥å£çš„å…¨é™å®šå å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦ å¸¸é‡æ± çš„å¤§å°ä¸å›ºå®šï¼Œç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œç¬¬é›¶é¡¹ç©ºå‡ºæ¥ï¼Œä¸ºäº†æ»¡è¶³æŸäº›æŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•å€¼çš„æ•°æ®â€œä¸å¼•ç”¨ä»»ä½•ä¸€ä¸ªå¸¸é‡æ± é¡¹ç›®â€ã€‚ å¸¸é‡æ± çš„æ¯ä¸€é¡¹å¸¸é‡éƒ½æ˜¯ä¸€ä¸ªè¡¨ï¼Œè¿™ä¸ªè¡¨çš„ç¬¬ä¸€ä½éƒ½æ˜¯ä¸€ä¸ªu1ç±»å‹çš„æ ‡è¯†ä½ã€‚ ä¸‹é¢æ˜¯å¸¸é‡æ± ä¸­çš„14ç§é¡¹ç›®ç±»å‹ï¼š ä¸‹é¢æ˜¯å¸¸é‡æ± ä¸­çš„14ç§é¡¹ç›®ç±»å‹çš„ç»“æ„è¡¨ï¼š å¸¸é‡æ± ä¸­æ•°æ®é¡¹ç±»å‹ ç±»å‹æ ‡å¿— ç±»å‹æè¿° CONSTANT_Utf8 1 UTF-8ç¼–ç çš„Unicodeå­—ç¬¦ä¸² CONSTANT_Integer 3 intç±»å‹å­—é¢å€¼ CONSTANT_Float 4 floatç±»å‹å­—é¢å€¼ CONSTANT_Long 5 longç±»å‹å­—é¢å€¼ CONSTANT_Double 6 doubleç±»å‹å­—é¢å€¼ CONSTANT_Class 7 å¯¹ä¸€ä¸ªç±»æˆ–æ¥å£çš„ç¬¦å·å¼•ç”¨ CONSTANT_String 8 Stringç±»å‹å­—é¢å€¼ CONSTANT_Fieldref 9 å¯¹ä¸€ä¸ªå­—æ®µçš„ç¬¦å·å¼•ç”¨ CONSTANT_Methodref 10 å¯¹ä¸€ä¸ªç±»ä¸­å£°æ˜çš„æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ CONSTANT_InterfaceMethodref 11 å¯¹ä¸€ä¸ªæ¥å£ä¸­å£°æ˜çš„æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ CONSTANT_NameAndType 12 å¯¹ä¸€ä¸ªå­—æ®µæˆ–æ–¹æ³•çš„éƒ¨åˆ†ç¬¦å·å¼•ç”¨ è®¿é—®æ ‡å¿—è®¿é—®æ ‡å¿—æ ‡ç¤ºäº†å½“å‰ç±»çš„ä¿®é¥°ç¬¦ï¼Œæ¯”å¦‚ public / final / super / interface / enum / abstract / annotation / synthetic æ ‡å¿—åç§° æ ‡å¿—å€¼ å«ä¹‰ ACC_PUBLIC 0x00 01 æ˜¯å¦ä¸ºPublicç±»å‹ ACC_FINAL 0x00 10 æ˜¯å¦è¢«å£°æ˜ä¸ºfinalï¼Œåªæœ‰ç±»å¯ä»¥è®¾ç½® ACC_SUPER 0x00 20 æ˜¯å¦å…è®¸ä½¿ç”¨invokespecialå­—èŠ‚ç æŒ‡ä»¤çš„æ–°è¯­ä¹‰ï¼ ACC_INTERFACE 0x02 00 æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæ¥å£ ACC_ABSTRACT 0x04 00 æ˜¯å¦ä¸ºabstractç±»å‹ï¼Œå¯¹äºæ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è¯´ï¼Œæ¬¡æ ‡å¿—å€¼ä¸ºçœŸï¼Œå…¶ä»–ç±»å‹ä¸ºå‡ ACC_SYNTHETIC 0x10 00 æ ‡å¿—è¿™ä¸ªç±»å¹¶éç”±ç”¨æˆ·ä»£ç äº§ç”Ÿ ACC_ANNOTATION 0x20 00 æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæ³¨è§£ ACC_ENUM ï¼x40 00 æ ‡å¿—è¿™æ˜¯ä¸€ä¸ªæšä¸¾ ç±»ç´¢å¼•ã€çˆ¶ç±»ç´¢å¼•ã€æ¥å£ç´¢å¼•é›†åˆ ç±»ç´¢å¼•ï¼šthis_class, ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„å…¨é™å®šå çˆ¶ç±»ç´¢å¼•ï¼šsuper_class, çˆ¶ç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„çˆ¶ç±»çš„å…¨é™å®šå æ¥å£ç´¢å¼•é›†åˆï¼šinterfaces, ç”¨äºæè¿°è¿™ä¸ªç±»å®ç°äº†å“ªäº›æ¥å£ å­—æ®µè¡¨é›†åˆå­—æ®µè¡¨é›†åˆï¼ˆfield_infoï¼‰ç”¨äºæè¿°æ¥å£æˆ–è€…ç±»ä¸­å£°æ˜çš„å˜é‡ï¼ŒåŒ…å«ç±»å˜é‡å’Œå®ä¾‹å˜é‡ï¼Œä½†ä¸åŒ…å«æ–¹æ³•å†…éƒ¨å£°æ˜çš„å±€éƒ¨å˜é‡ã€‚ |ç±»å‹|åç§°|æ•°é‡||â€”-|â€”-|â€”-|â€”-||u2 |access_flag|1|è®¿é—®ä¿®é¥°ç¬¦||u2 |name_index | 1| å­—æ®µçš„ç®€å•åç§°,å¦‚String str = â€œ123â€, strå°±æ˜¯ç®€å•åç§°||u2 |descritpor_index|1| å­—æ®µæˆ–è€…æ–¹æ³•çš„æè¿°ç¬¦||u2 |attributes_count |1 | ||attribute_info | attributes | attributes_count| | è®¿é—®ä¿®é¥°ç¬¦ æ ‡å¿—åç§° æ ‡å¿—å€¼ å«ä¹‰ ACC_PUBLIC 0x0001 å­—æ®µæ˜¯å¦ä¸ºpublic ACC_PRIVATE 0x0002 å­—æ®µæ˜¯å¦ä¸ºprivate ACC_PROTECTED 0x0004 å­—æ®µæ˜¯å¦ä¸ºprotected ACC_STATIC 0x0008 å­—æ®µæ˜¯å¦ä¸ºstatic ACC_FINAL 0x0010 å­—æ®µæ˜¯å¦ä¸ºfinal ACC_VOLATILE 0x0040 å­—æ®µæ˜¯å¦ä¸ºvolatile ACC_TRANSTENT 0x0080 å­—æ®µæ˜¯å¦ä¸ºtransient ACC_SYNCHETIC 0x1000 å­—æ®µæ˜¯å¦ä¸ºç”±ç¼–è¯‘å™¨è‡ªåŠ¨äº§ç”Ÿ ACC_ENUM 0x4000 å­—æ®µæ˜¯å¦ä¸ºenum æè¿°ç¬¦ï¼šæè¿°ç¬¦çš„ä½œç”¨æ˜¯ç”¨æ¥æè¿°å­—æ®µçš„æ•°æ®ç±»å‹ã€æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ï¼ˆæ•°é‡ã€ç±»å‹ã€é¡ºåºï¼‰å’Œè¿”å›å€¼ã€‚æ ¹æ®æè¿°ç¬¦çš„è§„åˆ™ï¼šåŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠä»£è¡¨æ— è¿”å›å€¼çš„voidç±»å‹éƒ½ç”¨ä¸€ä¸ªå¤§å†™çš„å­—ç¬¦æ¥è¡¨ç¤º;è€Œå¯¹è±¡ç±»å‹åˆ™ç”¨å­—ç¬¦LåŠ å¯¹è±¡çš„å…¨é™å®šåæ¥æè¿°; æ ‡å¿—ç¬¦å· å«ä¹‰ B byte C char D double F float I int J long S short Z boolean V void æŒ‰ç…§å…ˆå‚æ•°åˆ—è¡¨åè¿”å›å€¼çš„é¡ºåºæè¿°ï¼Œå‚æ•°åˆ—è¡¨æŒ‰ç…§é¡ºåºæ”¾åœ¨â€()â€å†…éƒ¨ï¼ŒString toString()æè¿°ä¸ºV()java.lang.String L å¯¹è±¡ç±»å‹ [ æ•°ç»„ç±»å‹ [I: ä»£è¡¨int[], [[I:ä»£è¡¨int[][] æ–¹æ³•è¡¨é›†åˆClass æ–‡ä»¶ä¸­å¯¹æ–¹æ³•çš„æè¿°å’Œå¯¹å­—æ®µçš„æè¿°å®Œå…¨æ˜¯ä¸€è‡´çš„ï¼Œ æ–¹æ³•è¡¨ä¸­çš„ç»“æ„å’Œå­—æ®µè¡¨ä¸­çš„æ¥å£ä¸€æ ·ã€‚ å› ä¸ºvolatileå…³é”®å­—å’Œtransientå…³é”®å­—ä¸èƒ½ä¿®é¥°æ–¹æ³•ï¼Œæ‰€ä»¥æ–¹æ³•è¡¨çš„è®¿é—®æ ‡å¿—ä¸­æ²¡æœ‰ACC_VOLATILEå’ŒACC_TRANSIENTã€‚ ä½†æ˜¯å¢åŠ äº†synchronized,native,abstract,strictfp(strict float point, ç²¾ç¡®çš„æµ®ç‚¹æ•°)å…³é”®å­—çš„ä¿®é¥°ç¬¦ã€‚å¯¹äºæ–¹æ³•é‡Œçš„ä»£ç ï¼Œç»è¿‡ç¼–è¯‘å™¨å˜å¼‚å¸¸å­—èŠ‚ç æŒ‡ä»¤åï¼Œå­˜æ”¾åœ¨æ–¹æ³•å±æ€§è¡¨ä¸­ä¸€ä¸ªåä¸ºcodeçš„å±æ€§é‡Œã€‚ æ ‡å¿—åç§° æ ‡å¿—å€¼ å«ä¹‰ ACC_PUBLIC 0x00 01 æ–¹æ³•æ˜¯å¦ä¸ºpublic ACC_PRIVATE 0x00 02 æ–¹æ³•æ˜¯å¦ä¸ºprivate ACC_PROTECTED 0x00 04 æ–¹æ³•æ˜¯å¦ä¸ºprotected ACC_STATIC 0x00 08 æ–¹æ³•æ˜¯å¦ä¸ºstatic ACC_FINAL 0x00 10 æ–¹æ³•æ˜¯å¦ä¸ºfinal ACC_SYHCHRONRIZED 0x00 20 æ–¹æ³•æ˜¯å¦ä¸ºsynchronized ACC_BRIDGE 0x00 40 æ–¹æ³•æ˜¯å¦æ˜¯æœ‰ç¼–è¯‘å™¨äº§ç”Ÿçš„æ–¹æ³• ACC_VARARGS 0x00 80 æ–¹æ³•æ˜¯å¦æ¥å—å‚æ•° ACC_NATIVE 0x01 00 æ–¹æ³•æ˜¯å¦ä¸ºnative ACC_ABSTRACT 0x04 00 æ–¹æ³•æ˜¯å¦ä¸ºabstract ACC_STRICTFP 0x08 00 æ–¹æ³•æ˜¯å¦ä¸ºstrictfp ï¼ˆstrict-float-point,ç²¾å‡†çš„æµ®ç‚¹æ•°ï¼‰ ACC_SYNTHETIC 0x10 00 æ–¹æ³•æ˜¯å¦æ˜¯æœ‰ç¼–è¯‘å™¨è‡ªåŠ¨äº§ç”Ÿçš„ å±æ€§è¡¨é›†åˆåœ¨Classæ–‡ä»¶ã€å­—æ®µè¡¨ã€æ–¹æ³•è¡¨ä¸­éƒ½å¯ä»¥æºå¸¦è‡ªå·±çš„å±æ€§è¡¨é›†åˆï¼ˆattribute_infoï¼‰,ç”¨äºæè¿°æŸäº›åœºæ™¯çš„ä¸“æœ‰ä¿¡æ¯ã€‚ ä¸å¼ºåˆ¶è¦æ±‚å„å±æ€§è¡¨çš„é¡ºåºï¼Œåªè¦ä¸ä¸å·²æœ‰å±æ€§è¡¨é‡åå³å¯ã€‚ä»»ä½•äººå®ç°çš„ç¼–è¯‘å™¨éƒ½å¯ä»¥å‘å±æ€§è¡¨ä¸­å†™å…¥è‡ªå·±å®šä¹‰çš„å±æ€§ä¿¡æ¯ï¼ŒJavaè™šæ‹Ÿæœºåœ¨è¿è¡Œæ—¶ä¼šå¿½ç•¥ä¸è®¤è¯†çš„å±æ€§ã€‚ å±æ€§åç§° ä½¿ç”¨ä½ç½® å«ä¹‰ Code æ–¹æ³•è¡¨ Javaä»£ç ç¼–è¯‘æˆçš„å­—èŠ‚ç æŒ‡ä»¤ ConstantValue å­—æ®µè¡¨ finalå…³é”®å­—å®šä¹‰çš„å¸¸é‡æ±  Deprecated ç±»ï¼Œæ–¹æ³•ï¼Œå­—æ®µè¡¨ è¢«å£°æ˜ä¸ºdeprecatedçš„æ–¹æ³•å’Œå­—æ®µ Exceptions æ–¹æ³•è¡¨ æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ EnclosingMethod ç±»æ–‡ä»¶ ä»…å½“ä¸€ä¸ªç±»ä¸ºå±€éƒ¨ç±»æˆ–è€…åŒ¿åç±»æ˜¯æ‰èƒ½æ‹¥æœ‰è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”¨äºæ ‡è¯†è¿™ä¸ªç±»æ‰€åœ¨çš„å¤–å›´æ–¹æ³• InnerClass ç±»æ–‡ä»¶ å†…éƒ¨ç±»åˆ—è¡¨ LineNumberTable Codeå±æ€§ Javaæºç çš„è¡Œå·ä¸å­—èŠ‚ç æŒ‡ä»¤çš„å¯¹åº”å…³ç³» LocalVariableTable Codeå±æ€§ æ–¹æ³•çš„å±€éƒ¨å˜é‡æè¿° StackMapTable Codeå±æ€§ JDK1.6ä¸­æ–°å¢çš„å±æ€§ï¼Œä¾›æ–°çš„ç±»å‹æ£€æŸ¥æ£€éªŒå™¨æ£€æŸ¥å’Œå¤„ç†ç›®æ ‡æ–¹æ³•çš„å±€éƒ¨å˜é‡å’Œæ“ä½œæ•°æœ‰æ‰€éœ€è¦çš„ç±»æ˜¯å¦åŒ¹é… Signature ç±»ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨ ç”¨äºæ”¯æŒæ³›å‹æƒ…å†µä¸‹çš„æ–¹æ³•ç­¾å SourceFile ç±»æ–‡ä»¶ è®°å½•æºæ–‡ä»¶åç§° SourceDebugExtension ç±»æ–‡ä»¶ ç”¨äºå­˜å‚¨é¢å¤–çš„è°ƒè¯•ä¿¡æ¯ Synthetic ç±»ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨ æ ‡å¿—æ–¹æ³•æˆ–å­—æ®µä¸ºç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ LocalVariableTypeTable ç±» ä½¿ç”¨ç‰¹å¾ç­¾åä»£æ›¿æè¿°ç¬¦ï¼Œæ˜¯ä¸ºäº†å¼•å…¥æ³›å‹è¯­æ³•ä¹‹åèƒ½æè¿°æ³›å‹å‚æ•°åŒ–ç±»å‹è€Œæ·»åŠ  RuntimeVisibleAnnotations ç±»ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨ ä¸ºåŠ¨æ€æ³¨è§£æä¾›æ”¯æŒ RuntimeInvisibleAnnotations è¡¨ï¼Œæ–¹æ³•è¡¨ï¼Œå­—æ®µè¡¨ ç”¨äºæŒ‡æ˜å“ªäº›æ³¨è§£æ˜¯è¿è¡Œæ—¶ä¸å¯è§çš„ RuntimeVisibleParameterAnnotation æ–¹æ³•è¡¨ ä½œç”¨ä¸RuntimeVisibleAnnotationså±æ€§ç±»ä¼¼ï¼Œåªä¸è¿‡ä½œç”¨å¯¹è±¡ä¸ºæ–¹æ³• RuntimeInvisibleParameterAnnotation æ–¹æ³•è¡¨ ä½œç”¨ä¸RuntimeInvisibleAnnotationså±æ€§ç±»ä¼¼ï¼Œä½œç”¨å¯¹è±¡å“ªä¸ªä¸ºæ–¹æ³•å‚æ•° AnnotationDefault æ–¹æ³•è¡¨ ç”¨äºè®°å½•æ³¨è§£ç±»å…ƒç´ çš„é»˜è®¤å€¼ BootstrapMethods ç±»æ–‡ä»¶ ç”¨äºä¿å­˜invokeddynamicæŒ‡ä»¤å¼•ç”¨çš„å¼•å¯¼æ–¹å¼é™å®šç¬¦ å¯¹äºçœ‹äº†æ–‡ç« è¿˜æœ‰ç‚¹æ‡µçš„åŒå­¦ï¼Œçœ‹è¿™é‡Œçš„è§†é¢‘è®²è§£ï¼Œå¿½ç•¥å¹¿å‘Šã€‚ã€Šå…¨ç½‘æœ€ç‰›JVMå­—èŠ‚ç ç»“æ„åˆ†æã€Classç±»æ–‡ä»¶æ ¸å¿ƒç»“æ„ã€‹ã€‚","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"Classç»“æ„","slug":"Classç»“æ„","permalink":"https://pickonebyone.github.io/tags/Class%E7%BB%93%E6%9E%84/"}]},{"title":"Javaè™šæ‹Ÿæœº","slug":"Javaè™šæ‹Ÿæœº","date":"2020-05-28T12:59:14.000Z","updated":"2020-06-24T14:18:39.296Z","comments":true,"path":"2020/05/28/Javaè™šæ‹Ÿæœº/","link":"","permalink":"https://pickonebyone.github.io/2020/05/28/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/","excerpt":"","text":"æ³¨ï¼šæœ¬ç³»åˆ—ä¸ºã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹çš„è¯»ä¹¦ç¬”è®°ã€‚å°‘é‡æ¥æºäºç½‘ç»œï¼Œè§†é¢‘æ•™æã€‚ å¦‚ä½•è®¾è®¡ä¸€ä¸ªè™šæ‹Ÿæœºå‡è®¾è‡ªå·±è¦å†™ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œåº”è¯¥è€ƒè™‘ä»€ä¹ˆï¼Ÿ 12345è™šæ‹Ÿæœºè¦è¿è¡Œä»€ä¹ˆï¼Ÿå¦‚ä½•æŠŠè§„èŒƒçš„æ–‡ä»¶å†…å®¹è¯»å–åˆ°å†…å­˜ä¸­ï¼Ÿè¯»å–åˆ°å†…å­˜ä¸­çš„æ•°æ®å¦‚ä½•å­˜å‚¨ï¼Ÿå¦‚ä½•æ‰§è¡Œè¿™äº›è§„èŒƒæ–‡ä»¶ä¸­çš„æ•°æ®ç¿»è¯‘æˆæ“ä½œç³»ç»Ÿè®¤è¯†çš„æŒ‡ä»¤ï¼Ÿæ‰§è¡Œå®Œæˆåå¦‚ä½•æ¸…ç†ï¼Ÿ è™šæ‹Ÿæœºçš„ä¸»è¦åŠŸèƒ½ä»¥åŠç»„æˆè™šæ‹Ÿæœºè¦è¿è¡Œä»£ç ï¼Œè¿™äº›ä»£ç è¦å®šåˆ¶ä¸€ä¸ªè§„èŒƒï¼Œè¿™æ ·è™šæ‹Ÿæœºæ‰å¯ä»¥æ ¹æ®åˆ¶å®šå¥½çš„è§„èŒƒå»è§£æå’Œæ‰§è¡Œã€‚å¯¹äºJavaè™šæ‹Ÿæœºæ¥è®²ï¼Œå®ƒè¦è¯»å–çš„æ–‡ä»¶å°±æ˜¯Classç±»æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦ä¸€æ®µä»£ç æŠŠClassç±»æ–‡ä»¶å†…å®¹è¯»å–åˆ°å†…å­˜ä¸­ï¼ŒåŒæ—¶è¦æ³¨æ„åˆ¤æ–­ï¼Œè¯»å–çš„æ–‡ä»¶å†…å®¹æ˜¯å¦ç¬¦åˆClassç±»æ–‡ä»¶çš„è§„èŒƒï¼ŒåŒæ—¶æ–‡ä»¶å†…å®¹æ˜¯å¦ä¼šå±å®³åˆ°è™šæ‹Ÿæœºã€‚æŠŠæ–‡ä»¶å†…å®¹è¯»å–åˆ°å†…å­˜ä¸­åï¼Œå¦‚ä½•å­˜æ”¾ã€æ–¹ä¾¿ç®¡ç†å’Œä½¿ç”¨ï¼ŒåŒæ—¶è¦ä¿è¯æ€§èƒ½ã€å®‰å…¨æ€§ã€‚æŠŠè¿™äº›æ–‡ä»¶å†…å®¹â€œç¿»è¯‘â€ä¸ºæ“ä½œç³»ç»Ÿè®¤è¯†çš„æŒ‡ä»¤ï¼Œå¹¶ä¸”æ“æ§è¿™äº›æŒ‡ä»¤æŒ‰ç…§é¢„å®šçš„â€œè§„åˆ™â€è¿è¡Œï¼Œè¾¾åˆ°å¯é¢„æœŸçš„ç»“æœã€‚ä¸ºäº†æå‡æ•ˆç‡éœ€è¦è€ƒè™‘å¤šçº¿ç¨‹å’Œå¹¶å‘ã€‚æ‰§è¡Œå®Œæˆåï¼Œæ¸…ç†ä¸éœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œä»¥ä¾¿å…¶ä»–ç¨‹åºä½¿ç”¨(JVMè§„èŒƒä¸­å¹¶æ²¡æœ‰è§„å®šåƒåœ¾å›æ”¶éƒ¨åˆ†)ã€‚ JVMè™šæ‹Ÿæœºä¸åŒ…å«ClassLoaderéƒ¨åˆ† è™šæ‹Ÿæœºç›¸å…³çŸ¥è¯†ä¼ é€é—¨ ç±»æ–‡ä»¶ç»“æ„ ç±»åŠ è½½å™¨å’Œç±»åŠ è½½æœºåˆ¶ JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸ å­—èŠ‚ç æ‰§è¡Œå¼•æ“ JVM å†…å­˜æ¨¡å‹ çº¿ç¨‹å’Œå¹¶å‘ å†…å­˜åˆ†é…ä¸å›æ”¶ ç¼–è¯‘ä¸ç¼–è¯‘ä¼˜åŒ–æŠ€æœ¯ å¸¸ç”¨ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…· å¸¸ç”¨çš„JVMå‚æ•° æ‰©å±•é˜…è¯»ï¼šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºåˆ°åº•æ˜¯ä»€ä¹ˆ Javaè™šæ‹Ÿæœºæ˜¯ä¸€ç§æŠ½è±¡çš„è®¡ç®—æœºï¼Œå®ƒæ¨¡æ‹Ÿäº†ä¸€å¥—è‡ªå·±çš„ç¡¬ä»¶ä½“ç³»ç»“æ„ï¼ˆå¤„ç†å™¨ã€å †æ ˆã€æŒ‡ä»¤é›†å’Œå¯„å­˜å™¨ï¼‰ã€‚ä¸åŒçš„å¹³å°æœ‰ç€ä¸åŒçš„å®ç°ç‰ˆæœ¬ï¼Œå±è”½äº†å¹³å°çš„å·®å¼‚æ€§ã€‚ä½¿å¾—ä¸åŒå¹³å°ä¸Šçš„è™šæ‹Ÿæœºå¯ä»¥è¿è¡Œè¢«javacç¼–è¯‘çš„åŒä¸€ä»½.classæ–‡ä»¶ã€‚ å…³äºJVMçš„é¢è¯•é¢˜ï¼š24ä¸ªJvmé¢è¯•é¢˜æ€»ç»“åŠç­”æ¡ˆå¸¸è§JVMé¢è¯•é¢˜åŠç­”æ¡ˆæ•´ç†2020å¹´JVMé¢è¯•é¢˜åè¡€æ•´ç†ã€è¿‡å¹´å¿…çœ‹ã€‘æ€»ç»“çš„JVMé¢è¯•é¢˜é¢è¯•å¿…é—®çš„JVMåº”è¯¥æ€ä¹ˆå­¦ï¼ˆé¢è¯•é¢˜å«ç­”æ¡ˆï¼‰å¤§å‚é¢è¯•ç»ï¼šé«˜é¢‘ç‡JVMé¢è¯•é—®é¢˜æ•´ç†ï¼2019å¹´JVMé¢è¯•éƒ½é—®äº†ä»€ä¹ˆï¼Ÿå¿«çœ‹çœ‹è¿™22é“é¢è¯•é¢˜ï¼ï¼ˆé™„ç­”æ¡ˆè§£æï¼‰JVM é¢è¯•é¢˜ 68 é—®ï¼Œé¢è¯•åˆå¯ä»¥å¤šæ‰¯ä¸€ä¸ªå°æ—¶äº†ï¼ã€æå®šJvmé¢è¯•ã€‘ Java å†…å­˜åŒºåŸŸæ­ç§˜é™„å¸¸è§é¢è¯•é¢˜è§£æ","categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"}]},{"title":"sublimeå¿«æ·é”®","slug":"sublimeå¿«æ·é”®","date":"2019-05-29T10:38:27.000Z","updated":"2020-06-04T00:26:39.598Z","comments":true,"path":"2019/05/29/sublimeå¿«æ·é”®/","link":"","permalink":"https://pickonebyone.github.io/2019/05/29/sublime%E5%BF%AB%E6%8D%B7%E9%94%AE/","excerpt":"","text":"Editcmd + [ | Left Indentcmd + ] | Right Indentcmd + ctrl + up | Swap line upcmd + ctrl + down | swap line downcmd + shift + d | Duplicate linecmd + J | Jone Lines.cmd + Left | Beginning Of Linecmd + Right | End of Linecmd + ctrl + / | Toggle comment blockctrl + K | Delete To End.ctrl + shift + K | Delete Linectrl + T | swap words.cmd + shift + Enter | Insert line beforecmd + Enter | insert line aftercmd + option + T | Special charactersctrl + D | delete word after Selectioncmd + D | Expand selection to words.ctrl + cmd + G | Expand all selection to wordscmd + L | expand selection to lineEsc | Single selection , cancle multiple selection.ctrl + shift + up | add previous linectrl + shift + down | add next line.cmd + shift + L | å°†é€‰ä¸­çš„åŒºåŸŸåˆ†å‰²æˆå¤šè¡Œé€‰ä¸­çŠ¶æ€(å¤šå…‰æ ‡æ“ä½œçŠ¶æ€)|Split into linesoption + mouse | å¤šé‡å…‰æ ‡é€‰ä¸­cmd + shift + J | å·²ç¼©è¿›å±‚çº§ä¸ºä¾æ®ï¼Œä¸€å±‚å±‚å‘å¤–é€‰ä¸­|Expand selection to indentation.ctrl + shift + M å°†åŒ¹é…æ‹¬å·ä¸­çš„å†…å®¹é€‰ä¸­|ã€‚ Findcmd + F | findcmd + G | find nextcmd + shift + F | find in filescmd + shift + E | ç¼“å­˜ç”¨äºæ›¿æ¢çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¹‹åçš„æ›¿æ¢cmd + E | ç¼“å­˜ç”¨äºæŸ¥æ‰¾çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¹‹åçš„æŸ¥æ‰¾ã€‚cmd + option + E | replace Next Go Tocmd + P | go to Anythingcmd + R | go to Symbolcmd + G | Go to line.ctrl + M | jump to matching bracket()cmd + F2 | Toggle bookmarkF2. | Jump to Next bookmark.cmd + shift + F2 | clear all bookmarks.cmd + option + right | Next File","categories":[{"name":"ç”Ÿäº§åŠ›","slug":"ç”Ÿäº§åŠ›","permalink":"https://pickonebyone.github.io/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/"},{"name":"sublimeå¿«æ·é”®","slug":"ç”Ÿäº§åŠ›/sublimeå¿«æ·é”®","permalink":"https://pickonebyone.github.io/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/sublime%E5%BF%AB%E6%8D%B7%E9%94%AE/"}],"tags":[{"name":"ç”Ÿäº§åŠ›","slug":"ç”Ÿäº§åŠ›","permalink":"https://pickonebyone.github.io/tags/%E7%94%9F%E4%BA%A7%E5%8A%9B/"},{"name":"sublime","slug":"sublime","permalink":"https://pickonebyone.github.io/tags/sublime/"},{"name":"å¿«æ·é”®","slug":"å¿«æ·é”®","permalink":"https://pickonebyone.github.io/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/"}]},{"title":"Linuxå‘½ä»¤-äº¤é›†ã€å¹¶é›†ã€å·®é›†","slug":"Linuxå‘½ä»¤-äº¤é›†ã€å¹¶é›†ã€å·®é›†","date":"2019-05-29T10:23:15.000Z","updated":"2020-06-04T00:26:39.589Z","comments":true,"path":"2019/05/29/Linuxå‘½ä»¤-äº¤é›†ã€å¹¶é›†ã€å·®é›†/","link":"","permalink":"https://pickonebyone.github.io/2019/05/29/Linux%E5%91%BD%E4%BB%A4-%E4%BA%A4%E9%9B%86%E3%80%81%E5%B9%B6%E9%9B%86%E3%80%81%E5%B7%AE%E9%9B%86/","excerpt":"","text":"Linux å‘½ä»¤ ä¸¤ä¸ªæ–‡ä»¶æ¯”å¯¹ï¼Œæ±‚äº¤é›†ï¼Œå¹¶é›†ï¼Œå·®é›†ã€‚ a.txt1234567aaaaabbbbbcccccdddddeeeeefffffggggg b.txt12345678aaaaaccccceeeeegggggiiiiijjjjjkkkkklllll æ–¹æ³•1: sortäº¤é›†ï¼š $sort a.txt b.txt | uniq -d 1234aaaaaccccceeeeeggggg å¹¶é›†ï¼š sort a.txt b.txt | uniq 1234567891011aaaaabbbbbcccccdddddeeeeefffffgggggiiiiijjjjjkkkkklllll å·®é›†ï¼š sort a.txt b.txt b.txt | uniq -u 123bbbbbdddddfffff è¯´æ˜ï¼š sort å…ˆç»™æ–‡ä»¶æ’åºã€‚-d æ˜¾ç¤ºæ¬¡æ•°å¤§äºä¸€æ¬¡çš„è¡Œ-u æ˜¾ç¤ºæ¬¡æ•°ä»…ä¸ºä¸€æ¬¡çš„è¡Œ æ–¹æ³•2: comm comm a.txt b.txt 1234567891011 aaaaabbbbb cccccddddd eeeeefffff ggggg iiiii jjjjj kkkkk lllll æ˜¾ç¤ºä¸‰åˆ—ï¼šç¬¬ä¸€åˆ—ï¼šaä¸­æœ‰ï¼Œbæ²¡æœ‰ã€‚aå·®b comm -2 -3 a.txt b.txtç¬¬äºŒåˆ—ï¼šaæ²¡æœ‰ï¼Œbæœ‰ã€‚ bå·®a comm -1 -3 a.txt b.txtç¬¬ä¸‰åˆ—ï¼šabéƒ½æœ‰ aäº¤b comm -1 -2 a.txt b.txt å¤§å°å†™äº’è½¬æ³¨æ„ï¼š ä»¥ä¸‹å‘½ä»¤Mac OSæ— æ•ˆ sed â€˜s/[a-z]/\\u&amp;/gâ€™sed â€˜s/[A-Z]/\\l&amp;/gâ€™ æ‹†è§£æ¯ä¸€è¡Œä¸­å›ºå®šå…³é”®å­—çš„åˆ—sed â€˜s/.(action=[a-zA-Z]{1,}).(cmd=[_a-zA-Z-]{1,})./\\1 \\2/â€˜æ³¨æ„ï¼šåœ¨æ¬¡æ•°åŒ¹é…æ—¶ï¼š1ï¼‰åœ†æ‹¬å·å¿…é¡»è½¬ä¹‰2ï¼‰èŠ±æ‹¬å·å¿…é¡»è½¬ä¹‰","categories":[{"name":"Linux","slug":"Linux","permalink":"https://pickonebyone.github.io/categories/Linux/"},{"name":"Linuxå‘½ä»¤ - äº¤é›†ã€å¹¶é›†ã€å·®é›†","slug":"Linux/Linuxå‘½ä»¤-äº¤é›†ã€å¹¶é›†ã€å·®é›†","permalink":"https://pickonebyone.github.io/categories/Linux/Linux%E5%91%BD%E4%BB%A4-%E4%BA%A4%E9%9B%86%E3%80%81%E5%B9%B6%E9%9B%86%E3%80%81%E5%B7%AE%E9%9B%86/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://pickonebyone.github.io/tags/Linux/"},{"name":"comm","slug":"comm","permalink":"https://pickonebyone.github.io/tags/comm/"},{"name":"sort","slug":"sort","permalink":"https://pickonebyone.github.io/tags/sort/"}]},{"title":"VIMå‘½ä»¤æ•´ç†","slug":"VIMå‘½ä»¤æ•´ç†","date":"2019-05-29T10:13:01.000Z","updated":"2020-05-29T10:20:38.174Z","comments":true,"path":"2019/05/29/VIMå‘½ä»¤æ•´ç†/","link":"","permalink":"https://pickonebyone.github.io/2019/05/29/VIM%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86/","excerpt":"","text":"Alive12345678I: Insert ModeEsc: Nomal ModeQ : Quite With Out Save.WQ : Write And QuiteHJKL: Left Down Up Right.X: Cut CharacterDD: Delete LineP: Pesta Character Felling Better123456789101112a: åœ¨å…‰æ ‡åæ’å…¥o: åœ¨å½“å‰è¡Œåæ’å…¥ä¸€ä¸ªæ–°è¡ŒO: åœ¨å½“å‰è¡Œå‰æ’å…¥ä¸€ä¸ªæ–°è¡Œcw: åˆ é™¤ä»å…‰æ ‡æ‰€åœ¨ä½ç½®ååˆ°ä¸€ä¸ªå•è¯ç»“å°¾çš„å­—ç¬¦ c2w, c3w.Moving0 &#x2F; ^ å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–ï¼ˆä¸æ˜¯blankçš„ä½ç½®ï¼‰$ &#x2F; g_ å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ï¼ˆä¸æ˜¯blankçš„ä½ç½®ï¼‰&#x2F;pattern å®šä½åˆ°patternçš„åŒºåŸŸPestap: pestau : undoctrl+r : redo Better,Faster,Stronger12345678910112d : delete two lines.100idesu[Esc]: insert 100 times desu.4p : pesta 4 times.% : swap &#123;&#125;#&#x2F;* : å‘ä¸Šï¼ä¸‹æœç´¢å½“å‰å…‰æ ‡æ‰€åœ¨çš„å•è¯0y$ ï¼šç§»åŠ¨åˆ°è¡Œé¦–ï¼Œå¼€å§‹copyï¼Œä¸€ç›´åˆ°æœ¬è¡Œæœ€åä¸€ä¸ªå­—ç¬¦ã€‚d: delete and copyv: select and copygU: å˜å¤§å†™ and copygu: å˜å°å†™ And copy å—æ“ä½œ1234^ -&gt; åˆ°å¼€å¤´Ctrl-v -&gt; å¼€å§‹å—æ“ä½œCtrl-d -&gt; å‘ä¸‹ç§»åŠ¨Iâ€“ [Esc]-&gt; æ’å…¥â€“ vimè¶…èƒ½åŠ›123456789åœ¨å½“å‰è¡Œç§»åŠ¨å…‰æ ‡ï¼š0: åˆ°è¡Œé¦–^: åˆ°æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªéblankå­—ç¬¦$: åˆ°è¡Œå°¾g_ï¼šåˆ°æœ¬è¡Œæœ€åä¸€ä¸ªéblankå­—ç¬¦faï¼šåˆ°ä¸‹ä¸€ä¸ªä¸ºaçš„å­—ç¬¦å¤„ï¼Œ fsåˆ°ä¸‹ä¸€ä¸ªä¸ºsçš„å­—ç¬¦å¤„tï¼Œï¼›åˆ°é€—å·å‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œtaåˆ°aå‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦3faï¼šå½“å‰è¡ŒæŸ¥æ‰¾ç¬¬ä¸‰ä¸ªå‡ºç°çš„adtï¼Œï¼šåˆ é™¤å¤šæœ‰çš„å†…å®¹ï¼Œä¸€ç›´åˆ°é€—å·å‡ºç°ã€‚ åŒºåŸŸé€‰æ‹©12345678910a å’Œ iaction å¯ä»¥æ˜¯ä»»ä½•å‘½ä»¤ï¼Œdï¼šdeleteï¼Œ yï¼šcopyï¼Œ vï¼šview modeobject å¯ä»¥æ˜¯ï¼šwï¼šwordï¼Œ sï¼šstatementï¼Œ pï¼šparagraphï¼Œä¹Ÿå¯ä»¥æ˜¯ç‰¹æ®Šçš„å­—ç¬¦ã€‚ä¾‹å¦‚å­—ç¬¦ä¸²ï¼š(map (+) (&quot;foo&quot;)),å…‰æ ‡åœ¨oä¸Šã€‚viâ€ : foovaâ€ : â€œfooâ€vi) : â€œfooâ€va) : (â€œfooâ€)v2i): map (+) (â€œfooâ€)v2a): (map (+) (â€œfooâ€)) å¯è§†åŒ–é€‰æ‹©12345######ç¼©è¿›######ä½¿ç”¨vï¼Vè¿›å…¥å¯è§†åŒ–æ¨¡å¼J ï¼š æŠŠæ‰€æœ‰çš„è¡Œé“¾æ¥èµ·æ¥å˜æˆä¸€è¡Œ&lt;&#x2F;&gt;ï¼šå·¦å³ç¼©è¿›&#x3D; ï¼šè‡ªåŠ¨ç¼©è¿› 12345######è¡Œåè¿½åŠ ######ctrl+v ï¼š è¿›å…¥å¯è§†åŒ–ç¼–è¾‘æ¨¡å¼é€‰ä¸­ç›¸åº”çš„è¡Œï¼ˆjæˆ–è€…ctrl+d æˆ–è€…ï¼pattern æˆ–è€…%ï¼‰$åˆ°è¡Œæœ€åA(append,åœ¨è¡Œå°¾è¿½åŠ )ï¼Œ è¾“å…¥å­—ç¬¦ä¸²ï¼Œ æŒ‰ESC","categories":[{"name":"Linux","slug":"Linux","permalink":"https://pickonebyone.github.io/categories/Linux/"},{"name":"VIM","slug":"Linux/VIM","permalink":"https://pickonebyone.github.io/categories/Linux/VIM/"}],"tags":[]}],"categories":[{"name":"JavaæŠ€æœ¯æ ˆ","slug":"JavaæŠ€æœ¯æ ˆ","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/"},{"name":"Spring","slug":"JavaæŠ€æœ¯æ ˆ/Spring","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Spring/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ†å¸ƒå¼","slug":"åˆ†å¸ƒå¼","permalink":"https://pickonebyone.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"IDç”Ÿæˆå™¨","slug":"åˆ†å¸ƒå¼/IDç”Ÿæˆå™¨","permalink":"https://pickonebyone.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F/ID%E7%94%9F%E6%88%90%E5%99%A8/"},{"name":"Redis","slug":"Redis","permalink":"https://pickonebyone.github.io/categories/Redis/"},{"name":"é›†ç¾¤éƒ¨ç½²","slug":"Redis/é›†ç¾¤éƒ¨ç½²","permalink":"https://pickonebyone.github.io/categories/Redis/%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/"},{"name":"è®¾è®¡åŸåˆ™","slug":"è®¾è®¡æ¨¡å¼/è®¾è®¡åŸåˆ™","permalink":"https://pickonebyone.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"},{"name":"Javaè™šæ‹Ÿæœº","slug":"JavaæŠ€æœ¯æ ˆ/Javaè™šæ‹Ÿæœº","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/"},{"name":"Linux","slug":"Linux","permalink":"https://pickonebyone.github.io/categories/Linux/"},{"name":"VIM","slug":"Linux/VIM","permalink":"https://pickonebyone.github.io/categories/Linux/VIM/"},{"name":"Etcd","slug":"JavaæŠ€æœ¯æ ˆ/Etcd","permalink":"https://pickonebyone.github.io/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/Etcd/"},{"name":"ç”Ÿäº§åŠ›","slug":"ç”Ÿäº§åŠ›","permalink":"https://pickonebyone.github.io/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/"},{"name":"sublimeå¿«æ·é”®","slug":"ç”Ÿäº§åŠ›/sublimeå¿«æ·é”®","permalink":"https://pickonebyone.github.io/categories/%E7%94%9F%E4%BA%A7%E5%8A%9B/sublime%E5%BF%AB%E6%8D%B7%E9%94%AE/"},{"name":"Linuxå‘½ä»¤ - äº¤é›†ã€å¹¶é›†ã€å·®é›†","slug":"Linux/Linuxå‘½ä»¤-äº¤é›†ã€å¹¶é›†ã€å·®é›†","permalink":"https://pickonebyone.github.io/categories/Linux/Linux%E5%91%BD%E4%BB%A4-%E4%BA%A4%E9%9B%86%E3%80%81%E5%B9%B6%E9%9B%86%E3%80%81%E5%B7%AE%E9%9B%86/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://pickonebyone.github.io/tags/Spring/"},{"name":"ä¾èµ–æŸ¥æ‰¾","slug":"ä¾èµ–æŸ¥æ‰¾","permalink":"https://pickonebyone.github.io/tags/%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE/"},{"name":"Spring-Bean","slug":"Spring-Bean","permalink":"https://pickonebyone.github.io/tags/Spring-Bean/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"ç»“æ„å‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"äº«å…ƒæ¨¡å¼","slug":"äº«å…ƒæ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"},{"name":"å¤–è§‚æ¨¡å¼","slug":"å¤–è§‚æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"},{"name":"é€‚é…å™¨æ¨¡å¼","slug":"é€‚é…å™¨æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"},{"name":"æ¡¥æ¥æ¨¡å¼","slug":"æ¡¥æ¥æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"},{"name":"ä»£ç†æ¨¡å¼","slug":"ä»£ç†æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è¡Œä¸ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è§‚å¯Ÿè€…æ¨¡å¼","slug":"è§‚å¯Ÿè€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"},{"name":"Java","slug":"Java","permalink":"https://pickonebyone.github.io/tags/Java/"},{"name":"IOC","slug":"IOC","permalink":"https://pickonebyone.github.io/tags/IOC/"},{"name":"DI","slug":"DI","permalink":"https://pickonebyone.github.io/tags/DI/"},{"name":"ä¸­ä»‹è€…æ¨¡å¼","slug":"ä¸­ä»‹è€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"},{"name":"è§£é‡Šå™¨æ¨¡å¼","slug":"è§£é‡Šå™¨æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/"},{"name":"è´£ä»»é“¾æ¨¡å¼","slug":"è´£ä»»é“¾æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"},{"name":"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼","slug":"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"},{"name":"è¿­ä»£å™¨æ¨¡å¼","slug":"è¿­ä»£å™¨æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"},{"name":"ç»„åˆæ¨¡å¼","slug":"ç»„åˆæ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"},{"name":"è®¿é—®è€…æ¨¡å¼","slug":"è®¿é—®è€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/"},{"name":"çŠ¶æ€æ¨¡å¼","slug":"çŠ¶æ€æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"},{"name":"ç­–ç•¥æ¨¡å¼","slug":"ç­–ç•¥æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"åˆ›å»ºå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"å¯¹è±¡æ± æ¨¡å¼","slug":"å¯¹è±¡æ± æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%AF%B9%E8%B1%A1%E6%B1%A0%E6%A8%A1%E5%BC%8F/"},{"name":"åŸå‹æ¨¡å¼","slug":"åŸå‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"å»ºé€ è€…æ¨¡å¼","slug":"å»ºé€ è€…æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"},{"name":"æŠ½è±¡å·¥å‚æ¨¡å¼","slug":"æŠ½è±¡å·¥å‚æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"},{"name":"å·¥å‚æ–¹æ³•æ¨¡å¼","slug":"å·¥å‚æ–¹æ³•æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"},{"name":"å•ä¾‹æ¨¡å¼","slug":"å•ä¾‹æ¨¡å¼","permalink":"https://pickonebyone.github.io/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"},{"name":"è®¾è®¡åŸåˆ™","slug":"è®¾è®¡åŸåˆ™","permalink":"https://pickonebyone.github.io/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"},{"name":"JVM","slug":"JVM","permalink":"https://pickonebyone.github.io/tags/JVM/"},{"name":"è°ƒä¼˜","slug":"è°ƒä¼˜","permalink":"https://pickonebyone.github.io/tags/%E8%B0%83%E4%BC%98/"},{"name":"å‚æ•°","slug":"å‚æ•°","permalink":"https://pickonebyone.github.io/tags/%E5%8F%82%E6%95%B0/"},{"name":"å¸¸ç”¨å·¥å…·","slug":"å¸¸ç”¨å·¥å…·","permalink":"https://pickonebyone.github.io/tags/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"},{"name":"æ•…éšœæ’æŸ¥","slug":"æ•…éšœæ’æŸ¥","permalink":"https://pickonebyone.github.io/tags/%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5/"},{"name":"linux","slug":"linux","permalink":"https://pickonebyone.github.io/tags/linux/"},{"name":"swap","slug":"swap","permalink":"https://pickonebyone.github.io/tags/swap/"},{"name":"ç¼–è¯‘","slug":"ç¼–è¯‘","permalink":"https://pickonebyone.github.io/tags/%E7%BC%96%E8%AF%91/"},{"name":"ä¼˜åŒ–","slug":"ä¼˜åŒ–","permalink":"https://pickonebyone.github.io/tags/%E4%BC%98%E5%8C%96/"},{"name":"å†…å­˜åˆ†é…","slug":"å†…å­˜åˆ†é…","permalink":"https://pickonebyone.github.io/tags/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/"},{"name":"GC","slug":"GC","permalink":"https://pickonebyone.github.io/tags/GC/"},{"name":"å­—èŠ‚ç æ‰§è¡Œå¼•æ“","slug":"å­—èŠ‚ç æ‰§è¡Œå¼•æ“","permalink":"https://pickonebyone.github.io/tags/%E5%AD%97%E8%8A%82%E7%A0%81%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E/"},{"name":"Etcd","slug":"Etcd","permalink":"https://pickonebyone.github.io/tags/Etcd/"},{"name":"è¿è¡Œæ—¶åŒºåŸŸ","slug":"è¿è¡Œæ—¶åŒºåŸŸ","permalink":"https://pickonebyone.github.io/tags/%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8C%BA%E5%9F%9F/"},{"name":"JMM","slug":"JMM","permalink":"https://pickonebyone.github.io/tags/JMM/"},{"name":"ClassLoader","slug":"ClassLoader","permalink":"https://pickonebyone.github.io/tags/ClassLoader/"},{"name":"ç±»åŠ è½½æœºåˆ¶","slug":"ç±»åŠ è½½æœºåˆ¶","permalink":"https://pickonebyone.github.io/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/"},{"name":"Classç»“æ„","slug":"Classç»“æ„","permalink":"https://pickonebyone.github.io/tags/Class%E7%BB%93%E6%9E%84/"},{"name":"ç”Ÿäº§åŠ›","slug":"ç”Ÿäº§åŠ›","permalink":"https://pickonebyone.github.io/tags/%E7%94%9F%E4%BA%A7%E5%8A%9B/"},{"name":"sublime","slug":"sublime","permalink":"https://pickonebyone.github.io/tags/sublime/"},{"name":"å¿«æ·é”®","slug":"å¿«æ·é”®","permalink":"https://pickonebyone.github.io/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/"},{"name":"Linux","slug":"Linux","permalink":"https://pickonebyone.github.io/tags/Linux/"},{"name":"comm","slug":"comm","permalink":"https://pickonebyone.github.io/tags/comm/"},{"name":"sort","slug":"sort","permalink":"https://pickonebyone.github.io/tags/sort/"}]}